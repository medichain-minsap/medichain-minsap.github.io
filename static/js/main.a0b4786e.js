/*! For license information please see main.a0b4786e.js.LICENSE.txt */
!function(){var e={8918:function(e,t,n){"use strict";n.r(t),t.default=function(e){for(var t,n=e.length,r=n^n,a=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}},2009:function(e,t){"use strict";t.byteLength=function(e){var t=g(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=g(e),i=o[0],s=o[1],c=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,s)),l=0,u=s>0?i-4:i;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,o=[],i=16383,g=0,c=r-a;g<c;g+=i)o.push(s(e,g,g+i>c?c:g+i));1===a?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=o[i],r[o.charCodeAt(i)]=i;function g(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e,t,r){for(var a,o,i=[],g=t;g<r;g+=3)a=(e[g]<<16&16711680)+(e[g+1]<<8&65280)+(255&e[g+2]),i.push(n[(o=a)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9778:function(e,t,n){"use strict";var r=n(6690).default,a=n(9728).default,o=n(6115).default,i=n(1655).default,g=n(6389).default,s=n(2009),c=n(4038),l="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=I,t.h2=50;var u=2147483647;function f(e){if(e>u)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,I.prototype),t}function I(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return A(e)}return C(e,t,n)}function C(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!I.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|b(e,t),r=f(n),a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return I.from(r,t,n);var a=function(e){if(I.isBuffer(e)){var t=0|m(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?f(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return I.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function A(e){return d(e),f(e<0?0:0|m(e))}function h(e){for(var t=e.length<0?0:0|m(e.length),n=f(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,I.prototype),r}function m(e){if(e>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|e}function b(e,t){if(I.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return _(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(a)return r?-1:_(e).length;t=(""+t).toLowerCase(),a=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Y(this,t,n);case"utf8":case"utf-8":return V(this,t,n);case"ascii":return J(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Z(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=I.from(t,r)),I.isBuffer(t))return 0===t.length?-1:G(e,t,n,r,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):G(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function G(e,t,n,r,a){var o,i=1,g=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,g/=2,s/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){var l=-1;for(o=n;o<g;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*i}else-1!==l&&(o-=o-l),l=-1}else for(n+s>g&&(n=g-s),o=n;o>=0;o--){for(var u=!0,f=0;f<s;f++)if(c(e,o+f)!==c(t,f)){u=!1;break}if(u)return o}return-1}function B(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var o,i=t.length;for(r>i/2&&(r=i/2),o=0;o<r;++o){var g=parseInt(t.substr(2*o,2),16);if(te(g))return o;e[n+o]=g}return o}function k(e,t,n,r){return $(_(t,e.length-n),e,n,r)}function S(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return $(q(t),e,n,r)}function W(e,t,n,r){return $(function(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,a=n%256,o.push(a),o.push(r);return o}(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,n))}function V(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,g=o>239?4:o>223?3:o>191?2:1;if(a+g<=n){var s=void 0,c=void 0,l=void 0,u=void 0;switch(g){case 1:o<128&&(i=o);break;case 2:128===(192&(s=e[a+1]))&&(u=(31&o)<<6|63&s)>127&&(i=u);break;case 3:s=e[a+1],c=e[a+2],128===(192&s)&&128===(192&c)&&(u=(15&o)<<12|(63&s)<<6|63&c)>2047&&(u<55296||u>57343)&&(i=u);break;case 4:s=e[a+1],c=e[a+2],l=e[a+3],128===(192&s)&&128===(192&c)&&128===(192&l)&&(u=(15&o)<<18|(63&s)<<12|(63&c)<<6|63&l)>65535&&u<1114112&&(i=u)}}null===i?(i=65533,g=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=g}return function(e){var t=e.length;if(t<=X)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=X));return n}(r)}I.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),I.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(I.prototype,"parent",{enumerable:!0,get:function(){if(I.isBuffer(this))return this.buffer}}),Object.defineProperty(I.prototype,"offset",{enumerable:!0,get:function(){if(I.isBuffer(this))return this.byteOffset}}),I.poolSize=8192,I.from=function(e,t,n){return C(e,t,n)},Object.setPrototypeOf(I.prototype,Uint8Array.prototype),Object.setPrototypeOf(I,Uint8Array),I.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?f(e):void 0!==t?"string"===typeof n?f(e).fill(t,n):f(e).fill(t):f(e)}(e,t,n)},I.allocUnsafe=function(e){return A(e)},I.allocUnsafeSlow=function(e){return A(e)},I.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==I.prototype},I.compare=function(e,t){if(ee(e,Uint8Array)&&(e=I.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=I.from(t,t.offset,t.byteLength)),!I.isBuffer(e)||!I.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},I.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},I.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return I.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=I.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))a+o.length>r.length?(I.isBuffer(o)||(o=I.from(o)),o.copy(r,a)):Uint8Array.prototype.set.call(r,o,a);else{if(!I.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a)}a+=o.length}return r},I.byteLength=b,I.prototype._isBuffer=!0,I.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},I.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},I.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},I.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?V(this,0,e):y.apply(this,arguments)},I.prototype.toLocaleString=I.prototype.toString,I.prototype.equals=function(e){if(!I.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===I.compare(this,e)},I.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},l&&(I.prototype[l]=I.prototype.inspect),I.prototype.compare=function(e,t,n,r,a){if(ee(e,Uint8Array)&&(e=I.from(e,e.offset,e.byteLength)),!I.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),g=Math.min(o,i),s=this.slice(r,a),c=e.slice(t,n),l=0;l<g;++l)if(s[l]!==c[l]){o=s[l],i=c[l];break}return o<i?-1:i<o?1:0},I.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},I.prototype.indexOf=function(e,t,n){return Z(this,e,t,n,!0)},I.prototype.lastIndexOf=function(e,t,n){return Z(this,e,t,n,!1)},I.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return B(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function J(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function Y(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=ne[e[o]];return a}function N(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length-1;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function H(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,r,a,o){if(!I.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function K(e,t,n,r,a){j(t,r,a,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function E(e,t,n,r,a){j(t,r,a,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function T(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,a){return t=+t,n>>>=0,a||T(e,0,n,4),c.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,a){return t=+t,n>>>=0,a||T(e,0,n,8),c.write(e,t,n,r,52,8),n+8}I.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,I.prototype),r},I.prototype.readUintLE=I.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||H(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},I.prototype.readUintBE=I.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||H(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},I.prototype.readUint8=I.prototype.readUInt8=function(e,t){return e>>>=0,t||H(e,1,this.length),this[e]},I.prototype.readUint16LE=I.prototype.readUInt16LE=function(e,t){return e>>>=0,t||H(e,2,this.length),this[e]|this[e+1]<<8},I.prototype.readUint16BE=I.prototype.readUInt16BE=function(e,t){return e>>>=0,t||H(e,2,this.length),this[e]<<8|this[e+1]},I.prototype.readUint32LE=I.prototype.readUInt32LE=function(e,t){return e>>>=0,t||H(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},I.prototype.readUint32BE=I.prototype.readUInt32BE=function(e,t){return e>>>=0,t||H(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},I.prototype.readBigUInt64LE=re((function(e){O(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),a=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(a)<<BigInt(32))})),I.prototype.readBigUInt64BE=re((function(e){O(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],a=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(a)})),I.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||H(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},I.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||H(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*t)),o},I.prototype.readInt8=function(e,t){return e>>>=0,t||H(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},I.prototype.readInt16LE=function(e,t){e>>>=0,t||H(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},I.prototype.readInt16BE=function(e,t){e>>>=0,t||H(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},I.prototype.readInt32LE=function(e,t){return e>>>=0,t||H(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},I.prototype.readInt32BE=function(e,t){return e>>>=0,t||H(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},I.prototype.readBigInt64LE=re((function(e){O(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),I.prototype.readBigInt64BE=re((function(e){O(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Q(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),I.prototype.readFloatLE=function(e,t){return e>>>=0,t||H(e,4,this.length),c.read(this,e,!0,23,4)},I.prototype.readFloatBE=function(e,t){return e>>>=0,t||H(e,4,this.length),c.read(this,e,!1,23,4)},I.prototype.readDoubleLE=function(e,t){return e>>>=0,t||H(e,8,this.length),c.read(this,e,!0,52,8)},I.prototype.readDoubleBE=function(e,t){return e>>>=0,t||H(e,8,this.length),c.read(this,e,!1,52,8)},I.prototype.writeUintLE=I.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||F(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},I.prototype.writeUintBE=I.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||F(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},I.prototype.writeUint8=I.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,255,0),this[t]=255&e,t+1},I.prototype.writeUint16LE=I.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},I.prototype.writeUint16BE=I.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},I.prototype.writeUint32LE=I.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},I.prototype.writeUint32BE=I.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},I.prototype.writeBigUInt64LE=re((function(e){return K(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),I.prototype.writeBigUInt64BE=re((function(e){return E(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),I.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);F(this,e,t,n,a-1,-a)}var o=0,i=1,g=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===g&&0!==this[t+o-1]&&(g=1),this[t+o]=(e/i>>0)-g&255;return t+n},I.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);F(this,e,t,n,a-1,-a)}var o=n-1,i=1,g=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===g&&0!==this[t+o+1]&&(g=1),this[t+o]=(e/i>>0)-g&255;return t+n},I.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},I.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},I.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},I.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},I.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},I.prototype.writeBigInt64LE=re((function(e){return K(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),I.prototype.writeBigInt64BE=re((function(e){return E(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),I.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},I.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},I.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},I.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},I.prototype.copy=function(e,t,n,r){if(!I.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},I.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!I.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var i=I.isBuffer(e)?e:I.from(e,r),g=i.length;if(0===g)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%g]}return this};var D={};function L(e,t,n){D[e]=function(n){i(c,n);var s=g(c);function c(){var n;return r(this,c),n=s.call(this),Object.defineProperty(o(n),"message",{value:t.apply(o(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return a(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(n)}function U(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function j(e,t,n,r,a,o){if(e>n||e<t){var i,g="bigint"===typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?">= 0".concat(g," and < 2").concat(g," ** ").concat(8*(o+1)).concat(g):">= -(2".concat(g," ** ").concat(8*(o+1)-1).concat(g,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(g):">= ".concat(t).concat(g," and <= ").concat(n).concat(g),new D.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){O(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Q(t,e.length-(n+1))}(r,a,o)}function O(e,t){if("number"!==typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function Q(e,t,n){if(Math.floor(e)!==e)throw O(e,n),new D.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}L("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),L("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),L("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),a=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?a=U(String(n)):"bigint"===typeof n&&(a=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(a=U(a)),a+="n"),r+=" It must be ".concat(t,". Received ").concat(a)}),RangeError);var P=/[^+/0-9A-Za-z-_]/g;function _(e,t){var n;t=t||1/0;for(var r=e.length,a=null,o=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function $(e,t,n,r){var a;for(a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}();function re(e){return"undefined"===typeof BigInt?ae:e}function ae(){throw new Error("BigInt not supported")}},8546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)};var r,a=n(7630),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},5216:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&n.test(e)};var n=/-webkit-|-moz-|-ms-/;e.exports=t.default},7630:function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,a=/^ms-/,o={};function i(e){return"-"+e.toLowerCase()}t.default=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,i);return o[e]=a.test(t)?"-"+t:t}},4038:function(e,t){t.read=function(e,t,n,r,a){var o,i,g=8*a-r-1,s=(1<<g)-1,c=s>>1,l=-7,u=n?a-1:0,f=n?-1:1,I=e[t+u];for(u+=f,o=I&(1<<-l)-1,I>>=-l,l+=g;l>0;o=256*o+e[t+u],u+=f,l-=8);for(i=o&(1<<-l)-1,o>>=-l,l+=r;l>0;i=256*i+e[t+u],u+=f,l-=8);if(0===o)o=1-c;else{if(o===s)return i?NaN:1/0*(I?-1:1);i+=Math.pow(2,r),o-=c}return(I?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,g,s,c=8*o-a-1,l=(1<<c)-1,u=l>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,I=r?0:o-1,C=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(g=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-i))<1&&(i--,s*=2),(t+=i+u>=1?f/s:f*Math.pow(2,1-u))*s>=2&&(i++,s/=2),i+u>=l?(g=0,i=l):i+u>=1?(g=(t*s-1)*Math.pow(2,a),i+=u):(g=t*Math.pow(2,u-1)*Math.pow(2,a),i=0));a>=8;e[n+I]=255&g,I+=C,g/=256,a-=8);for(i=i<<a|g,c+=a;c>0;e[n+I]=255&i,I+=C,i/=256,c-=8);e[n+I-C]|=128*d}},2541:function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e,t,n){if(e.hasOwnProperty(t)){for(var a={},o=e[t],i=r(t),g=Object.keys(n),s=0;s<g.length;s++){var c=g[s];if(c===t)for(var l=0;l<o.length;l++)a[o[l]+i]=n[t];a[c]=n[c]}return a}return n}function o(e,t,n,r,a){for(var o=0,i=e.length;o<i;++o){var g=e[o](t,n,r,a);if(g)return g}}function i(e,t){-1===e.indexOf(t)&&e.push(t)}function g(e,t){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)i(e,t[n]);else i(e,t)}function s(e){return e instanceof Object&&!Array.isArray(e)}function c(e){var t=e.prefixMap,n=e.plugins;return function e(r){for(var i in r){var c=r[i];if(s(c))r[i]=e(c);else if(Array.isArray(c)){for(var l=[],u=0,f=c.length;u<f;++u){g(l,o(n,i,c[u],r,t)||c[u])}l.length>0&&(r[i]=l)}else{var I=o(n,i,c,r,t);I&&(r[i]=I),r=a(t,i,r)}}return r}}n.r(t),n.d(t,{createPrefixer:function(){return c},prefix:function(){return T}});var l=["Webkit"],u=["ms"],f=["Webkit","ms"],I={plugins:[],prefixMap:{appearance:["Webkit","Moz"],textEmphasisPosition:l,textEmphasis:l,textEmphasisStyle:l,textEmphasisColor:l,boxDecorationBreak:l,maskImage:l,maskMode:l,maskRepeat:l,maskPosition:l,maskClip:l,maskOrigin:l,maskSize:l,maskComposite:l,mask:l,maskBorderSource:l,maskBorderMode:l,maskBorderSlice:l,maskBorderWidth:l,maskBorderOutset:l,maskBorderRepeat:l,maskBorder:l,maskType:l,textDecorationStyle:l,textDecorationSkip:l,textDecorationLine:l,textDecorationColor:l,userSelect:["Webkit","Moz","ms"],backdropFilter:l,fontKerning:l,scrollSnapType:f,scrollSnapPointsX:f,scrollSnapPointsY:f,scrollSnapDestination:f,scrollSnapCoordinate:f,clipPath:l,shapeImageThreshold:l,shapeImageMargin:l,shapeImageOutside:l,filter:l,hyphens:f,flowInto:f,flowFrom:f,breakBefore:f,breakAfter:f,breakInside:f,regionFragment:f,writingMode:f,textOrientation:l,tabSize:["Moz"],fontFeatureSettings:l,columnCount:l,columnFill:l,columnGap:l,columnRule:l,columnRuleColor:l,columnRuleStyle:l,columnRuleWidth:l,columns:l,columnSpan:l,columnWidth:l,wrapFlow:u,wrapThrough:u,wrapMargin:u,textSizeAdjust:f}};var C=["-webkit-","-moz-",""],d={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};var A=n(5216),h=n.n(A),p=["-webkit-",""];var m=["-webkit-",""];var b={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};var y={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},v={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};var Z=["-webkit-","-moz-",""],G=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;var B=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,g=e[Symbol.iterator]();!(r=(i=g.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{!r&&g.return&&g.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function k(e){return"number"===typeof e&&!isNaN(e)}function S(e){return"string"===typeof e&&e.includes("/")}var w=["center","end","start","stretch"],W={"inline-grid":["-ms-inline-grid","inline-grid"],grid:["-ms-grid","grid"]},R={alignSelf:function(e,t){w.indexOf(e)>-1&&(t.msGridRowAlign=e)},gridColumn:function(e,t){if(k(e))t.msGridColumn=e;else if(S(e)){var n=e.split("/"),r=B(n,2),a=r[0],o=r[1];R.gridColumnStart(+a,t);var i=o.split(/ ?span /),g=B(i,2),s=g[0],c=g[1];""===s?R.gridColumnEnd(+a+ +c,t):R.gridColumnEnd(+o,t)}else R.gridColumnStart(e,t)},gridColumnEnd:function(e,t){var n=t.msGridColumn;k(e)&&k(n)&&(t.msGridColumnSpan=e-n)},gridColumnStart:function(e,t){k(e)&&(t.msGridColumn=e)},gridRow:function(e,t){if(k(e))t.msGridRow=e;else if(S(e)){var n=e.split("/"),r=B(n,2),a=r[0],o=r[1];R.gridRowStart(+a,t);var i=o.split(/ ?span /),g=B(i,2),s=g[0],c=g[1];""===s?R.gridRowEnd(+a+ +c,t):R.gridRowEnd(+o,t)}else R.gridRowStart(e,t)},gridRowEnd:function(e,t){var n=t.msGridRow;k(e)&&k(n)&&(t.msGridRowSpan=e-n)},gridRowStart:function(e,t){k(e)&&(t.msGridRow=e)},gridTemplateColumns:function(e,t){t.msGridColumns=e},gridTemplateRows:function(e,t){t.msGridRows=e},justifySelf:function(e,t){w.indexOf(e)>-1&&(t.msGridColumnAlign=e)}};var V=["-webkit-",""];var X={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};var J=["-webkit-","-moz-",""],x={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},Y={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};var N=n(8546),H=n.n(N),F={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},K={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};var E=[function(e,t){if("string"===typeof t&&"text"===t)return["-webkit-text","text"]},function(e,t){if("string"===typeof t&&!h()(t)&&t.indexOf("cross-fade(")>-1)return p.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))},function(e,t){if("cursor"===e&&d.hasOwnProperty(t))return C.map((function(e){return e+t}))},function(e,t){if("string"===typeof t&&!h()(t)&&t.indexOf("filter(")>-1)return m.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))},function(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),v.hasOwnProperty(e)&&(n[v[e]]=y[t]||t)},function(e,t){if("string"===typeof t&&!h()(t)&&G.test(t))return Z.map((function(e){return t.replace(G,(function(t){return e+t}))}))},function(e,t,n){if("display"===e&&t in W)return W[t];e in R&&(0,R[e])(t,n)},function(e,t){if("string"===typeof t&&!h()(t)&&t.indexOf("image-set(")>-1)return V.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))},function(e,t,n){if(Object.prototype.hasOwnProperty.call(X,e))for(var r=X[e],a=0,o=r.length;a<o;++a)n[r[a]]=t},function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},function(e,t){if(x.hasOwnProperty(e)&&Y.hasOwnProperty(t))return J.map((function(e){return e+t}))},function(e,t,n,a){if("string"===typeof t&&F.hasOwnProperty(e)){var o=function(e,t){if(h()(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,a=n.length;r<a;++r){var o=n[r],i=[o];for(var g in t){var s=H()(g);if(o.indexOf(s)>-1&&"order"!==s)for(var c=t[g],l=0,u=c.length;l<u;++l)i.unshift(o.replace(s,K[c[l]]+s))}n[r]=i.join(",")}return n.join(",")}(t,a),i=o.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return i;var g=o.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?g:(n["Webkit"+r(e)]=i,n["Moz"+r(e)]=g,o)}},function(e,t){if("display"===e&&b.hasOwnProperty(t))return b[t]}],T=c({prefixMap:I.prefixMap,plugins:E})},4907:function(e){e.exports=function(e){if("string"!==typeof e)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof e+", while checking isHexPrefixed.");return"0x"===e.slice(0,2)}},5095:function(e,t,n){var r=NaN,a="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),I=Object.prototype.toString,C=Math.max,d=Math.min,A=function(){return f.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&I.call(e)==a}(e))return r;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=g.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):i.test(e)?r:+e}e.exports=function(e,t,n){var r,a,o,i,g,s,c=0,l=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function I(t){var n=r,o=a;return r=a=void 0,c=t,i=e.apply(o,n)}function m(e){var n=e-s;return void 0===s||n>=t||n<0||u&&e-c>=o}function b(){var e=A();if(m(e))return y(e);g=setTimeout(b,function(e){var n=t-(e-s);return u?d(n,o-(e-c)):n}(e))}function y(e){return g=void 0,f&&r?I(e):(r=a=void 0,i)}function v(){var e=A(),n=m(e);if(r=arguments,a=this,s=e,n){if(void 0===g)return function(e){return c=e,g=setTimeout(b,t),l?I(e):i}(s);if(u)return g=setTimeout(b,t),I(s)}return void 0===g&&(g=setTimeout(b,t)),i}return t=p(t)||0,h(n)&&(l=!!n.leading,o=(u="maxWait"in n)?C(p(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),v.cancel=function(){void 0!==g&&clearTimeout(g),c=0,r=s=a=g=void 0},v.flush=function(){return void 0===g?i:y(A())},v}},7381:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",i="[object AsyncFunction]",g="[object Function]",s="[object GeneratorFunction]",c="[object Null]",l="[object Object]",u="[object Proxy]",f="[object Undefined]",I=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[o]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d[g]=d["[object Map]"]=d["[object Number]"]=d[l]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1;var A="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,p=A||h||Function("return this")(),m=t&&!t.nodeType&&t,b=m&&e&&!e.nodeType&&e,y=b&&b.exports===m,v=y&&A.process,Z=function(){try{var e=b&&b.require&&b.require("util").types;return e||v&&v.binding&&v.binding("util")}catch(t){}}(),G=Z&&Z.isTypedArray;var B,k,S=Array.prototype,w=Function.prototype,W=Object.prototype,R=p["__core-js_shared__"],V=w.toString,X=W.hasOwnProperty,J=function(){var e=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),x=W.toString,Y=V.call(Object),N=RegExp("^"+V.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=y?p.Buffer:void 0,F=p.Symbol,K=p.Uint8Array,E=H?H.allocUnsafe:void 0,T=(B=Object.getPrototypeOf,k=Object,function(e){return B(k(e))}),M=Object.create,z=W.propertyIsEnumerable,D=S.splice,L=F?F.toStringTag:void 0,U=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),j=H?H.isBuffer:void 0,O=Math.max,Q=Date.now,P=pe(p,"Map"),_=pe(Object,"create"),q=function(){function e(){}return function(t){if(!Re(t))return{};if(M)return M(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function re(e,t){var n=Be(e),r=!n&&Ge(e),a=!n&&!r&&Se(e),o=!n&&!r&&!a&&Xe(e),i=n||r||a||o,g=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=g.length;for(var c in e)!t&&!X.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||me(c,s))||g.push(c);return g}function ae(e,t,n){(void 0!==n&&!Ze(e[t],n)||void 0===n&&!(t in e))&&ge(e,t,n)}function oe(e,t,n){var r=e[t];X.call(e,t)&&Ze(r,n)&&(void 0!==n||t in e)||ge(e,t,n)}function ie(e,t){for(var n=e.length;n--;)if(Ze(e[n][0],t))return n;return-1}function ge(e,t,n){"__proto__"==t&&U?U(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}$.prototype.clear=function(){this.__data__=_?_(null):{},this.size=0},$.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$.prototype.get=function(e){var t=this.__data__;if(_){var n=t[e];return n===r?void 0:n}return X.call(t,e)?t[e]:void 0},$.prototype.has=function(e){var t=this.__data__;return _?void 0!==t[e]:X.call(t,e)},$.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_&&void 0===t?r:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=ie(t,e);return!(n<0)&&(n==t.length-1?t.pop():D.call(t,n,1),--this.size,!0)},ee.prototype.get=function(e){var t=this.__data__,n=ie(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return ie(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,r=ie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new $,map:new(P||ee),string:new $}},te.prototype.delete=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return he(this,e).get(e)},te.prototype.has=function(e){return he(this,e).has(e)},te.prototype.set=function(e,t){var n=he(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var r=n.__data__;if(!P||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};var se,ce=function(e,t,n){for(var r=-1,a=Object(e),o=n(e),i=o.length;i--;){var g=o[se?i:++r];if(!1===t(a[g],g,a))break}return e};function le(e){return null==e?void 0===e?f:c:L&&L in Object(e)?function(e){var t=X.call(e,L),n=e[L];try{e[L]=void 0;var r=!0}catch(o){}var a=x.call(e);r&&(t?e[L]=n:delete e[L]);return a}(e):function(e){return x.call(e)}(e)}function ue(e){return Ve(e)&&le(e)==o}function fe(e){return!(!Re(e)||function(e){return!!J&&J in e}(e))&&(we(e)?N:I).test(function(e){if(null!=e){try{return V.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function Ie(e){if(!Re(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=be(e),n=[];for(var r in e)("constructor"!=r||!t&&X.call(e,r))&&n.push(r);return n}function Ce(e,t,n,r,a){e!==t&&ce(t,(function(o,i){if(a||(a=new ne),Re(o))!function(e,t,n,r,a,o,i){var g=ye(e,n),s=ye(t,n),c=i.get(s);if(c)return void ae(e,n,c);var u=o?o(g,s,n+"",e,t,i):void 0,f=void 0===u;if(f){var I=Be(s),C=!I&&Se(s),d=!I&&!C&&Xe(s);u=s,I||C||d?Be(g)?u=g:Ve(A=g)&&ke(A)?u=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(g):C?(f=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=E?E(n):new e.constructor(n);return e.copy(r),r}(s,!0)):d?(f=!1,u=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new K(t).set(new K(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(s,!0)):u=[]:function(e){if(!Ve(e)||le(e)!=l)return!1;var t=T(e);if(null===t)return!0;var n=X.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&V.call(n)==Y}(s)||Ge(s)?(u=g,Ge(g)?u=function(e){return function(e,t,n,r){var a=!n;n||(n={});var o=-1,i=t.length;for(;++o<i;){var g=t[o],s=r?r(n[g],e[g],g,n,e):void 0;void 0===s&&(s=e[g]),a?ge(n,g,s):oe(n,g,s)}return n}(e,Je(e))}(g):Re(g)&&!we(g)||(u=function(e){return"function"!=typeof e.constructor||be(e)?{}:q(T(e))}(s))):f=!1}var A;f&&(i.set(s,u),a(u,s,r,o,i),i.delete(s));ae(e,n,u)}(e,t,i,n,Ce,r,a);else{var g=r?r(ye(e,i),o,i+"",e,t,a):void 0;void 0===g&&(g=o),ae(e,i,g)}}),Je)}function de(e,t){return ve(function(e,t,n){return t=O(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=O(r.length-t,0),i=Array(o);++a<o;)i[a]=r[t+a];a=-1;for(var g=Array(t+1);++a<t;)g[a]=r[a];return g[t]=n(i),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,g)}}(e,t,Ne),e+"")}var Ae=U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ne;function he(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(n)?n:void 0}function me(e,t){var n=typeof e;return!!(t=null==t?a:t)&&("number"==n||"symbol"!=n&&C.test(e))&&e>-1&&e%1==0&&e<t}function be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||W)}function ye(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var ve=function(e){var t=0,n=0;return function(){var r=Q(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ae);function Ze(e,t){return e===t||e!==e&&t!==t}var Ge=ue(function(){return arguments}())?ue:function(e){return Ve(e)&&X.call(e,"callee")&&!z.call(e,"callee")},Be=Array.isArray;function ke(e){return null!=e&&We(e.length)&&!we(e)}var Se=j||function(){return!1};function we(e){if(!Re(e))return!1;var t=le(e);return t==g||t==s||t==i||t==u}function We(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Re(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ve(e){return null!=e&&"object"==typeof e}var Xe=G?function(e){return function(t){return e(t)}}(G):function(e){return Ve(e)&&We(e.length)&&!!d[le(e)]};function Je(e){return ke(e)?re(e,!0):Ie(e)}var xe,Ye=(xe=function(e,t,n){Ce(e,t,n)},de((function(e,t){var n=-1,r=t.length,a=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(a=xe.length>3&&"function"==typeof a?(r--,a):void 0,o&&function(e,t,n){if(!Re(n))return!1;var r=typeof t;return!!("number"==r?ke(n)&&me(t,n.length):"string"==r&&t in n)&&Ze(n[t],e)}(t[0],t[1],o)&&(a=r<3?void 0:a,r=1),e=Object(e);++n<r;){var i=t[n];i&&xe(e,i,n,a)}return e})));function Ne(e){return e}e.exports=Ye},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,g={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(g[e]=t,e=0;e<t.length;e++)i.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},C={};function d(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){A[e]=new d(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];A[t]=new d(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){A[e]=new d(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){A[e]=new d(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){A[e]=new d(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){A[e]=new d(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){A[e]=new d(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){A[e]=new d(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){A[e]=new d(e,5,!1,e.toLowerCase(),null,!1,!1)}));var h=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}function m(e,t,n,r){var a=A.hasOwnProperty(t)?A[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!u.call(C,e)||!u.call(I,e)&&(f.test(e)?C[e]=!0:(I[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(h,p);A[t]=new d(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(h,p);A[t]=new d(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(h,p);A[t]=new d(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){A[e]=new d(e,1,!1,e.toLowerCase(),null,!1,!1)})),A.xlinkHref=new d("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){A[e]=new d(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),v=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),S=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var J=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function Y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var N,H=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var K=!1;function E(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,g=o.length-1;1<=i&&0<=g&&a[i]!==o[g];)g--;for(;1<=i&&0<=g;i--,g--)if(a[i]!==o[g]){if(1!==i||1!==g)do{if(i--,0>--g||a[i]!==o[g]){var s="\n"+a[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=g);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function T(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=E(e.type,!1);case 11:return e=E(e.type.render,!1);case 1:return e=E(e.type,!0);default:return""}}function M(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case Z:return"Fragment";case v:return"Portal";case B:return"Profiler";case G:return"StrictMode";case W:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case V:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(t);case 8:return t===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function D(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function L(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){e._valueTracker||(e._valueTracker=function(e){var t=L(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function j(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=L(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function O(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return H({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function P(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=D(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function _(e,t){null!=(t=t.checked)&&m(e,"checked",t,!1)}function q(e,t){_(e,t);var n=D(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,D(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&O(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+D(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return H({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:D(n)}}function oe(e,t){var n=D(t.value),r=D(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ge(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,ue=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];function de(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ie.hasOwnProperty(e)&&Ie[e]?(""+t).trim():t+"px"}function Ae(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=de(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(Ie).forEach((function(e){Ce.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ie[t]=Ie[e]}))}));var he=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(e,t){if(t){if(he[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ve=null,Ze=null,Ge=null;function Be(e){if(e=ma(e)){if("function"!==typeof ve)throw Error(o(280));var t=e.stateNode;t&&(t=ya(t),ve(e.stateNode,e.type,t))}}function ke(e){Ze?Ge?Ge.push(e):Ge=[e]:Ze=e}function Se(){if(Ze){var e=Ze,t=Ge;if(Ge=Ze=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function we(e,t){return e(t)}function We(){}var Re=!1;function Ve(e,t,n){if(Re)return e(t,n);Re=!0;try{return we(e,t,n)}finally{Re=!1,(null!==Ze||null!==Ge)&&(We(),Se())}}function Xe(e,t){var n=e.stateNode;if(null===n)return null;var r=ya(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Je=!1;if(l)try{var xe={};Object.defineProperty(xe,"passive",{get:function(){Je=!0}}),window.addEventListener("test",xe,xe),window.removeEventListener("test",xe,xe)}catch(le){Je=!1}function Ye(e,t,n,r,a,o,i,g,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ne=!1,He=null,Fe=!1,Ke=null,Ee={onError:function(e){Ne=!0,He=e}};function Te(e,t,n,r,a,o,i,g,s){Ne=!1,He=null,Ye.apply(Ee,arguments)}function Me(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function De(e){if(Me(e)!==e)throw Error(o(188))}function Le(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Me(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return De(a),e;if(i===r)return De(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var g=!1,s=a.child;s;){if(s===n){g=!0,n=a,r=i;break}if(s===r){g=!0,r=a,n=i;break}s=s.sibling}if(!g){for(s=i.child;s;){if(s===n){g=!0,n=i,r=a;break}if(s===r){g=!0,r=i,n=a;break}s=s.sibling}if(!g)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ue(e):null}function Ue(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ue(e);if(null!==t)return t;e=e.sibling}return null}var je=a.unstable_scheduleCallback,Oe=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,Pe=a.unstable_requestPaint,_e=a.unstable_now,qe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(gt(e)/st|0)|0},gt=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var g=i&~a;0!==g?r=ut(g):0!==(o&=i)&&(r=ut(o))}else 0!==(i=n&~a)?r=ut(i):0!==o&&(r=ut(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function It(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function dt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ht(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var mt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var yt,vt,Zt,Gt,Bt,kt=!1,St=[],wt=null,Wt=null,Rt=null,Vt=new Map,Xt=new Map,Jt=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yt(e,t){switch(e){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Vt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xt.delete(t.pointerId)}}function Nt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=ma(t))&&vt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ht(e){var t=pa(e.target);if(null!==t){var n=Me(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Bt(e.priority,(function(){Zt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ma(n))&&vt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Kt(e,t,n){Ft(e)&&n.delete(t)}function Et(){kt=!1,null!==wt&&Ft(wt)&&(wt=null),null!==Wt&&Ft(Wt)&&(Wt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Vt.forEach(Kt),Xt.forEach(Kt)}function Tt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Et)))}function Mt(e){function t(t){return Tt(t,e)}if(0<St.length){Tt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&Tt(wt,e),null!==Wt&&Tt(Wt,e),null!==Rt&&Tt(Rt,e),Vt.forEach(t),Xt.forEach(t),n=0;n<Jt.length;n++)(r=Jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Jt.length&&null===(n=Jt[0]).blockedOn;)Ht(n),null===n.blockedOn&&Jt.shift()}var zt=b.ReactCurrentBatchConfig,Dt=!0;function Lt(e,t,n,r){var a=mt,o=zt.transition;zt.transition=null;try{mt=1,jt(e,t,n,r)}finally{mt=a,zt.transition=o}}function Ut(e,t,n,r){var a=mt,o=zt.transition;zt.transition=null;try{mt=4,jt(e,t,n,r)}finally{mt=a,zt.transition=o}}function jt(e,t,n,r){if(Dt){var a=Qt(e,t,n,r);if(null===a)Dr(e,t,r,Ot,n),Yt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return wt=Nt(wt,e,t,n,r,a),!0;case"dragenter":return Wt=Nt(Wt,e,t,n,r,a),!0;case"mouseover":return Rt=Nt(Rt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Vt.set(o,Nt(Vt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Xt.set(o,Nt(Xt.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Yt(e,r),4&t&&-1<xt.indexOf(e)){for(;null!==a;){var o=ma(a);if(null!==o&&yt(o),null===(o=Qt(e,t,n,r))&&Dr(e,t,r,Ot,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Dr(e,t,r,null,n)}}var Ot=null;function Qt(e,t,n,r){if(Ot=null,null!==(e=pa(e=ye(r))))if(null===(t=Me(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ot=e,null}function Pt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var _t=null,qt=null,$t=null;function en(){if($t)return $t;var e,t,n=qt,r=n.length,a="value"in _t?_t.value:_t.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return H(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,gn,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),un=H({},cn,{view:0,detail:0}),fn=an(un),In=H({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,gn=e.screenY-sn.screenY):gn=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:gn}}),Cn=an(In),dn=an(H({},In,{dataTransfer:0})),An=an(H({},un,{relatedTarget:0})),hn=an(H({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=H({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=an(pn),bn=an(H({},cn,{data:0})),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Zn[e])&&!!t[e]}function Bn(){return Gn}var kn=H({},un,{key:function(e){if(e.key){var t=yn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(kn),wn=an(H({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=an(H({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn})),Rn=an(H({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=H({},In,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xn=an(Vn),Jn=[9,13,27,32],xn=l&&"CompositionEvent"in window,Yn=null;l&&"documentMode"in document&&(Yn=document.documentMode);var Nn=l&&"TextEvent"in window&&!Yn,Hn=l&&(!xn||Yn&&8<Yn&&11>=Yn),Fn=String.fromCharCode(32),Kn=!1;function En(e,t){switch(e){case"keyup":return-1!==Jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Ln(e,t,n,r){ke(r),0<(t=Ur(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,jn=null;function On(e){Fr(e,0)}function Qn(e){if(j(ba(e)))return e}function Pn(e,t){if("change"===e)return t}var _n=!1;if(l){var qn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}qn=$n}else qn=!1;_n=qn&&(!document.documentMode||9<document.documentMode)}function tr(){Un&&(Un.detachEvent("onpropertychange",nr),jn=Un=null)}function nr(e){if("value"===e.propertyName&&Qn(jn)){var t=[];Ln(t,jn,e,ye(e)),Ve(On,t)}}function rr(e,t,n){"focusin"===e?(tr(),jn=n,(Un=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(jn)}function or(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var gr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(gr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!u.call(t,a)||!gr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=O();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=O((e=t.contentWindow).document)}return t}function Ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Cr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&Ir(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=lr(n,o);var i=lr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,Ar=null,hr=null,pr=null,mr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==Ar||Ar!==O(r)||("selectionStart"in(r=Ar)&&Ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&sr(pr,r)||(pr=r,0<(r=Ur(hr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ar)))}function yr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionend:yr("Transition","TransitionEnd")},Zr={},Gr={};function Br(e){if(Zr[e])return Zr[e];if(!vr[e])return e;var t,n=vr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Gr)return Zr[e]=n[t];return e}l&&(Gr=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);var kr=Br("animationend"),Sr=Br("animationiteration"),wr=Br("animationstart"),Wr=Br("transitionend"),Rr=new Map,Vr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(e,t){Rr.set(e,t),s(t,[e])}for(var Jr=0;Jr<Vr.length;Jr++){var xr=Vr[Jr];Xr(xr.toLowerCase(),"on"+(xr[0].toUpperCase()+xr.slice(1)))}Xr(kr,"onAnimationEnd"),Xr(Sr,"onAnimationIteration"),Xr(wr,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(Wr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function Hr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,g,s,c){if(Te.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var l=He;Ne=!1,He=null,Fe||(Fe=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var g=r[i],s=g.instance,c=g.currentTarget;if(g=g.listener,s!==o&&a.isPropagationStopped())break e;Hr(a,g,c),o=s}else for(i=0;i<r.length;i++){if(s=(g=r[i]).instance,c=g.currentTarget,g=g.listener,s!==o&&a.isPropagationStopped())break e;Hr(a,g,c),o=s}}}if(Fe)throw e=Ke,Fe=!1,Ke=null,e}function Kr(e,t){var n=t[da];void 0===n&&(n=t[da]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Er(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){if(!e[Tr]){e[Tr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||Er(t,!1,e),Er(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Tr]||(t[Tr]=!0,Er("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Pt(t)){case 1:var a=Lt;break;case 4:a=Ut;break;default:a=jt}n=a.bind(null,t,n,e),a=void 0,!Je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var g=r.stateNode.containerInfo;if(g===a||8===g.nodeType&&g.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;i=i.return}for(;null!==g;){if(null===(i=pa(g)))return;if(5===(s=i.tag)||6===s){r=o=i;continue e}g=g.parentNode}}r=r.return}Ve((function(){var r=o,a=ye(n),i=[];e:{var g=Rr.get(e);if(void 0!==g){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=An;break;case"focusout":c="blur",s=An;break;case"beforeblur":case"afterblur":s=An;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Wn;break;case kr:case Sr:case wr:s=hn;break;case Wr:s=Rn;break;case"scroll":s=fn;break;case"wheel":s=Xn;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=wn}var l=0!==(4&t),u=!l&&"scroll"===e,f=l?null!==g?g+"Capture":null:g;l=[];for(var I,C=r;null!==C;){var d=(I=C).stateNode;if(5===I.tag&&null!==d&&(I=d,null!==f&&(null!=(d=Xe(C,f))&&l.push(Lr(C,d,I)))),u)break;C=C.return}0<l.length&&(g=new s(g,c,null,n,a),i.push({event:g,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(g="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!pa(c)&&!c[Ca])&&(s||g)&&(g=a.window===a?a:(g=a.ownerDocument)?g.defaultView||g.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?pa(c):null)&&(c!==(u=Me(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=Cn,d="onMouseLeave",f="onMouseEnter",C="mouse","pointerout"!==e&&"pointerover"!==e||(l=wn,d="onPointerLeave",f="onPointerEnter",C="pointer"),u=null==s?g:ba(s),I=null==c?g:ba(c),(g=new l(d,C+"leave",s,n,a)).target=u,g.relatedTarget=I,d=null,pa(a)===r&&((l=new l(f,C+"enter",c,n,a)).target=I,l.relatedTarget=u,d=l),u=d,s&&c)e:{for(f=c,C=0,I=l=s;I;I=jr(I))C++;for(I=0,d=f;d;d=jr(d))I++;for(;0<C-I;)l=jr(l),C--;for(;0<I-C;)f=jr(f),I--;for(;C--;){if(l===f||null!==f&&l===f.alternate)break e;l=jr(l),f=jr(f)}l=null}else l=null;null!==s&&Or(i,g,s,l,!1),null!==c&&null!==u&&Or(i,u,c,l,!0)}if("select"===(s=(g=r?ba(r):window).nodeName&&g.nodeName.toLowerCase())||"input"===s&&"file"===g.type)var A=Pn;else if(Dn(g))if(_n)A=ir;else{A=ar;var h=rr}else(s=g.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===g.type||"radio"===g.type)&&(A=or);switch(A&&(A=A(e,r))?Ln(i,A,n,a):(h&&h(e,g,r),"focusout"===e&&(h=g._wrapperState)&&h.controlled&&"number"===g.type&&ee(g,"number",g.value)),h=r?ba(r):window,e){case"focusin":(Dn(h)||"true"===h.contentEditable)&&(Ar=h,hr=r,pr=null);break;case"focusout":pr=hr=Ar=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,br(i,n,a);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":br(i,n,a)}var p;if(xn)e:{switch(e){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Mn?En(e,n)&&(m="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(m="onCompositionStart");m&&(Hn&&"ko"!==n.locale&&(Mn||"onCompositionStart"!==m?"onCompositionEnd"===m&&Mn&&(p=en()):(qt="value"in(_t=a)?_t.value:_t.textContent,Mn=!0)),0<(h=Ur(r,m)).length&&(m=new bn(m,e,null,n,a),i.push({event:m,listeners:h}),p?m.data=p:null!==(p=Tn(n))&&(m.data=p))),(p=Nn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(Kn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Kn?null:e;default:return null}}(e,n):function(e,t){if(Mn)return"compositionend"===e||!xn&&En(e,t)?(e=en(),$t=qt=_t=null,Mn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=p))}Fr(i,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Xe(e,n))&&r.unshift(Lr(e,o,a)),null!=(o=Xe(e,t))&&r.push(Lr(e,o,a))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Or(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var g=n,s=g.alternate,c=g.stateNode;if(null!==s&&s===r)break;5===g.tag&&null!==c&&(g=c,a?null!=(s=Xe(n,o))&&i.unshift(Lr(n,s,g)):a||null!=(s=Xe(n,o))&&i.push(Lr(n,s,g))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,Pr=/\u0000|\uFFFD/g;function _r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Pr,"")}function qr(e,t,n){if(t=_r(t),_r(e)!==t&&n)throw Error(o(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(ga)}:ra;function ga(e){setTimeout((function(){throw e}))}function sa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Mt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Mt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),fa="__reactFiber$"+ua,Ia="__reactProps$"+ua,Ca="__reactContainer$"+ua,da="__reactEvents$"+ua,Aa="__reactListeners$"+ua,ha="__reactHandles$"+ua;function pa(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ca]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[fa])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ma(e){return!(e=e[fa]||e[Ca])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ya(e){return e[Ia]||null}var va=[],Za=-1;function Ga(e){return{current:e}}function Ba(e){0>Za||(e.current=va[Za],va[Za]=null,Za--)}function ka(e,t){Za++,va[Za]=e.current,e.current=t}var Sa={},wa=Ga(Sa),Wa=Ga(!1),Ra=Sa;function Va(e,t){var n=e.type.contextTypes;if(!n)return Sa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ja(){Ba(Wa),Ba(wa)}function xa(e,t,n){if(wa.current!==Sa)throw Error(o(168));ka(wa,t),ka(Wa,n)}function Ya(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,z(e)||"Unknown",a));return H({},n,r)}function Na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sa,Ra=wa.current,ka(wa,e),ka(Wa,Wa.current),!0}function Ha(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ya(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ba(Wa),Ba(wa),ka(wa,e)):Ba(Wa),ka(Wa,n)}var Fa=null,Ka=!1,Ea=!1;function Ta(e){null===Fa?Fa=[e]:Fa.push(e)}function Ma(){if(!Ea&&null!==Fa){Ea=!0;var e=0,t=mt;try{var n=Fa;for(mt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ka=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),je($e,Ma),a}finally{mt=t,Ea=!1}}return null}var za=[],Da=0,La=null,Ua=0,ja=[],Oa=0,Qa=null,Pa=1,_a="";function qa(e,t){za[Da++]=Ua,za[Da++]=La,La=e,Ua=t}function $a(e,t,n){ja[Oa++]=Pa,ja[Oa++]=_a,ja[Oa++]=Qa,Qa=e;var r=Pa;e=_a;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Pa=1<<32-it(t)+a|n<<a|r,_a=o+e}else Pa=1<<o|n<<a|r,_a=e}function eo(e){null!==e.return&&(qa(e,1),$a(e,1,0))}function to(e){for(;e===La;)La=za[--Da],za[Da]=null,Ua=za[--Da],za[Da]=null;for(;e===Qa;)Qa=ja[--Oa],ja[Oa]=null,_a=ja[--Oa],ja[Oa]=null,Pa=ja[--Oa],ja[Oa]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=Xc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function go(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:Pa,overflow:_a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Xc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function so(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!go(e,t)){if(so(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&go(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(so(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function uo(e){if(e!==no)return!1;if(!ao)return lo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(so(e))throw fo(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ca(e.nextSibling)}function Io(){ro=no=null,ao=!1}function Co(e){null===oo?oo=[e]:oo.push(e)}var Ao=b.ReactCurrentBatchConfig;function ho(e,t){if(e&&e.defaultProps){for(var n in t=H({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var po=Ga(null),mo=null,bo=null,yo=null;function vo(){yo=bo=mo=null}function Zo(e){var t=po.current;Ba(po),e._currentValue=t}function Go(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bo(e,t){mo=e,yo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bg=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(yo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===mo)throw Error(o(308));bo=e,mo.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var So=null;function wo(e){null===So?So=[e]:So.push(e)}function Wo(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,wo(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Vo=!1;function Xo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ws)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ro(e,n)}return null===(a=r.interleaved)?(t.next=t,wo(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ro(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,pt(e,n)}}function Ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var a=e.updateQueue;Vo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,g=a.shared.pending;if(null!==g){a.shared.pending=null;var s=g,c=s.next;s.next=null,null===i?o=c:i.next=c,i=s;var l=e.alternate;null!==l&&((g=(l=l.updateQueue).lastBaseUpdate)!==i&&(null===g?l.firstBaseUpdate=c:g.next=c,l.lastBaseUpdate=s))}if(null!==o){var u=a.baseState;for(i=0,l=c=s=null,g=o;;){var f=g.lane,I=g.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:I,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var C=e,d=g;switch(f=t,I=n,d.tag){case 1:if("function"===typeof(C=d.payload)){u=C.call(I,u,f);break e}u=C;break e;case 3:C.flags=-65537&C.flags|128;case 0:if(null===(f="function"===typeof(C=d.payload)?C.call(I,u,f):C)||void 0===f)break e;u=H({},u,f);break e;case 2:Vo=!0}}null!==g.callback&&0!==g.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[g]:f.push(g))}else I={eventTime:I,lane:f,tag:g.tag,payload:g.payload,callback:g.callback,next:null},null===l?(c=l=I,s=u):l=l.next=I,i|=f;if(null===(g=g.next)){if(null===(g=a.shared.pending))break;g=(f=g).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===l&&(s=u),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Hs|=i,e.lanes=i,e.memoizedState=u}}function Ko(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var Eo=(new r.Component).refs;function To(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:H({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Mo={isMounted:function(e){return!!(e=e._reactInternals)&&Me(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),o=xo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Yo(e,o,a))&&(rc(t,e,a,r),No(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),o=xo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Yo(e,o,a))&&(rc(t,e,a,r),No(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=xo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Yo(e,a,r))&&(rc(t,e,r,n),No(t,e,r))}};function zo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(a,o))}function Do(e,t,n){var r=!1,a=Sa,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(a=Xa(t)?Ra:wa.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Va(e,a):Sa),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Mo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Mo.enqueueReplaceState(t,t.state,null)}function Uo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Eo,Xo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=ko(o):(o=Xa(t)?Ra:wa.current,a.context=Va(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(To(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Mo.enqueueReplaceState(a,a.state,null),Fo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function jo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;t===Eo&&(t=a.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Oo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function Po(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function g(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===Z?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===X&&Qo(o)===t.type)?((r=a(t,n.props)).ref=jo(e,t,n),r.return=e,r):((r=Yc(n.type,n.key,n.props,null,e.mode,r)).ref=jo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(n=Yc(t.type,t.key,t.props,null,e.mode,n)).ref=jo(e,null,t),n.return=e,n;case v:return(t=Kc(t,e.mode,n)).return=e,t;case X:return f(e,(0,t._init)(t._payload),n)}if(te(t)||Y(t))return(t=Nc(t,e.mode,n,null)).return=e,t;Oo(e,t)}return null}function I(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===a?c(e,t,n,r):null;case v:return n.key===a?l(e,t,n,r):null;case X:return I(e,t,(a=n._init)(n._payload),r)}if(te(n)||Y(n))return null!==a?null:u(e,t,n,r,null);Oo(e,n)}return null}function C(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case y:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case v:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case X:return C(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||Y(r))return u(t,e=e.get(n)||null,r,a,null);Oo(t,r)}return null}function d(a,o,g,s){for(var c=null,l=null,u=o,d=o=0,A=null;null!==u&&d<g.length;d++){u.index>d?(A=u,u=null):A=u.sibling;var h=I(a,u,g[d],s);if(null===h){null===u&&(u=A);break}e&&u&&null===h.alternate&&t(a,u),o=i(h,o,d),null===l?c=h:l.sibling=h,l=h,u=A}if(d===g.length)return n(a,u),ao&&qa(a,d),c;if(null===u){for(;d<g.length;d++)null!==(u=f(a,g[d],s))&&(o=i(u,o,d),null===l?c=u:l.sibling=u,l=u);return ao&&qa(a,d),c}for(u=r(a,u);d<g.length;d++)null!==(A=C(u,a,d,g[d],s))&&(e&&null!==A.alternate&&u.delete(null===A.key?d:A.key),o=i(A,o,d),null===l?c=A:l.sibling=A,l=A);return e&&u.forEach((function(e){return t(a,e)})),ao&&qa(a,d),c}function A(a,g,s,c){var l=Y(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var u=l=null,d=g,A=g=0,h=null,p=s.next();null!==d&&!p.done;A++,p=s.next()){d.index>A?(h=d,d=null):h=d.sibling;var m=I(a,d,p.value,c);if(null===m){null===d&&(d=h);break}e&&d&&null===m.alternate&&t(a,d),g=i(m,g,A),null===u?l=m:u.sibling=m,u=m,d=h}if(p.done)return n(a,d),ao&&qa(a,A),l;if(null===d){for(;!p.done;A++,p=s.next())null!==(p=f(a,p.value,c))&&(g=i(p,g,A),null===u?l=p:u.sibling=p,u=p);return ao&&qa(a,A),l}for(d=r(a,d);!p.done;A++,p=s.next())null!==(p=C(d,a,A,p.value,c))&&(e&&null!==p.alternate&&d.delete(null===p.key?A:p.key),g=i(p,g,A),null===u?l=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(a,e)})),ao&&qa(a,A),l}return function e(r,o,i,s){if("object"===typeof i&&null!==i&&i.type===Z&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case y:e:{for(var c=i.key,l=o;null!==l;){if(l.key===c){if((c=i.type)===Z){if(7===l.tag){n(r,l.sibling),(o=a(l,i.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===X&&Qo(c)===l.type){n(r,l.sibling),(o=a(l,i.props)).ref=jo(r,l,i),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}i.type===Z?((o=Nc(i.props.children,r.mode,s,i.key)).return=r,r=o):((s=Yc(i.type,i.key,i.props,null,r.mode,s)).ref=jo(r,o,i),s.return=r,r=s)}return g(r);case v:e:{for(l=i.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Kc(i,r.mode,s)).return=r,r=o}return g(r);case X:return e(r,o,(l=i._init)(i._payload),s)}if(te(i))return d(r,o,i,s);if(Y(i))return A(r,o,i,s);Oo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Fc(i,r.mode,s)).return=r,r=o),g(r)):n(r,o)}}var _o=Po(!0),qo=Po(!1),$o={},ei=Ga($o),ti=Ga($o),ni=Ga($o);function ri(e){if(e===$o)throw Error(o(174));return e}function ai(e,t){switch(ka(ni,t),ka(ti,e),ka(ei,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ba(ei),ka(ei,t)}function oi(){Ba(ei),Ba(ti),Ba(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=se(t,e.type);t!==n&&(ka(ti,e),ka(ei,n))}function gi(e){ti.current===e&&(Ba(ei),Ba(ti))}var si=Ga(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var li=[];function ui(){for(var e=0;e<li.length;e++)li[e]._workInProgressVersionPrimary=null;li.length=0}var fi=b.ReactCurrentDispatcher,Ii=b.ReactCurrentBatchConfig,Ci=0,di=null,Ai=null,hi=null,pi=!1,mi=!1,bi=0,yi=0;function vi(){throw Error(o(321))}function Zi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gr(e[n],t[n]))return!1;return!0}function Gi(e,t,n,r,a,i){if(Ci=i,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=null===e||null===e.memoizedState?gg:sg,e=n(r,a),mi){i=0;do{if(mi=!1,bi=0,25<=i)throw Error(o(301));i+=1,hi=Ai=null,t.updateQueue=null,fi.current=cg,e=n(r,a)}while(mi)}if(fi.current=ig,t=null!==Ai&&null!==Ai.next,Ci=0,hi=Ai=di=null,pi=!1,t)throw Error(o(300));return e}function Bi(){var e=0!==bi;return bi=0,e}function ki(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hi?di.memoizedState=hi=e:hi=hi.next=e,hi}function Si(){if(null===Ai){var e=di.alternate;e=null!==e?e.memoizedState:null}else e=Ai.next;var t=null===hi?di.memoizedState:hi.next;if(null!==t)hi=t,Ai=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ai=e).memoizedState,baseState:Ai.baseState,baseQueue:Ai.baseQueue,queue:Ai.queue,next:null},null===hi?di.memoizedState=hi=e:hi=hi.next=e}return hi}function wi(e,t){return"function"===typeof t?t(e):t}function Wi(e){var t=Si(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ai,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var g=a.next;a.next=i.next,i.next=g}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var s=g=null,c=null,l=i;do{var u=l.lane;if((Ci&u)===u)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,g=r):c=c.next=f,di.lanes|=u,Hs|=u}l=l.next}while(null!==l&&l!==i);null===c?g=r:c.next=s,gr(r,t.memoizedState)||(bg=!0),t.memoizedState=r,t.baseState=g,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,di.lanes|=i,Hs|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ri(e){var t=Si(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var g=a=a.next;do{i=e(i,g.action),g=g.next}while(g!==a);gr(i,t.memoizedState)||(bg=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Vi(){}function Xi(e,t){var n=di,r=Si(),a=t(),i=!gr(r.memoizedState,a);if(i&&(r.memoizedState=a,bg=!0),r=r.queue,Di(Yi.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==hi&&1&hi.memoizedState.tag){if(n.flags|=2048,Ki(9,xi.bind(null,n,r,a,t),void 0,null),null===Rs)throw Error(o(349));0!==(30&Ci)||Ji(n,t,a)}return a}function Ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=di.updateQueue)?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xi(e,t,n,r){t.value=n,t.getSnapshot=r,Ni(t)&&Hi(e)}function Yi(e,t,n){return n((function(){Ni(t)&&Hi(e)}))}function Ni(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch(r){return!0}}function Hi(e){var t=Ro(e,1);null!==t&&rc(t,e,1,-1)}function Fi(e){var t=ki();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=ng.bind(null,di,e),[t.memoizedState,e]}function Ki(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=di.updateQueue)?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ei(){return Si().memoizedState}function Ti(e,t,n,r){var a=ki();di.flags|=e,a.memoizedState=Ki(1|t,n,void 0,void 0===r?null:r)}function Mi(e,t,n,r){var a=Si();r=void 0===r?null:r;var o=void 0;if(null!==Ai){var i=Ai.memoizedState;if(o=i.destroy,null!==r&&Zi(r,i.deps))return void(a.memoizedState=Ki(t,n,o,r))}di.flags|=e,a.memoizedState=Ki(1|t,n,o,r)}function zi(e,t){return Ti(8390656,8,e,t)}function Di(e,t){return Mi(2048,8,e,t)}function Li(e,t){return Mi(4,2,e,t)}function Ui(e,t){return Mi(4,4,e,t)}function ji(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4,4,ji.bind(null,t,e),n)}function Qi(){}function Pi(e,t){var n=Si();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _i(e,t){var n=Si();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qi(e,t,n){return 0===(21&Ci)?(e.baseState&&(e.baseState=!1,bg=!0),e.memoizedState=n):(gr(n,t)||(n=dt(),di.lanes|=n,Hs|=n,e.baseState=!0),t)}function $i(e,t){var n=mt;mt=0!==n&&4>n?n:4,e(!0);var r=Ii.transition;Ii.transition={};try{e(!1),t()}finally{mt=n,Ii.transition=r}}function eg(){return Si().memoizedState}function tg(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rg(e))ag(t,n);else if(null!==(n=Wo(e,t,n,r))){rc(n,e,r,tc()),og(n,t,r)}}function ng(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rg(e))ag(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,g=o(i,n);if(a.hasEagerState=!0,a.eagerState=g,gr(g,i)){var s=t.interleaved;return null===s?(a.next=a,wo(t)):(a.next=s.next,s.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Wo(e,t,a,r))&&(rc(n,e,r,a=tc()),og(n,t,r))}}function rg(e){var t=e.alternate;return e===di||null!==t&&t===di}function ag(e,t){mi=pi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function og(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,pt(e,n)}}var ig={readContext:ko,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},gg={readContext:ko,useCallback:function(e,t){return ki().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:zi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ti(4194308,4,ji.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var n=ki();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ki();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tg.bind(null,di,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ki().memoizedState=e},useState:Fi,useDebugValue:Qi,useDeferredValue:function(e){return ki().memoizedState=e},useTransition:function(){var e=Fi(!1),t=e[0];return e=$i.bind(null,e[1]),ki().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=di,a=ki();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rs)throw Error(o(349));0!==(30&Ci)||Ji(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,zi(Yi.bind(null,r,i,e),[e]),r.flags|=2048,Ki(9,xi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ki(),t=Rs.identifierPrefix;if(ao){var n=_a;t=":"+t+"R"+(n=(Pa&~(1<<32-it(Pa)-1)).toString(32)+n),0<(n=bi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sg={readContext:ko,useCallback:Pi,useContext:ko,useEffect:Di,useImperativeHandle:Oi,useInsertionEffect:Li,useLayoutEffect:Ui,useMemo:_i,useReducer:Wi,useRef:Ei,useState:function(){return Wi(wi)},useDebugValue:Qi,useDeferredValue:function(e){return qi(Si(),Ai.memoizedState,e)},useTransition:function(){return[Wi(wi)[0],Si().memoizedState]},useMutableSource:Vi,useSyncExternalStore:Xi,useId:eg,unstable_isNewReconciler:!1},cg={readContext:ko,useCallback:Pi,useContext:ko,useEffect:Di,useImperativeHandle:Oi,useInsertionEffect:Li,useLayoutEffect:Ui,useMemo:_i,useReducer:Ri,useRef:Ei,useState:function(){return Ri(wi)},useDebugValue:Qi,useDeferredValue:function(e){var t=Si();return null===Ai?t.memoizedState=e:qi(t,Ai.memoizedState,e)},useTransition:function(){return[Ri(wi)[0],Si().memoizedState]},useMutableSource:Vi,useSyncExternalStore:Xi,useId:eg,unstable_isNewReconciler:!1};function lg(e,t){try{var n="",r=t;do{n+=T(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function ug(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fg(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Ig="function"===typeof WeakMap?WeakMap:Map;function Cg(e,t,n){(n=xo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ls||(Ls=!0,Us=r),fg(0,t)},n}function dg(e,t,n){(n=xo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fg(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fg(0,t),"function"!==typeof r&&(null===js?js=new Set([this]):js.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ag(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ig;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function hg(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function pg(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=xo(-1,1)).tag=2,Yo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var mg=b.ReactCurrentOwner,bg=!1;function yg(e,t,n,r){t.child=null===e?qo(t,null,n,r):_o(t,e.child,n,r)}function vg(e,t,n,r,a){n=n.render;var o=t.ref;return Bo(t,a),r=Gi(e,t,n,r,o,a),n=Bi(),null===e||bg?(ao&&n&&eo(t),t.flags|=1,yg(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Lg(e,t,a))}function Zg(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Jc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Yc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Gg(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(i,r)&&e.ref===t.ref)return Lg(e,t,a)}return t.flags|=1,(e=xc(o,r)).ref=t.ref,e.return=t,t.child=e}function Gg(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(sr(o,r)&&e.ref===t.ref){if(bg=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Lg(e,t,a);0!==(131072&e.flags)&&(bg=!0)}}return Sg(e,t,n,r,a)}function Bg(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ka(xs,Js),Js|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ka(xs,Js),Js|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ka(xs,Js),Js|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ka(xs,Js),Js|=r;return yg(e,t,a,n),t.child}function kg(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sg(e,t,n,r,a){var o=Xa(n)?Ra:wa.current;return o=Va(t,o),Bo(t,a),n=Gi(e,t,n,r,o,a),r=Bi(),null===e||bg?(ao&&r&&eo(t),t.flags|=1,yg(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Lg(e,t,a))}function wg(e,t,n,r,a){if(Xa(n)){var o=!0;Na(t)}else o=!1;if(Bo(t,a),null===t.stateNode)Dg(e,t),Do(t,n,r),Uo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,g=t.memoizedProps;i.props=g;var s=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=ko(c):c=Va(t,c=Xa(n)?Ra:wa.current);var l=n.getDerivedStateFromProps,u="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(g!==r||s!==c)&&Lo(t,i,r,c),Vo=!1;var f=t.memoizedState;i.state=f,Fo(t,r,i,a),s=t.memoizedState,g!==r||f!==s||Wa.current||Vo?("function"===typeof l&&(To(t,n,l,r),s=t.memoizedState),(g=Vo||zo(t,n,g,r,f,s,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=c,r=g):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Jo(e,t),g=t.memoizedProps,c=t.type===t.elementType?g:ho(t.type,g),i.props=c,u=t.pendingProps,f=i.context,"object"===typeof(s=n.contextType)&&null!==s?s=ko(s):s=Va(t,s=Xa(n)?Ra:wa.current);var I=n.getDerivedStateFromProps;(l="function"===typeof I||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(g!==u||f!==s)&&Lo(t,i,r,s),Vo=!1,f=t.memoizedState,i.state=f,Fo(t,r,i,a);var C=t.memoizedState;g!==u||f!==C||Wa.current||Vo?("function"===typeof I&&(To(t,n,I,r),C=t.memoizedState),(c=Vo||zo(t,n,c,r,f,C,s)||!1)?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,C,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,C,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||g===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||g===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),i.props=r,i.state=C,i.context=s,r=c):("function"!==typeof i.componentDidUpdate||g===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||g===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Wg(e,t,n,r,o,a)}function Wg(e,t,n,r,a,o){kg(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ha(t,n,!1),Lg(e,t,o);r=t.stateNode,mg.current=t;var g=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,g,o)):yg(e,t,g,o),t.memoizedState=r.state,a&&Ha(t,n,!0),t.child}function Rg(e){var t=e.stateNode;t.pendingContext?xa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xa(0,t.context,!1),ai(e,t.containerInfo)}function Vg(e,t,n,r,a){return Io(),Co(a),t.flags|=256,yg(e,t,n,r),t.child}var Xg,Jg,xg,Yg,Ng={dehydrated:null,treeContext:null,retryLane:0};function Hg(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fg(e,t,n){var r,a=t.pendingProps,i=si.current,g=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(g=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),ka(si,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=a.children,e=a.fallback,g?(a=t.mode,g=t.child,s={mode:"hidden",children:s},0===(1&a)&&null!==g?(g.childLanes=0,g.pendingProps=s):g=Hc(s,a,0,null),e=Nc(e,a,n,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=Hg(n),t.memoizedState=Ng,e):Kg(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,g){if(n)return 256&t.flags?(t.flags&=-257,Eg(e,t,g,r=ug(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Hc({mode:"visible",children:r.children},a,0,null),(i=Nc(i,a,g,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,g),t.child.memoizedState=Hg(g),t.memoizedState=Ng,i);if(0===(1&t.mode))return Eg(e,t,g,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var s=r.dgst;return r=s,Eg(e,t,g,r=ug(i=Error(o(419)),r,void 0))}if(s=0!==(g&e.childLanes),bg||s){if(null!==(r=Rs)){switch(g&-g){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|g))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ro(e,a),rc(r,e,a,-1))}return Ac(),Eg(e,t,g,r=ug(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=wc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(ja[Oa++]=Pa,ja[Oa++]=_a,ja[Oa++]=Qa,Pa=e.id,_a=e.overflow,Qa=t),t=Kg(t,r.children),t.flags|=4096,t)}(e,t,s,a,r,i,n);if(g){g=a.fallback,s=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&s)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=xc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?g=xc(r,g):(g=Nc(g,s,n,null)).flags|=2,g.return=t,a.return=t,a.sibling=g,t.child=a,a=g,g=t.child,s=null===(s=e.child.memoizedState)?Hg(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},g.memoizedState=s,g.childLanes=e.childLanes&~n,t.memoizedState=Ng,a}return e=(g=e.child).sibling,a=xc(g,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Kg(e,t){return(t=Hc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Eg(e,t,n,r){return null!==r&&Co(r),_o(t,e.child,null,n),(e=Kg(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Tg(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Go(e.return,t,n)}function Mg(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function zg(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(yg(e,t,r.children,n),0!==(2&(r=si.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Tg(e,n,t);else if(19===e.tag)Tg(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ka(si,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ci(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Mg(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ci(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Mg(t,!0,n,null,o);break;case"together":Mg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Dg(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lg(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ug(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function jg(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Og(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jg(t),null;case 1:case 17:return Xa(t.type)&&Ja(),jg(t),null;case 3:return r=t.stateNode,oi(),Ba(Wa),Ba(wa),ui(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(uo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(gc(oo),oo=null))),Jg(e,t),jg(t),null;case 5:gi(t);var a=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)xg(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return jg(t),null}if(e=ri(ei.current),uo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[Ia]=i,e=0!==(1&t.mode),n){case"dialog":Kr("cancel",r),Kr("close",r);break;case"iframe":case"object":case"embed":Kr("load",r);break;case"video":case"audio":for(a=0;a<Yr.length;a++)Kr(Yr[a],r);break;case"source":Kr("error",r);break;case"img":case"image":case"link":Kr("error",r),Kr("load",r);break;case"details":Kr("toggle",r);break;case"input":P(r,i),Kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Kr("invalid",r);break;case"textarea":ae(r,i),Kr("invalid",r)}for(var s in pe(n,i),a=null,i)if(i.hasOwnProperty(s)){var c=i[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&qr(r.textContent,c,e),a=["children",""+c]):g.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Kr("scroll",r)}switch(n){case"input":U(r),$(r,i,!0);break;case"textarea":U(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ge(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fa]=t,e[Ia]=r,Xg(e,t,!1,!1),t.stateNode=e;e:{switch(s=me(n,r),n){case"dialog":Kr("cancel",e),Kr("close",e),a=r;break;case"iframe":case"object":case"embed":Kr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Yr.length;a++)Kr(Yr[a],e);a=r;break;case"source":Kr("error",e),a=r;break;case"img":case"image":case"link":Kr("error",e),Kr("load",e),a=r;break;case"details":Kr("toggle",e),a=r;break;case"input":P(e,r),a=Q(e,r),Kr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=H({},r,{value:void 0}),Kr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Kr("invalid",e)}for(i in pe(n,a),c=a)if(c.hasOwnProperty(i)){var l=c[i];"style"===i?Ae(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&ue(e,l):"children"===i?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(g.hasOwnProperty(i)?null!=l&&"onScroll"===i&&Kr("scroll",e):null!=l&&m(e,i,l,s))}switch(n){case"input":U(e),$(e,r,!1);break;case"textarea":U(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+D(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return jg(t),null;case 6:if(e&&null!=t.stateNode)Yg(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ri(ni.current),ri(ei.current),uo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return jg(t),null;case 13:if(Ba(si),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),Io(),t.flags|=98560,i=!1;else if(i=uo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[fa]=t}else Io(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;jg(t),i=!1}else null!==oo&&(gc(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&si.current)?0===Ys&&(Ys=3):Ac())),null!==t.updateQueue&&(t.flags|=4),jg(t),null);case 4:return oi(),Jg(e,t),null===e&&Mr(t.stateNode.containerInfo),jg(t),null;case 10:return Zo(t.type._context),jg(t),null;case 19:if(Ba(si),null===(i=t.memoizedState))return jg(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Ug(i,!1);else{if(0!==Ys||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ci(e))){for(t.flags|=128,Ug(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ka(si,1&si.current|2),t.child}e=e.sibling}null!==i.tail&&_e()>zs&&(t.flags|=128,r=!0,Ug(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ci(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ug(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!ao)return jg(t),null}else 2*_e()-i.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Ug(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=_e(),t.sibling=null,n=si.current,ka(si,r?1&n|2:1&n),t):(jg(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Js)&&(jg(t),6&t.subtreeFlags&&(t.flags|=8192)):jg(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qg(e,t){switch(to(t),t.tag){case 1:return Xa(t.type)&&Ja(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oi(),Ba(Wa),Ba(wa),ui(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return gi(t),null;case 13:if(Ba(si),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));Io()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ba(si),null;case 4:return oi(),null;case 10:return Zo(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Xg=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Jg=function(){},xg=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ri(ei.current);var o,i=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),i=[];break;case"select":a=H({},a,{value:void 0}),r=H({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in pe(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var s=a[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(g.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(i=i||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(g.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Kr("scroll",e),i||s===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}},Yg=function(e,t,n,r){n!==r&&(t.flags|=4)};var Pg=!1,_g=!1,qg="function"===typeof WeakSet?WeakSet:Set,$g=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Bc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Bc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&ts(t,n,o)}a=a.next}while(a!==r)}}function as(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function os(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function is(e){var t=e.alternate;null!==t&&(e.alternate=null,is(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[Ia],delete t[da],delete t[Aa],delete t[ha])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var us=null,fs=!1;function Is(e,t,n){for(n=n.child;null!==n;)Cs(e,t,n),n=n.sibling}function Cs(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(g){}switch(n.tag){case 5:_g||es(n,t);case 6:var r=us,a=fs;us=null,Is(e,t,n),fs=a,null!==(us=r)&&(fs?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(fs?(e=us,n=n.stateNode,8===e.nodeType?sa(e.parentNode,n):1===e.nodeType&&sa(e,n),Mt(e)):sa(us,n.stateNode));break;case 4:r=us,a=fs,us=n.stateNode.containerInfo,fs=!0,Is(e,t,n),us=r,fs=a;break;case 0:case 11:case 14:case 15:if(!_g&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&ts(n,t,i),a=a.next}while(a!==r)}Is(e,t,n);break;case 1:if(!_g&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(g){Bc(n,t,g)}Is(e,t,n);break;case 21:Is(e,t,n);break;case 22:1&n.mode?(_g=(r=_g)||null!==n.memoizedState,Is(e,t,n),_g=r):Is(e,t,n);break;default:Is(e,t,n)}}function ds(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qg),t.forEach((function(t){var r=Wc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function As(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,g=t,s=g;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,fs=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===us)throw Error(o(160));Cs(i,g,a),us=null,fs=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Bc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hs(t,e),t=t.sibling}function hs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(As(t,e),ps(e),4&r){try{rs(3,e,e.return),as(3,e)}catch(A){Bc(e,e.return,A)}try{rs(5,e,e.return)}catch(A){Bc(e,e.return,A)}}break;case 1:As(t,e),ps(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(As(t,e),ps(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(A){Bc(e,e.return,A)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,g=null!==n?n.memoizedProps:i,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===i.type&&null!=i.name&&_(a,i),me(s,g);var l=me(s,i);for(g=0;g<c.length;g+=2){var u=c[g],f=c[g+1];"style"===u?Ae(a,f):"dangerouslySetInnerHTML"===u?ue(a,f):"children"===u?fe(a,f):m(a,u,f,l)}switch(s){case"input":q(a,i);break;case"textarea":oe(a,i);break;case"select":var I=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var C=i.value;null!=C?ne(a,!!i.multiple,C,!1):I!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ia]=i}catch(A){Bc(e,e.return,A)}}break;case 6:if(As(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(A){Bc(e,e.return,A)}}break;case 3:if(As(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Mt(t.containerInfo)}catch(A){Bc(e,e.return,A)}break;case 4:default:As(t,e),ps(e);break;case 13:As(t,e),ps(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ms=_e())),4&r&&ds(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(_g=(l=_g)||u,As(t,e),_g=l):As(t,e),ps(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!u&&0!==(1&e.mode))for($g=e,u=e.child;null!==u;){for(f=$g=u;null!==$g;){switch(C=(I=$g).child,I.tag){case 0:case 11:case 14:case 15:rs(4,I,I.return);break;case 1:es(I,I.return);var d=I.stateNode;if("function"===typeof d.componentWillUnmount){r=I,n=I.return;try{t=r,d.props=t.memoizedProps,d.state=t.memoizedState,d.componentWillUnmount()}catch(A){Bc(r,n,A)}}break;case 5:es(I,I.return);break;case 22:if(null!==I.memoizedState){vs(f);continue}}null!==C?(C.return=I,$g=C):vs(f)}u=u.sibling}e:for(u=null,f=e;;){if(5===f.tag){if(null===u){u=f;try{a=f.stateNode,l?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=f.stateNode,g=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=de("display",g))}catch(A){Bc(e,e.return,A)}}}else if(6===f.tag){if(null===u)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(A){Bc(e,e.return,A)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:As(t,e),ps(e),4&r&&ds(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(gs(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),ls(e,ss(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;cs(e,ss(e),i);break;default:throw Error(o(161))}}catch(g){Bc(e,e.return,g)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ms(e,t,n){$g=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==$g;){var a=$g,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Pg;if(!i){var g=a.alternate,s=null!==g&&null!==g.memoizedState||_g;g=Pg;var c=_g;if(Pg=i,(_g=s)&&!c)for($g=a;null!==$g;)s=(i=$g).child,22===i.tag&&null!==i.memoizedState?Zs(a):null!==s?(s.return=i,$g=s):Zs(a);for(;null!==o;)$g=o,bs(o,t,n),o=o.sibling;$g=a,Pg=g,_g=c}ys(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,$g=o):ys(e)}}function ys(e){for(;null!==$g;){var t=$g;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:_g||as(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!_g)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ho(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ko(t,i,r);break;case 3:var g=t.updateQueue;if(null!==g){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ko(t,g,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var u=l.memoizedState;if(null!==u){var f=u.dehydrated;null!==f&&Mt(f)}}}break;default:throw Error(o(163))}_g||512&t.flags&&os(t)}catch(I){Bc(t,t.return,I)}}if(t===e){$g=null;break}if(null!==(n=t.sibling)){n.return=t.return,$g=n;break}$g=t.return}}function vs(e){for(;null!==$g;){var t=$g;if(t===e){$g=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$g=n;break}$g=t.return}}function Zs(e){for(;null!==$g;){var t=$g;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{as(4,t)}catch(s){Bc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(s){Bc(t,a,s)}}var o=t.return;try{os(t)}catch(s){Bc(t,o,s)}break;case 5:var i=t.return;try{os(t)}catch(s){Bc(t,i,s)}}}catch(s){Bc(t,t.return,s)}if(t===e){$g=null;break}var g=t.sibling;if(null!==g){g.return=t.return,$g=g;break}$g=t.return}}var Gs,Bs=Math.ceil,ks=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,ws=b.ReactCurrentBatchConfig,Ws=0,Rs=null,Vs=null,Xs=0,Js=0,xs=Ga(0),Ys=0,Ns=null,Hs=0,Fs=0,Ks=0,Es=null,Ts=null,Ms=0,zs=1/0,Ds=null,Ls=!1,Us=null,js=null,Os=!1,Qs=null,Ps=0,_s=0,qs=null,$s=-1,ec=0;function tc(){return 0!==(6&Ws)?_e():-1!==$s?$s:$s=_e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ws)&&0!==Xs?Xs&-Xs:null!==Ao.transition?(0===ec&&(ec=dt()),ec):0!==(e=mt)?e:e=void 0===(e=window.event)?16:Pt(e.type)}function rc(e,t,n,r){if(50<_s)throw _s=0,qs=null,Error(o(185));ht(e,n,r),0!==(2&Ws)&&e===Rs||(e===Rs&&(0===(2&Ws)&&(Fs|=n),4===Ys&&sc(e,Xs)),ac(e,r),1===n&&0===Ws&&0===(1&t.mode)&&(zs=_e()+500,Ka&&Ma()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),g=1<<i,s=a[i];-1===s?0!==(g&n)&&0===(g&r)||(a[i]=It(g,t)):s<=t&&(e.expiredLanes|=g),o&=~g}}(e,t);var r=ft(e,e===Rs?Xs:0);if(0===r)null!==n&&Oe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Oe(n),1===t)0===e.tag?function(e){Ka=!0,Ta(e)}(cc.bind(null,e)):Ta(cc.bind(null,e)),ia((function(){0===(6&Ws)&&Ma()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if($s=-1,ec=0,0!==(6&Ws))throw Error(o(327));var n=e.callbackNode;if(Zc()&&e.callbackNode!==n)return null;var r=ft(e,e===Rs?Xs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=hc(e,r);else{t=r;var a=Ws;Ws|=2;var i=dc();for(Rs===e&&Xs===t||(Ds=null,zs=_e()+500,Ic(e,t));;)try{mc();break}catch(s){Cc(e,s)}vo(),ks.current=i,Ws=a,null!==Vs?t=0:(Rs=null,Xs=0,t=Ys)}if(0!==t){if(2===t&&(0!==(a=Ct(e))&&(r=a,t=ic(e,a))),1===t)throw n=Ns,Ic(e,0),sc(e,r),ac(e,_e()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!gr(o(),a))return!1}catch(g){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=hc(e,r))&&(0!==(i=Ct(e))&&(r=i,t=ic(e,i))),1===t))throw n=Ns,Ic(e,0),sc(e,r),ac(e,_e()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:vc(e,Ts,Ds);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ms+500-_e())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(vc.bind(null,e,Ts,Ds),t);break}vc(e,Ts,Ds);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var g=31-it(r);i=1<<g,(g=t[g])>a&&(a=g),r&=~i}if(r=a,10<(r=(120>(r=_e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bs(r/1960))-r)){e.timeoutHandle=ra(vc.bind(null,e,Ts,Ds),r);break}vc(e,Ts,Ds);break;default:throw Error(o(329))}}}return ac(e,_e()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Es;return e.current.memoizedState.isDehydrated&&(Ic(e,t).flags|=256),2!==(e=hc(e,t))&&(t=Ts,Ts=n,null!==t&&gc(t)),e}function gc(e){null===Ts?Ts=e:Ts.push.apply(Ts,e)}function sc(e,t){for(t&=~Ks,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ws))throw Error(o(327));Zc();var t=ft(e,0);if(0===(1&t))return ac(e,_e()),null;var n=hc(e,t);if(0!==e.tag&&2===n){var r=Ct(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ns,Ic(e,0),sc(e,t),ac(e,_e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,Ts,Ds),ac(e,_e()),null}function lc(e,t){var n=Ws;Ws|=1;try{return e(t)}finally{0===(Ws=n)&&(zs=_e()+500,Ka&&Ma())}}function uc(e){null!==Qs&&0===Qs.tag&&0===(6&Ws)&&Zc();var t=Ws;Ws|=1;var n=ws.transition,r=mt;try{if(ws.transition=null,mt=1,e)return e()}finally{mt=r,ws.transition=n,0===(6&(Ws=t))&&Ma()}}function fc(){Js=xs.current,Ba(xs)}function Ic(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Vs)for(n=Vs.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ja();break;case 3:oi(),Ba(Wa),Ba(wa),ui();break;case 5:gi(r);break;case 4:oi();break;case 13:case 19:Ba(si);break;case 10:Zo(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Rs=e,Vs=e=xc(e.current,null),Xs=Js=t,Ys=0,Ns=null,Ks=Fs=Hs=0,Ts=Es=null,null!==So){for(t=0;t<So.length;t++)if(null!==(r=(n=So[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}So=null}return e}function Cc(e,t){for(;;){var n=Vs;try{if(vo(),fi.current=ig,pi){for(var r=di.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}pi=!1}if(Ci=0,hi=Ai=di=null,mi=!1,bi=0,Ss.current=null,null===n||null===n.return){Ys=1,Ns=t,Vs=null;break}e:{var i=e,g=n.return,s=n,c=t;if(t=Xs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,u=s,f=u.tag;if(0===(1&u.mode)&&(0===f||11===f||15===f)){var I=u.alternate;I?(u.updateQueue=I.updateQueue,u.memoizedState=I.memoizedState,u.lanes=I.lanes):(u.updateQueue=null,u.memoizedState=null)}var C=hg(g);if(null!==C){C.flags&=-257,pg(C,g,s,0,t),1&C.mode&&Ag(i,l,t),c=l;var d=(t=C).updateQueue;if(null===d){var A=new Set;A.add(c),t.updateQueue=A}else d.add(c);break e}if(0===(1&t)){Ag(i,l,t),Ac();break e}c=Error(o(426))}else if(ao&&1&s.mode){var h=hg(g);if(null!==h){0===(65536&h.flags)&&(h.flags|=256),pg(h,g,s,0,t),Co(lg(c,s));break e}}i=c=lg(c,s),4!==Ys&&(Ys=2),null===Es?Es=[i]:Es.push(i),i=g;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ho(i,Cg(0,c,t));break e;case 1:s=c;var p=i.type,m=i.stateNode;if(0===(128&i.flags)&&("function"===typeof p.getDerivedStateFromError||null!==m&&"function"===typeof m.componentDidCatch&&(null===js||!js.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t,Ho(i,dg(i,s,t));break e}}i=i.return}while(null!==i)}yc(n)}catch(b){t=b,Vs===n&&null!==n&&(Vs=n=n.return);continue}break}}function dc(){var e=ks.current;return ks.current=ig,null===e?ig:e}function Ac(){0!==Ys&&3!==Ys&&2!==Ys||(Ys=4),null===Rs||0===(268435455&Hs)&&0===(268435455&Fs)||sc(Rs,Xs)}function hc(e,t){var n=Ws;Ws|=2;var r=dc();for(Rs===e&&Xs===t||(Ds=null,Ic(e,t));;)try{pc();break}catch(a){Cc(e,a)}if(vo(),Ws=n,ks.current=r,null!==Vs)throw Error(o(261));return Rs=null,Xs=0,Ys}function pc(){for(;null!==Vs;)bc(Vs)}function mc(){for(;null!==Vs&&!Qe();)bc(Vs)}function bc(e){var t=Gs(e.alternate,e,Js);e.memoizedProps=e.pendingProps,null===t?yc(e):Vs=t,Ss.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Og(n,t,Js)))return void(Vs=n)}else{if(null!==(n=Qg(n,t)))return n.flags&=32767,void(Vs=n);if(null===e)return Ys=6,void(Vs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Vs=t);Vs=t=e}while(null!==t);0===Ys&&(Ys=5)}function vc(e,t,n){var r=mt,a=ws.transition;try{ws.transition=null,mt=1,function(e,t,n,r){do{Zc()}while(null!==Qs);if(0!==(6&Ws))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Rs&&(Vs=Rs=null,Xs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Os||(Os=!0,Rc(tt,(function(){return Zc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=ws.transition,ws.transition=null;var g=mt;mt=1;var s=Ws;Ws|=4,Ss.current=null,function(e,t){if(ea=Dt,Ir(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(y){n=null;break e}var g=0,s=-1,c=-1,l=0,u=0,f=e,I=null;t:for(;;){for(var C;f!==n||0!==a&&3!==f.nodeType||(s=g+a),f!==i||0!==r&&3!==f.nodeType||(c=g+r),3===f.nodeType&&(g+=f.nodeValue.length),null!==(C=f.firstChild);)I=f,f=C;for(;;){if(f===e)break t;if(I===n&&++l===a&&(s=g),I===i&&++u===r&&(c=g),null!==(C=f.nextSibling))break;I=(f=I).parentNode}f=C}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Dt=!1,$g=t;null!==$g;)if(e=(t=$g).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$g=e;else for(;null!==$g;){t=$g;try{var d=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==d){var A=d.memoizedProps,h=d.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?A:ho(t.type,A),h);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(y){Bc(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,$g=e;break}$g=t.return}d=ns,ns=!1}(e,n),hs(n,e),Cr(ta),Dt=!!ea,ta=ea=null,e.current=n,ms(n,e,a),Pe(),Ws=s,mt=g,ws.transition=i}else e.current=n;if(Os&&(Os=!1,Qs=e,Ps=a),i=e.pendingLanes,0===i&&(js=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,_e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ls)throw Ls=!1,e=Us,Us=null,e;0!==(1&Ps)&&0!==e.tag&&Zc(),i=e.pendingLanes,0!==(1&i)?e===qs?_s++:(_s=0,qs=e):_s=0,Ma()}(e,t,n,r)}finally{ws.transition=a,mt=r}return null}function Zc(){if(null!==Qs){var e=bt(Ps),t=ws.transition,n=mt;try{if(ws.transition=null,mt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ps=0,0!==(6&Ws))throw Error(o(331));var a=Ws;for(Ws|=4,$g=e.current;null!==$g;){var i=$g,g=i.child;if(0!==(16&$g.flags)){var s=i.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($g=l;null!==$g;){var u=$g;switch(u.tag){case 0:case 11:case 15:rs(8,u,i)}var f=u.child;if(null!==f)f.return=u,$g=f;else for(;null!==$g;){var I=(u=$g).sibling,C=u.return;if(is(u),u===l){$g=null;break}if(null!==I){I.return=C,$g=I;break}$g=C}}}var d=i.alternate;if(null!==d){var A=d.child;if(null!==A){d.child=null;do{var h=A.sibling;A.sibling=null,A=h}while(null!==A)}}$g=i}}if(0!==(2064&i.subtreeFlags)&&null!==g)g.return=i,$g=g;else e:for(;null!==$g;){if(0!==(2048&(i=$g).flags))switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var p=i.sibling;if(null!==p){p.return=i.return,$g=p;break e}$g=i.return}}var m=e.current;for($g=m;null!==$g;){var b=(g=$g).child;if(0!==(2064&g.subtreeFlags)&&null!==b)b.return=g,$g=b;else e:for(g=m;null!==$g;){if(0!==(2048&(s=$g).flags))try{switch(s.tag){case 0:case 11:case 15:as(9,s)}}catch(v){Bc(s,s.return,v)}if(s===g){$g=null;break e}var y=s.sibling;if(null!==y){y.return=s.return,$g=y;break e}$g=s.return}}if(Ws=a,Ma(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(v){}r=!0}return r}finally{mt=n,ws.transition=t}}return!1}function Gc(e,t,n){e=Yo(e,t=Cg(0,t=lg(n,t),1),1),t=tc(),null!==e&&(ht(e,1,t),ac(e,t))}function Bc(e,t,n){if(3===e.tag)Gc(e,e,n);else for(;null!==t;){if(3===t.tag){Gc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===js||!js.has(r))){t=Yo(t,e=dg(t,e=lg(n,e),1),1),e=tc(),null!==t&&(ht(t,1,e),ac(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Xs&n)===n&&(4===Ys||3===Ys&&(130023424&Xs)===Xs&&500>_e()-Ms?Ic(e,0):Ks|=n),ac(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ro(e,t))&&(ht(e,t,n),ac(e,n))}function wc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Wc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Sc(e,n)}function Rc(e,t){return je(e,t)}function Vc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xc(e,t,n,r){return new Vc(e,t,n,r)}function Jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=Xc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yc(e,t,n,r,a,i){var g=2;if(r=e,"function"===typeof e)Jc(e)&&(g=1);else if("string"===typeof e)g=5;else e:switch(e){case Z:return Nc(n.children,a,i,t);case G:g=8,a|=8;break;case B:return(e=Xc(12,n,t,2|a)).elementType=B,e.lanes=i,e;case W:return(e=Xc(13,n,t,a)).elementType=W,e.lanes=i,e;case R:return(e=Xc(19,n,t,a)).elementType=R,e.lanes=i,e;case J:return Hc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:g=10;break e;case S:g=9;break e;case w:g=11;break e;case V:g=14;break e;case X:g=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Xc(g,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Nc(e,t,n,r){return(e=Xc(7,e,r,t)).lanes=n,e}function Hc(e,t,n,r){return(e=Xc(22,e,r,t)).elementType=J,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Xc(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=Xc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ec(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Tc(e,t,n,r,a,o,i,g,s){return e=new Ec(e,t,n,g,s),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Xc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xo(o),e}function Mc(e){if(!e)return Sa;e:{if(Me(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Xa(n))return Ya(e,n,t)}return t}function zc(e,t,n,r,a,o,i,g,s){return(e=Tc(n,r,!0,e,0,o,0,g,s)).context=Mc(null),n=e.current,(o=xo(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,Yo(n,o,a),e.current.lanes=a,ht(e,a,r),ac(e,r),e}function Dc(e,t,n,r){var a=t.current,o=tc(),i=nc(a);return n=Mc(n),null===t.context?t.context=n:t.pendingContext=n,(t=xo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Yo(a,t,i))&&(rc(e,a,i,o),No(e,a,i)),i}function Lc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Uc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function jc(e,t){Uc(e,t),(e=e.alternate)&&Uc(e,t)}Gs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Wa.current)bg=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bg=!1,function(e,t,n){switch(t.tag){case 3:Rg(t),Io();break;case 5:ii(t);break;case 1:Xa(t.type)&&Na(t);break;case 4:ai(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;ka(po,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ka(si,1&si.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fg(e,t,n):(ka(si,1&si.current),null!==(e=Lg(e,t,n))?e.sibling:null);ka(si,1&si.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zg(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ka(si,si.current),r)break;return null;case 22:case 23:return t.lanes=0,Bg(e,t,n)}return Lg(e,t,n)}(e,t,n);bg=0!==(131072&e.flags)}else bg=!1,ao&&0!==(1048576&t.flags)&&$a(t,Ua,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Dg(e,t),e=t.pendingProps;var a=Va(t,wa.current);Bo(t,n),a=Gi(null,t,r,e,a,n);var i=Bi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xa(r)?(i=!0,Na(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Xo(t),a.updater=Mo,t.stateNode=a,a._reactInternals=t,Uo(t,r,e,n),t=Wg(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),yg(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Dg(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===w)return 11;if(e===V)return 14}return 2}(r),e=ho(r,e),a){case 0:t=Sg(null,t,r,e,n);break e;case 1:t=wg(null,t,r,e,n);break e;case 11:t=vg(null,t,r,e,n);break e;case 14:t=Zg(null,t,r,ho(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Sg(e,t,r,a=t.elementType===r?a:ho(r,a),n);case 1:return r=t.type,a=t.pendingProps,wg(e,t,r,a=t.elementType===r?a:ho(r,a),n);case 3:e:{if(Rg(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Jo(e,t),Fo(t,r,null,n);var g=t.memoizedState;if(r=g.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Vg(e,t,r,n,a=lg(Error(o(423)),t));break e}if(r!==a){t=Vg(e,t,r,n,a=lg(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Io(),r===a){t=Lg(e,t,n);break e}yg(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,g=a.children,na(r,a)?g=null:null!==i&&na(r,i)&&(t.flags|=32),kg(e,t),yg(e,t,g,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fg(e,t,n);case 4:return ai(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):yg(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,vg(e,t,r,a=t.elementType===r?a:ho(r,a),n);case 7:return yg(e,t,t.pendingProps,n),t.child;case 8:case 12:return yg(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,g=a.value,ka(po,r._currentValue),r._currentValue=g,null!==i)if(gr(i.value,g)){if(i.children===a.children&&!Wa.current){t=Lg(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){g=i.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=xo(-1,n&-n)).tag=2;var l=i.updateQueue;if(null!==l){var u=(l=l.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Go(i.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===i.tag)g=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(g=i.return))throw Error(o(341));g.lanes|=n,null!==(s=g.alternate)&&(s.lanes|=n),Go(g,n,t),g=i.sibling}else g=i.child;if(null!==g)g.return=i;else for(g=i;null!==g;){if(g===t){g=null;break}if(null!==(i=g.sibling)){i.return=g.return,g=i;break}g=g.return}i=g}yg(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Bo(t,n),r=r(a=ko(a)),t.flags|=1,yg(e,t,r,n),t.child;case 14:return a=ho(r=t.type,t.pendingProps),Zg(e,t,r,a=ho(r.type,a),n);case 15:return Gg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ho(r,a),Dg(e,t),t.tag=1,Xa(r)?(e=!0,Na(t)):e=!1,Bo(t,n),Do(t,r,a),Uo(t,r,a,n),Wg(null,t,r,!0,e,n);case 19:return zg(e,t,n);case 22:return Bg(e,t,n)}throw Error(o(156,t.tag))};var Oc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Pc(e){this._internalRoot=e}function _c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var g=a;a=function(){var e=Lc(i);g.call(e)}}Dc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Lc(i);o.call(e)}}var i=zc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=i,e[Ca]=i.current,Mr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var g=r;r=function(){var e=Lc(s);g.call(e)}}var s=Tc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[Ca]=s.current,Mr(8===e.nodeType?e.parentNode:e),uc((function(){Dc(t,s,n,r)})),s}(n,t,e,a,r);return Lc(i)}Pc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Dc(e,t,null,null)},Pc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Dc(null,e,null,null)})),t[Ca]=null}},Pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&0!==t&&t<Jt[n].priority;n++);Jt.splice(n,0,e),0===n&&Ht(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(pt(t,1|n),ac(t,_e()),0===(6&Ws)&&(zs=_e()+500,Ma()))}break;case 13:uc((function(){var t=Ro(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),jc(e,1)}},vt=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)rc(t,e,134217728,tc());jc(e,134217728)}},Zt=function(e){if(13===e.tag){var t=nc(e),n=Ro(e,t);if(null!==n)rc(n,e,t,tc());jc(e,t)}},Gt=function(){return mt},Bt=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}},ve=function(e,t,n){switch(t){case"input":if(q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ya(r);if(!a)throw Error(o(90));j(r),q(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},we=lc,We=uc;var tl={usingClientEntryPoint:!1,Events:[ma,ba,ya,ke,Se,lc]},nl={findFiberByHostInstance:pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Le(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(rl),ot=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!_c(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:v,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!_c(e))throw Error(o(299));var n=!1,r="",a=Oc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Tc(e,1,!1,null,0,n,0,r,a),e[Ca]=t.current,Mr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Le(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!qc(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!_c(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",g=Oc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(g=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,a,0,i,g),e[Ca]=t.current,Mr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Pc(t)},t.render=function(e,t,n){if(!qc(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ca]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},77:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,a="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var g,s,c,l;if(Array.isArray(e)){if((g=e.length)!=i.length)return!1;for(s=g;0!==s--;)if(!o(e[s],i[s]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(l=e.entries();!(s=l.next()).done;)if(!i.has(s.value[0]))return!1;for(l=e.entries();!(s=l.next()).done;)if(!o(s.value[1],i.get(s.value[0])))return!1;return!0}if(r&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(l=e.entries();!(s=l.next()).done;)if(!i.has(s.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((g=e.length)!=i.length)return!1;for(s=g;0!==s--;)if(e[s]!==i[s])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof i.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof i.toString)return e.toString()===i.toString();if((g=(c=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(s=g;0!==s--;)if(!Object.prototype.hasOwnProperty.call(i,c[s]))return!1;if(t&&e instanceof Element)return!1;for(s=g;0!==s--;)if(("_owner"!==c[s]&&"__v"!==c[s]&&"__o"!==c[s]||!e.$$typeof)&&!o(e[c[s]],i[c[s]]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},5251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default&&o.default[e]?o.default[e]:e};var r,a=n(2374),o=(r=a)&&r.__esModule?r:{default:r}},4497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnProps=f,t.default=I;var r=s(n(2791)),a=s(n(2007)),o=s(n(6700)),i=s(n(5251)),g=n(1884);function s(e){return e&&e.__esModule?e:{default:e}}var c={xs:g.ColumnSizeType,sm:g.ColumnSizeType,md:g.ColumnSizeType,lg:g.ColumnSizeType,xl:g.ColumnSizeType,xsOffset:a.default.number,smOffset:a.default.number,mdOffset:a.default.number,lgOffset:a.default.number,xlOffset:a.default.number,first:g.ViewportSizeType,last:g.ViewportSizeType,className:a.default.string,tagName:a.default.string,children:a.default.node},l={xs:"col-xs",sm:"col-sm",md:"col-md",lg:"col-lg",xl:"col-xl",xsOffset:"col-xs-offset",smOffset:"col-sm-offset",mdOffset:"col-md-offset",lgOffset:"col-lg-offset",xlOffset:"col-xl-offset"};function u(e){var t=[];return e.className&&t.push(e.className),e.first&&t.push((0,i.default)("first-"+e.first)),e.last&&t.push((0,i.default)("last-"+e.last)),Object.keys(e).filter((function(e){return l[e]})).map((function(t){return(0,i.default)("number"===typeof(n=e[t])&&isFinite(n)&&Math.floor(n)===n?l[t]+"-"+e[t]:l[t]);var n})).concat(t)}function f(e){return(0,o.default)(c,e,u(e))}function I(e){var t=e.tagName,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["tagName"]);return r.default.createElement(t||"div",f(n))}I.propTypes=c},4793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=g(n(2791)),a=g(n(2007)),o=g(n(6700)),i=g(n(5251));function g(e){return e&&e.__esModule?e:{default:e}}var s={fluid:a.default.bool,className:a.default.string,tagName:a.default.string,children:a.default.node};function c(e){var t=(0,i.default)(e.fluid?"container-fluid":"container"),n=[e.className,t];return r.default.createElement(e.tagName||"div",(0,o.default)(s,e,n))}c.propTypes=s},5828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRowProps=u,t.default=f;var r=s(n(5251)),a=s(n(2791)),o=s(n(2007)),i=s(n(6700)),g=n(1884);function s(e){return e&&e.__esModule?e:{default:e}}var c=["start","center","end","top","middle","bottom","around","between"],l={reverse:o.default.bool,start:g.ViewportSizeType,center:g.ViewportSizeType,end:g.ViewportSizeType,top:g.ViewportSizeType,middle:g.ViewportSizeType,bottom:g.ViewportSizeType,around:g.ViewportSizeType,between:g.ViewportSizeType,className:o.default.string,tagName:o.default.string,children:o.default.node};function u(e){return(0,i.default)(l,e,function(e){for(var t=[e.className,(0,r.default)("row")],n=0;n<c.length;++n){var a=c[n],o=e[a];o&&t.push((0,r.default)(a+"-"+o))}return e.reverse&&t.push((0,r.default)("reverse")),t}(e))}function f(e){return a.default.createElement(e.tagName||"div",u(e))}f.propTypes=l},6700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r={};Object.keys(t).filter((function(t){return"children"===t||!e[t]})).forEach((function(e){return r[e]=t[e]}));var a=n.filter((function(e){return e})).join(" ");return Object.assign({},r,{className:a})}},9608:function(e,t,n){"use strict";t.JX=t.X2=void 0;var r=n(5828);var a=n(4497);var o=s(n(4793)),i=s(r),g=s(a);function s(e){return e&&e.__esModule?e:{default:e}}o.default,t.X2=i.default,t.JX=g.default},1884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportSizeType=t.ColumnSizeType=void 0;var r,a=n(2007),o=(r=a)&&r.__esModule?r:{default:r};t.ColumnSizeType=o.default.oneOfType([o.default.number,o.default.bool]),t.ViewportSizeType=o.default.oneOf(["xs","sm","md","lg","xl"])},1372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen");function h(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case g:case i:case f:case I:return e;default:switch(e=e&&e.$$typeof){case l:case c:case u:case d:case C:case s:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference"),t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=u,t.Fragment=o,t.Lazy=d,t.Memo=C,t.Portal=a,t.Profiler=g,t.StrictMode=i,t.Suspense=f,t.SuspenseList=I,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return h(e)===c},t.isContextProvider=function(e){return h(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return h(e)===u},t.isFragment=function(e){return h(e)===o},t.isLazy=function(e){return h(e)===d},t.isMemo=function(e){return h(e)===C},t.isPortal=function(e){return h(e)===a},t.isProfiler=function(e){return h(e)===g},t.isStrictMode=function(e){return h(e)===i},t.isSuspense=function(e){return h(e)===f},t.isSuspenseList=function(e){return h(e)===I},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===g||e===i||e===f||e===I||e===A||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===C||e.$$typeof===s||e.$$typeof===c||e.$$typeof===u||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=h},7441:function(e,t,n){"use strict";e.exports=n(1372)},9008:function(e,t,n){e.exports=function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var n=t(e);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e))return e}function i(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,g=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){g=!0,a=s}finally{try{i||null==n.return||n.return()}finally{if(g)throw a}}return o}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||i(e,t)||s(e,t)||c()}function u(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function f(e,t){if(null==e)return{};var n,r,a=u(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var I={exports:{}},C={exports:{}},d={},A="function"===typeof Symbol&&Symbol.for,h=A?Symbol.for("react.element"):60103,p=A?Symbol.for("react.portal"):60106,m=A?Symbol.for("react.fragment"):60107,b=A?Symbol.for("react.strict_mode"):60108,y=A?Symbol.for("react.profiler"):60114,v=A?Symbol.for("react.provider"):60109,Z=A?Symbol.for("react.context"):60110,G=A?Symbol.for("react.async_mode"):60111,B=A?Symbol.for("react.concurrent_mode"):60111,k=A?Symbol.for("react.forward_ref"):60112,S=A?Symbol.for("react.suspense"):60113,w=A?Symbol.for("react.suspense_list"):60120,W=A?Symbol.for("react.memo"):60115,R=A?Symbol.for("react.lazy"):60116,V=A?Symbol.for("react.block"):60121,X=A?Symbol.for("react.fundamental"):60117,J=A?Symbol.for("react.responder"):60118,x=A?Symbol.for("react.scope"):60119;function Y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case h:switch(e=e.type){case G:case B:case m:case y:case b:case S:return e;default:switch(e=e&&e.$$typeof){case Z:case k:case R:case W:case v:return e;default:return t}}case p:return t}}}function N(e){return Y(e)===B}d.AsyncMode=G,d.ConcurrentMode=B,d.ContextConsumer=Z,d.ContextProvider=v,d.Element=h,d.ForwardRef=k,d.Fragment=m,d.Lazy=R,d.Memo=W,d.Portal=p,d.Profiler=y,d.StrictMode=b,d.Suspense=S,d.isAsyncMode=function(e){return N(e)||Y(e)===G},d.isConcurrentMode=N,d.isContextConsumer=function(e){return Y(e)===Z},d.isContextProvider=function(e){return Y(e)===v},d.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===h},d.isForwardRef=function(e){return Y(e)===k},d.isFragment=function(e){return Y(e)===m},d.isLazy=function(e){return Y(e)===R},d.isMemo=function(e){return Y(e)===W},d.isPortal=function(e){return Y(e)===p},d.isProfiler=function(e){return Y(e)===y},d.isStrictMode=function(e){return Y(e)===b},d.isSuspense=function(e){return Y(e)===S},d.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===m||e===B||e===y||e===b||e===S||e===w||"object"===typeof e&&null!==e&&(e.$$typeof===R||e.$$typeof===W||e.$$typeof===v||e.$$typeof===Z||e.$$typeof===k||e.$$typeof===X||e.$$typeof===J||e.$$typeof===x||e.$$typeof===V)},d.typeOf=Y,C.exports=d;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function H(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(o){return!1}}H()&&Object.assign;var F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function K(e,t,n,r,a){}Function.call.bind(Object.prototype.hasOwnProperty),K.resetWarningCache=function(){},C.exports;var E=F;function T(){}function M(){}M.resetWarningCache=T;var z=function(){function e(e,t,n,r,a,o){if(o!==E){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:M,resetWarningCache:T};return n.PropTypes=n,n};I.exports=z();var D=I.exports;function L(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),a=0,o=n.length;a<o;++a)r[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}function U(e,t,n){var r=void 0===t?null:t,a=L(e,void 0!==n&&n),o=a.indexOf("\n",10)+1,i=a.substring(o)+(r?"//# sourceMappingURL="+r:""),g=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(g)}function j(e,t,n){var r;return function(a){return r=r||U(e,t,n),new Worker(r,a)}}var O=j("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),Q=["constraints","onError","onLoad","onScan","resolution","qrArea"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(){return new O},$=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().forEach((function(t){e.removeTrack(t),t.stop()}))):e.stop())},ee=function(e){var t=e.constraints,a=e.onError,o=e.onLoad,i=e.onScan,g=e.resolution,s=e.qrArea,c=f(e,Q),u=n.useRef(null),I=n.useRef(null),C=n.useRef(document.createElement("canvas")),d=n.useRef(null),A=n.useRef(),h=l(n.useState(null),2),p=h[0],m=h[1],b=n.useRef(!1),y=n.useRef();n.useEffect((function(){y.current=q();var e=y.current;return e.onmessage=function(e){i&&i(e.data?_(_({},e.data),{},{canvas:C.current}):null),b.current=!1},function(){e.terminate()}}),[i]);var v=JSON.stringify(s),Z=n.useCallback((function(){var e=JSON.parse(v),t=y.current,n=I.current&&I.current.readyState===I.current.HAVE_ENOUGH_DATA;if(!b.current&&n){b.current=!0;var r,a=I.current.videoWidth,o=I.current.videoHeight,i=a>o?a:o,s=Math.floor(g/i*100)/100;o=Math.floor(s*o),a=Math.floor(s*a),C.current.width=a,C.current.height=o,d.current=C.current.getContext("2d"),d.current.drawImage(I.current,0,0,a,o),r=e&&2===e.length&&e[0]>0&&e[1]>0?d.current.getImageData(Math.floor((a-e[0])/2),Math.floor((o-e[1])/2),e[0],e[1]):d.current.getImageData(0,0,a,o),t.postMessage(r)}A.current=requestAnimationFrame(Z)}),[g,v]),G=JSON.stringify(t);return n.useEffect((function(){var e=JSON.parse(G),t=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(t){u.current=e;try{I.current&&(I.current.srcObject=e,I.current.setAttribute("playsinline",!0))}catch(n){m(window.URL.createObjectURL(e))}o&&o(),A.current=requestAnimationFrame(Z)}else $(e)})).catch((function(e){return t?a(e):null})),function(){cancelAnimationFrame(A.current),t=!1,$(u.current),p&&window.URL.revokeObjectURL(p)}}),[Z,G,a,o,p]),n.createElement("video",r({autoPlay:!0,playsInline:!0,src:p,ref:I},c))};return ee.propTypes={constraints:D.object,onError:D.func.isRequired,onLoad:D.func,onScan:D.func.isRequired,resolution:D.number,qrArea:D.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(n(2791))},4805:function(e,t,n){var r;r=function(e){return function(){var t={"./node_modules/css-mediaquery/index.js":function(e,t){"use strict";t.match=function(e,t){return g(e).some((function(e){var n=e.inverse,r="all"===e.type||t.type===e.type;if(r&&n||!r&&!n)return!1;var a=e.expressions.every((function(e){var n=e.feature,r=e.modifier,a=e.value,o=t[n];if(!o)return!1;switch(n){case"orientation":case"scan":return o.toLowerCase()===a.toLowerCase();case"width":case"height":case"device-width":case"device-height":a=l(a),o=l(o);break;case"resolution":a=c(a),o=c(o);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":a=s(a),o=s(o);break;case"grid":case"color":case"color-index":case"monochrome":a=parseInt(a,10)||1,o=parseInt(o,10)||0}switch(r){case"min":return o>=a;case"max":return o<=a;default:return o===a}}));return a&&!n||!a&&n}))},t.parse=g;var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,r=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,a=/^(?:(min|max)-)?(.+)/,o=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function g(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(n),o=t[1],i=t[2],g=t[3]||"",s={};return s.inverse=!!o&&"not"===o.toLowerCase(),s.type=i?i.toLowerCase():"all",g=g.match(/\([^\)]+\)/g)||[],s.expressions=g.map((function(e){var t=e.match(r),n=t[1].toLowerCase().match(a);return{modifier:n[1],feature:n[2],value:t[2]}})),s}))}function s(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function c(e){var t=parseFloat(e);switch(String(e).match(i)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function l(e){var t=parseFloat(e);switch(String(e).match(o)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},"./node_modules/hyphenate-style-name/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=/[A-Z]/g,a=/^ms-/,o={};function i(e){return"-"+e.toLowerCase()}var g=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,i);return o[e]=a.test(t)?"-"+t:t}},"./node_modules/matchmediaquery/index.js":function(e,t,n){"use strict";var r=n("./node_modules/css-mediaquery/index.js").match,a="undefined"!==typeof window?window.matchMedia:null;function o(e,t,n){var o=this;if(a&&!n){var i=a.call(window,e);this.matches=i.matches,this.media=i.media,i.addListener(g)}else this.matches=r(e,t),this.media=e;function g(e){o.matches=e.matches,o.media=e.media}this.addListener=function(e){i&&i.addListener(e)},this.removeListener=function(e){i&&i.removeListener(e)},this.dispose=function(){i&&i.removeListener(g)}}e.exports=function(e,t,n){return new o(e,t,n)}},"./node_modules/object-assign/index.js":function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,a){for(var o,i,g=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in o=Object(arguments[s]))n.call(o,c)&&(g[c]=o[c]);if(t){i=t(o);for(var l=0;l<i.length;l++)r.call(o,i[l])&&(g[i[l]]=o[i[l]])}}return g}},"./node_modules/prop-types/checkPropTypes.js":function(e,t,n){"use strict";var r=function(){},a=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),o={},i=n("./node_modules/prop-types/lib/has.js");function g(e,t,n,g,s){for(var c in e)if(i(e,c)){var l;try{if("function"!==typeof e[c]){var u=Error((g||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw u.name="Invariant Violation",u}l=e[c](t,c,g,n,null,a)}catch(I){l=I}if(!l||l instanceof Error||r((g||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in o)){o[l.message]=!0;var f=s?s():"";r("Failed "+n+" type: "+l.message+(null!=f?f:""))}}}r=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},g.resetWarningCache=function(){o={}},e.exports=g},"./node_modules/prop-types/factoryWithTypeCheckers.js":function(e,t,n){"use strict";var r=n("./node_modules/react-is/index.js"),a=n("./node_modules/object-assign/index.js"),o=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),i=n("./node_modules/prop-types/lib/has.js"),g=n("./node_modules/prop-types/checkPropTypes.js"),s=function(){};function c(){return null}s=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},e.exports=function(e,t){var n="function"===typeof Symbol&&Symbol.iterator,l="@@iterator",u="<<anonymous>>",f={array:A("array"),bigint:A("bigint"),bool:A("boolean"),func:A("function"),number:A("number"),object:A("object"),string:A("string"),symbol:A("symbol"),any:d(c),arrayOf:function(e){return d((function(t,n,r,a,i){if("function"!==typeof e)return new C("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var g=t[n];if(!Array.isArray(g))return new C("Invalid "+a+" `"+i+"` of type `"+m(g)+"` supplied to `"+r+"`, expected an array.");for(var s=0;s<g.length;s++){var c=e(g,s,r,a,i+"["+s+"]",o);if(c instanceof Error)return c}return null}))},element:d((function(t,n,r,a,o){var i=t[n];return e(i)?null:new C("Invalid "+a+" `"+o+"` of type `"+m(i)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:d((function(e,t,n,a,o){var i=e[t];return r.isValidElementType(i)?null:new C("Invalid "+a+" `"+o+"` of type `"+m(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return d((function(t,n,r,a,o){if(!(t[n]instanceof e)){var i=e.name||u;return new C("Invalid "+a+" `"+o+"` of type `"+((g=t[n]).constructor&&g.constructor.name?g.constructor.name:u)+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}var g;return null}))},node:d((function(e,t,n,r,a){return p(e[t])?null:new C("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,r,a,g){if("function"!==typeof e)return new C("Property `"+g+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],c=m(s);if("object"!==c)return new C("Invalid "+a+" `"+g+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var l in s)if(i(s,l)){var u=e(s,l,r,a,g+"."+l,o);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?d((function(t,n,r,a,o){for(var i=t[n],g=0;g<e.length;g++)if(I(i,e[g]))return null;var s=JSON.stringify(e,(function(e,t){return"symbol"===b(t)?String(t):t}));return new C("Invalid "+a+" `"+o+"` of value `"+String(i)+"` supplied to `"+r+"`, expected one of "+s+".")})):(s(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),c)},oneOfType:function(e){if(!Array.isArray(e))return s("Invalid argument supplied to oneOfType, expected an instance of array."),c;for(var t=0;t<e.length;t++){var n=e[t];if("function"!==typeof n)return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+y(n)+" at index "+t+"."),c}return d((function(t,n,r,a,g){for(var s=[],c=0;c<e.length;c++){var l=(0,e[c])(t,n,r,a,g,o);if(null==l)return null;l.data&&i(l.data,"expectedType")&&s.push(l.data.expectedType)}return new C("Invalid "+a+" `"+g+"` supplied to `"+r+"`"+(s.length>0?", expected one of type ["+s.join(", ")+"]":"")+".")}))},shape:function(e){return d((function(t,n,r,a,i){var g=t[n],s=m(g);if("object"!==s)return new C("Invalid "+a+" `"+i+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var l=e[c];if("function"!==typeof l)return h(r,a,i,c,b(l));var u=l(g,c,r,a,i+"."+c,o);if(u)return u}return null}))},exact:function(e){return d((function(t,n,r,g,s){var c=t[n],l=m(c);if("object"!==l)return new C("Invalid "+g+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var u=a({},t[n],e);for(var f in u){var I=e[f];if(i(e,f)&&"function"!==typeof I)return h(r,g,s,f,b(I));if(!I)return new C("Invalid "+g+" `"+s+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var d=I(c,f,r,g,s+"."+f,o);if(d)return d}return null}))}};function I(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function C(e,t){this.message=e,this.data=t&&"object"===typeof t?t:{},this.stack=""}function d(e){var n={},r=0;function a(a,i,g,c,l,f,I){if(c=c||u,f=f||g,I!==o){if(t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}if("undefined"!==typeof console){var A=c+":"+g;!n[A]&&r<3&&(s("You are manually calling a React.PropTypes validation function for the `"+f+"` prop on `"+c+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[A]=!0,r++)}}return null==i[g]?a?null===i[g]?new C("The "+l+" `"+f+"` is marked as required in `"+c+"`, but its value is `null`."):new C("The "+l+" `"+f+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(i,g,c,l,f)}var i=a.bind(null,!1);return i.isRequired=a.bind(null,!0),i}function A(e){return d((function(t,n,r,a,o,i){var g=t[n];return m(g)!==e?new C("Invalid "+a+" `"+o+"` of type `"+b(g)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function h(e,t,n,r,a){return new C((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+a+"`.")}function p(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(p);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[l]);if("function"===typeof t)return t}(t);if(!r)return!1;var a,o=r.call(t);if(r!==t.entries){for(;!(a=o.next()).done;)if(!p(a.value))return!1}else for(;!(a=o.next()).done;){var i=a.value;if(i&&!p(i[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function b(e){if("undefined"===typeof e||null===e)return""+e;var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return C.prototype=Error.prototype,f.checkPropTypes=g,f.resetWarningCache=g.resetWarningCache,f.PropTypes=f,f}},"./node_modules/prop-types/index.js":function(e,t,n){var r=n("./node_modules/react-is/index.js");e.exports=n("./node_modules/prop-types/factoryWithTypeCheckers.js")(r.isElement,!0)},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./node_modules/prop-types/lib/has.js":function(e){e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":function(e,t){"use strict";!function(){var e="function"===typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,g=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,I=e?Symbol.for("react.suspense_list"):60120,C=e?Symbol.for("react.memo"):60115,d=e?Symbol.for("react.lazy"):60116,A=e?Symbol.for("react.block"):60121,h=e?Symbol.for("react.fundamental"):60117,p=e?Symbol.for("react.responder"):60118,m=e?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var I=e.type;switch(I){case c:case l:case a:case i:case o:case f:return I;default:var A=I&&I.$$typeof;switch(A){case s:case u:case d:case C:case g:return A;default:return t}}case r:return t}}}var y=c,v=l,Z=s,G=g,B=n,k=u,S=a,w=d,W=C,R=r,V=i,X=o,J=f,x=!1;function Y(e){return b(e)===l}t.AsyncMode=y,t.ConcurrentMode=v,t.ContextConsumer=Z,t.ContextProvider=G,t.Element=B,t.ForwardRef=k,t.Fragment=S,t.Lazy=w,t.Memo=W,t.Portal=R,t.Profiler=V,t.StrictMode=X,t.Suspense=J,t.isAsyncMode=function(e){return x||(x=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Y(e)||b(e)===c},t.isConcurrentMode=Y,t.isContextConsumer=function(e){return b(e)===s},t.isContextProvider=function(e){return b(e)===g},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return b(e)===u},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===d},t.isMemo=function(e){return b(e)===C},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===i},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===l||e===i||e===o||e===f||e===I||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===C||e.$$typeof===g||e.$$typeof===s||e.$$typeof===u||e.$$typeof===h||e.$$typeof===p||e.$$typeof===m||e.$$typeof===A)},t.typeOf=b}()},"./node_modules/react-is/index.js":function(e,t,n){"use strict";e.exports=n("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),a=n.length;if(r.length!==a)return!1;for(var o=0;o<a;o++){var i=n[o];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}function a(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}n.r(t),n.d(t,{shallowEqualArrays:function(){return a},shallowEqualObjects:function(){return r}})},"./src/Component.ts":function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n("./src/useMediaQuery.ts"));t.default=function(e){var t=e.children,n=e.device,a=e.onChange,i=r(e,["children","device","onChange"]),g=(0,o.default)(i,n,a);return"function"===typeof t?t(g):g?t:null}},"./src/Context.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n("react").createContext)(void 0);t.default=r},"./src/index.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Context=t.toQuery=t.useMediaQuery=t.default=void 0;var a=r(n("./src/useMediaQuery.ts"));t.useMediaQuery=a.default;var o=r(n("./src/Component.ts"));t.default=o.default;var i=r(n("./src/toQuery.ts"));t.toQuery=i.default;var g=r(n("./src/Context.ts"));t.Context=g.default},"./src/mediaQuery.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n("./node_modules/prop-types/index.js")),g=i.default.oneOfType([i.default.string,i.default.number]),s={all:i.default.bool,grid:i.default.bool,aural:i.default.bool,braille:i.default.bool,handheld:i.default.bool,print:i.default.bool,projection:i.default.bool,screen:i.default.bool,tty:i.default.bool,tv:i.default.bool,embossed:i.default.bool},c={orientation:i.default.oneOf(["portrait","landscape"]),scan:i.default.oneOf(["progressive","interlace"]),aspectRatio:i.default.string,deviceAspectRatio:i.default.string,height:g,deviceHeight:g,width:g,deviceWidth:g,color:i.default.bool,colorIndex:i.default.bool,monochrome:i.default.bool,resolution:g,type:Object.keys(s)},l=a(c,["type"]),u=r({minAspectRatio:i.default.string,maxAspectRatio:i.default.string,minDeviceAspectRatio:i.default.string,maxDeviceAspectRatio:i.default.string,minHeight:g,maxHeight:g,minDeviceHeight:g,maxDeviceHeight:g,minWidth:g,maxWidth:g,minDeviceWidth:g,maxDeviceWidth:g,minColor:i.default.number,maxColor:i.default.number,minColorIndex:i.default.number,maxColorIndex:i.default.number,minMonochrome:i.default.number,maxMonochrome:i.default.number,minResolution:g,maxResolution:g},l),f=r(r({},s),u);t.default={all:f,types:s,matchers:c,features:u}},"./src/toQuery.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("./node_modules/hyphenate-style-name/index.js")),o=r(n("./src/mediaQuery.ts"));t.default=function(e){var t=[];return Object.keys(o.default.all).forEach((function(n){var r=e[n];null!=r&&t.push(function(e,t){var n=(0,a.default)(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?"not ".concat(n):"(".concat(n,": ").concat(t,")")}(n,r))})),t.join(" and ")}},"./src/useMediaQuery.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n("react"),o=r(n("./node_modules/matchmediaquery/index.js")),i=r(n("./node_modules/hyphenate-style-name/index.js")),g=n("./node_modules/shallow-equal/dist/index.esm.js"),s=r(n("./src/toQuery.ts")),c=r(n("./src/Context.ts")),l=function(e){if(e)return Object.keys(e).reduce((function(t,n){return t[(0,i.default)(n)]=e[n],t}),{})},u=function(){var e=(0,a.useRef)(!1);return(0,a.useEffect)((function(){e.current=!0}),[]),e.current},f=function(e){var t=function(){return function(e){return e.query||(0,s.default)(e)}(e)},n=(0,a.useState)(t),r=n[0],o=n[1];return(0,a.useEffect)((function(){var e=t();r!==e&&o(e)}),[e]),r};t.default=function(e,t,n){var r=function(e){var t=(0,a.useContext)(c.default),n=function(){return l(e)||l(t)},r=(0,a.useState)(n),o=r[0],i=r[1];return(0,a.useEffect)((function(){var e=n();(0,g.shallowEqualObjects)(o,e)||i(e)}),[e,t]),o}(t),i=f(e);if(!i)throw new Error("Invalid or missing MediaQuery!");var s=function(e,t){var n=function(){return(0,o.default)(e,t||{},!!t)},r=(0,a.useState)(n),i=r[0],g=r[1],s=u();return(0,a.useEffect)((function(){if(s){var e=n();return g(e),function(){e&&e.dispose()}}}),[e,t]),i}(i,r),I=function(e){var t=(0,a.useState)(e.matches),n=t[0],r=t[1];return(0,a.useEffect)((function(){var t=function(e){r(e.matches)};return e.addListener(t),r(e.matches),function(){e.removeListener(t)}}),[e]),n}(s),C=u();return(0,a.useEffect)((function(){C&&n&&n(I)}),[I]),(0,a.useEffect)((function(){return function(){s&&s.dispose()}}),[]),I}},react:function(t){"use strict";t.exports=e}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}return r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r("./src/index.ts")}()},e.exports=r(n(2791))},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,g=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:o,_owner:g.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),I=Symbol.iterator;var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,A={};function h(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||C}function p(){}function m(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||C}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},p.prototype=h.prototype;var b=m.prototype=new p;b.constructor=m,d(b,h.prototype),b.isPureReactComponent=!0;var y=Array.isArray,v=Object.prototype.hasOwnProperty,Z={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,r){var a,o={},i=null,g=null;if(null!=t)for(a in void 0!==t.ref&&(g=t.ref),void 0!==t.key&&(i=""+t.key),t)v.call(t,a)&&!G.hasOwnProperty(a)&&(o[a]=t[a]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===o[a]&&(o[a]=s[a]);return{$$typeof:n,type:e,key:i,ref:g,props:o,_owner:Z.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function w(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function W(e,t,a,o,i){var g=typeof e;"undefined"!==g&&"boolean"!==g||(e=null);var s=!1;if(null===e)s=!0;else switch(g){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return i=i(s=e),e=""===o?"."+w(s,0):o,y(i)?(a="",null!=e&&(a=e.replace(S,"$&/")+"/"),W(i,t,a,"",(function(e){return e}))):null!=i&&(k(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(s=0,o=""===o?".":o+":",y(e))for(var c=0;c<e.length;c++){var l=o+w(g=e[c],c);s+=W(g,t,a,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(g=e.next()).done;)s+=W(g=g.value,t,a,l=o+w(g,c++),i);else if("object"===g)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],a=0;return W(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function V(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var X={current:null},J={transition:null},x={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:J,ReactCurrentOwner:Z};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=h,t.Fragment=a,t.Profiler=i,t.PureComponent=m,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=d({},e.props),o=e.key,i=e.ref,g=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,g=Z.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)v.call(t,c)&&!G.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];a.children=s}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:g}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:g,_context:e},e.Consumer=e},t.createElement=B,t.createFactory=function(e){var t=B.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:V}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=J.transition;J.transition={};try{e()}finally{J.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return X.current.useCallback(e,t)},t.useContext=function(e){return X.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return X.current.useDeferredValue(e)},t.useEffect=function(e,t){return X.current.useEffect(e,t)},t.useId=function(){return X.current.useId()},t.useImperativeHandle=function(e,t,n){return X.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return X.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return X.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return X.current.useMemo(e,t)},t.useReducer=function(e,t,n){return X.current.useReducer(e,t,n)},t.useRef=function(e){return X.current.useRef(e)},t.useState=function(e){return X.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return X.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return X.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var g=2*(r+1)-1,s=e[g],c=g+1,l=e[c];if(0>o(s,n))c<a&&0>o(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[g]=n,r=g);else{if(!(c<a&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var g=Date,s=g.now();t.unstable_now=function(){return g.now()-s}}var c=[],l=[],u=1,f=null,I=3,C=!1,d=!1,A=!1,h="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,m="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function y(e){if(A=!1,b(e),!d)if(null!==r(c))d=!0,J(v);else{var t=r(l);null!==t&&x(y,t.startTime-e)}}function v(e,n){d=!1,A&&(A=!1,p(k),k=-1),C=!0;var o=I;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!W());){var i=f.callback;if("function"===typeof i){f.callback=null,I=f.priorityLevel;var g=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof g?f.callback=g:f===r(c)&&a(c),b(n)}else a(c);f=r(c)}if(null!==f)var s=!0;else{var u=r(l);null!==u&&x(y,u.startTime-n),s=!1}return s}finally{f=null,I=o,C=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var Z,G=!1,B=null,k=-1,S=5,w=-1;function W(){return!(t.unstable_now()-w<S)}function R(){if(null!==B){var e=t.unstable_now();w=e;var n=!0;try{n=B(!0,e)}finally{n?Z():(G=!1,B=null)}}else G=!1}if("function"===typeof m)Z=function(){m(R)};else if("undefined"!==typeof MessageChannel){var V=new MessageChannel,X=V.port2;V.port1.onmessage=R,Z=function(){X.postMessage(null)}}else Z=function(){h(R,0)};function J(e){B=e,G||(G=!0,Z())}function x(e,n){k=h((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){d||C||(d=!0,J(v))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var g=-1;break;case 2:g=250;break;case 5:g=1073741823;break;case 4:g=1e4;break;default:g=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:o,expirationTime:g=o+g,sortIndex:-1},o>i?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(A?(p(k),k=-1):A=!0,x(y,o-i))):(e.sortIndex=g,n(c,e),d||C||(d=!0,J(v))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var g=Object.prototype.hasOwnProperty.bind(t),s=0;s<o.length;s++){var c=o[s];if(!g(c))return!1;var l=e[c],u=t[c];if(!1===(a=n?n.call(r,l,u,c):void 0)||void 0===a&&l!==u)return!1}return!0}},3430:function(e,t,n){var r=n(4907);e.exports=function(e){return"string"!==typeof e?e:r(e)?e.slice(2):e}},8976:function(e,t,n){var r=n(7424).default,a=n(7061).default,o=n(7156).default,i=n(6690).default,g=n(9728).default;self,e.exports=function(){var e={192:function(e,t){var n,r,a=function(){var e=function(e,t){var n=e,r=i[t],a=null,o=0,s=null,A=[],h={},m=function(e,t){a=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(o=4*n+17),b(0,0),b(o-7,0),b(0,o-7),v(),y(),G(e,t),n>=7&&Z(e),null==s&&(s=k(n,r,A)),B(s,t)},b=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||o<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||o<=t+r||(a[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},y=function(){for(var e=8;e<o-8;e+=1)null==a[e][6]&&(a[e][6]=e%2==0);for(var t=8;t<o-8;t+=1)null==a[6][t]&&(a[6][t]=t%2==0)},v=function(){for(var e=g.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var o=e[t],i=e[r];if(null==a[o][i])for(var s=-2;s<=2;s+=1)for(var c=-2;c<=2;c+=1)a[o+s][i+c]=-2==s||2==s||-2==c||2==c||0==s&&0==c}},Z=function(e){for(var t=g.getBCHTypeNumber(n),r=0;r<18;r+=1){var i=!e&&1==(t>>r&1);a[Math.floor(r/3)][r%3+o-8-3]=i}for(r=0;r<18;r+=1)i=!e&&1==(t>>r&1),a[r%3+o-8-3][Math.floor(r/3)]=i},G=function(e,t){for(var n=r<<3|t,i=g.getBCHTypeInfo(n),s=0;s<15;s+=1){var c=!e&&1==(i>>s&1);s<6?a[s][8]=c:s<8?a[s+1][8]=c:a[o-15+s][8]=c}for(s=0;s<15;s+=1)c=!e&&1==(i>>s&1),s<8?a[8][o-s-1]=c:s<9?a[8][15-s-1+1]=c:a[8][15-s-1]=c;a[o-8][8]=!e},B=function(e,t){for(var n=-1,r=o-1,i=7,s=0,c=g.getMaskFunction(t),l=o-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var u=0;u<2;u+=1)if(null==a[r][l-u]){var f=!1;s<e.length&&(f=1==(e[s]>>>i&1)),c(r,l-u)&&(f=!f),a[r][l-u]=f,-1==(i-=1)&&(s+=1,i=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}},k=function(e,t,n){for(var r=l.getRSBlocks(e,t),a=u(),o=0;o<n.length;o+=1){var i=n[o];a.put(i.getMode(),4),a.put(i.getLength(),g.getLengthInBits(i.getMode(),e)),i.write(a)}var s=0;for(o=0;o<r.length;o+=1)s+=r[o].dataCount;if(a.getLengthInBits()>8*s)throw"code length overflow. ("+a.getLengthInBits()+">"+8*s+")";for(a.getLengthInBits()+4<=8*s&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*s||(a.put(236,8),a.getLengthInBits()>=8*s));)a.put(17,8);return function(e,t){for(var n=0,r=0,a=0,o=new Array(t.length),i=new Array(t.length),s=0;s<t.length;s+=1){var l=t[s].dataCount,u=t[s].totalCount-l;r=Math.max(r,l),a=Math.max(a,u),o[s]=new Array(l);for(var f=0;f<o[s].length;f+=1)o[s][f]=255&e.getBuffer()[f+n];n+=l;var I=g.getErrorCorrectPolynomial(u),C=c(o[s],I.getLength()-1).mod(I);for(i[s]=new Array(I.getLength()-1),f=0;f<i[s].length;f+=1){var d=f+C.getLength()-i[s].length;i[s][f]=d>=0?C.getAt(d):0}}var A=0;for(f=0;f<t.length;f+=1)A+=t[f].totalCount;var h=new Array(A),p=0;for(f=0;f<r;f+=1)for(s=0;s<t.length;s+=1)f<o[s].length&&(h[p]=o[s][f],p+=1);for(f=0;f<a;f+=1)for(s=0;s<t.length;s+=1)f<i[s].length&&(h[p]=i[s][f],p+=1);return h}(a,r)};h.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=f(e);break;case"Alphanumeric":n=I(e);break;case"Byte":n=C(e);break;case"Kanji":n=d(e);break;default:throw"mode:"+t}A.push(n),s=null},h.isDark=function(e,t){if(e<0||o<=e||t<0||o<=t)throw e+","+t;return a[e][t]},h.getModuleCount=function(){return o},h.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=l.getRSBlocks(e,r),a=u(),o=0;o<A.length;o++){var i=A[o];a.put(i.getMode(),4),a.put(i.getLength(),g.getLengthInBits(i.getMode(),e)),i.write(a)}var s=0;for(o=0;o<t.length;o++)s+=t[o].dataCount;if(a.getLengthInBits()<=8*s)break}n=e}m(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){m(!0,n);var r=g.getLostPoint(h);(0==n||e>r)&&(e=r,t=n)}return t}())},h.createTableTag=function(e,t){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",n+='">',n+="<tbody>";for(var r=0;r<h.getModuleCount();r+=1){n+="<tr>";for(var a=0;a<h.getModuleCount();a+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=h.isDark(r,a)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return(n+="</tbody>")+"</table>"},h.createSvgTag=function(e,t,n,r){var a={};"object"==typeof arguments[0]&&(e=(a=arguments[0]).cellSize,t=a.margin,n=a.alt,r=a.title),e=e||2,t=void 0===t?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var o,i,g,s,c=h.getModuleCount()*e+2*t,l="";for(s="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=a.scalable?"":' width="'+c+'px" height="'+c+'px"',l+=' viewBox="0 0 '+c+" "+c+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=r.text||n.text?' role="img" aria-labelledby="'+S([r.id,n.id].join(" ").trim())+'"':"",l+=">",l+=r.text?'<title id="'+S(r.id)+'">'+S(r.text)+"</title>":"",l+=n.text?'<description id="'+S(n.id)+'">'+S(n.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',i=0;i<h.getModuleCount();i+=1)for(g=i*e+t,o=0;o<h.getModuleCount();o+=1)h.isDark(i,o)&&(l+="M"+(o*e+t)+","+g+s);return(l+='" stroke="transparent" fill="black"/>')+"</svg>"},h.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var n=h.getModuleCount()*e+2*t,r=t,a=n-t;return p(n,n,(function(t,n){if(r<=t&&t<a&&r<=n&&n<a){var o=Math.floor((t-r)/e),i=Math.floor((n-r)/e);return h.isDark(i,o)?0:1}return 1}))},h.createImgTag=function(e,t,n){e=e||2,t=void 0===t?4*e:t;var r=h.getModuleCount()*e+2*t,a="";return a+="<img",a+=' src="',a+=h.createDataURL(e,t),a+='"',a+=' width="',a+=r,a+='"',a+=' height="',a+=r,a+='"',n&&(a+=' alt="',a+=S(n),a+='"'),a+"/>"};var S=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t};return h.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,n,r,a,o,i=1*h.getModuleCount()+2*e,g=e,s=i-e,c={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},l={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},u="";for(t=0;t<i;t+=2){for(r=Math.floor((t-g)/1),a=Math.floor((t+1-g)/1),n=0;n<i;n+=1)o="\u2588",g<=n&&n<s&&g<=t&&t<s&&h.isDark(r,Math.floor((n-g)/1))&&(o=" "),g<=n&&n<s&&g<=t+1&&t+1<s&&h.isDark(a,Math.floor((n-g)/1))?o+=" ":o+="\u2588",u+=e<1&&t+1>=s?l[o]:c[o];u+="\n"}return i%2&&e>0?u.substring(0,u.length-i-1)+Array(i+1).join("\u2580"):u.substring(0,u.length-1)}(t);e-=1,t=void 0===t?2*e:t;var n,r,a,o,i=h.getModuleCount()*e+2*t,g=t,s=i-t,c=Array(e+1).join("\u2588\u2588"),l=Array(e+1).join("  "),u="",f="";for(n=0;n<i;n+=1){for(a=Math.floor((n-g)/e),f="",r=0;r<i;r+=1)o=1,g<=r&&r<s&&g<=n&&n<s&&h.isDark(a,Math.floor((r-g)/e))&&(o=0),f+=o?c:l;for(a=0;a<e;a+=1)u+=f+"\n"}return u.substring(0,u.length-1)},h.renderTo2dContext=function(e,t){t=t||2;for(var n=h.getModuleCount(),r=0;r<n;r++)for(var a=0;a<n;a++)e.fillStyle=h.isDark(r,a)?"black":"white",e.fillRect(r*t,a*t,t,t)},h};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}}).default,e.createStringToBytes=function(e,t){var n=function(){for(var n=h(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},a=0,o={};;){var i=n.read();if(-1==i)break;var g=r(),s=r()<<8|r();o[String.fromCharCode(i<<8|g)]=s,a+=1}if(a!=t)throw a+" != "+t;return o}(),r="?".charCodeAt(0);return function(e){for(var t=[],a=0;a<e.length;a+=1){var o=e.charCodeAt(a);if(o<128)t.push(o);else{var i=n[e.charAt(a)];"number"==typeof i?(255&i)==i?t.push(i):(t.push(i>>>8),t.push(255&i)):t.push(r)}}return t}};var t,n,r,a,o,i={L:1,M:0,Q:3,H:2},g=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,o=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(a={}).getBCHTypeInfo=function(e){for(var t=e<<10;o(t)-o(n)>=0;)t^=n<<o(t)-o(n);return 21522^(e<<10|t)},a.getBCHTypeNumber=function(e){for(var t=e<<12;o(t)-o(r)>=0;)t^=r<<o(t)-o(r);return e<<12|t},a.getPatternPosition=function(e){return t[e-1]},a.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},a.getErrorCorrectPolynomial=function(e){for(var t=c([1],0),n=0;n<e;n+=1)t=t.multiply(c([1,s.gexp(n)],0));return t},a.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+e}}},a.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var a=0;a<t;a+=1){for(var o=0,i=e.isDark(r,a),g=-1;g<=1;g+=1)if(!(r+g<0||t<=r+g))for(var s=-1;s<=1;s+=1)a+s<0||t<=a+s||0==g&&0==s||i==e.isDark(r+g,a+s)&&(o+=1);o>5&&(n+=3+o-5)}for(r=0;r<t-1;r+=1)for(a=0;a<t-1;a+=1){var c=0;e.isDark(r,a)&&(c+=1),e.isDark(r+1,a)&&(c+=1),e.isDark(r,a+1)&&(c+=1),e.isDark(r+1,a+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(r=0;r<t;r+=1)for(a=0;a<t-6;a+=1)e.isDark(r,a)&&!e.isDark(r,a+1)&&e.isDark(r,a+2)&&e.isDark(r,a+3)&&e.isDark(r,a+4)&&!e.isDark(r,a+5)&&e.isDark(r,a+6)&&(n+=40);for(a=0;a<t;a+=1)for(r=0;r<t-6;r+=1)e.isDark(r,a)&&!e.isDark(r+1,a)&&e.isDark(r+2,a)&&e.isDark(r+3,a)&&e.isDark(r+4,a)&&!e.isDark(r+5,a)&&e.isDark(r+6,a)&&(n+=40);var l=0;for(a=0;a<t;a+=1)for(r=0;r<t;r+=1)e.isDark(r,a)&&(l+=1);return n+Math.abs(100*l/t/t-50)/5*10},a),s=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;return{glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}}}();function c(e,t){if(void 0===e.length)throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=new Array(e.length-n+t),a=0;a<e.length-n;a+=1)r[a]=e[a+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var a=0;a<e.getLength();a+=1)t[n+a]^=s.gexp(s.glog(r.getAt(n))+s.glog(e.getAt(a)));return c(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=s.glog(r.getAt(0))-s.glog(e.getAt(0)),n=new Array(r.getLength()),a=0;a<r.getLength();a+=1)n[a]=r.getAt(a);for(a=0;a<e.getLength();a+=1)n[a]^=s.gexp(s.glog(e.getAt(a))+t);return c(n,0).mod(e)}};return r}var l=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},n={getRSBlocks:function(n,r){var a=function(t,n){switch(n){case i.L:return e[4*(t-1)+0];case i.M:return e[4*(t-1)+1];case i.Q:return e[4*(t-1)+2];case i.H:return e[4*(t-1)+3];default:return}}(n,r);if(void 0===a)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var o=a.length/3,g=[],s=0;s<o;s+=1)for(var c=a[3*s+0],l=a[3*s+1],u=a[3*s+2],f=0;f<c;f+=1)g.push(t(l,u));return g}};return n}(),u=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},f=function(e){var t=e,n={getMode:function(){return 1},getLength:function(e){return t.length},write:function(e){for(var n=t,a=0;a+2<n.length;)e.put(r(n.substring(a,a+3)),10),a+=3;a<n.length&&(n.length-a==1?e.put(r(n.substring(a,a+1)),4):n.length-a==2&&e.put(r(n.substring(a,a+2)),7))}},r=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+a(e.charAt(n));return t},a=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return n},I=function(e){var t=e,n={getMode:function(){return 2},getLength:function(e){return t.length},write:function(e){for(var n=t,a=0;a+1<n.length;)e.put(45*r(n.charAt(a))+r(n.charAt(a+1)),11),a+=2;a<n.length&&e.put(r(n.charAt(a)),6)}},r=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return n},C=function(t){var n=e.stringToBytes(t);return{getMode:function(){return 4},getLength:function(e){return n.length},write:function(e){for(var t=0;t<n.length;t+=1)e.put(n[t],8)}}},d=function(t){var n=e.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(e,t){var r=n("\u53cb");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var r=n(t),a={getMode:function(){return 8},getLength:function(e){return~~(r.length/2)},write:function(e){for(var t=r,n=0;n+1<t.length;){var a=(255&t[n])<<8|255&t[n+1];if(33088<=a&&a<=40956)a-=33088;else{if(!(57408<=a&&a<=60351))throw"illegal char at "+(n+1)+"/"+a;a-=49472}a=192*(a>>>8&255)+(255&a),e.put(a,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return a},A=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var a=0;a<r;a+=1)t.writeByte(e[a+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+"]"}};return t},h=function(e){var t=e,n=0,r=0,a=0,o={read:function(){for(;a<8;){if(n>=t.length){if(0==a)return-1;throw"unexpected end of file./"+a}var e=t.charAt(n);if(n+=1,"="==e)return a=0,-1;e.match(/^\s$/)||(r=r<<6|i(e.charCodeAt(0)),a+=6)}var o=r>>>a-8&255;return a-=8,o}},i=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return o},p=function(e,t,n){for(var r=function(e,t){var n=e,r=t,a=new Array(e*t),o={setPixel:function(e,t,r){a[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=i(2);e.writeByte(2);for(var a=0;t.length-a>255;)e.writeByte(255),e.writeBytes(t,a,255),a+=255;e.writeByte(t.length-a),e.writeBytes(t,a,t.length-a),e.writeByte(0),e.writeString(";")}},i=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,o=g(),i=0;i<t;i+=1)o.add(String.fromCharCode(i));o.add(String.fromCharCode(t)),o.add(String.fromCharCode(n));var s,c,l,u=A(),f=(s=u,c=0,l=0,{write:function(e,t){if(e>>>t!=0)throw"length over";for(;c+t>=8;)s.writeByte(255&(e<<c|l)),t-=8-c,e>>>=8-c,l=0,c=0;l|=e<<c,c+=t},flush:function(){c>0&&s.writeByte(l)}});f.write(t,r);var I=0,C=String.fromCharCode(a[I]);for(I+=1;I<a.length;){var d=String.fromCharCode(a[I]);I+=1,o.contains(C+d)?C+=d:(f.write(o.indexOf(C),r),o.size()<4095&&(o.size()==1<<r&&(r+=1),o.add(C+d)),C=d)}return f.write(o.indexOf(C),r),f.write(n,r),f.flush(),u.toByteArray()},g=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return o}(e,t),a=0;a<t;a+=1)for(var o=0;o<e;o+=1)r.setPixel(o,a,n(o,a));var i=A();r.write(i);for(var g=function(){var e=0,t=0,n=0,r="",a={},o=function(e){r+=String.fromCharCode(i(63&e))},i=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return a.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)o(e>>>t-6),t-=6},a.flush=function(){if(t>0&&(o(e<<6-t),e=0,t=0),n%3!=0)for(var a=3-n%3,i=0;i<a;i+=1)r+="="},a.toString=function(){return r},a}(),s=i.toByteArray(),c=0;c<s.length;c+=1)g.writeByte(s[c]);return g.flush(),"data:image/gif;base64,"+g};return e}();a.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},void 0===(r="function"==typeof(n=function(){return a})?n.apply(t,[]):n)||(e.exports=r)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var s={};return function(){"use strict";n.d(s,{default:function(){return M}});var e=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)};function t(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];if(!a.length)return n;var i=a.shift();return void 0!==i&&e(n)&&e(i)?(n=Object.assign({},n),Object.keys(i).forEach((function(r){var a=n[r],o=i[r];Array.isArray(a)&&Array.isArray(o)?n[r]=o:e(a)&&e(o)?n[r]=t(Object.assign({},a),o):n[r]=o})),t.apply(void 0,[n].concat(a))):n}function c(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function l(e){var t=e.originalHeight,n=e.originalWidth,r=e.maxHiddenDots,a=e.maxHiddenAxisDots,o=e.dotSize,i={x:0,y:0},g={x:0,y:0};if(t<=0||n<=0||r<=0||o<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var s=t/n;return i.x=Math.floor(Math.sqrt(r/s)),i.x<=0&&(i.x=1),a&&a<i.x&&(i.x=a),i.x%2==0&&i.x--,g.x=i.x*o,i.y=1+2*Math.ceil((i.x*s-1)/2),g.y=Math.round(g.x*s),(i.y*i.x>r||a&&a<i.y)&&(a&&a<i.y?(i.y=a,i.y%2==0&&i.x--):i.y-=2,g.y=i.y*o,i.x=1+2*Math.ceil((i.y/s-1)/2),g.x=Math.round(g.y/s)),{height:g.y,width:g.x,hideYDots:i.x,hideXDots:i.y}}for(var u={L:.07,M:.15,Q:.25,H:.3},f="dots",I="rounded",C="classy",d="classy-rounded",A="extra-rounded",h=function(){function e(t){var n=t.context,r=t.type;i(this,e),this._context=n,this._type=r}return g(e,[{key:"draw",value:function(e,t,n,r){var a,o=this._context;switch(this._type){case f:a=this._drawDot;break;case C:a=this._drawClassy;break;case d:a=this._drawClassyRounded;break;case I:a=this._drawRounded;break;case A:a=this._drawExtraRounded;break;default:a=this._drawSquare}a.call(this,{x:e,y:t,size:n,context:o,getNeighbor:r})}},{key:"_rotateFigure",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation,i=void 0===o?0:o,g=e.draw,s=t+r/2,c=n+r/2;a.translate(s,c),i&&a.rotate(i),g(),a.closePath(),i&&a.rotate(-i),a.translate(-s,-c)}},{key:"_basicDot",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(0,0,t/2,0,2*Math.PI)}}))}},{key:"_basicSquare",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.rect(-t/2,-t/2,t,t)}}))}},{key:"_basicSideRounded",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(0,0,t/2,-Math.PI/2,Math.PI/2),n.lineTo(-t/2,t/2),n.lineTo(-t/2,-t/2),n.lineTo(0,-t/2)}}))}},{key:"_basicCornerRounded",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(0,0,t/2,-Math.PI/2,0),n.lineTo(t/2,t/2),n.lineTo(-t/2,t/2),n.lineTo(-t/2,-t/2),n.lineTo(0,-t/2)}}))}},{key:"_basicCornerExtraRounded",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(-t/2,t/2,t,-Math.PI/2,0),n.lineTo(-t/2,t/2),n.lineTo(-t/2,-t/2)}}))}},{key:"_basicCornersRounded",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(0,0,t/2,-Math.PI/2,0),n.lineTo(t/2,t/2),n.lineTo(0,t/2),n.arc(0,0,t/2,Math.PI/2,Math.PI),n.lineTo(-t/2,-t/2),n.lineTo(0,-t/2)}}))}},{key:"_basicCornersExtraRounded",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(-t/2,t/2,t,-Math.PI/2,0),n.arc(t/2,-t/2,t,Math.PI/2,Math.PI)}}))}},{key:"_drawDot",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context;this._basicDot({x:t,y:n,size:r,context:a,rotation:0})}},{key:"_drawSquare",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context;this._basicSquare({x:t,y:n,size:r,context:a,rotation:0})}},{key:"_drawRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.getNeighbor,i=o?+o(-1,0):0,g=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0,l=i+g+s+c;if(0!==l)if(l>2||i&&g||s&&c)this._basicSquare({x:t,y:n,size:r,context:a,rotation:0});else{if(2===l){var u=0;return i&&s?u=Math.PI/2:s&&g?u=Math.PI:g&&c&&(u=-Math.PI/2),void this._basicCornerRounded({x:t,y:n,size:r,context:a,rotation:u})}if(1===l){var f=0;return s?f=Math.PI/2:g?f=Math.PI:c&&(f=-Math.PI/2),void this._basicSideRounded({x:t,y:n,size:r,context:a,rotation:f})}}else this._basicDot({x:t,y:n,size:r,context:a,rotation:0})}},{key:"_drawExtraRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.getNeighbor,i=o?+o(-1,0):0,g=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0,l=i+g+s+c;if(0!==l)if(l>2||i&&g||s&&c)this._basicSquare({x:t,y:n,size:r,context:a,rotation:0});else{if(2===l){var u=0;return i&&s?u=Math.PI/2:s&&g?u=Math.PI:g&&c&&(u=-Math.PI/2),void this._basicCornerExtraRounded({x:t,y:n,size:r,context:a,rotation:u})}if(1===l){var f=0;return s?f=Math.PI/2:g?f=Math.PI:c&&(f=-Math.PI/2),void this._basicSideRounded({x:t,y:n,size:r,context:a,rotation:f})}}else this._basicDot({x:t,y:n,size:r,context:a,rotation:0})}},{key:"_drawClassy",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.getNeighbor,i=o?+o(-1,0):0,g=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0;0!==i+g+s+c?i||s?g||c?this._basicSquare({x:t,y:n,size:r,context:a,rotation:0}):this._basicCornerRounded({x:t,y:n,size:r,context:a,rotation:Math.PI/2}):this._basicCornerRounded({x:t,y:n,size:r,context:a,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:n,size:r,context:a,rotation:Math.PI/2})}},{key:"_drawClassyRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.getNeighbor,i=o?+o(-1,0):0,g=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0;0!==i+g+s+c?i||s?g||c?this._basicSquare({x:t,y:n,size:r,context:a,rotation:0}):this._basicCornerExtraRounded({x:t,y:n,size:r,context:a,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:t,y:n,size:r,context:a,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:n,size:r,context:a,rotation:Math.PI/2})}}]),e}(),p="square",m="extra-rounded",b=function(){function e(t){var n=t.context,r=t.type;i(this,e),this._context=n,this._type=r}return g(e,[{key:"draw",value:function(e,t,n,r){var a,o=this._context;switch(this._type){case p:a=this._drawSquare;break;case m:a=this._drawExtraRounded;break;default:a=this._drawDot}a.call(this,{x:e,y:t,size:n,context:o,rotation:r})}},{key:"_rotateFigure",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation,i=void 0===o?0:o,g=e.draw,s=t+r/2,c=n+r/2;a.translate(s,c),i&&a.rotate(i),g(),a.closePath(),i&&a.rotate(-i),a.translate(-s,-c)}},{key:"_basicDot",value:function(e){var t=e.size,n=e.context,r=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(0,0,t/2,0,2*Math.PI),n.arc(0,0,t/2-r,0,2*Math.PI)}}))}},{key:"_basicSquare",value:function(e){var t=e.size,n=e.context,r=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.rect(-t/2,-t/2,t,t),n.rect(-t/2+r,-t/2+r,t-2*r,t-2*r)}}))}},{key:"_basicExtraRounded",value:function(e){var t=e.size,n=e.context,r=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(-r,-r,2.5*r,Math.PI,-Math.PI/2),n.lineTo(r,-3.5*r),n.arc(r,-r,2.5*r,-Math.PI/2,0),n.lineTo(3.5*r,-r),n.arc(r,r,2.5*r,0,Math.PI/2),n.lineTo(-r,3.5*r),n.arc(-r,r,2.5*r,Math.PI/2,Math.PI),n.lineTo(-3.5*r,-r),n.arc(-r,-r,1.5*r,Math.PI,-Math.PI/2),n.lineTo(r,-2.5*r),n.arc(r,-r,1.5*r,-Math.PI/2,0),n.lineTo(2.5*r,-r),n.arc(r,r,1.5*r,0,Math.PI/2),n.lineTo(-r,2.5*r),n.arc(-r,r,1.5*r,Math.PI/2,Math.PI),n.lineTo(-2.5*r,-r)}}))}},{key:"_drawDot",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation;this._basicDot({x:t,y:n,size:r,context:a,rotation:o})}},{key:"_drawSquare",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation;this._basicSquare({x:t,y:n,size:r,context:a,rotation:o})}},{key:"_drawExtraRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation;this._basicExtraRounded({x:t,y:n,size:r,context:a,rotation:o})}}]),e}(),y="square",v=function(){function e(t){var n=t.context,r=t.type;i(this,e),this._context=n,this._type=r}return g(e,[{key:"draw",value:function(e,t,n,r){var a=this._context;(this._type===y?this._drawSquare:this._drawDot).call(this,{x:e,y:t,size:n,context:a,rotation:r})}},{key:"_rotateFigure",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation,i=void 0===o?0:o,g=e.draw,s=t+r/2,c=n+r/2;a.translate(s,c),i&&a.rotate(i),g(),a.closePath(),i&&a.rotate(-i),a.translate(-s,-c)}},{key:"_basicDot",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.arc(0,0,t/2,0,2*Math.PI)}}))}},{key:"_basicSquare",value:function(e){var t=e.size,n=e.context;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){n.rect(-t/2,-t/2,t,t)}}))}},{key:"_drawDot",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation;this._basicDot({x:t,y:n,size:r,context:a,rotation:o})}},{key:"_drawSquare",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.context,o=e.rotation;this._basicSquare({x:t,y:n,size:r,context:a,rotation:o})}}]),e}(),Z="radial",G=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],B=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],k=function(e){function t(e){i(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=e.width,this._canvas.height=e.height,this._options=e}return g(t,[{key:"context",get:function(){return this._canvas.getContext("2d")}},{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"getCanvas",value:function(){return this._canvas}},{key:"clear",value:function(){var e=this.context;e&&e.clearRect(0,0,this._canvas.width,this._canvas.height)}},{key:"drawQR",value:function(t){return(e=e||o(a().mark((function e(t){var n,r,o,i,g,s,c,f,I,C=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getModuleCount(),r=Math.min(this._options.width,this._options.height)-2*this._options.margin,o=Math.floor(r/n),i={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,!this._options.image){e.next=9;break}return e.next=5,this.loadImage();case 5:if(this._image){e.next=7;break}return e.abrupt("return");case 7:g=this._options,s=g.imageOptions,c=g.qrOptions,f=s.imageSize*u[c.errorCorrectionLevel],I=Math.floor(f*n*n),i=l({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:I,maxHiddenAxisDots:n-14,dotSize:o});case 9:this.clear(),this.drawBackground(),this.drawDots((function(e,t){var r,a,o,g,s,c;return!(C._options.imageOptions.hideBackgroundDots&&e>=(n-i.hideXDots)/2&&e<(n+i.hideXDots)/2&&t>=(n-i.hideYDots)/2&&t<(n+i.hideYDots)/2||(null===(r=G[e])||void 0===r?void 0:r[t])||(null===(a=G[e-n+7])||void 0===a?void 0:a[t])||(null===(o=G[e])||void 0===o?void 0:o[t-n+7])||(null===(g=B[e])||void 0===g?void 0:g[t])||(null===(s=B[e-n+7])||void 0===s?void 0:s[t])||(null===(c=B[e])||void 0===c?void 0:c[t-n+7]))})),this.drawCorners(),this._options.image&&this.drawImage({width:i.width,height:i.height,count:n,dotSize:o});case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"drawBackground",value:function(){var e=this.context,t=this._options;if(e){if(t.backgroundOptions.gradient){var n=t.backgroundOptions.gradient,r=this._createGradient({context:e,options:n,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});n.colorStops.forEach((function(e){var t=e.offset,n=e.color;r.addColorStop(t,n)})),e.fillStyle=r}else t.backgroundOptions.color&&(e.fillStyle=t.backgroundOptions.color);e.fillRect(0,0,this._canvas.width,this._canvas.height)}}},{key:"drawDots",value:function(e){var t=this;if(!this._qr)throw"QR code is not defined";var n=this.context;if(!n)throw"QR code is not defined";var r=this._options,a=this._qr.getModuleCount();if(a>r.width||a>r.height)throw"The canvas is too small.";var o=Math.min(r.width,r.height)-2*r.margin,i=Math.floor(o/a),g=Math.floor((r.width-a*i)/2),s=Math.floor((r.height-a*i)/2),c=new h({context:n,type:r.dotsOptions.type});n.beginPath();for(var l=function(n){for(var r=function(r){if(e&&!e(n,r))return 0;if(!t._qr.isDark(n,r))return 0;var o=t._options.useLegacyDotRotation?g+n*i:s+r*i,l=t._options.useLegacyDotRotation?s+r*i:g+n*i;c.draw(o,l,i,(function(o,i){return t._options.useLegacyDotRotation?!(n+o<0||r+i<0||n+o>=a||r+i>=a)&&!(e&&!e(n+o,r+i))&&!!t._qr&&t._qr.isDark(n+o,r+i):!(r+o<0||n+i<0||r+o>=a||n+i>=a)&&!(e&&!e(r+o,n+i))&&!!t._qr&&t._qr.isDark(n+i,r+o)}))},o=0;o<a;o++)r(o)},u=0;u<a;u++)l(u);if(r.dotsOptions.gradient){var f=r.dotsOptions.gradient,I=this._createGradient({context:n,options:f,additionalRotation:0,x:g,y:s,size:a*i});f.colorStops.forEach((function(e){var t=e.offset,n=e.color;I.addColorStop(t,n)})),n.fillStyle=n.strokeStyle=I}else r.dotsOptions.color&&(n.fillStyle=n.strokeStyle=r.dotsOptions.color);n.fill("evenodd")}},{key:"drawCorners",value:function(e){var t=this;if(!this._qr)throw"QR code is not defined";var n=this.context;if(!n)throw"QR code is not defined";var a=this._options,o=this._qr.getModuleCount(),i=Math.min(a.width,a.height)-2*a.margin,g=Math.floor(i/o),s=7*g,c=3*g,l=Math.floor((a.width-o*g)/2),u=Math.floor((a.height-o*g)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(i){var f,I,C,d,A,p,m,y,Z,k,S=r(i,3),w=S[0],W=S[1],R=S[2];if(!e||e(w,W)){var V=l+w*g*(o-7),X=u+W*g*(o-7);if(null===(f=a.cornersSquareOptions)||void 0===f?void 0:f.type){var J=new b({context:n,type:null===(I=a.cornersSquareOptions)||void 0===I?void 0:I.type});n.beginPath(),J.draw(V,X,s,R)}else{var x=new h({context:n,type:a.dotsOptions.type});n.beginPath();for(var Y=function(e){for(var t=function(t){(null===(C=G[e])||void 0===C?void 0:C[t])&&x.draw(V+e*g,X+t*g,g,(function(n,r){var a;return!!(null===(a=G[e+n])||void 0===a?void 0:a[t+r])}))},n=0;n<G[e].length;n++)t(n)},N=0;N<G.length;N++)Y(N)}if(null===(d=a.cornersSquareOptions)||void 0===d?void 0:d.gradient){var H=a.cornersSquareOptions.gradient,F=t._createGradient({context:n,options:H,additionalRotation:R,x:V,y:X,size:s});H.colorStops.forEach((function(e){var t=e.offset,n=e.color;F.addColorStop(t,n)})),n.fillStyle=n.strokeStyle=F}else(null===(A=a.cornersSquareOptions)||void 0===A?void 0:A.color)&&(n.fillStyle=n.strokeStyle=a.cornersSquareOptions.color);if(n.fill("evenodd"),null===(p=a.cornersDotOptions)||void 0===p?void 0:p.type){var K=new v({context:n,type:null===(m=a.cornersDotOptions)||void 0===m?void 0:m.type});n.beginPath(),K.draw(V+2*g,X+2*g,c,R)}else{var E=new h({context:n,type:a.dotsOptions.type});n.beginPath();for(var T=function(e){for(var t=function(t){(null===(y=B[e])||void 0===y?void 0:y[t])&&E.draw(V+e*g,X+t*g,g,(function(n,r){var a;return!!(null===(a=B[e+n])||void 0===a?void 0:a[t+r])}))},n=0;n<B[e].length;n++)t(n)},M=0;M<B.length;M++)T(M)}if(null===(Z=a.cornersDotOptions)||void 0===Z?void 0:Z.gradient){var z=a.cornersDotOptions.gradient,D=t._createGradient({context:n,options:z,additionalRotation:R,x:V+2*g,y:X+2*g,size:c});z.colorStops.forEach((function(e){var t=e.offset,n=e.color;D.addColorStop(t,n)})),n.fillStyle=n.strokeStyle=D}else(null===(k=a.cornersDotOptions)||void 0===k?void 0:k.color)&&(n.fillStyle=n.strokeStyle=a.cornersDotOptions.color);n.fill("evenodd")}}))}},{key:"loadImage",value:function(){var e=this;return new Promise((function(t,n){var r=e._options,a=new Image;if(!r.image)return n("Image is not defined");"string"==typeof r.imageOptions.crossOrigin&&(a.crossOrigin=r.imageOptions.crossOrigin),e._image=a,a.onload=function(){t()},a.src=r.image}))}},{key:"drawImage",value:function(e){var t=e.width,n=e.height,r=e.count,a=e.dotSize,o=this.context;if(!o)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";var i=this._options,g=Math.floor((i.width-r*a)/2),s=Math.floor((i.height-r*a)/2),c=g+i.imageOptions.margin+(r*a-t)/2,l=s+i.imageOptions.margin+(r*a-n)/2,u=t-2*i.imageOptions.margin,f=n-2*i.imageOptions.margin;o.drawImage(this._image,c,l,u<0?0:u,f<0?0:f)}},{key:"_createGradient",value:function(e){var t,n=e.context,r=e.options,a=e.additionalRotation,o=e.x,i=e.y,g=e.size;if(r.type===Z)t=n.createRadialGradient(o+g/2,i+g/2,0,o+g/2,i+g/2,g/2);else{var s=((r.rotation||0)+a)%(2*Math.PI),c=(s+2*Math.PI)%(2*Math.PI),l=o+g/2,u=i+g/2,f=o+g/2,I=i+g/2;c>=0&&c<=.25*Math.PI||c>1.75*Math.PI&&c<=2*Math.PI?(l-=g/2,u-=g/2*Math.tan(s),f+=g/2,I+=g/2*Math.tan(s)):c>.25*Math.PI&&c<=.75*Math.PI?(u-=g/2,l-=g/2/Math.tan(s),I+=g/2,f+=g/2/Math.tan(s)):c>.75*Math.PI&&c<=1.25*Math.PI?(l+=g/2,u+=g/2*Math.tan(s),f-=g/2,I-=g/2*Math.tan(s)):c>1.25*Math.PI&&c<=1.75*Math.PI&&(u+=g/2,l+=g/2/Math.tan(s),I-=g/2,f-=g/2/Math.tan(s)),t=n.createLinearGradient(Math.round(l),Math.round(u),Math.round(f),Math.round(I))}return t}}]),t}(),S=function(){function e(t){var n=t.svg,r=t.type;i(this,e),this._svg=n,this._type=r}return g(e,[{key:"draw",value:function(e,t,n,r){var a;switch(this._type){case f:a=this._drawDot;break;case C:a=this._drawClassy;break;case d:a=this._drawClassyRounded;break;case I:a=this._drawRounded;break;case A:a=this._drawExtraRounded;break;default:a=this._drawSquare}a.call(this,{x:e,y:t,size:n,getNeighbor:r})}},{key:"_rotateFigure",value:function(e){var t,n=e.x,r=e.y,a=e.size,o=e.rotation,i=void 0===o?0:o,g=n+a/2,s=r+a/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate(".concat(180*i/Math.PI,",").concat(g,",").concat(s,")"))}},{key:"_basicDot",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),t._element.setAttribute("cx",String(r+n/2)),t._element.setAttribute("cy",String(a+n/2)),t._element.setAttribute("r",String(n/2))}}))}},{key:"_basicSquare",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),t._element.setAttribute("x",String(r)),t._element.setAttribute("y",String(a)),t._element.setAttribute("width",String(n)),t._element.setAttribute("height",String(n))}}))}},{key:"_basicSideRounded",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M ".concat(r," ").concat(a,"v ").concat(n,"h ")+n/2+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, 0 ").concat(-n))}}))}},{key:"_basicCornerRounded",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M ".concat(r," ").concat(a,"v ").concat(n,"h ").concat(n,"v ")+-n/2+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, ").concat(-n/2," ").concat(-n/2))}}))}},{key:"_basicCornerExtraRounded",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M ".concat(r," ").concat(a,"v ").concat(n,"h ").concat(n,"a ").concat(n," ").concat(n,", 0, 0, 0, ").concat(-n," ").concat(-n))}}))}},{key:"_basicCornersRounded",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M ".concat(r," ").concat(a,"v ")+n/2+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, ").concat(n/2," ").concat(n/2,"h ")+n/2+"v "+-n/2+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, ").concat(-n/2," ").concat(-n/2))}}))}},{key:"_drawDot",value:function(e){var t=e.x,n=e.y,r=e.size;this._basicDot({x:t,y:n,size:r,rotation:0})}},{key:"_drawSquare",value:function(e){var t=e.x,n=e.y,r=e.size;this._basicSquare({x:t,y:n,size:r,rotation:0})}},{key:"_drawRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.getNeighbor,o=a?+a(-1,0):0,i=a?+a(1,0):0,g=a?+a(0,-1):0,s=a?+a(0,1):0,c=o+i+g+s;if(0!==c)if(c>2||o&&i||g&&s)this._basicSquare({x:t,y:n,size:r,rotation:0});else{if(2===c){var l=0;return o&&g?l=Math.PI/2:g&&i?l=Math.PI:i&&s&&(l=-Math.PI/2),void this._basicCornerRounded({x:t,y:n,size:r,rotation:l})}if(1===c){var u=0;return g?u=Math.PI/2:i?u=Math.PI:s&&(u=-Math.PI/2),void this._basicSideRounded({x:t,y:n,size:r,rotation:u})}}else this._basicDot({x:t,y:n,size:r,rotation:0})}},{key:"_drawExtraRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.getNeighbor,o=a?+a(-1,0):0,i=a?+a(1,0):0,g=a?+a(0,-1):0,s=a?+a(0,1):0,c=o+i+g+s;if(0!==c)if(c>2||o&&i||g&&s)this._basicSquare({x:t,y:n,size:r,rotation:0});else{if(2===c){var l=0;return o&&g?l=Math.PI/2:g&&i?l=Math.PI:i&&s&&(l=-Math.PI/2),void this._basicCornerExtraRounded({x:t,y:n,size:r,rotation:l})}if(1===c){var u=0;return g?u=Math.PI/2:i?u=Math.PI:s&&(u=-Math.PI/2),void this._basicSideRounded({x:t,y:n,size:r,rotation:u})}}else this._basicDot({x:t,y:n,size:r,rotation:0})}},{key:"_drawClassy",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.getNeighbor,o=a?+a(-1,0):0,i=a?+a(1,0):0,g=a?+a(0,-1):0,s=a?+a(0,1):0;0!==o+i+g+s?o||g?i||s?this._basicSquare({x:t,y:n,size:r,rotation:0}):this._basicCornerRounded({x:t,y:n,size:r,rotation:Math.PI/2}):this._basicCornerRounded({x:t,y:n,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:n,size:r,rotation:Math.PI/2})}},{key:"_drawClassyRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.getNeighbor,o=a?+a(-1,0):0,i=a?+a(1,0):0,g=a?+a(0,-1):0,s=a?+a(0,1):0;0!==o+i+g+s?o||g?i||s?this._basicSquare({x:t,y:n,size:r,rotation:0}):this._basicCornerExtraRounded({x:t,y:n,size:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:t,y:n,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:n,size:r,rotation:Math.PI/2})}}]),e}(),w=function(){function e(t){var n=t.svg,r=t.type;i(this,e),this._svg=n,this._type=r}return g(e,[{key:"draw",value:function(e,t,n,r){var a;switch(this._type){case p:a=this._drawSquare;break;case m:a=this._drawExtraRounded;break;default:a=this._drawDot}a.call(this,{x:e,y:t,size:n,rotation:r})}},{key:"_rotateFigure",value:function(e){var t,n=e.x,r=e.y,a=e.size,o=e.rotation,i=void 0===o?0:o,g=n+a/2,s=r+a/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate(".concat(180*i/Math.PI,",").concat(g,",").concat(s,")"))}},{key:"_basicDot",value:function(e){var t=this,n=e.size,r=e.x,a=e.y,o=n/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M ".concat(r+n/2," ").concat(a,"a ").concat(n/2," ").concat(n/2," 0 1 0 0.1 0zm 0 ").concat(o,"a ").concat(n/2-o," ").concat(n/2-o," 0 1 1 -0.1 0Z"))}}))}},{key:"_basicSquare",value:function(e){var t=this,n=e.size,r=e.x,a=e.y,o=n/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M ".concat(r," ").concat(a,"v ").concat(n,"h ").concat(n,"v ")+-n+"z"+"M ".concat(r+o," ").concat(a+o,"h ")+(n-2*o)+"v "+(n-2*o)+"h "+(2*o-n)+"z")}}))}},{key:"_basicExtraRounded",value:function(e){var t=this,n=e.size,r=e.x,a=e.y,o=n/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M ".concat(r," ").concat(a+2.5*o,"v ")+2*o+"a ".concat(2.5*o," ").concat(2.5*o,", 0, 0, 0, ").concat(2.5*o," ").concat(2.5*o,"h ")+2*o+"a ".concat(2.5*o," ").concat(2.5*o,", 0, 0, 0, ").concat(2.5*o," ").concat(2.5*-o,"v ")+-2*o+"a ".concat(2.5*o," ").concat(2.5*o,", 0, 0, 0, ").concat(2.5*-o," ").concat(2.5*-o,"h ")+-2*o+"a ".concat(2.5*o," ").concat(2.5*o,", 0, 0, 0, ").concat(2.5*-o," ").concat(2.5*o)+"M ".concat(r+2.5*o," ").concat(a+o,"h ")+2*o+"a ".concat(1.5*o," ").concat(1.5*o,", 0, 0, 1, ").concat(1.5*o," ").concat(1.5*o,"v ")+2*o+"a ".concat(1.5*o," ").concat(1.5*o,", 0, 0, 1, ").concat(1.5*-o," ").concat(1.5*o,"h ")+-2*o+"a ".concat(1.5*o," ").concat(1.5*o,", 0, 0, 1, ").concat(1.5*-o," ").concat(1.5*-o,"v ")+-2*o+"a ".concat(1.5*o," ").concat(1.5*o,", 0, 0, 1, ").concat(1.5*o," ").concat(1.5*-o))}}))}},{key:"_drawDot",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.rotation;this._basicDot({x:t,y:n,size:r,rotation:a})}},{key:"_drawSquare",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.rotation;this._basicSquare({x:t,y:n,size:r,rotation:a})}},{key:"_drawExtraRounded",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.rotation;this._basicExtraRounded({x:t,y:n,size:r,rotation:a})}}]),e}(),W=function(){function e(t){var n=t.svg,r=t.type;i(this,e),this._svg=n,this._type=r}return g(e,[{key:"draw",value:function(e,t,n,r){(this._type===y?this._drawSquare:this._drawDot).call(this,{x:e,y:t,size:n,rotation:r})}},{key:"_rotateFigure",value:function(e){var t,n=e.x,r=e.y,a=e.size,o=e.rotation,i=void 0===o?0:o,g=n+a/2,s=r+a/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate(".concat(180*i/Math.PI,",").concat(g,",").concat(s,")"))}},{key:"_basicDot",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),t._element.setAttribute("cx",String(r+n/2)),t._element.setAttribute("cy",String(a+n/2)),t._element.setAttribute("r",String(n/2))}}))}},{key:"_basicSquare",value:function(e){var t=this,n=e.size,r=e.x,a=e.y;this._rotateFigure(Object.assign(Object.assign({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),t._element.setAttribute("x",String(r)),t._element.setAttribute("y",String(a)),t._element.setAttribute("width",String(n)),t._element.setAttribute("height",String(n))}}))}},{key:"_drawDot",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.rotation;this._basicDot({x:t,y:n,size:r,rotation:a})}},{key:"_drawSquare",value:function(e){var t=e.x,n=e.y,r=e.size,a=e.rotation;this._basicSquare({x:t,y:n,size:r,rotation:a})}}]),e}(),R=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],V=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],X=function(e,t,n,s){function c(e){i(this,c),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(e.width)),this._element.setAttribute("height",String(e.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._options=e}return g(c,[{key:"width",get:function(){return this._options.width}},{key:"height",get:function(){return this._options.height}},{key:"getElement",value:function(){return this._element}},{key:"clear",value:function(){var e,t=this._element;this._element=t.cloneNode(!1),null===(e=null==t?void 0:t.parentNode)||void 0===e||e.replaceChild(this._element,t),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._element.appendChild(this._style),this._element.appendChild(this._defs)}},{key:"drawQR",value:function(t){return(e=e||o(a().mark((function e(t){var n,r,o,i,g,s,c,f,I,C=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getModuleCount(),r=Math.min(this._options.width,this._options.height)-2*this._options.margin,o=Math.floor(r/n),i={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,!this._options.image){e.next=9;break}return e.next=5,this.loadImage();case 5:if(this._image){e.next=7;break}return e.abrupt("return");case 7:g=this._options,s=g.imageOptions,c=g.qrOptions,f=s.imageSize*u[c.errorCorrectionLevel],I=Math.floor(f*n*n),i=l({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:I,maxHiddenAxisDots:n-14,dotSize:o});case 9:if(this._element.appendChild(this._style),this._element.appendChild(this._defs),this.clear(),this.drawBackground(),this.drawDots((function(e,t){var r,a,o,g,s,c;return!(C._options.imageOptions.hideBackgroundDots&&e>=(n-i.hideXDots)/2&&e<(n+i.hideXDots)/2&&t>=(n-i.hideYDots)/2&&t<(n+i.hideYDots)/2||(null===(r=R[e])||void 0===r?void 0:r[t])||(null===(a=R[e-n+7])||void 0===a?void 0:a[t])||(null===(o=R[e])||void 0===o?void 0:o[t-n+7])||(null===(g=V[e])||void 0===g?void 0:g[t])||(null===(s=V[e-n+7])||void 0===s?void 0:s[t])||(null===(c=V[e])||void 0===c?void 0:c[t-n+7]))})),this.drawCorners(),e.t0=this._options.image,!e.t0){e.next=19;break}return e.next=19,this.drawImage({width:i.width,height:i.height,count:n,dotSize:o});case 19:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"drawBackground",value:function(){var e,t,n,r=this._element,a=this._options;if(r){var o=null===(e=a.backgroundOptions)||void 0===e?void 0:e.gradient,i=null===(t=a.backgroundOptions)||void 0===t?void 0:t.color;o?this._createColor({options:o,color:i,additionalRotation:0,x:0,y:0,height:a.height,width:a.width,name:"background-color"}):(null===(n=a.backgroundOptions)||void 0===n?void 0:n.color)&&this._createStyle({color:i,name:"background-color"})}}},{key:"drawDots",value:function(e){var t,n,r,a=this;if(!this._qr)throw"QR code is not defined";var o=this._options,i=this._qr.getModuleCount();if(i>o.width||i>o.height)throw"The canvas is too small.";var g=Math.min(o.width,o.height)-2*o.margin,s=Math.floor(g/i),c=Math.floor((o.width-i*s)/2),l=Math.floor((o.height-i*s)/2),u=new S({svg:this._element,type:o.dotsOptions.type});(null===(t=o.dotsOptions)||void 0===t?void 0:t.gradient)?(this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(n=o.dotsOptions)||void 0===n?void 0:n.gradient,color:o.dotsOptions.color,additionalRotation:0,x:c,y:l,height:i*s,width:i*s,name:"dot-color"})):o.dotsOptions.color&&(this._dots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._dots.setAttribute("class","dot-color"),this._element.appendChild(this._dots),this._createStyle({color:o.dotsOptions.color,name:"dot-color"}));for(var f=function(t){for(var n=function(n){if(e&&!e(t,n))return 0;if(!(null===(r=a._qr)||void 0===r?void 0:r.isDark(t,n)))return 0;var o=a._options.useLegacyDotRotation?c+t*s:l+n*s,g=a._options.useLegacyDotRotation?l+n*s:c+t*s;u.draw(o,g,s,(function(r,o){return a._options.useLegacyDotRotation?!(t+r<0||n+o<0||t+r>=i||n+o>=i)&&!(e&&!e(t+r,n+o))&&!!a._qr&&a._qr.isDark(t+r,n+o):!(n+r<0||t+o<0||n+r>=i||t+o>=i)&&!(e&&!e(n+r,t+o))&&!!a._qr&&a._qr.isDark(t+o,n+r)})),u._element&&a._dotsClipPath?a._dotsClipPath.appendChild(u._element):u._element&&a._dots&&a._dots.appendChild(u._element)},o=0;o<i;o++)n(o)},I=0;I<i;I++)f(I)}},{key:"drawCorners",value:function(){var e=this;if(!this._qr)throw"QR code is not defined";var t=this._element,n=this._options;if(!t)throw"Element code is not defined";var a=this._qr.getModuleCount(),o=Math.min(n.width,n.height)-2*n.margin,i=Math.floor(o/a),g=7*i,s=3*i,c=Math.floor((n.width-a*i)/2),l=Math.floor((n.height-a*i)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(t){var o,u,f,I,C,d,A,h,p,m,b,y,v,Z,G=r(t,3),B=G[0],k=G[1],X=G[2],J=c+B*i*(a-7),x=l+k*i*(a-7),Y=e._dotsClipPath,N=e._dotsClipPath;if((null===(o=n.cornersSquareOptions)||void 0===o?void 0:o.gradient)?((Y=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-".concat(B,"-").concat(k)),e._defs.appendChild(Y),e._cornersSquareClipPath=e._cornersDotClipPath=N=Y,e._createColor({options:null===(u=n.cornersSquareOptions)||void 0===u?void 0:u.gradient,color:null===(f=n.cornersSquareOptions)||void 0===f?void 0:f.color,additionalRotation:X,x:J,y:x,height:g,width:g,name:"corners-square-color-".concat(B,"-").concat(k)})):(e._cornerSquares=document.createElementNS("http://www.w3.org/2000/svg","g"),e._cornerSquares.setAttribute("class","corners-square-color-".concat(B,"-").concat(k)),e._element.appendChild(e._cornerSquares),e._createStyle({color:null===(I=n.cornersSquareOptions)||void 0===I?void 0:I.color,name:"corners-square-color-".concat(B,"-").concat(k)})),null===(C=n.cornersSquareOptions)||void 0===C?void 0:C.type){var H=new w({svg:e._element,type:n.cornersSquareOptions.type});H.draw(J,x,g,X),(null===(d=n.cornersSquareOptions)||void 0===d?void 0:d.gradient)&&H._element&&Y?Y.appendChild(H._element):H._element&&e._cornerSquares&&e._cornerSquares.appendChild(H._element)}else for(var F=new S({svg:e._element,type:n.dotsOptions.type}),K=function(t){for(var n=function(n){(null===(A=R[t])||void 0===A?void 0:A[n])&&(F.draw(J+t*i,x+n*i,i,(function(e,r){var a;return!!(null===(a=R[t+e])||void 0===a?void 0:a[n+r])})),F._element&&e._cornersSquareClipPath?e._cornersSquareClipPath.appendChild(F._element):F._element&&e._cornerSquares&&e._cornerSquares.appendChild(F._element))},r=0;r<R[t].length;r++)n(r)},E=0;E<R.length;E++)K(E);if((null===(h=n.cornersDotOptions)||void 0===h?void 0:h.gradient)?((N=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-".concat(B,"-").concat(k)),e._defs.appendChild(N),e._cornersDotClipPath=N,e._createColor({options:null===(p=n.cornersDotOptions)||void 0===p?void 0:p.gradient,color:null===(m=n.cornersDotOptions)||void 0===m?void 0:m.color,additionalRotation:X,x:J+2*i,y:x+2*i,height:s,width:s,name:"corners-dot-color-".concat(B,"-").concat(k)})):(e._cornerDots=document.createElementNS("http://www.w3.org/2000/svg","g"),e._cornerDots.setAttribute("class","corners-dot-color-".concat(B,"-").concat(k)),e._element.appendChild(e._cornerDots),e._createStyle({color:null===(b=n.cornersDotOptions)||void 0===b?void 0:b.color,name:"corners-dot-color-".concat(B,"-").concat(k)})),null===(y=n.cornersDotOptions)||void 0===y?void 0:y.type){var T=new W({svg:e._element,type:n.cornersDotOptions.type});T.draw(J+2*i,x+2*i,s,X),(null===(v=n.cornersDotOptions)||void 0===v?void 0:v.gradient)&&T._element&&N?N.appendChild(T._element):T._element&&e._cornerDots&&e._cornerDots.appendChild(T._element)}else for(var M=new S({svg:e._element,type:n.dotsOptions.type}),z=function(t){for(var n=function(n){(null===(Z=V[t])||void 0===Z?void 0:Z[n])&&(M.draw(J+t*i,x+n*i,i,(function(e,r){var a;return!!(null===(a=V[t+e])||void 0===a?void 0:a[n+r])})),M._element&&e._cornersDotClipPath?e._cornersDotClipPath.appendChild(M._element):M._element&&e._cornerDots&&e._cornerDots.appendChild(M._element))},r=0;r<V[t].length;r++)n(r)},D=0;D<V.length;D++)z(D)}))}},{key:"loadImage",value:function(){var e=this;return new Promise((function(t,n){var r=e._options,a=new Image;if(!r.image)return n("Image is not defined");"string"==typeof r.imageOptions.crossOrigin&&(a.crossOrigin=r.imageOptions.crossOrigin),e._image=a,a.onload=function(){t()},a.src=r.image}))}},{key:"drawImage",value:function(e){return(t=t||o(a().mark((function e(t){var n,r,o,i,g,s,c,l,u,f,I,C,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,o=t.count,i=t.dotSize,g=this._options,s=Math.floor((g.width-o*i)/2),c=Math.floor((g.height-o*i)/2),l=s+g.imageOptions.margin+(o*i-n)/2,u=c+g.imageOptions.margin+(o*i-r)/2,f=n-2*g.imageOptions.margin,I=r-2*g.imageOptions.margin,C=document.createElementNS("http://www.w3.org/2000/svg","image"),e.next=11,this._getBase64Image(g.image||"");case 11:d=e.sent,C.setAttribute("href",d),C.setAttribute("xlink:href",d),C.setAttribute("x",String(l)),C.setAttribute("y",String(u)),C.setAttribute("width","".concat(f,"px")),C.setAttribute("height","".concat(I,"px")),this._element.appendChild(C);case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_getImageBlob",value:function(e){return(n=n||o(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.blob());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"_blobToBase64",value:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var e=n.result;t(e)},n.readAsDataURL(e)}))}},{key:"_getBase64Image",value:function(e){return(s=s||o(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return",new Promise((function(e){e("")})));case 2:return e.next=4,this._getImageBlob(t);case 4:return n=e.sent,e.next=7,this._blobToBase64(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_createColor",value:function(e){var t=e.options,n=e.color,r=e.additionalRotation,a=e.x,o=e.y,i=e.height,g=e.width,s=e.name,c=g>i?g:i,l=document.createElementNS("http://www.w3.org/2000/svg","rect");if(l.setAttribute("x",String(a)),l.setAttribute("y",String(o)),l.setAttribute("height",String(i)),l.setAttribute("width",String(g)),l.setAttribute("clip-path","url('#clip-path-".concat(s,"')")),t){var u;if(t.type===Z)(u=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",s),u.setAttribute("gradientUnits","userSpaceOnUse"),u.setAttribute("fx",String(a+g/2)),u.setAttribute("fy",String(o+i/2)),u.setAttribute("cx",String(a+g/2)),u.setAttribute("cy",String(o+i/2)),u.setAttribute("r",String(c/2));else{var f=((t.rotation||0)+r)%(2*Math.PI),I=(f+2*Math.PI)%(2*Math.PI),C=a+g/2,d=o+i/2,A=a+g/2,h=o+i/2;I>=0&&I<=.25*Math.PI||I>1.75*Math.PI&&I<=2*Math.PI?(C-=g/2,d-=i/2*Math.tan(f),A+=g/2,h+=i/2*Math.tan(f)):I>.25*Math.PI&&I<=.75*Math.PI?(d-=i/2,C-=g/2/Math.tan(f),h+=i/2,A+=g/2/Math.tan(f)):I>.75*Math.PI&&I<=1.25*Math.PI?(C+=g/2,d+=i/2*Math.tan(f),A-=g/2,h-=i/2*Math.tan(f)):I>1.25*Math.PI&&I<=1.75*Math.PI&&(d+=i/2,C+=g/2/Math.tan(f),h-=i/2,A-=g/2/Math.tan(f)),(u=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",s),u.setAttribute("gradientUnits","userSpaceOnUse"),u.setAttribute("x1",String(Math.round(C))),u.setAttribute("y1",String(Math.round(d))),u.setAttribute("x2",String(Math.round(A))),u.setAttribute("y2",String(Math.round(h)))}t.colorStops.forEach((function(e){var t=e.offset,n=e.color,r=document.createElementNS("http://www.w3.org/2000/svg","stop");r.setAttribute("offset",100*t+"%"),r.setAttribute("stop-color",n),u.appendChild(r)})),l.setAttribute("fill","url('#".concat(s,"')")),this._defs.appendChild(u)}else n&&l.setAttribute("fill",n);this._element.appendChild(l)}},{key:"_createStyle",value:function(e){var t=e.color,n=e.name;this._style.innerHTML+=".".concat(n,"{ fill: ").concat(t,"; }")}}]),c}(),J="canvas",x={},Y=0;Y<=40;Y++)x[Y]=Y;var N={type:J,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:x[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:"anonymous",margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"},useLegacyDotRotation:!1};function H(e){var t=Object.assign({},e);if(!t.colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation?t.rotation=Number(t.rotation):t.rotation=0,t.colorStops=t.colorStops.map((function(e){return Object.assign(Object.assign({},e),{offset:Number(e.offset)})})),t}function F(e){var t=Object.assign({},e);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=Object.assign(Object.assign({},t.imageOptions),{hideBackgroundDots:Boolean(t.imageOptions.hideBackgroundDots),imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=Object.assign({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=H(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=Object.assign({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=H(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=Object.assign({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=H(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=Object.assign({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=H(t.backgroundOptions.gradient))),t}var K=n(192),E=n.n(K),T=function(e,n,r,s){function l(e){i(this,l),this._options=e?F(t(N,e)):N,this.update()}return g(l,[{key:"_getQRStylingElement",value:function(t){return(e=e||o(a().mark((function e(t){var n,r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._qr){e.next=2;break}throw"QR code is empty";case 2:if("svg"!==t.toLowerCase()){e.next=7;break}return this._svg&&this._svgDrawingPromise?(r=this._svg,n=this._svgDrawingPromise):(r=new X(this._options),n=r.drawQR(this._qr)),e.next=6,n;case 6:return e.abrupt("return",r);case 7:return this._canvas&&this._canvasDrawingPromise?(i=this._canvas,o=this._canvasDrawingPromise):(i=new k(this._options),o=i.drawQR(this._qr)),e.next=10,o;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"update",value:function(e){l._clearContainer(this._container),this._options=e?F(t(this._options,e)):this._options,this._options.data&&(this._qr=E()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(e){switch(!0){case/^[0-9]*$/.test(e):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(e):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===J?(this._canvas=new k(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new X(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))}},{key:"append",value:function(e){if(e){if("function"!=typeof e.appendChild)throw"Container should be a single DOM node";this._options.type===J?this._canvas&&e.appendChild(this._canvas.getCanvas()):this._svg&&e.appendChild(this._svg.getElement()),this._container=e}}},{key:"getRawData",value:function(){return(n=n||o(a().mark((function e(){var t,n,r,o,i,g,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"png",n=s.length>1?s[1]:void 0,this._qr){e.next=4;break}throw"QR code is empty";case 4:if("svg"!==(r=t.toLocaleLowerCase())){e.next=11;break}return e.next=8,this._getQRStylingElement(r);case 8:return o=e.sent,i=(new XMLSerializer).serializeToString(o.getElement()),e.abrupt("return",new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+i],{type:"image/svg+xml"}));case 11:return e.next=13,this._getQRStylingElement(r);case 13:return g=e.sent,e.abrupt("return",new Promise((function(e){return g.getCanvas().toBlob(e,"image/".concat(r),n)})));case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"toDataUrl",value:function(){return(r=r||o(a().mark((function e(){var t,n,r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:"png",n=o.length>1?o[1]:void 0,this._qr){e.next=4;break}throw"QR code is empty";case 4:return r=t.toLocaleLowerCase(),e.next=7,this._getQRStylingElement(r);case 7:return e.abrupt("return",e.sent.getCanvas().toDataURL("image/".concat(r),n));case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"download",value:function(e){return(s=s||o(a().mark((function e(t){var n,r,o,i,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._qr){e.next=2;break}throw"QR code is empty";case 2:if(n="png",r="qr","object"==typeof t&&null!==t&&(t.name&&(r=t.name),t.extension&&(n=t.extension)),"svg"!==(o=n.toLocaleLowerCase())){e.next=13;break}return e.next=8,this._getQRStylingElement(o);case 8:i=e.sent,g='<?xml version="1.0" standalone="no"?>\r\n'+(g=(new XMLSerializer).serializeToString(i.getElement())),c("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(g),"".concat(r,".svg")),e.next=19;break;case 13:return e.t0=c,e.next=16,this._getQRStylingElement(o);case 16:e.t1=e.sent.getCanvas().toDataURL("image/".concat(n)),e.t2="".concat(r,".").concat(n),(0,e.t0)(e.t1,e.t2);case 19:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}],[{key:"_clearContainer",value:function(e){e&&(e.innerHTML="")}}]),l}(),M=T}(),s.default}()},245:function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(2791)),i=a(n(2007)),g=n(7343),s=a(n(6585)),c=n(1087),l=o.default.forwardRef((function(e,t){var n=e.is,a=e.children,i=e.allowUnsafeHref,g=r(e,["is","children","allowUnsafeHref"]),l=(0,s.default)(g),u=l.className,f=l.enhancedProps;if(f.className=u,t&&(f.ref=t),("boolean"===typeof i?!i:(0,c.getUseSafeHref)())&&"a"===n&&f.href){var I=(0,c.extractAnchorProps)(f.href,f.rel),C=I.safeHref,d=I.safeRel;f.href=C,f.rel=d}return o.default.createElement(n||"div",f,a)}));l.displayName="Box",l.propTypes=Object.assign(Object.assign({},g.propTypes),{is:i.default.oneOfType([i.default.string,i.default.func,i.default.elementType]),allowUnsafeHref:i.default.bool}),l.defaultProps={is:"div",boxSizing:"border-box"},t.default=l},8139:function(e,t,n){"use strict";var r=n(861).default;Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.hydrate=t.entries=t.set=t.get=void 0;var a=new Map;t.get=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.get(n+e+t)},t.set=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";a.set(r+e+t,n)},t.entries=function(){return r(a)},t.hydrate=function(e){a=new Map([].concat(r(a),r(e)))},t.clear=function(){a.clear()}},6585:function(e,t,n){"use strict";var r=n(7424).default,a=n(4704).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),g=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(7343),l=s(n(8190)),u=g(n(8139)),f=g(n(8902)),I="selectors";t.default=function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",g=(0,l.default)(t),s={},A=t.className||"",h=a(g);try{var p=function(){var t=r(n.value,2),a=t[0],g=t[1],l=a===I||i.length>0;if(C(g)&&l){var h=a===I?"":a,p=o.includes(",")?o.split(",").map((function(e){return"".concat(e).concat(h)})).join(","):"".concat(o).concat(h),m=e(g,d(p),a);return A="".concat(A," ").concat(m.className),0}var b=c.propEnhancers[a];if(!b)return s[a]=g,0;if(null===g||void 0===g||!1===g)return 0;var y=u.get(a,g,o);if(y)return A="".concat(A," ").concat(y),0;var v=b(g,o);v&&(f.add(v.styles),u.set(a,g,v.className,o),A="".concat(A," ").concat(v.className))};for(h.s();!(n=h.n()).done;)p()}catch(m){h.e(m)}finally{h.f()}return{className:A=A.trim(),enhancedProps:s}};var C=function(e){return null!=e&&"object"===typeof e},d=function(e){return e.replace(/&/g,"")}},2352:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={animation:a.default.string,animationDelay:a.default.string,animationDirection:a.default.string,animationDuration:a.default.string,animationFillMode:a.default.string,animationIterationCount:a.default.oneOfType([a.default.string,a.default.number]),animationName:a.default.string,animationPlayState:a.default.string,animationTimingFunction:a.default.string},t.propAliases={},t.propValidators={};var i={className:"a",cssName:"animation",jsName:"animation",complexValue:!0},g={className:"a-dly",cssName:"animation-delay",jsName:"animationDelay",defaultUnit:"ms"},s={className:"a-dir",cssName:"animation-direction",jsName:"animationDirection",safeValue:!0},c={className:"a-dur",cssName:"animation-duration",jsName:"animationDuration",defaultUnit:"ms"},l={className:"a-fill-md",cssName:"animation-fill-mode",jsName:"animationFillMode",safeValue:!0},u={className:"a-itr-ct",cssName:"animation-iteration-count",jsName:"animationIterationCount",defaultUnit:""},f={className:"a-nm",cssName:"animation-name",jsName:"animationName"},I={className:"a-ply-ste",cssName:"animation-play-state",jsName:"animationPlayState",safeValue:!0},C={className:"a-tmng-fn",cssName:"animation-timing-function",jsName:"animationTimingFunction",complexValue:!0};t.propEnhancers={animation:function(e,t){return(0,o.default)(i,e,t)},animationDelay:function(e,t){return(0,o.default)(g,e,t)},animationDirection:function(e,t){return(0,o.default)(s,e,t)},animationDuration:function(e,t){return(0,o.default)(c,e,t)},animationFillMode:function(e,t){return(0,o.default)(l,e,t)},animationIterationCount:function(e,t){return(0,o.default)(u,e,t)},animationName:function(e,t){return(0,o.default)(f,e,t)},animationPlayState:function(e,t){return(0,o.default)(I,e,t)},animationTimingFunction:function(e,t){return(0,o.default)(C,e,t)}}},1569:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={background:a.default.string,backgroundBlendMode:a.default.string,backgroundClip:a.default.string,backgroundColor:a.default.string,backgroundImage:a.default.string,backgroundOrigin:a.default.string,backgroundPosition:a.default.string,backgroundRepeat:a.default.string,backgroundSize:a.default.string},t.propAliases={},t.propValidators={};var i={className:"bg",cssName:"background",jsName:"background",isPrefixed:!0,complexValue:!0},g={className:"bg-clr",cssName:"background-color",jsName:"backgroundColor"},s={className:"bg-img",cssName:"background-image",jsName:"backgroundImage",isPrefixed:!0,complexValue:!0},c={className:"bg-pos",cssName:"background-position",jsName:"backgroundPosition"},l={className:"bg-siz",cssName:"background-size",jsName:"backgroundSize"},u={className:"bg-orgn",cssName:"background-origin",jsName:"backgroundOrigin"},f={className:"bg-rpt",cssName:"background-repeat",jsName:"backgroundRepeat"},I={className:"bg-clp",cssName:"background-clip",jsName:"backgroundClip"},C={className:"bg-blnd-md",cssName:"background-blend-mode",jsName:"backgroundBlendMode"};t.propEnhancers={background:function(e,t){return(0,o.default)(i,e,t)},backgroundBlendMode:function(e,t){return(0,o.default)(C,e,t)},backgroundClip:function(e,t){return(0,o.default)(I,e,t)},backgroundColor:function(e,t){return(0,o.default)(g,e,t)},backgroundImage:function(e,t){return(0,o.default)(s,e,t)},backgroundOrigin:function(e,t){return(0,o.default)(u,e,t)},backgroundPosition:function(e,t){return(0,o.default)(c,e,t)},backgroundRepeat:function(e,t){return(0,o.default)(f,e,t)},backgroundSize:function(e,t){return(0,o.default)(l,e,t)}}},3870:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));n(7228);t.propTypes={borderBottomLeftRadius:a.default.oneOfType([a.default.string,a.default.number]),borderBottomRightRadius:a.default.oneOfType([a.default.string,a.default.number]),borderRadius:a.default.oneOfType([a.default.string,a.default.number]),borderTopLeftRadius:a.default.oneOfType([a.default.string,a.default.number]),borderTopRightRadius:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"]},t.propValidators={};var i={className:"btlr",cssName:"border-top-left-radius",jsName:"borderTopLeftRadius"},g={className:"btrr",cssName:"border-top-right-radius",jsName:"borderTopRightRadius"},s={className:"bblr",cssName:"border-bottom-left-radius",jsName:"borderBottomLeftRadius"},c={className:"bbrr",cssName:"border-bottom-right-radius",jsName:"borderBottomRightRadius"};t.propEnhancers={borderBottomLeftRadius:function(e,t){return(0,o.default)(s,e,t)},borderBottomRightRadius:function(e,t){return(0,o.default)(c,e,t)},borderTopLeftRadius:function(e,t){return(0,o.default)(i,e,t)},borderTopRightRadius:function(e,t){return(0,o.default)(g,e,t)}}},9157:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));n(7228);t.propTypes={border:a.default.string,borderBottom:a.default.string,borderBottomColor:a.default.string,borderBottomStyle:a.default.string,borderBottomWidth:a.default.oneOfType([a.default.string,a.default.number]),borderColor:a.default.string,borderLeft:a.default.string,borderLeftColor:a.default.string,borderLeftStyle:a.default.string,borderLeftWidth:a.default.oneOfType([a.default.string,a.default.number]),borderRight:a.default.string,borderRightColor:a.default.string,borderRightStyle:a.default.string,borderRightWidth:a.default.oneOfType([a.default.string,a.default.number]),borderStyle:a.default.string,borderTop:a.default.string,borderTopColor:a.default.string,borderTopStyle:a.default.string,borderTopWidth:a.default.oneOfType([a.default.string,a.default.number]),borderWidth:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={border:["borderBottom","borderLeft","borderRight","borderTop"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"]},t.propValidators={};var i={className:"b-lft",cssName:"border-left",jsName:"borderLeft"},g={className:"b-lft-clr",cssName:"border-left-color",jsName:"borderLeftColor"},s={className:"b-lft-stl",cssName:"border-left-style",jsName:"borderLeftStyle",safeValue:!0},c={className:"b-lft-wdt",cssName:"border-left-width",jsName:"borderLeftWidth"},l={className:"b-rgt",cssName:"border-right",jsName:"borderRight"},u={className:"b-rgt-clr",cssName:"border-right-color",jsName:"borderRightColor"},f={className:"b-rgt-stl",cssName:"border-right-style",jsName:"borderRightStyle",safeValue:!0},I={className:"b-rgt-wdt",cssName:"border-right-width",jsName:"borderRightWidth"},C={className:"b-top",cssName:"border-top",jsName:"borderTop"},d={className:"b-top-clr",cssName:"border-top-color",jsName:"borderTopColor"},A={className:"b-top-stl",cssName:"border-top-style",jsName:"borderTopStyle",safeValue:!0},h={className:"b-top-wdt",cssName:"border-top-width",jsName:"borderTopWidth"},p={className:"b-btm",cssName:"border-bottom",jsName:"borderBottom"},m={className:"b-btm-clr",cssName:"border-bottom-color",jsName:"borderBottomColor"},b={className:"b-btm-stl",cssName:"border-bottom-style",jsName:"borderBottomStyle",safeValue:!0},y={className:"b-btm-wdt",cssName:"border-bottom-width",jsName:"borderBottomWidth"};t.propEnhancers={borderBottom:function(e,t){return(0,o.default)(p,e,t)},borderBottomColor:function(e,t){return(0,o.default)(m,e,t)},borderBottomStyle:function(e,t){return(0,o.default)(b,e,t)},borderBottomWidth:function(e,t){return(0,o.default)(y,e,t)},borderLeft:function(e,t){return(0,o.default)(i,e,t)},borderLeftColor:function(e,t){return(0,o.default)(g,e,t)},borderLeftStyle:function(e,t){return(0,o.default)(s,e,t)},borderLeftWidth:function(e,t){return(0,o.default)(c,e,t)},borderRight:function(e,t){return(0,o.default)(l,e,t)},borderRightColor:function(e,t){return(0,o.default)(u,e,t)},borderRightStyle:function(e,t){return(0,o.default)(f,e,t)},borderRightWidth:function(e,t){return(0,o.default)(I,e,t)},borderTop:function(e,t){return(0,o.default)(C,e,t)},borderTopColor:function(e,t){return(0,o.default)(d,e,t)},borderTopStyle:function(e,t){return(0,o.default)(A,e,t)},borderTopWidth:function(e,t){return(0,o.default)(h,e,t)}}},8233:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={boxShadow:a.default.string},t.propAliases={},t.propValidators={};var i={className:"bs",cssName:"box-shadow",jsName:"boxShadow",complexValue:!0};t.propEnhancers={boxShadow:function(e,t){return(0,o.default)(i,e,t)}}},3969:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={height:a.default.oneOfType([a.default.string,a.default.number]),maxHeight:a.default.oneOfType([a.default.string,a.default.number]),maxWidth:a.default.oneOfType([a.default.string,a.default.number]),minHeight:a.default.oneOfType([a.default.string,a.default.number]),minWidth:a.default.oneOfType([a.default.string,a.default.number]),width:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={},t.propValidators={};var i={className:"w",cssName:"width",jsName:"width"},g={className:"h",cssName:"height",jsName:"height"},s={className:"min-w",cssName:"min-width",jsName:"minWidth"},c={className:"min-h",cssName:"min-height",jsName:"minHeight"},l={className:"max-w",cssName:"max-width",jsName:"maxWidth"},u={className:"max-h",cssName:"max-height",jsName:"maxHeight"};t.propEnhancers={height:function(e,t){return(0,o.default)(g,e,t)},maxHeight:function(e,t){return(0,o.default)(u,e,t)},maxWidth:function(e,t){return(0,o.default)(l,e,t)},minHeight:function(e,t){return(0,o.default)(c,e,t)},minWidth:function(e,t){return(0,o.default)(s,e,t)},width:function(e,t){return(0,o.default)(i,e,t)}}},92:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={alignContent:a.default.string,alignItems:a.default.string,alignSelf:a.default.string,flex:a.default.oneOfType([a.default.string,a.default.number]),flexBasis:a.default.oneOfType([a.default.string,a.default.number]),flexDirection:a.default.string,flexFlow:a.default.string,flexGrow:a.default.oneOfType([a.default.string,a.default.number]),flexShrink:a.default.oneOfType([a.default.string,a.default.number]),flexWrap:a.default.string,justifyContent:a.default.string,justifyItems:a.default.string,justifySelf:a.default.string,order:a.default.oneOfType([a.default.string,a.default.number]),placeContent:a.default.string,placeItems:a.default.string,placeSelf:a.default.string},t.propAliases={},t.propValidators={};var i={className:"flx",cssName:"flex",jsName:"flex",isPrefixed:!0,defaultUnit:""},g={className:"algn-itms",cssName:"align-items",jsName:"alignItems",isPrefixed:!0},s={className:"algn-slf",cssName:"align-self",jsName:"alignSelf",isPrefixed:!0},c={className:"algn-cnt",cssName:"align-content",jsName:"alignContent",isPrefixed:!0},l={className:"just-cnt",cssName:"justify-content",jsName:"justifyContent",isPrefixed:!0},u={className:"just-items",cssName:"justify-items",jsName:"justifyItems",isPrefixed:!0},f={className:"just-self",cssName:"justify-self",jsName:"justifySelf",isPrefixed:!0},I={className:"flx-drct",cssName:"flex-direction",jsName:"flexDirection",isPrefixed:!0,safeValue:!0},C={className:"flx-wrap",cssName:"flex-wrap",jsName:"flexWrap",isPrefixed:!0,safeValue:!0},d={className:"flx-grow",cssName:"flex-grow",jsName:"flexGrow",isPrefixed:!0,defaultUnit:""},A={className:"flx-srnk",cssName:"flex-shrink",jsName:"flexShrink",isPrefixed:!0,defaultUnit:""},h={className:"flx-basis",cssName:"flex-basis",jsName:"flexBasis",isPrefixed:!0},p={className:"order",cssName:"order",jsName:"order",isPrefixed:!0,defaultUnit:"",safeValue:!0},m={className:"flx-flow",cssName:"flex-flow",jsName:"flexFlow",isPrefixed:!0,defaultUnit:""},b={className:"plc-cnt",cssName:"place-content",jsName:"placeContent"},y={className:"plc-items",cssName:"place-items",jsName:"placeItems"},v={className:"plc-self",cssName:"place-self",jsName:"placeSelf"};t.propEnhancers={alignContent:function(e,t){return(0,o.default)(c,e,t)},alignItems:function(e,t){return(0,o.default)(g,e,t)},alignSelf:function(e,t){return(0,o.default)(s,e,t)},flex:function(e,t){return(0,o.default)(i,e,t)},flexBasis:function(e,t){return(0,o.default)(h,e,t)},flexDirection:function(e,t){return(0,o.default)(I,e,t)},flexFlow:function(e,t){return(0,o.default)(m,e,t)},flexGrow:function(e,t){return(0,o.default)(d,e,t)},flexShrink:function(e,t){return(0,o.default)(A,e,t)},flexWrap:function(e,t){return(0,o.default)(C,e,t)},justifyContent:function(e,t){return(0,o.default)(l,e,t)},justifyItems:function(e,t){return(0,o.default)(u,e,t)},justifySelf:function(e,t){return(0,o.default)(f,e,t)},order:function(e,t){return(0,o.default)(p,e,t)},placeContent:function(e,t){return(0,o.default)(b,e,t)},placeItems:function(e,t){return(0,o.default)(y,e,t)},placeSelf:function(e,t){return(0,o.default)(v,e,t)}}},5603:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={columnGap:a.default.oneOfType([a.default.string,a.default.number]),gap:a.default.oneOfType([a.default.string,a.default.number]),grid:a.default.string,gridArea:a.default.string,gridAutoColumns:a.default.oneOfType([a.default.string,a.default.number]),gridAutoFlow:a.default.string,gridAutoRows:a.default.oneOfType([a.default.string,a.default.number]),gridColumn:a.default.oneOfType([a.default.string,a.default.number]),gridColumnEnd:a.default.oneOfType([a.default.string,a.default.number]),gridColumnGap:a.default.oneOfType([a.default.string,a.default.number]),gridColumnStart:a.default.oneOfType([a.default.string,a.default.number]),gridGap:a.default.oneOfType([a.default.string,a.default.number]),gridRow:a.default.oneOfType([a.default.string,a.default.number]),gridRowEnd:a.default.oneOfType([a.default.string,a.default.number]),gridRowGap:a.default.oneOfType([a.default.string,a.default.number]),gridRowStart:a.default.oneOfType([a.default.string,a.default.number]),gridTemplate:a.default.string,gridTemplateAreas:a.default.string,gridTemplateColumns:a.default.string,gridTemplateRows:a.default.string,rowGap:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={},t.propValidators={};var i={className:"col-gap",cssName:"column-gap",jsName:"columnGap"},g={className:"gap",cssName:"gap",jsName:"gap"},s={className:"grd",cssName:"grid",jsName:"grid",complexValue:!0},c={className:"grd-ara",cssName:"grid-area",jsName:"gridArea",complexValue:!0},l={className:"grd-ato-col",cssName:"grid-auto-columns",jsName:"gridAutoColumns",complexValue:!0},u={className:"grd-ato-flw",cssName:"grid-auto-flow",jsName:"gridAutoFlow"},f={className:"grd-ato-row",cssName:"grid-auto-rows",jsName:"gridAutoRows",complexValue:!0},I={className:"grd-col",cssName:"grid-column",jsName:"gridColumn",defaultUnit:"",complexValue:!0},C={className:"grd-col-end",cssName:"grid-column-end",jsName:"gridColumnEnd",defaultUnit:""},d={className:"grd-col-gap",cssName:"grid-column-gap",jsName:"gridColumnGap"},A={className:"grd-col-str",cssName:"grid-column-start",jsName:"gridColumnStart",defaultUnit:""},h={className:"grd-gap",cssName:"grid-gap",jsName:"gridGap"},p={className:"grd-row",cssName:"grid-row",jsName:"gridRow",defaultUnit:"",complexValue:!0},m={className:"grd-row-end",cssName:"grid-row-end",jsName:"gridRowEnd",defaultUnit:""},b={className:"grd-row-gap",cssName:"grid-row-gap",jsName:"gridRowGap"},y={className:"grd-row-str",cssName:"grid-row-start",jsName:"gridRowStart",defaultUnit:""},v={className:"grd-tmp",cssName:"grid-template",jsName:"gridTemplate",complexValue:!0},Z={className:"grd-tmp-ara",cssName:"grid-template-areas",jsName:"gridTemplateAreas",complexValue:!0},G={className:"grd-tmp-col",cssName:"grid-template-columns",jsName:"gridTemplateColumns",complexValue:!0},B={className:"grd-tmp-row",cssName:"grid-template-rows",jsName:"gridTemplateRows",complexValue:!0},k={className:"row-gap",cssName:"row-gap",jsName:"rowGap"};t.propEnhancers={columnGap:function(e,t){return(0,o.default)(i,e,t)},gap:function(e,t){return(0,o.default)(g,e,t)},grid:function(e,t){return(0,o.default)(s,e,t)},gridArea:function(e,t){return(0,o.default)(c,e,t)},gridAutoColumns:function(e,t){return(0,o.default)(l,e,t)},gridAutoFlow:function(e,t){return(0,o.default)(u,e,t)},gridAutoRows:function(e,t){return(0,o.default)(f,e,t)},gridColumn:function(e,t){return(0,o.default)(I,e,t)},gridColumnEnd:function(e,t){return(0,o.default)(C,e,t)},gridColumnGap:function(e,t){return(0,o.default)(d,e,t)},gridColumnStart:function(e,t){return(0,o.default)(A,e,t)},gridGap:function(e,t){return(0,o.default)(h,e,t)},gridRow:function(e,t){return(0,o.default)(p,e,t)},gridRowEnd:function(e,t){return(0,o.default)(m,e,t)},gridRowGap:function(e,t){return(0,o.default)(b,e,t)},gridRowStart:function(e,t){return(0,o.default)(y,e,t)},gridTemplate:function(e,t){return(0,o.default)(v,e,t)},gridTemplateAreas:function(e,t){return(0,o.default)(Z,e,t)},gridTemplateColumns:function(e,t){return(0,o.default)(G,e,t)},gridTemplateRows:function(e,t){return(0,o.default)(B,e,t)},rowGap:function(e,t){return(0,o.default)(k,e,t)}}},7343:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propNames=t.propTypes=t.transition=t.transform=t.text=t.svg=t.spacing=t.selectors=t.resize=t.position=t.overflow=t.outline=t.opacity=t.list=t.layout=t.interaction=t.grid=t.flex=t.dimensions=t.boxShadow=t.borders=t.borderRadius=t.background=t.animation=void 0;var i=o(n(2352));t.animation=i;var g=o(n(1569));t.background=g;var s=o(n(3870));t.borderRadius=s;var c=o(n(9157));t.borders=c;var l=o(n(8233));t.boxShadow=l;var u=o(n(3969));t.dimensions=u;var f=o(n(92));t.flex=f;var I=o(n(5603));t.grid=I;var C=o(n(8447));t.interaction=C;var d=o(n(8714));t.layout=d;var A=o(n(502));t.list=A;var h=o(n(9484));t.opacity=h;var p=o(n(9356));t.outline=p;var m=o(n(8514));t.overflow=m;var b=o(n(649));t.position=b;var y=o(n(9833));t.resize=y;var v=o(n(6531));t.selectors=v;var Z=o(n(6331));t.spacing=Z;var G=o(n(1843));t.svg=G;var B=o(n(2628));t.text=B;var k=o(n(1312));t.transform=k;var S=o(n(2839));t.transition=S,t.propTypes=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i.propTypes),g.propTypes),s.propTypes),c.propTypes),l.propTypes),u.propTypes),f.propTypes),I.propTypes),C.propTypes),d.propTypes),A.propTypes),h.propTypes),p.propTypes),m.propTypes),b.propTypes),y.propTypes),v.propTypes),Z.propTypes),G.propTypes),B.propTypes),k.propTypes),S.propTypes),t.propNames=Object.keys(t.propTypes),t.propAliases=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i.propAliases),g.propAliases),s.propAliases),c.propAliases),l.propAliases),u.propAliases),f.propAliases),I.propAliases),C.propAliases),d.propAliases),A.propAliases),h.propAliases),p.propAliases),m.propAliases),b.propAliases),y.propAliases),v.propAliases),Z.propAliases),G.propAliases),B.propAliases),k.propAliases),S.propAliases),t.propValidators=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i.propValidators),g.propValidators),s.propValidators),c.propValidators),l.propValidators),u.propValidators),f.propValidators),I.propValidators),C.propValidators),d.propValidators),A.propValidators),h.propValidators),p.propValidators),m.propValidators),b.propValidators),y.propValidators),v.propValidators),Z.propValidators),G.propValidators),B.propValidators),k.propValidators),S.propValidators),t.propEnhancers=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i.propEnhancers),g.propEnhancers),s.propEnhancers),c.propEnhancers),l.propEnhancers),u.propEnhancers),f.propEnhancers),I.propEnhancers),C.propEnhancers),d.propEnhancers),A.propEnhancers),h.propEnhancers),p.propEnhancers),m.propEnhancers),b.propEnhancers),y.propEnhancers),v.propEnhancers),Z.propEnhancers),G.propEnhancers),B.propEnhancers),k.propEnhancers),S.propEnhancers)},8447:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={cursor:a.default.string,pointerEvents:a.default.string,userSelect:a.default.string,visibility:a.default.string},t.propAliases={},t.propValidators={};var i={className:"crsr",cssName:"cursor",jsName:"cursor"},g={className:"usr-slct",cssName:"user-select",jsName:"userSelect",safeValue:!0,isPrefixed:!0},s={className:"vsblt",cssName:"visibility",jsName:"visibility",safeValue:!0},c={className:"ptr-evts",cssName:"pointer-events",jsName:"pointerEvents",safeValue:!0};t.propEnhancers={cursor:function(e,t){return(0,o.default)(i,e,t)},pointerEvents:function(e,t){return(0,o.default)(c,e,t)},userSelect:function(e,t){return(0,o.default)(g,e,t)},visibility:function(e,t){return(0,o.default)(s,e,t)}}},8714:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988)),i=n(1239);t.propTypes={boxSizing:a.default.string,clear:a.default.string,clearfix:a.default.bool,content:a.default.string,display:a.default.string,float:a.default.string,zIndex:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={},t.propValidators={};var g={className:"dspl",cssName:"display",jsName:"display",safeValue:!0,isPrefixed:!0},s={className:"flt",cssName:"float",jsName:"float",safeValue:!0},c={className:"clr",cssName:"clear",jsName:"clear",safeValue:!0},l={className:"z-idx",cssName:"z-index",jsName:"zIndex",safeValue:!0,defaultUnit:""},u={className:"box-szg",cssName:"box-sizing",jsName:"boxSizing",safeValue:!0},f={className:"cnt",cssName:"content",jsName:"content",complexValue:!0};t.propEnhancers={boxSizing:function(e,t){return(0,o.default)(u,e,t)},clear:function(e,t){return(0,o.default)(c,e,t)},clearfix:function(){var e="".concat((0,i.getClassNamePrefix)(),"clearfix"),t=[{property:"display",value:"table"},{property:"clear",value:"both"},{property:"content",value:'""'}],n=t.map((function(e){return"  ".concat(e.property,": ").concat(e.value,";")})).join("\n");return{className:e,rules:t,styles:"\n.".concat(e,":before, .").concat(e,":after {\n").concat(n,"\n}")}},content:function(e,t){return(0,o.default)(f,e,t)},display:function(e,t){return(0,o.default)(g,e,t)},float:function(e,t){return(0,o.default)(s,e,t)},zIndex:function(e,t){return(0,o.default)(l,e,t)}}},502:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={listStyle:a.default.string,listStyleType:a.default.string,listStyleImage:a.default.string,listStylePosition:a.default.string},t.propAliases={},t.propValidators={};var i={className:"ls",cssName:"list-style",jsName:"listStyle",complexValue:!0},g={className:"ls-typ",cssName:"list-style-type",jsName:"listStyleType"},s={className:"ls-img",cssName:"list-style-image",jsName:"listStyleImage",complexValue:!0},c={className:"ls-pos",cssName:"list-style-position",jsName:"listStylePosition",safeValue:!0};t.propEnhancers={listStyle:function(e,t){return(0,o.default)(i,e,t)},listStyleType:function(e,t){return(0,o.default)(g,e,t)},listStyleImage:function(e,t){return(0,o.default)(s,e,t)},listStylePosition:function(e,t){return(0,o.default)(c,e,t)}}},9484:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={opacity:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={},t.propValidators={};var i={className:"opct",cssName:"opacity",jsName:"opacity",defaultUnit:""};t.propEnhancers={opacity:function(e,t){return(0,o.default)(i,e,t)}}},9356:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={outline:a.default.string},t.propAliases={},t.propValidators={};var i={className:"otln",cssName:"outline",jsName:"outline",complexValue:!0};t.propEnhancers={outline:function(e,t){return(0,o.default)(i,e,t)}}},8514:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={overflow:a.default.string,overflowX:a.default.string,overflowY:a.default.string},t.propAliases={overflow:["overflowX","overflowY"]},t.propValidators={};var i={className:"ovflw-y",cssName:"overflow-y",jsName:"overflowY",safeValue:!0},g={className:"ovflw-x",cssName:"overflow-x",jsName:"overflowX",safeValue:!0};t.propEnhancers={overflowX:function(e,t){return(0,o.default)(g,e,t)},overflowY:function(e,t){return(0,o.default)(i,e,t)}}},649:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={bottom:a.default.oneOfType([a.default.string,a.default.number]),left:a.default.oneOfType([a.default.string,a.default.number]),position:a.default.string,right:a.default.oneOfType([a.default.string,a.default.number]),top:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={},t.propValidators={};var i={className:"pst",cssName:"position",jsName:"position",safeValue:!0,isPrefixed:!0},g={className:"top",cssName:"top",jsName:"top"},s={className:"rgt",cssName:"right",jsName:"right"},c={className:"btm",cssName:"bottom",jsName:"bottom"},l={className:"lft",cssName:"left",jsName:"left"};t.propEnhancers={bottom:function(e,t){return(0,o.default)(c,e,t)},left:function(e,t){return(0,o.default)(l,e,t)},position:function(e,t){return(0,o.default)(i,e,t)},right:function(e,t){return(0,o.default)(s,e,t)},top:function(e,t){return(0,o.default)(g,e,t)}}},9833:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={resize:a.default.string},t.propAliases={},t.propValidators={};var i={className:"rsz",cssName:"resize",jsName:"resize"};t.propEnhancers={resize:function(e,t){return(0,o.default)(i,e,t)}}},6531:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007));t.propTypes={selectors:a.default.object},t.propAliases={},t.propValidators={},t.propEnhancers={}},6331:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));n(7228);t.propTypes={margin:a.default.oneOfType([a.default.string,a.default.number]),marginBottom:a.default.oneOfType([a.default.string,a.default.number]),marginLeft:a.default.oneOfType([a.default.string,a.default.number]),marginRight:a.default.oneOfType([a.default.string,a.default.number]),marginTop:a.default.oneOfType([a.default.string,a.default.number]),marginX:a.default.oneOfType([a.default.string,a.default.number]),marginY:a.default.oneOfType([a.default.string,a.default.number]),padding:a.default.oneOfType([a.default.string,a.default.number]),paddingBottom:a.default.oneOfType([a.default.string,a.default.number]),paddingLeft:a.default.oneOfType([a.default.string,a.default.number]),paddingRight:a.default.oneOfType([a.default.string,a.default.number]),paddingTop:a.default.oneOfType([a.default.string,a.default.number]),paddingX:a.default.oneOfType([a.default.string,a.default.number]),paddingY:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={margin:["marginBottom","marginLeft","marginRight","marginTop"],marginX:["marginLeft","marginRight"],marginY:["marginBottom","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingBottom","paddingTop"]},t.propValidators={};var i={className:"mt",cssName:"margin-top",jsName:"marginTop"},g={className:"mr",cssName:"margin-right",jsName:"marginRight"},s={className:"mb",cssName:"margin-bottom",jsName:"marginBottom"},c={className:"ml",cssName:"margin-left",jsName:"marginLeft"},l={className:"pt",cssName:"padding-top",jsName:"paddingTop"},u={className:"pr",cssName:"padding-right",jsName:"paddingRight"},f={className:"pb",cssName:"padding-bottom",jsName:"paddingBottom"},I={className:"pl",cssName:"padding-left",jsName:"paddingLeft"};t.propEnhancers={marginBottom:function(e,t){return(0,o.default)(s,e,t)},marginLeft:function(e,t){return(0,o.default)(c,e,t)},marginRight:function(e,t){return(0,o.default)(g,e,t)},marginTop:function(e,t){return(0,o.default)(i,e,t)},paddingBottom:function(e,t){return(0,o.default)(f,e,t)},paddingLeft:function(e,t){return(0,o.default)(I,e,t)},paddingRight:function(e,t){return(0,o.default)(u,e,t)},paddingTop:function(e,t){return(0,o.default)(l,e,t)}}},1843:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={fill:a.default.string,stroke:a.default.string,strokeDasharray:a.default.oneOfType([a.default.string,a.default.number]),strokeDashoffset:a.default.oneOfType([a.default.string,a.default.number]),strokeLinecap:a.default.string,strokeMiterlimit:a.default.number,strokeWidth:a.default.oneOfType([a.default.string,a.default.number])},t.propAliases={},t.propValidators={};var i={className:"fill",cssName:"fill",jsName:"fill"},g={className:"strk",cssName:"stroke",jsName:"stroke"},s={className:"strk-dshary",cssName:"stroke-dasharray",jsName:"strokeDasharray",defaultUnit:""},c={className:"strk-dshofst",cssName:"stroke-dashoffset",jsName:"strokeDashoffset",defaultUnit:""},l={className:"strk-lncp",cssName:"stroke-linecap",jsName:"strokeLinecap",safeValue:!0},u={className:"strk-mtrlmt",cssName:"stroke-miterlimit",jsName:"strokeMiterlimit",defaultUnit:""},f={className:"strk-w",cssName:"stroke-width",jsName:"strokeWidth",defaultUnit:""};t.propEnhancers={fill:function(e,t){return(0,o.default)(i,e,t)},stroke:function(e,t){return(0,o.default)(g,e,t)},strokeDasharray:function(e,t){return(0,o.default)(s,e,t)},strokeDashoffset:function(e,t){return(0,o.default)(c,e,t)},strokeLinecap:function(e,t){return(0,o.default)(l,e,t)},strokeMiterlimit:function(e,t){return(0,o.default)(u,e,t)},strokeWidth:function(e,t){return(0,o.default)(f,e,t)}}},2628:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={color:a.default.string,font:a.default.string,fontFamily:a.default.string,fontSize:a.default.oneOfType([a.default.string,a.default.number]),fontStyle:a.default.string,fontVariant:a.default.string,fontWeight:a.default.oneOfType([a.default.string,a.default.number]),letterSpacing:a.default.oneOfType([a.default.string,a.default.number]),lineHeight:a.default.oneOfType([a.default.string,a.default.number]),textAlign:a.default.string,textDecoration:a.default.string,textOverflow:a.default.string,textShadow:a.default.string,textTransform:a.default.string,verticalAlign:a.default.string,whiteSpace:a.default.string,wordBreak:a.default.string,wordWrap:a.default.string},t.propAliases={},t.propValidators={};var i={className:"txt-algn",safeValue:!0,cssName:"text-align",jsName:"textAlign"},g={className:"txt-deco",cssName:"text-decoration",jsName:"textDecoration"},s={className:"txt-trns",cssName:"text-transform",jsName:"textTransform",safeValue:!0},c={className:"txt-shdw",cssName:"text-shadow",jsName:"textShadow",complexValue:!0},l={className:"txt-ovrf",cssName:"text-overflow",jsName:"textOverflow",safeValue:!0},u={className:"color",cssName:"color",jsName:"color"},f={className:"fnt",cssName:"font",jsName:"font",complexValue:!0},I={className:"fnt-fam",cssName:"font-family",jsName:"fontFamily",complexValue:!0},C={className:"fnt-sze",cssName:"font-size",jsName:"fontSize"},d={className:"fnt-stl",cssName:"font-style",jsName:"fontStyle",safeValue:!0},A={className:"f-vari",cssName:"font-variant",jsName:"fontVariant"},h={className:"f-wght",cssName:"font-weight",jsName:"fontWeight",safeValue:!0,defaultUnit:""},p={className:"ln-ht",cssName:"line-height",jsName:"lineHeight",defaultUnit:""},m={className:"ver-algn",cssName:"vertical-align",jsName:"verticalAlign",safeValue:!0},b={className:"wrd-brk",cssName:"word-break",jsName:"wordBreak",safeValue:!0},y={className:"wrd-wrp",cssName:"word-wrap",jsName:"wordWrap",safeValue:!0},v={className:"wht-spc",cssName:"white-space",jsName:"whiteSpace",safeValue:!0},Z={className:"ltr-spc",cssName:"letter-spacing",jsName:"letterSpacing"};t.propEnhancers={color:function(e,t){return(0,o.default)(u,e,t)},font:function(e,t){return(0,o.default)(f,e,t)},fontFamily:function(e,t){return(0,o.default)(I,e,t)},fontSize:function(e,t){return(0,o.default)(C,e,t)},fontStyle:function(e,t){return(0,o.default)(d,e,t)},fontVariant:function(e,t){return(0,o.default)(A,e,t)},fontWeight:function(e,t){return(0,o.default)(h,e,t)},letterSpacing:function(e,t){return(0,o.default)(Z,e,t)},lineHeight:function(e,t){return(0,o.default)(p,e,t)},textAlign:function(e,t){return(0,o.default)(i,e,t)},textDecoration:function(e,t){return(0,o.default)(g,e,t)},textOverflow:function(e,t){return(0,o.default)(l,e,t)},textShadow:function(e,t){return(0,o.default)(c,e,t)},textTransform:function(e,t){return(0,o.default)(s,e,t)},verticalAlign:function(e,t){return(0,o.default)(m,e,t)},whiteSpace:function(e,t){return(0,o.default)(v,e,t)},wordBreak:function(e,t){return(0,o.default)(b,e,t)},wordWrap:function(e,t){return(0,o.default)(y,e,t)}}},1312:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={transform:a.default.string,transformOrigin:a.default.string},t.propAliases={},t.propValidators={};var i={className:"tfrm",cssName:"transform",jsName:"transform",complexValue:!0},g={className:"tfrm-orgn",cssName:"transform-origin",jsName:"transformOrigin",complexValue:!0};t.propEnhancers={transform:function(e,t){return(0,o.default)(i,e,t)},transformOrigin:function(e,t){return(0,o.default)(g,e,t)}}},2839:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.propEnhancers=t.propValidators=t.propAliases=t.propTypes=void 0;var a=r(n(2007)),o=r(n(3988));t.propTypes={transition:a.default.string,transitionDelay:a.default.string,transitionDuration:a.default.string,transitionProperty:a.default.string,transitionTimingFunction:a.default.string},t.propAliases={},t.propValidators={};var i={className:"tstn",cssName:"transition",jsName:"transition",complexValue:!0},g={className:"tstn-dly",cssName:"transition-delay",jsName:"transitionDelay",complexValue:!0},s={className:"tstn-drn",cssName:"transition-duration",jsName:"transitionDuration",complexValue:!0},c={className:"tstn-pty",cssName:"transition-property",jsName:"transitionProperty",complexValue:!0},l={className:"tstn-tf",cssName:"transition-timing-function",jsName:"transitionTimingFunction",complexValue:!0};t.propEnhancers={transition:function(e,t){return(0,o.default)(i,e,t)},transitionDelay:function(e,t){return(0,o.default)(g,e,t)},transitionDuration:function(e,t){return(0,o.default)(s,e,t)},transitionProperty:function(e,t){return(0,o.default)(c,e,t)},transitionTimingFunction:function(e,t){return(0,o.default)(l,e,t)}}},8190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7343);t.default=function(e){var t=Object.keys(e),n=new Map;return t.forEach((function(t){var a=e[t];(r.propAliases[t]||[t]).forEach((function(e){n.set(e,a)}))})),n}},1239:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setClassNamePrefix=t.getClassNamePrefix=void 0;var a=r(n(8918)),o=r(n(5383)),i="ub-";t.getClassNamePrefix=function(){return i},t.setClassNamePrefix=function(e){i=e},t.default=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",g=e.className,s=e.safeValue,c=void 0!==s&&s,l=e.complexValue;return n="inherit"===t||"initial"===t||"unset"===t?t:void 0!==l&&l||t.includes("calc(")?(0,a.default)(t):c?t:(0,o.default)(t),r&&(n="".concat(n,"_").concat((0,a.default)(r))),"".concat(i).concat(g,"_").concat(n)}},3988:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(5841)),o=r(n(2005)),i=r(n(1239)),g=r(n(9289));t.default=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=typeof t;if("string"!==c&&"number"!==c)return null;var l,u=(0,o.default)(t,e.defaultUnit),f=(0,i.default)(e,u,r);if(n=e.isPrefixed?(0,a.default)(e.jsName||"",u):[{property:e.cssName||"",value:u}],(0,g.default)()){var I=n.map((function(e){return"".concat(e.property,":").concat(e.value)})).join(";");l="".concat(s(f,r),"{").concat(I,"}")}else{var C=n.map((function(e){return"  ".concat(e.property,": ").concat(e.value,";")})).join("\n");l="\n".concat(s(f,r)," {\n").concat(C,"\n}")}return{className:f,styles:l,rules:n}};var s=function(e,t){return t.includes(",")?t.split(",").map((function(t){return".".concat(e).concat(t)})).join(", "):".".concat(e).concat(t)}},5383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7228),a=/[ .]/g,o=/%/g;t.default=function(e){return e.replace(a,"-").replace(o,"prcnt").replace(r.unsafeClassNameCharacters,"")}},8246:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearStyles=t.extractStyles=t.hydrate=t.propEnhancers=t.propAliases=t.propNames=t.propTypes=t.transform=t.text=t.spacing=t.position=t.overflow=t.opacity=t.list=t.layout=t.interaction=t.flex=t.dimensions=t.boxShadow=t.borders=t.borderRadius=t.background=t.configureSafeHref=t.setClassNamePrefix=t.splitBoxProps=t.splitProps=t.keyframes=t.default=void 0;var g=o(n(8139)),s=o(n(8902)),c=n(245);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(c).default}});var l=n(3486);Object.defineProperty(t,"keyframes",{enumerable:!0,get:function(){return i(l).default}});var u=n(7715);Object.defineProperty(t,"splitProps",{enumerable:!0,get:function(){return i(u).default}});var f=n(7490);Object.defineProperty(t,"splitBoxProps",{enumerable:!0,get:function(){return i(f).default}});var I=n(1239);Object.defineProperty(t,"setClassNamePrefix",{enumerable:!0,get:function(){return I.setClassNamePrefix}});var C=n(1087);Object.defineProperty(t,"configureSafeHref",{enumerable:!0,get:function(){return C.configureSafeHref}});var d=n(7343);function A(){g.clear(),s.clear()}Object.defineProperty(t,"background",{enumerable:!0,get:function(){return d.background}}),Object.defineProperty(t,"borderRadius",{enumerable:!0,get:function(){return d.borderRadius}}),Object.defineProperty(t,"borders",{enumerable:!0,get:function(){return d.borders}}),Object.defineProperty(t,"boxShadow",{enumerable:!0,get:function(){return d.boxShadow}}),Object.defineProperty(t,"dimensions",{enumerable:!0,get:function(){return d.dimensions}}),Object.defineProperty(t,"flex",{enumerable:!0,get:function(){return d.flex}}),Object.defineProperty(t,"interaction",{enumerable:!0,get:function(){return d.interaction}}),Object.defineProperty(t,"layout",{enumerable:!0,get:function(){return d.layout}}),Object.defineProperty(t,"list",{enumerable:!0,get:function(){return d.list}}),Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return d.opacity}}),Object.defineProperty(t,"overflow",{enumerable:!0,get:function(){return d.overflow}}),Object.defineProperty(t,"position",{enumerable:!0,get:function(){return d.position}}),Object.defineProperty(t,"spacing",{enumerable:!0,get:function(){return d.spacing}}),Object.defineProperty(t,"text",{enumerable:!0,get:function(){return d.text}}),Object.defineProperty(t,"transform",{enumerable:!0,get:function(){return d.transform}}),Object.defineProperty(t,"propTypes",{enumerable:!0,get:function(){return d.propTypes}}),Object.defineProperty(t,"propNames",{enumerable:!0,get:function(){return d.propNames}}),Object.defineProperty(t,"propAliases",{enumerable:!0,get:function(){return d.propAliases}}),Object.defineProperty(t,"propEnhancers",{enumerable:!0,get:function(){return d.propEnhancers}}),t.hydrate=g.hydrate,t.extractStyles=function(){var e={cache:g.entries(),styles:s.getAll()};return A(),e},t.clearStyles=A},3486:function(e,t,n){"use strict";var r=n(861).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=g(n(8918)),c=g(n(6130)),l=n(7343),u=g(n(9289)),f=i(n(8902)),I=i(n(8139)),C=function(e,t){var n=function(e){var t=[];return t.concat.apply(t,r(e))}(Object.keys(t).map((function(e){return d(e,t)}))),a=h(e),o=n.map((function(e){var t=e.property,n=e.value;return(0,u.default)()?"".concat(t,":").concat(n,";"):"    ".concat(t,": ").concat(n,";")})).join((0,u.default)()?"":"\n");return(0,u.default)()?"".concat(a," {").concat(o,"}"):"  ".concat(a," {\n").concat(o,"\n  }")},d=function(e,t){var n=t[e],r=l.propEnhancers[e];if(null==r||null==n||!1===n)return[];var a=r(n,"");return null==a?[]:a.rules},A=function(e,t){var n=(0,u.default)()?"":"\n",r="{".concat(n),a="".concat(n,"}"),o=t.join(n);return"@keyframes ".concat(e," ").concat(r).concat(o).concat(a)},h=function(e){return!isNaN(Number(e))?"".concat(e,"%"):e.toString()};t.default=function(e,t){var n=(0,s.default)((0,c.default)(t)),r="".concat(e,"_").concat(n);if(null!=I.get(e,n,"keyframe"))return r;var a=Object.keys(t).map((function(e){return C(e,t[e]||{})})),o=A(r,a);return I.set(e,n,o,"keyframe"),f.add(o),r}},5841:function(e,t,n){"use strict";var r=n(8416).default,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2541),i=a(n(7422)),g=/^(Webkit|ms|Moz|O)/;t.default=function(e,t){for(var n=(0,o.prefix)(r({},e,t)),a=[],s=Object.keys(n),c=0;c<s.length;c++){var l=s[c],u=l.match(g)?"-".concat(l):l,f=(0,i.default)(u),I=n[l];if(Array.isArray(I))for(var C=0;C<I.length;C++)a.push({property:f,value:I[C]});else a.push({property:f,value:I})}return a}},8902:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.getAll=t.add=void 0;var a=new(r(n(8682)).default)({});a.inject(),t.add=function(e){a.insert(e)},t.getAll=function(){return a.rules().reduce((function(e,t){return e+t.cssText}),"")},t.clear=function(){a.flush(),a.inject()}},7422:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/([a-z\d])([A-Z])/g,r=/([a-z]+)([A-Z][a-z\d]+)/g;t.default=function(e){return e.replace(n,"$1".concat("-","$2")).replace(r,"$1".concat("-","$2")).toLowerCase()}},6130:function(e,t,n){"use strict";var r=n(8416).default;Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t){return Object.keys(t).map((function(n){var a=t[n],o=typeof a;return Array.isArray(a)?"".concat(n,":array:[").concat(a.map((function(t,n){return e(r({},n,t))})),"]"):null!=a&&"object"===o?"".concat(n,":").concat(o,":").concat(e(a)):"".concat(n,":").concat(o,":").concat(a)})).join(";")}},9289:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return!0}},7228:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeClassNameCharacters=t.spacesOutsideParentheses=void 0,t.spacesOutsideParentheses=/ (?=([^()]*\([^()]*\))*[^()]*$)/g,t.unsafeClassNameCharacters=/[^_a-zA-Z0-9-]/g},1087:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAnchorProps=t.getURLInfo=t.getUseSafeHref=t.configureSafeHref=void 0;var n=/^[a-z]+:/,r=/^(?:[a-z]+:?:)?(?:\/\/)?([^\/\?]+)/,a=!0,o="undefined"!==typeof window&&window.location.origin;function i(e){var t=e.match(n),a=e.match(r),i=t?t[0]:"relative",g="relative"===i;return!g&&o&&(g=o===(a&&a[0])),!!g||["http:","https:","mailto:","tel:","data:"].includes(i)?{url:e,sameOrigin:g}:(console.error("\ud83d\udce6 `href` passed to anchor tag is unsafe. Because of this, the `href` on the element was not set. Please review the safe href documentation if you have questions.","https://www.github.com/segmentio/ui-box"),{url:void 0,sameOrigin:g})}t.configureSafeHref=function(e){"boolean"===typeof e.enabled&&(a=e.enabled),e.origin&&(o=e.origin)},t.getUseSafeHref=function(){return a},t.getURLInfo=i,t.extractAnchorProps=function(e,t){var n=i(e),r=n.url,a=t||"";return n.url&&(a.includes("noopener")||(a+="".concat(a.length>0?" ":"","noopener")),a.includes("noreferrer")||n.sameOrigin||(a+="".concat(a.length>0?" ":"","noreferrer"))),{safeHref:r,safeRel:a}}},7490:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7343),o=r(n(7715));t.default=function(e){return(0,o.default)(e,a.propNames)}},7715:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n={},r={},a=Object.keys(e),o=0;o<a.length;o++){var i=a[o],g=e[i];t.includes(i)?n[i]=g:r[i]=g}return{matchedProps:n,remainingProps:r}}},8682:function(e,t,n){"use strict";var r=n(6690).default,a=n(9728).default,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(9289)),g="undefined"!==typeof window;function s(e){return e[e.length-1]}function c(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t+=1)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function l(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-ui-box",""),e.append(document.createTextNode("")),(document.head||document.querySelector("head")).append(e),e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.tags=[],this.ctr=0,this.injected=!1,this.isSpeedy=void 0===t.speedy?(0,i.default)():t.speedy,this.maxLength=t.maxLength||65e3}return a(e,[{key:"getSheet",value:function(){return c(s(this.tags))}},{key:"inject",value:function(){var e=this;if(this.injected)throw new Error("StyleSheet has already been injected.");g?this.tags[0]=l():this.sheet={cssRules:[],insertRule:function(t){e.sheet.cssRules.push({cssText:t})}},this.injected=!0}},{key:"speedy",value:function(e){if(0!==this.ctr)throw new Error("StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(".concat(e,") earlier in your app, or call flush() before speedy(").concat(e,")"));this.isSpeedy=Boolean(e)}},{key:"_insert",value:function(e,t){e.insertRule(t,e.cssRules.length)}},{key:"insert",value:function(e){if(g){var t=this.getSheet();this.isSpeedy&&null!=t?this._insert(t,e):s(this.tags).append(document.createTextNode(e))}else this.sheet&&this.sheet.insertRule(e,this.sheet.cssRules.length);return this.ctr+=1,g&&this.ctr%this.maxLength===0&&this.tags.push(l()),this.ctr-1}},{key:"flush",value:function(){g?(this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet&&(this.sheet.cssRules=[]),this.injected=!1}},{key:"rules",value:function(){if(!g)return this.sheet?this.sheet.cssRules:[];var e=[];return this.tags.forEach((function(t){var n=c(t);if(n){var r=Array.from(n.cssRules);e.splice.apply(e,[e.length,0].concat([].concat(r)))}})),e}}]),e}();t.default=u},2005:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"===typeof e?"".concat(e).concat(t):e}},7399:function(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},2374:function(e,t,n){"use strict";n.r(t),t.default={}},5856:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,a,o,i){try{var g=e[o](i),s=g.value}catch(c){return void n(c)}g.done?t(s):Promise.resolve(s).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function g(e){t(i,a,o,g,s,"next",e)}function s(e){t(i,a,o,g,s,"throw",e)}g(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,g=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return g=e.done,e},e:function(e){s=!0,i=e},f:function(){try{g||null==n.return||n.return()}finally{if(s)throw i}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),a=n(9617),o=n(4993);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var i=r(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,g=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(g.push(r.value),g.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return g}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,a=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,i=o.hasOwnProperty,g=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function I(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),i=new J(r||[]);return g(o,"_invoke",{value:W(e,n,i)}),o}function C(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=I;var d="suspendedStart",A="suspendedYield",h="executing",p="completed",m={};function b(){}function y(){}function v(){}var Z={};f(Z,c,(function(){return this}));var G=Object.getPrototypeOf,B=G&&G(G(x([])));B&&B!==o&&i.call(B,c)&&(Z=B);var k=v.prototype=b.prototype=Object.create(Z);function S(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,g,s){var c=C(e[a],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==r(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,g,s)}),(function(e){n("throw",e,g,s)})):t.resolve(u).then((function(e){l.value=e,g(l)}),(function(e){return n("throw",e,g,s)}))}s(c.arg)}var a;g(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}})}function W(e,n,r){var a=d;return function(o,i){if(a===h)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var g=r.delegate;if(g){var s=R(g,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var c=C(e,n,r);if("normal"===c.type){if(a=r.done?p:A,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=p,r.method="throw",r.arg=c.arg)}}}function R(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=C(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function V(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function X(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function J(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(V,this),this.reset(!0)}function x(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(i.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return y.prototype=v,g(k,"constructor",{value:v,configurable:!0}),g(v,"constructor",{value:y,configurable:!0}),y.displayName=f(v,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,f(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},n.awrap=function(e){return{__await:e}},S(w.prototype),f(w.prototype,l,(function(){return this})),n.AsyncIterator=w,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new w(I(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),f(k,u,"Generator"),f(k,c,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=x,J.prototype={constructor:J,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(X),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return g.type="throw",g.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],g=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),X(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;X(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),a=n(8872),o=n(6116),i=n(2218);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),a=n(9498),o=n(6116),i=n(2281);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,a=n(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var g=2&a&&r;"object"==typeof g&&!~e.indexOf(g);g=t(g))Object.getOwnPropertyNames(g).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},n.d(o,i),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".02d371a0.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="medichain-dapp:";n.l=function(r,a,o,i){if(e[r])e[r].push(a);else{var g,s;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+o){g=u;break}}g||(s=!0,(g=document.createElement("script")).charset="utf-8",g.timeout=120,n.nc&&g.setAttribute("nonce",n.nc),g.setAttribute("data-webpack",t+o),g.src=r),e[r]=[a];var f=function(t,n){g.onerror=g.onload=null,clearTimeout(I);var a=e[r];if(delete e[r],g.parentNode&&g.parentNode.removeChild(g),a&&a.forEach((function(e){return e(n)})),t)return t(n)},I=setTimeout(f.bind(null,void 0,{type:"timeout",target:g}),12e4);g.onerror=f.bind(null,g.onerror),g.onload=f.bind(null,g.onload),s&&document.head.appendChild(g)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=o);var i=n.p+n.u(t),g=new Error;n.l(i,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;g.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",g.name="ChunkLoadError",g.type=o,g.request=i,a[1](g)}}),"chunk-"+t,t)}};var t=function(t,r){var a,o,i=r[0],g=r[1],s=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in g)n.o(g,a)&&(n.m[a]=g[a]);if(s)s(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkmedichain_dapp=self.webpackChunkmedichain_dapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250),a=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function s(e){if(Array.isArray(e))return e}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e){return s(e)||c(e)||u(e)||f()}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e){var t=h();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function m(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}function b(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function B(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var k={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},S=function(){function e(t){Z(this,e);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(t,n)}return B(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||k,this.options=t,this.debug=t.debug}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"===typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,v(v({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}(),w=new S,W=function(){function e(){Z(this,e),this.observers={}}return B(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function R(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function V(e){return null==e?"":""+e}function X(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function a(){return!e||"string"===typeof e}for(var o="string"!==typeof t?[].concat(t):t.split(".");o.length>1;){if(a())return{};var i=r(o.shift());!e[i]&&n&&(e[i]=new n),e=Object.prototype.hasOwnProperty.call(e,i)?e[i]:{}}return a()?{}:{obj:e,k:r(o.shift())}}function J(e,t,n){var r=X(e,t,Object);r.obj[r.k]=n}function x(e,t){var n=X(e,t),r=n.obj,a=n.k;if(r)return r[a]}function Y(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"===typeof e[r]||e[r]instanceof String||"string"===typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Y(e[r],t[r],n):e[r]=t[r]);return e}function N(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function F(e){return"string"===typeof e?e.replace(/[&<>"'\/]/g,(function(e){return H[e]})):e}var K=[" ",",","?","!",";"];function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),a=e,o=0;o<r.length;++o){if(!a)return;if("string"===typeof a[r[o]]&&o+1<r.length)return;if(void 0===a[r[o]]){for(var i=2,g=r.slice(o,o+i).join(n),s=a[g];void 0===s&&r.length>o+i;)i++,s=a[g=r.slice(o,o+i).join(n)];if(void 0===s)return;if(null===s)return null;if(t.endsWith(g)){if("string"===typeof s)return s;if(g&&"string"===typeof s[g])return s[g]}var c=r.slice(o+i).join(n);return c?E(s,c,n):void 0}a=a[r[o]]}return a}}function T(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}var M=function(e){d(n,e);var t=p(n);function n(e){var r;Z(this,n);var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(r=t.call(this)).data=e||{},r.options=a,void 0===r.options.keySeparator&&(r.options.keySeparator="."),void 0===r.options.ignoreJSONStructure&&(r.options.ignoreJSONStructure=!0),r}return B(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,i=[e,t];n&&"string"!==typeof n&&(i=i.concat(n)),n&&"string"===typeof n&&(i=i.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(i=e.split("."));var g=x(this.data,i);return g||!o||"string"!==typeof n?g:E(this.data&&this.data[e]&&this.data[e][t],n,a)}},{key:"addResource",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,i=[e,t];n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(i=e.split("."))[1]),this.addNamespaces(t),J(this.data,i,r),a.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var a in n)"string"!==typeof n[a]&&"[object Array]"!==Object.prototype.toString.apply(n[a])||this.addResource(e,t,a,n[a],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},i=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(i=e.split("."))[1]),this.addNamespaces(t);var g=x(this.data,i)||{};r?Y(g,n,a):g=v(v({},g),n),J(this.data,i,g),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?v(v({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(W),z={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,a){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,a))})),t}},D={},L=function(e){d(n,e);var t=p(n);function n(e){var r;Z(this,n);var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,i(r=t.call(this))),r.options=a,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r.logger=w.create("translator"),r}return B(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,i=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!function(e,t,n){t=t||"",n=n||"";var r=K.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var a=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!a.test(e);if(!o){var i=e.indexOf(n);i>0&&!a.test(e.substring(0,i))&&(o=!0)}return o}(e,n,r);if(o&&!i){var g=e.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:e,namespaces:a};var s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(a=s.shift()),e=s.join(r)}return"string"===typeof a&&(a=[a]),{key:e,namespaces:a}}},{key:"translate",value:function(e,t,r){var a=this;if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t=v({},t)),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,g=this.extractFromKey(e[e.length-1],t),s=g.key,c=g.namespaces,l=c[c.length-1],u=t.lng||this.language,f=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(f){var I=t.nsSeparator||this.options.nsSeparator;return o?{res:"".concat(l).concat(I).concat(s),usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l}:"".concat(l).concat(I).concat(s)}return o?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l}:s}var C=this.resolve(e,t),d=C&&C.res,A=C&&C.usedKey||s,h=C&&C.exactUsedKey||s,p=Object.prototype.toString.apply(d),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&d&&("string"!==typeof d&&"boolean"!==typeof d&&"number"!==typeof d)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(p)<0&&("string"!==typeof m||"[object Array]"!==p)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var y=this.options.returnedObjectHandler?this.options.returnedObjectHandler(A,d,v(v({},t),{},{ns:c})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return o?(C.res=y,C):y}if(i){var Z="[object Array]"===p,G=Z?[]:{},B=Z?h:A;for(var k in d)if(Object.prototype.hasOwnProperty.call(d,k)){var S="".concat(B).concat(i).concat(k);G[k]=this.translate(S,v(v({},t),{joinArrays:!1,ns:c})),G[k]===S&&(G[k]=d[k])}d=G}}else if(b&&"string"===typeof m&&"[object Array]"===p)(d=d.join(m))&&(d=this.extendTranslation(d,e,t,r));else{var w=!1,W=!1,R=void 0!==t.count&&"string"!==typeof t.count,V=n.hasDefaultValue(t),X=R?this.pluralResolver.getSuffix(u,t.count,t):"",J=t.ordinal&&R?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",x=t["defaultValue".concat(X)]||t["defaultValue".concat(J)]||t.defaultValue;!this.isValidLookup(d)&&V&&(w=!0,d=x),this.isValidLookup(d)||(W=!0,d=s);var Y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&W?void 0:d,N=V&&x!==d&&this.options.updateMissing;if(W||w||N){if(this.logger.log(N?"updateKey":"missingKey",u,l,s,N?x:d),i){var H=this.resolve(s,v(v({},t),{},{keySeparator:!1}));H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var F=[],K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&K&&K[0])for(var E=0;E<K.length;E++)F.push(K[E]);else"all"===this.options.saveMissingTo?F=this.languageUtils.toResolveHierarchy(t.lng||this.language):F.push(t.lng||this.language);var T=function(e,n,r){var o=V&&r!==d?r:Y;a.options.missingKeyHandler?a.options.missingKeyHandler(e,l,n,o,N,t):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(e,l,n,o,N,t),a.emit("missingKey",e,l,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?F.forEach((function(e){a.pluralResolver.getSuffixes(e,t).forEach((function(n){T([e],s+n,t["defaultValue".concat(n)]||x)}))})):T(F,s,x))}d=this.extendTranslation(d,e,t,C,r),W&&d===s&&this.options.appendNamespaceToMissingKey&&(d="".concat(l,":").concat(s)),(W||w)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(s):s,w?d:void 0):this.options.parseMissingKeyHandler(d))}return o?(C.res=d,C):d}},{key:"extendTranslation",value:function(e,t,n,r,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,v(v({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(v(v({},n),{interpolation:v(v({},this.options.interpolation),n.interpolation)}));var i,g="string"===typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(g){var s=e.match(this.interpolator.nestingRegexp);i=s&&s.length}var c=n.replace&&"string"!==typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=v(v({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),g){var l=e.match(this.interpolator.nestingRegexp);i<(l&&l.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return a&&a[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var u=n.postProcess||this.options.postProcess,f="string"===typeof u?[u]:u;return void 0!==e&&null!==e&&f&&f.length&&!1!==n.applyPostProcessor&&(e=z.handle(f,e,t,this.options&&this.options.postProcessPassResolved?v({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,a,o,i=this,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e&&(e=[e]),e.forEach((function(e){if(!i.isValidLookup(t)){var s=i.extractFromKey(e,g),c=s.key;n=c;var l=s.namespaces;i.options.fallbackNS&&(l=l.concat(i.options.fallbackNS));var u=void 0!==g.count&&"string"!==typeof g.count,f=u&&!g.ordinal&&0===g.count&&i.pluralResolver.shouldUseIntlApi(),I=void 0!==g.context&&("string"===typeof g.context||"number"===typeof g.context)&&""!==g.context,C=g.lngs?g.lngs:i.languageUtils.toResolveHierarchy(g.lng||i.language,g.fallbackLng);l.forEach((function(e){i.isValidLookup(t)||(o=e,!D["".concat(C[0],"-").concat(e)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(o)&&(D["".concat(C[0],"-").concat(e)]=!0,i.logger.warn('key "'.concat(n,'" for languages "').concat(C.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach((function(n){if(!i.isValidLookup(t)){a=n;var o,s=[c];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(s,c,n,e,g);else{var l;u&&(l=i.pluralResolver.getSuffix(n,g.count,g));var C="".concat(i.options.pluralSeparator,"zero"),d="".concat(i.options.pluralSeparator,"ordinal").concat(i.options.pluralSeparator);if(u&&(s.push(c+l),g.ordinal&&0===l.indexOf(d)&&s.push(c+l.replace(d,i.options.pluralSeparator)),f&&s.push(c+C)),I){var A="".concat(c).concat(i.options.contextSeparator).concat(g.context);s.push(A),u&&(s.push(A+l),g.ordinal&&0===l.indexOf(d)&&s.push(A+l.replace(d,i.options.pluralSeparator)),f&&s.push(A+C))}}for(;o=s.pop();)i.isValidLookup(t)||(r=o,t=i.getResource(n,e,o,g))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:o}}},{key:"isValidLookup",value:function(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),n}(W);function U(e){return e.charAt(0).toUpperCase()+e.slice(1)}var j=function(){function e(t){Z(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=w.create("languageUtils")}return B(e,[{key:"getScriptPartFromCode",value:function(e){if(!(e=T(e))||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!(e=T(e))||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"===typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=U(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=U(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=U(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){return e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:0===e.indexOf(r)?e:void 0}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),"string"===typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],o=function(e){e&&(n.isSupportedCode(e)?a.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"===typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"===typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){a.indexOf(e)<0&&o(n.formatLanguageCode(e))})),a}}]),e}(),O=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Q={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},P=["v1","v2","v3"],_=["v4"],q={zero:0,one:1,two:2,few:3,many:4,other:5};var $=function(){function e(t){Z(this,e);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=w.create("pluralResolver"),this.options.compatibilityJSON&&!_.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){var e={};return O.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:Q[t.fc]}}))})),e}()}return B(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(T(e),{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return q[e]-q[t]})).map((function(e){return"".concat(t.options.prepend).concat(n.ordinal?"ordinal".concat(t.options.prepend):"").concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),a=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var o=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"===typeof a?"_plural_".concat(a.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!P.includes(this.options.compatibilityJSON)}}]),e}();function ee(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(e,t,n){var r=x(e,n);return void 0!==r?r:x(t,n)}(e,t,n);return!o&&a&&"string"===typeof n&&void 0===(o=E(e,n,r))&&(o=E(t,n,r)),o}var te=function(){function e(){Z(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=w.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return B(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:F,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?N(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?N(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?N(t.nestingPrefix):t.nestingPrefixEscaped||N("$t("),this.nestingSuffix=t.nestingSuffix?N(t.nestingSuffix):t.nestingSuffixEscaped||N(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var a,o,i,g=this,s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(g.formatSeparator)<0){var a=ee(t,s,e,g.options.keySeparator,g.options.ignoreJSONStructure);return g.alwaysFormat?g.format(a,void 0,n,v(v(v({},r),t),{},{interpolationkey:e})):a}var o=e.split(g.formatSeparator),i=o.shift().trim(),c=o.join(g.formatSeparator).trim();return g.format(ee(t,s,i,g.options.keySeparator,g.options.ignoreJSONStructure),c,n,v(v(v({},r),t),{},{interpolationkey:i}))};this.resetRegExp();var u=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return g.escapeValue?c(g.escape(e)):c(e)}}].forEach((function(t){for(i=0;a=t.regex.exec(e);){var n=a[1].trim();if(void 0===(o=l(n)))if("function"===typeof u){var s=u(e,a,r);o="string"===typeof s?s:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(f){o=a[0];continue}g.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"===typeof o||g.useRawValueToEscape||(o=V(o));var c=t.safeValue(o);if(e=e.replace(a[0],c),f?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,++i>=g.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,a,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function g(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0];var i=(o=this.interpolate(o,a)).match(/'/g),g=o.match(/"/g);(i&&i.length%2===0&&!g||g.length%2!==0)&&(o=o.replace(/'/g,'"'));try{a=JSON.parse(o),t&&(a=v(v({},t),a))}catch(s){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),s),"".concat(e).concat(n).concat(o)}return delete a.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){var s=[];(a=(a=v({},i)).replace&&"string"!==typeof a.replace?a.replace:a).applyPostProcessor=!1,delete a.defaultValue;var c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var l=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=l.shift(),s=l,c=!0}if((r=t(g.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!==typeof r)return r;"string"!==typeof r&&(r=V(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=s.reduce((function(e,t){return o.format(e,t,i.lng,v(v({},i),{},{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function ne(e){var t={};return function(n,r,a){var o=r+JSON.stringify(a),i=t[o];return i||(i=e(T(r),a),t[o]=i),i(n)}}var re=function(){function e(){Z(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=w.create("formatter"),this.options=t,this.formats={number:ne((function(e,t){var n=new Intl.NumberFormat(e,v({},t));return function(e){return n.format(e)}})),currency:ne((function(e,t){var n=new Intl.NumberFormat(e,v(v({},t),{},{style:"currency"}));return function(e){return n.format(e)}})),datetime:ne((function(e,t){var n=new Intl.DateTimeFormat(e,v({},t));return function(e){return n.format(e)}})),relativetime:ne((function(e,t){var n=new Intl.RelativeTimeFormat(e,v({},t));return function(e){return n.format(e,t.range||"day")}})),list:ne((function(e,t){var n=new Intl.ListFormat(e,v({},t));return function(e){return n.format(e)}}))},this.init(t)}return B(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=ne(t)}},{key:"format",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var a=r[1].substring(0,r[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach((function(e){if(e){var t=I(e.split(":")),r=t[0],a=t.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[r.trim()]||(n[r.trim()]=a),"false"===a&&(n[r.trim()]=!1),"true"===a&&(n[r.trim()]=!0),isNaN(a)||(n[r.trim()]=parseInt(a,10))}}))}return{formatName:t,formatOptions:n}}(t),i=o.formatName,g=o.formatOptions;if(r.formats[i]){var s=e;try{var c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},l=c.locale||c.lng||a.locale||a.lng||n;s=r.formats[i](e,l,v(v(v({},g),a),c))}catch(u){r.logger.warn(u)}return s}return r.logger.warn("there was no format function for ".concat(i)),e}),e);return o}}]),e}();var ae=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;Z(this,n);var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(o=t.call(this)).backend=e,o.store=r,o.services=a,o.languageUtils=a.languageUtils,o.options=i,o.logger=w.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=i.maxParallelReads||10,o.readingCalls=0,o.maxRetries=i.maxRetries>=0?i.maxRetries:5,o.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(a,i.backend,i),o}return B(n,[{key:"queueLoad",value:function(e,t,n,r){var a=this,o={},i={},g={},s={};return e.forEach((function(e){var r=!0;t.forEach((function(t){var g="".concat(e,"|").concat(t);!n.reload&&a.store.hasResourceBundle(e,t)?a.state[g]=2:a.state[g]<0||(1===a.state[g]?void 0===i[g]&&(i[g]=!0):(a.state[g]=1,r=!1,void 0===i[g]&&(i[g]=!0),void 0===o[g]&&(o[g]=!0),void 0===s[t]&&(s[t]=!0)))})),r||(g[e]=!0)})),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(g),toLoadNamespaces:Object.keys(s)}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),a=r[0],o=r[1];t&&this.emit("failedLoading",a,o,t),n&&this.store.addResourceBundle(a,o,n),this.state[e]=t?-1:2;var i={};this.queue.forEach((function(n){!function(e,t,n,r){var a=X(e,t,Object),o=a.obj,i=a.k;o[i]=o[i]||[],r&&(o[i]=o[i].concat(n)),r||o[i].push(n)}(n.loaded,[a],o),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(e){i[e]||(i[e]={});var t=n.loaded[e];t.length&&t.forEach((function(t){void 0===i[e][t]&&(i[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:e,ns:t,fcName:n,tried:a,wait:o,callback:i});else{this.readingCalls++;var g=function(g,s){if(r.readingCalls--,r.waitingReads.length>0){var c=r.waitingReads.shift();r.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}g&&s&&a<r.maxRetries?setTimeout((function(){r.read.call(r,e,t,n,a+1,2*o,i)}),o):i(g,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,g);try{var c=s(e,t);c&&"function"===typeof c.then?c.then((function(e){return g(null,e)})).catch(g):g(null,c)}catch(l){g(l)}}}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();"string"===typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"===typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),a=r[0],o=r[1];this.read(a,o,"read",void 0,void 0,(function(r,i){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(a," failed"),r),!r&&i&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(a),i),t.loaded(e,r,i)}))}},{key:"saveMissing",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){var g=v(v({},o),{},{isUpdate:a}),s=this.backend.create.bind(this.backend);if(s.length<6)try{var c;(c=5===s.length?s(e,t,n,r,g):s(e,t,n,r))&&"function"===typeof c.then?c.then((function(e){return i(null,e)})).catch(i):i(null,c)}catch(l){i(l)}else s(e,t,n,r,i,g)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}]),n}(W);function oe(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===typeof e[1]&&(t=e[1]),"string"===typeof e[1]&&(t.defaultValue=e[1]),"string"===typeof e[2]&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ie(e){return"string"===typeof e.ns&&(e.ns=[e.ns]),"string"===typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"===typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function ge(){}var se=function(e){d(n,e);var t=p(n);function n(){var e;Z(this,n);var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if((e=t.call(this)).options=ie(a),e.services={},e.logger=w,e.modules={external:[]},r=i(e),Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach((function(e){"function"===typeof r[e]&&(r[e]=r[e].bind(r))})),o&&!e.isInitialized&&!a.isClone){if(!e.options.initImmediate)return e.init(a,o),g(e,i(e));setTimeout((function(){e.init(a,o)}),0)}return e}return B(n,[{key:"init",value:function(){var e=this,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;"function"===typeof n&&(r=n,n={}),!n.defaultNS&&!1!==n.defaultNS&&n.ns&&("string"===typeof n.ns?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var a=oe();function o(e){return e?"function"===typeof e?new e:e:null}if(this.options=v(v(v({},a),this.options),ie(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=v(v({},a.interpolation),this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator),!this.options.isClone){var i;this.modules.logger?w.init(o(this.modules.logger),this.options):w.init(null,this.options),this.modules.formatter?i=this.modules.formatter:"undefined"!==typeof Intl&&(i=re);var g=new j(this.options);this.store=new M(this.options.resources,this.options);var s=this.services;s.logger=w,s.resourceStore=this.store,s.languageUtils=g,s.pluralResolver=new $(g,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!i||this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format||(s.formatter=o(i),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new te(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ae(o(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(s.languageDetector=o(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=o(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new L(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,r||(r=ge),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(n){e[n]=function(){var e;return(e=t.store)[n].apply(e,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(n){e[n]=function(){var e;return(e=t.store)[n].apply(e,arguments),t}}));var l=R(),u=function(){var t=function(t,n){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(n),r(t,n)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge,r="string"===typeof e?e:this.language;if("function"===typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();var a=[],o=function(e){e&&("cimode"!==e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){"cimode"!==e&&a.indexOf(e)<0&&a.push(e)})))};if(r)o(r);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)}));this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(a,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),n(e)}))}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=R();return e||(e=this.languages),t||(t=this.options.ns),n||(n=ge),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&z.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this,r=this;this.isLanguageChangingTo=e;var a=R();this.emit("languageChanging",e);var o=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},i=function(i){e||i||!n.services.languageDetector||(i=[]);var g="string"===typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);g&&(n.language||o(g),n.translator.language||n.translator.changeLanguage(g),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage&&n.services.languageDetector.cacheUserLanguage(g)),n.loadResources(g,(function(e){!function(e,i){i?(o(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,a.resolve((function(){return r.t.apply(r,arguments)})),t&&t(e,(function(){return r.t.apply(r,arguments)}))}(e,g)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),a}},{key:"getFixedT",value:function(e,t,n){var r=this,a=function e(t,a){var o;if("object"!==typeof a){for(var i=arguments.length,g=new Array(i>2?i-2:0),s=2;s<i;s++)g[s-2]=arguments[s];o=r.options.overloadTranslationOptionHandler([t,a].concat(g))}else o=v({},a);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,o.keyPrefix=o.keyPrefix||n||e.keyPrefix;var c,l=r.options.keySeparator||".";return c=o.keyPrefix&&Array.isArray(t)?t.map((function(e){return"".concat(o.keyPrefix).concat(l).concat(e)})):o.keyPrefix?"".concat(o.keyPrefix).concat(l).concat(t):t,r.t(c,o)};return"string"===typeof e?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=n.lng||this.resolvedLanguage||this.languages[0],a=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var i=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var g=n.precheck(this,i);if(void 0!==g)return g}return!!this.hasResourceBundle(r,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(r,e)||a&&!i(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=R();return this.options.ns?("string"===typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=R();"string"===typeof e&&(e=[e]);var r=this.options.preload||[],a=e.filter((function(e){return r.indexOf(e)<0}));return a.length?(this.options.preload=r.concat(a),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var t=this.services&&this.services.languageUtils||new j(oe());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge,a=t.forkResourceStore;a&&delete t.forkResourceStore;var o=v(v(v({},this.options),t),{isClone:!0}),i=new n(o);void 0===t.debug&&void 0===t.prefix||(i.logger=i.logger.clone(t));return["store","services","language"].forEach((function(t){i[t]=e[t]})),i.services=v({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},a&&(i.store=new M(this.store.data,o),i.services.resourceStore=i.store),i.translator=new L(i.services,o),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(o,r),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}],[{key:"createInstance",value:function(){return new n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}}]),n}(W),ce=se.createInstance();ce.createInstance=se.createInstance;ce.createInstance,ce.dir,ce.init,ce.loadResources,ce.reloadResources,ce.use,ce.changeLanguage,ce.getFixedT,ce.t,ce.exists,ce.setDefaultNamespace,ce.hasLoadedNamespace,ce.loadNamespaces,ce.loadLanguages,n(7399);Object.create(null);function le(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"===typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var ue={};function fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&ue[t[0]]||("string"===typeof t[0]&&(ue[t[0]]=new Date),le.apply(void 0,t))}var Ie=function(e,t){return function(){if(e.isInitialized)t();else{e.on("initialized",(function n(){setTimeout((function(){e.off("initialized",n)}),0),t()}))}}};function Ce(e,t,n){e.loadNamespaces(t,Ie(e,n))}function de(e,t,n,r){"string"===typeof n&&(n=[n]),n.forEach((function(t){e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,Ie(e,r))}var Ae=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,he={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},pe=function(e){return he[e]},me={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(Ae,pe)}};var be;var ye={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};me=v(v({},me),e)}(e.options.react),function(e){be=e}(e)}},ve=(0,e.createContext)(),Ze=function(){function e(){Z(this,e),this.usedNamespaces={}}return B(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function Ge(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,g=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(g.push(r.value),g.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return g}}(e,t)||u(e,t)||f()}var Be=function(t,n){var r=(0,e.useRef)();return(0,e.useEffect)((function(){r.current=n?r.current:t}),[t,n]),r.current};function ke(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.i18n,a=(0,e.useContext)(ve)||{},o=a.i18n,i=a.defaultNS,g=r||o||be;if(g&&!g.reportNamespaces&&(g.reportNamespaces=new Ze),!g){fe("You will need to pass in an i18next instance by using initReactI18next");var s=function(e,t){return"string"===typeof t?t:t&&"object"===typeof t&&"string"===typeof t.defaultValue?t.defaultValue:Array.isArray(e)?e[e.length-1]:e},c=[s,{},!1];return c.t=s,c.i18n={},c.ready=!1,c}g.options.react&&void 0!==g.options.react.wait&&fe("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=v(v(v({},me),g.options.react),n),u=l.useSuspense,f=l.keyPrefix,I=t||i||g.options&&g.options.defaultNS;I="string"===typeof I?[I]:I||["translation"],g.reportNamespaces.addUsedNamespaces&&g.reportNamespaces.addUsedNamespaces(I);var C=(g.isInitialized||g.initializedStoreOnce)&&I.every((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:function(t,r){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.languages[0],a=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var i=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||!(t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages))||!(!i(r,e)||a&&!i(o,e)))}(e,t,n):(fe("i18n.languages were undefined or empty",t.languages),!0)}(e,g,l)}));function d(){return g.getFixedT(n.lng||null,"fallback"===l.nsMode?I:I[0],f)}var A=Ge((0,e.useState)(d),2),h=A[0],p=A[1],m=I.join();n.lng&&(m="".concat(n.lng).concat(m));var b=Be(m),y=(0,e.useRef)(!0);(0,e.useEffect)((function(){var e=l.bindI18n,t=l.bindI18nStore;function r(){y.current&&p(d)}return y.current=!0,C||u||(n.lng?de(g,n.lng,I,(function(){y.current&&p(d)})):Ce(g,I,(function(){y.current&&p(d)}))),C&&b&&b!==m&&y.current&&p(d),e&&g&&g.on(e,r),t&&g&&g.store.on(t,r),function(){y.current=!1,e&&g&&e.split(" ").forEach((function(e){return g.off(e,r)})),t&&g&&t.split(" ").forEach((function(e){return g.store.off(e,r)}))}}),[g,m]);var Z=(0,e.useRef)(!0);(0,e.useEffect)((function(){y.current&&!Z.current&&p(d),Z.current=!1}),[g,f]);var G=[h,g,C];if(G.t=h,G.i18n=g,G.ready=C,C)return G;if(!C&&!u)return G;throw new Promise((function(e){n.lng?de(g,n.lng,I,(function(){return e()})):Ce(g,I,(function(){return e()}))}))}var Se,we=JSON.parse('{"navigation":{"search":"Buscar","account":"Mi cuenta","medicines":"Medicamentos","entities":"Entidades","contacts":"Contactos","medicine":"Medicamento","entity":"Entidad","contact":"Contacto","create":"Crear {{element}}","add":"A\xf1adir {{element}}"},"medicines":{"0":"Todos","1":"Stock"},"role":{"0":"","1":"Administrador +","2":"Administrador","3":"Supervisor","4":"Redentor","5":"Emisor","6":"Trabajador"},"entities":{"0":"Todas","1":"Laboratorio","2":"Almac\xe9n","3":"Farmacia","4":"Hospital","5":"Transporte"},"contacts":{"new":"A\xf1adir contacto","register":"Detalles del contacto"},"cards":{"contact":{"metadata":"A\xf1adir informaci\xf3n","delete":"\xbfSeguro que desea eliminar este contacto?","greeting":"Hola {{name}},","suggestion":"Ultimas peticiones","address":"Direcci\xf3n de billetera","firstname":"Nombre","lastname":"Apellidos","company":"Empresa","email":"Correo electr\xf3nico","phone":"N\xfamero de Tel\xe9fono","save":"Guardar","register":"\xa1Reg\xedstrate ahora!","share":"Compartir contacto","create":"Crear","continue":"Continuar","receive":"Recibir","destroy":"Destruir","request":"Peticiones de {{request}}","copy":"Presiona para copiar","copied":"\xa1Copiado!","non-registered":"Usuario no registrado en el sistema.","system-info":"Informaci\xf3n del usuario","system-register":"Registrar","system-remove":"Eliminar","system-remove-confirm":"\xbfSeguro que desea eliminar del sistema?","system-address-update":"Cambiar billetera","system-address-change":"Cambiar","system-new-address":"Especificar la nueva direcci\xf3n","search":"Buscar entidad","id":"N\xfamero de identificaci\xf3n","select-entity":"Seleccionar Entidad","select-role":"Seleccionar Rol","approve":"Aprobar","reject":"Rechazar","requester":"Informaci\xf3n del solicitante"},"entity":{"continue":"Continuar","create":"A\xf1adir Entidad","select":"Selecciona el tipo de entidad","address":"Direcci\xf3n de la billetera","metadata":"A\xf1adir informaci\xf3n","name":"Nombre de la Entidad","add":"A\xf1adir"},"medicine":{"transfer":"Transferir","transfer-header":"Direcci\xf3n de la cuenta","transfer-header-2":"Especificar la cantidad","mint":"Emitir","mint-header":"Especificar la cantidad","burn":"Destruir","burn-header":"Especificar la cantidad","balance":"Balance","continue":"Continuar","deploy":"Registrar","deploy-header":"Datos del medicamento","code":"C\xf3digo del medicamento","name":"Nombre","symbol":"S\xedmbolo","measure-unit":"Unidad de medida","presentation":"Presentaci\xf3n","pause":"Pausar","unpause":"Reestablecer"},"share":{"header":"Escanear aqu\xed"},"search":{"placeholder":"Buscar","entities":"Entidades","medicines":"Medicamentos","contacts":"Contactos"}}}');function We(e){return function(e){if(Array.isArray(e))return l(e)}(e)||c(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t,n){return Re=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&C(a,n.prototype),a},Re.apply(null,arguments)}function Ve(e){var t="function"===typeof Map?new Map:void 0;return Ve=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Re(e,arguments,A(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,e)},Ve(e)}function Xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,g=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){g=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(g)throw o}}}}function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Se||(Se={}));var xe,Ye="popstate";function Ne(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function He(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Fe(e,t){return{usr:e.state,key:e.key,idx:t}}function Ke(e,t,n,r){return void 0===n&&(n=null),Je({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Te(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Ee(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,o=e.hash,i=void 0===o?"":o;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),i&&"#"!==i&&(n+="#"===i.charAt(0)?i:"#"+i),n}function Te(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Me(e,t,n,r){void 0===r&&(r={});var a=r,o=a.window,i=void 0===o?document.defaultView:o,g=a.v5Compat,s=void 0!==g&&g,c=i.history,l=Se.Pop,u=null,f=I();function I(){return(c.state||{idx:null}).idx}function C(){l=Se.Pop;var e=I(),t=null==e?null:e-f;f=e,u&&u({action:l,location:A.location,delta:t})}function d(e){var t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:Ee(e);return Ne(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,c.replaceState(Je({},c.state,{idx:f}),""));var A={get action(){return l},get location(){return e(i,c)},listen:function(e){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ye,C),u=e,function(){i.removeEventListener(Ye,C),u=null}},createHref:function(e){return t(i,e)},createURL:d,encodeLocation:function(e){var t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=Se.Push;var r=Ke(A.location,e,t);n&&n(r,e);var a=Fe(r,f=I()+1),o=A.createHref(r);try{c.pushState(a,"",o)}catch(g){if(g instanceof DOMException&&"DataCloneError"===g.name)throw g;i.location.assign(o)}s&&u&&u({action:l,location:A.location,delta:1})},replace:function(e,t){l=Se.Replace;var r=Ke(A.location,e,t);n&&n(r,e);var a=Fe(r,f=I()),o=A.createHref(r);c.replaceState(a,"",o),s&&u&&u({action:l,location:A.location,delta:0})},go:function(e){return c.go(e)}};return A}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(xe||(xe={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ze(e,t,n){void 0===n&&(n="/");var r=rt(("string"===typeof t?Te(t):t).pathname||"/",n);if(null==r)return null;var a=De(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var o=null,i=0;null==o&&i<a.length;++i)o=et(a[i],nt(r));return o}function De(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var a=function(e,a,o){var i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(Ne(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var g=gt([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(Ne(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+g+'".'),De(e.children,t,s,g)),(null!=e.path||e.index)&&t.push({path:g,score:$e(g,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=Xe(Le(e.path));try{for(o.s();!(r=o.n()).done;){var i=r.value;a(e,t,i)}}catch(g){o.e(g)}finally{o.f()}}else a(e,t)})),t}function Le(e){var t=e.split("/");if(0===t.length)return[];var n=I(t),r=n[0],a=n.slice(1),o=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===a.length)return o?[i,""]:[i];var g=Le(a.join("/")),s=[];return s.push.apply(s,We(g.map((function(e){return""===e?i:[i,e].join("/")})))),o&&s.push.apply(s,We(g)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var Ue=/^:\w+$/,je=3,Oe=2,Qe=1,Pe=10,_e=-2,qe=function(e){return"*"===e};function $e(e,t){var n=e.split("/"),r=n.length;return n.some(qe)&&(r+=_e),t&&(r+=Oe),n.filter((function(e){return!qe(e)})).reduce((function(e,t){return e+(Ue.test(t)?je:""===t?Qe:Pe)}),r)}function et(e,t){for(var n=e.routesMeta,r={},a="/",o=[],i=0;i<n.length;++i){var g=n[i],s=i===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=tt({path:g.relativePath,caseSensitive:g.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var u=g.route;o.push({params:r,pathname:gt([a,l.pathname]),pathnameBase:st(gt([a,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(a=gt([a,l.pathnameBase]))}return o}function tt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);He("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");var o=new RegExp(a,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=Ge(n,2),a=r[0],o=r[1],i=t.match(a);if(!i)return null;var g=i[0],s=g.replace(/(.)\/+$/,"$1"),c=i.slice(1),l=o.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=g.slice(0,g.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return He(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:g,pathnameBase:s,pattern:e}}function nt(e){try{return decodeURI(e)}catch(t){return He(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function rt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function at(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ot(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function it(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=Te(e):(Ne(!(a=Je({},e)).pathname||!a.pathname.includes("?"),at("?","pathname","search",a)),Ne(!a.pathname||!a.pathname.includes("#"),at("#","pathname","hash",a)),Ne(!a.search||!a.search.includes("#"),at("#","search","hash",a)));var o,i=""===e||""===a.pathname,g=i?"/":a.pathname;if(r||null==g)o=n;else{var s=t.length-1;if(g.startsWith("..")){for(var c=g.split("/");".."===c[0];)c.shift(),s-=1;a.pathname=c.join("/")}o=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Te(e):e,r=n.pathname,a=n.search,o=void 0===a?"":a,i=n.hash,g=void 0===i?"":i,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ct(o),hash:lt(g)}}(a,o),u=g&&"/"!==g&&g.endsWith("/"),f=(i||"."===g)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!f||(l.pathname+="/"),l}var gt=function(e){return e.join("/").replace(/\/\/+/g,"/")},st=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ct=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},lt=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ut=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n)}(Ve(Error));function ft(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var It=["post","put","patch","delete"],Ct=(new Set(It),["get"].concat(It));new Set(Ct),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}var At=e.createContext(null);var ht=e.createContext(null);var pt=e.createContext(null);var mt=e.createContext(null);var bt=e.createContext(null);var yt=e.createContext({outlet:null,matches:[],isDataRoute:!1});var vt=e.createContext(null);function Zt(){return null!=e.useContext(bt)}function Gt(){return Zt()||Ne(!1),e.useContext(bt).location}function Bt(t){e.useContext(mt).static||e.useLayoutEffect(t)}function kt(){return e.useContext(yt).isDataRoute?function(){var t=Ht(Yt.UseNavigateStable).router,n=Kt(Nt.UseNavigateStable),r=e.useRef(!1);Bt((function(){r.current=!0}));var a=e.useCallback((function(e,a){void 0===a&&(a={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,dt({fromRouteId:n},a)))}),[t,n]);return a}():function(){Zt()||Ne(!1);var t=e.useContext(At),n=e.useContext(mt),r=n.basename,a=n.navigator,o=e.useContext(yt).matches,i=Gt().pathname,g=JSON.stringify(ot(o).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);return Bt((function(){s.current=!0})),e.useCallback((function(e,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof e){var o=it(e,JSON.parse(g),i,"path"===n.relative);null==t&&"/"!==r&&(o.pathname="/"===o.pathname?r:gt([r,o.pathname])),(n.replace?a.replace:a.push)(o,n.state,n)}else a.go(e)}),[r,a,g,i,t])}()}var St=e.createContext(null);function wt(t,n){var r=(void 0===n?{}:n).relative,a=e.useContext(yt).matches,o=Gt().pathname,i=JSON.stringify(ot(a).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return it(t,JSON.parse(i),o,"path"===r)}),[t,i,o,r])}function Wt(t,n,r){Zt()||Ne(!1);var a,o=e.useContext(mt).navigator,i=e.useContext(yt).matches,g=i[i.length-1],s=g?g.params:{},c=(g&&g.pathname,g?g.pathnameBase:"/"),l=(g&&g.route,Gt());if(n){var u,f="string"===typeof n?Te(n):n;"/"===c||(null==(u=f.pathname)?void 0:u.startsWith(c))||Ne(!1),a=f}else a=l;var I=a.pathname||"/",C=ze(t,{pathname:"/"===c?I:I.slice(c.length)||"/"});var d=xt(C&&C.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:gt([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:gt([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),i,r);return n&&d?e.createElement(bt.Provider,{value:{location:dt({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:Se.Pop}},d):d}function Rt(){var t=function(){var t,n=e.useContext(vt),r=Ft(Nt.UseRouteError),a=Kt(Nt.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[a]}(),n=ft(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:o},r):null,null)}var Vt=e.createElement(Rt,null),Xt=function(t){d(r,t);var n=p(r);function r(e){var t;return Z(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return B(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(yt.Provider,{value:this.props.routeContext},e.createElement(vt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function Jt(t){var n=t.routeContext,r=t.match,a=t.children,o=e.useContext(At);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(yt.Provider,{value:n},a)}function xt(t,n,r){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==t){var o;if(null==(o=r)||!o.errors)return null;t=r.matches}var i=t,g=null==(a=r)?void 0:a.errors;if(null!=g){var s=i.findIndex((function(e){return e.route.id&&(null==g?void 0:g[e.route.id])}));s>=0||Ne(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((function(t,a,o){var s=a.route.id?null==g?void 0:g[a.route.id]:null,c=null;r&&(c=a.route.errorElement||Vt);var l=n.concat(i.slice(0,o+1)),u=function(){var n;return n=s?c:a.route.Component?e.createElement(a.route.Component,null):a.route.element?a.route.element:t,e.createElement(Jt,{match:a,routeContext:{outlet:t,matches:l,isDataRoute:null!=r},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===o)?e.createElement(Xt,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:u(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):u()}),null)}var Yt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Yt||{}),Nt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nt||{});function Ht(t){var n=e.useContext(At);return n||Ne(!1),n}function Ft(t){var n=e.useContext(ht);return n||Ne(!1),n}function Kt(t){var n=function(t){var n=e.useContext(yt);return n||Ne(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Ne(!1),r.route.id}t.startTransition;function Et(t){var n=t.to,r=t.replace,a=t.state,o=t.relative;Zt()||Ne(!1);var i=e.useContext(yt).matches,g=Gt().pathname,s=kt(),c=it(n,ot(i).map((function(e){return e.pathnameBase})),g,"path"===o),l=JSON.stringify(c);return e.useEffect((function(){return s(JSON.parse(l),{replace:r,state:a,relative:o})}),[s,l,o,r,a]),null}function Tt(t){return function(t){var n=e.useContext(yt).outlet;return n?e.createElement(St.Provider,{value:t},n):n}(t.context)}function Mt(e){Ne(!1)}function zt(t){var n=t.basename,r=void 0===n?"/":n,a=t.children,o=void 0===a?null:a,i=t.location,g=t.navigationType,s=void 0===g?Se.Pop:g,c=t.navigator,l=t.static,u=void 0!==l&&l;Zt()&&Ne(!1);var f=r.replace(/^\/*/,"/"),I=e.useMemo((function(){return{basename:f,navigator:c,static:u}}),[f,c,u]);"string"===typeof i&&(i=Te(i));var C=i,d=C.pathname,A=void 0===d?"/":d,h=C.search,p=void 0===h?"":h,m=C.hash,b=void 0===m?"":m,y=C.state,v=void 0===y?null:y,Z=C.key,G=void 0===Z?"default":Z,B=e.useMemo((function(){var e=rt(A,f);return null==e?null:{location:{pathname:e,search:p,hash:b,state:v,key:G},navigationType:s}}),[f,A,p,b,v,G,s]);return null==B?null:e.createElement(mt.Provider,{value:I},e.createElement(bt.Provider,{children:o,value:B}))}function Dt(e){var t=e.children,n=e.location;return Wt(jt(t),n)}var Lt=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Lt||{}),Ut=new Promise((function(){}));e.Component;function jt(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,a){if(e.isValidElement(t)){var o=[].concat(We(n),[a]);if(t.type!==e.Fragment){t.type!==Mt&&Ne(!1),t.props.index&&t.props.children&&Ne(!1);var i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=jt(t.props.children,o)),r.push(i)}else r.push.apply(r,jt(t.props.children,o))}})),r}function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}function Qt(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Pt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var _t=t.startTransition;function qt(t){var n,r=t.basename,a=t.children,o=t.future,i=t.window,g=e.useRef();null==g.current&&(g.current=(void 0===(n={window:i,v5Compat:!0})&&(n={}),Me((function(e,t){var n=Te(e.location.hash.substr(1)),r=n.pathname,a=void 0===r?"/":r,o=n.search,i=void 0===o?"":o,g=n.hash,s=void 0===g?"":g;return a.startsWith("/")||a.startsWith(".")||(a="/"+a),Ke("",{pathname:a,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var a=e.location.href,o=a.indexOf("#");r=-1===o?a:a.slice(0,o)}return r+"#"+("string"===typeof t?t:Ee(t))}),(function(e,t){He("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var s=g.current,c=Ge(e.useState({action:s.action,location:s.location}),2),l=c[0],u=c[1],f=(o||{}).v7_startTransition,I=e.useCallback((function(e){f&&_t?_t((function(){return u(e)})):u(e)}),[u,f]);return e.useLayoutEffect((function(){return s.listen(I)}),[s,I]),e.createElement(zt,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:s})}var $t="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,en=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=e.forwardRef((function(t,n){var r,a=t.onClick,o=t.relative,i=t.reloadDocument,g=t.replace,s=t.state,c=t.target,l=t.to,u=t.preventScrollReset,f=Qt(t,Pt),I=e.useContext(mt).basename,C=!1;if("string"===typeof l&&en.test(l)&&(r=l,$t))try{var d=new URL(window.location.href),A=l.startsWith("//")?new URL(d.protocol+l):new URL(l),h=rt(A.pathname,I);A.origin===d.origin&&null!=h?l=h+A.search+A.hash:C=!0}catch(b){}var p=function(t,n){var r=(void 0===n?{}:n).relative;Zt()||Ne(!1);var a=e.useContext(mt),o=a.basename,i=a.navigator,g=wt(t,{relative:r}),s=g.hash,c=g.pathname,l=g.search,u=c;return"/"!==o&&(u="/"===c?o:gt([o,c])),i.createHref({pathname:u,search:l,hash:s})}(l,{relative:o}),m=function(t,n){var r=void 0===n?{}:n,a=r.target,o=r.replace,i=r.state,g=r.preventScrollReset,s=r.relative,c=kt(),l=Gt(),u=wt(t,{relative:s});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,a)){e.preventDefault();var n=void 0!==o?o:Ee(l)===Ee(u);c(t,{replace:n,state:i,preventScrollReset:g,relative:s})}}),[l,c,u,o,i,a,t,g,s])}(l,{replace:g,state:s,target:c,preventScrollReset:u,relative:o});return e.createElement("a",Ot({},f,{href:r||p,onClick:C||i?a:function(e){a&&a(e),e.defaultPrevented||m(e)},ref:n,target:c}))}));var nn,rn;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(nn||(nn={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(rn||(rn={}));var an={Manager:"0x5FbDB2315678afecb367f032d93F642f64180aa3",Factory:"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",Deployer:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"},on=[{account:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",key:"0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"},{account:"0x70997970C51812dc3A010C7d01b50e0d17dc79C8",key:"0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d"},{account:"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC",key:"0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a"},{account:"0x90F79bf6EB2c4f870365E785982E1f101E93b906",key:"0x7c852118294e51e653712a81e05800f419141751be58f605c371e15141b007a6"},{account:"0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65",key:"0x47e179ec197488593b187f80a00eb0da91f1b9d0b13f8733639f19c30a34926a"},{account:"0x9965507D1a55bcC2695C58ba16FB37d819B0A4dc",key:"0x8b3a350cf5c34c9194ca85829a2df0ec3153be0318b5e2d3348e872092edffba"},{account:"0x976EA74026E726554dB657fA54763abd0C3a0aa9",key:"0x92db14e403b83dfe3df233f83dfa3a0d7096f21ca9b0d6d6b8d88b2b4ec1564e"},{account:"0x14dC79964da2C08b23698B3D3cc7Ca32193d9955",key:"0x4bbbf85ce3377467afe5d46f804f221813b2bb87f24d81f60f1fcdbf7cbf4356"},{account:"0x23618e81E3f5cdF7f54C3d65f7FBc0aBf5B21E8f",key:"0xdbda1821b80551c9d65939329250298aa3472ba22feea921c0cf5d620ea67b97"},{account:"0xa0Ee7A142d267C1f36714E4a8F75612F20a79720",key:"0x2a871d0798f97d79848a013d4936a73bf4cc922c825d33c1cf7073dff6d409c6"},{account:"0xBcd4042DE499D14e55001CcbB24a551F3b954096",key:"0xf214f2b2cd398c806f84e317254e0f0b801d0643303237d97a22a48e01628897"},{account:"0x71bE63f3384f5fb98995898A86B02Fb2426c5788",key:"0x701b615bbdfb9de65240bc28bd21bbc0d996645a3dd57e7b12bc2bdf6f192c82"},{account:"0xFABB0ac9d68B0B445fB7357272Ff202C5651694a",key:"0xa267530f49f8280200edf313ee7af6b827f2a8bce2897751d06a843f644967b1"},{account:"0x1CBd3b2770909D4e10f157cABC84C7264073C9Ec",key:"0x47c99abed3324a2707c28affff1267e45918ec8c3f20b8aa892e8b065d2942dd"},{account:"0xdF3e18d64BC6A983f673Ab319CCaE4f1a57C7097",key:"0xc526ee95bf44d8fc405a158bb884d9d1238d99f0612e9f33d006bb0789009aaa"},{account:"0xcd3B766CCDd6AE721141F452C550Ca635964ce71",key:"0x8166f546bab6da521a8369cab06c5d2b9e46670292d85c875ee9ec20e84ffb61"},{account:"0x2546BcD3c84621e976D8185a91A922aE77ECEc30",key:"0xea6c44ac03bff858b476bba40716402b03e41b8e97e276d1baec7c37d42484a0"},{account:"0xbDA5747bFD65F08deb54cb465eB87D40e51B197E",key:"0x689af8efa8c651a91ad287602527f3af2fe9f6501a7ac4b061667b5a93e037fd"},{account:"0xdD2FD4581271e230360230F9337D5c0430Bf44C0",key:"0xde9be858da4a475276426320d5e9262ecfc3ba460bfac56360bfa6c4c28b4ee0"},{account:"0x8626f6940E2eb28930eFb4CeF49B2d1F2C9C1199",key:"0xdf57089febbacf7ba0bc227dafbffa9fc08a93fdc68e1e42411a14efcf23656e"}];function gn(){return gn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},gn.apply(this,arguments)}function sn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cn(e,t){sn(e,t),t.add(e)}function ln(e,t,n){sn(e,t),t.set(e,n)}function un(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function fn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function In(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,fn(e,t,"set"),n),n}function Cn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,fn(e,t,"get"))}function dn(){dn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},g=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),g=new V(r||[]);return a(i,"_invoke",{value:S(e,n,g)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var I="suspendedStart",C="suspendedYield",d="executing",A="completed",h={};function p(){}function m(){}function b(){}var y={};l(y,g,(function(){return this}));var v=Object.getPrototypeOf,Z=v&&v(v(X([])));Z&&Z!==n&&r.call(Z,g)&&(y=Z);var G=b.prototype=p.prototype=Object.create(y);function B(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,i,g,s){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==o(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,g,s)}),(function(e){n("throw",e,g,s)})):t.resolve(u).then((function(e){l.value=e,g(l)}),(function(e){return n("throw",e,g,s)}))}s(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function S(t,n,r){var a=I;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===A){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var g=r.delegate;if(g){var s=w(g,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===I)throw a=A,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var c=f(t,n,r);if("normal"===c.type){if(a=r.done?A:C,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=A,r.method="throw",r.arg=c.arg)}}}function w(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function W(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(W,this),this.reset(!0)}function X(t){if(t||""===t){var n=t[g];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return m.prototype=b,a(G,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(G),e},t.awrap=function(e){return{__await:e}},B(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(u(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},B(G),l(G,c,"Generator"),l(G,g,(function(){return this})),l(G,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=X,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return g.type="throw",g.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],g=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:X(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function An(e,t,n,r,a,o,i){try{var g=e[o](i),s=g.value}catch(c){return void n(c)}g.done?t(s):Promise.resolve(s).then(r,a)}function hn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){An(o,r,a,i,g,"next",e)}function g(e){An(o,r,a,i,g,"throw",e)}i(void 0)}))}}var pn,mn="6.7.1";function bn(e,t,n){for(var r=t.split("|").map((function(e){return e.trim()})),a=0;a<r.length;a++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}var o=new Error("invalid value for type ".concat(t));throw o.code="INVALID_ARGUMENT",o.argument="value.".concat(n),o.value=e,o}function yn(e){return(pn=pn||hn(dn().mark((function e(t){var n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t),e.next=3,Promise.all(n.map((function(e){return Promise.resolve(t[e])})));case 3:return r=e.sent,e.abrupt("return",r.reduce((function(e,t,r){return e[n[r]]=t,e}),{}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(e,t,n){for(var r in t){var a=t[r],o=n?n[r]:null;o&&bn(a,o,r),Object.defineProperty(e,r,{enumerable:!0,value:a,writable:!1})}}function Zn(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(Zn).join(", ")+" ]";if(e instanceof Uint8Array){for(var t="0123456789abcdef",n="0x",r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[15&e[r]];return n}if("object"===typeof e&&"function"===typeof e.toJSON)return Zn(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":var a=Object.keys(e);return a.sort(),"{ "+a.map((function(t){return"".concat(Zn(t),": ").concat(Zn(e[t]))})).join(", ")+" }"}return"[ COULD NOT SERIALIZE ]"}function Gn(e,t){return e&&e.code===t}function Bn(e){return Gn(e,"CALL_EXCEPTION")}function kn(e,t,n){var r,a=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error("value will overwrite populated values: ".concat(Zn(n)));for(var o in n){var i=n[o];a.push(o+"="+Zn(i))}}switch(a.push("code=".concat(t)),a.push("version=".concat(mn)),a.length&&(e+=" ("+a.join(", ")+")"),t){case"INVALID_ARGUMENT":r=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(e);break;default:r=new Error(e)}return vn(r,{code:t}),n&&Object.assign(r,n),r}function Sn(e,t,n,r){if(!e)throw kn(t,n,r)}function wn(e,t,n,r){Sn(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function Wn(e,t,n){null==n&&(n=""),n&&(n=": "+n),Sn(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Sn(e<=t,"too many arguemnts"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}var Rn=["NFD","NFC","NFKD","NFKC"].reduce((function(e,t){try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t)if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken");e.push(t)}catch(n){}return e}),[]);function Vn(e){Sn(Rn.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}function Xn(e,t,n){if(null==n&&(n=""),e!==t){var r=n,a="new";n&&(r+=".",a+=" "+n),Sn(!1,"private constructor; use ".concat(r,"from* methods"),"UNSUPPORTED_OPERATION",{operation:a})}}function Jn(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"===typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){for(var r=new Uint8Array((e.length-2)/2),a=2,o=0;o<r.length;o++)r[o]=parseInt(e.substring(a,a+2),16),a+=2;return r}wn(!1,"invalid BytesLike value",t||"value",e)}function xn(e,t){return Jn(e,t,!1)}function Yn(e,t){return Jn(e,t,!0)}function Nn(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!==typeof t||e.length===2+2*t)&&(!0!==t||e.length%2===0))}function Hn(e){return Nn(e,!0)||e instanceof Uint8Array}var Fn="0123456789abcdef";function Kn(e){for(var t=xn(e),n="0x",r=0;r<t.length;r++){var a=t[r];n+=Fn[(240&a)>>4]+Fn[15&a]}return n}function En(e){return"0x"+e.map((function(e){return Kn(e).substring(2)})).join("")}function Tn(e){return Nn(e,!0)?(e.length-2)/2:xn(e).length}function Mn(e,t,n){var r=xn(e);return null!=n&&n>r.length&&Sn(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Kn(r.slice(null==t?0:t,null==n?r.length:n))}function zn(e,t,n){var r=xn(e);Sn(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});var a=new Uint8Array(t);return a.fill(0),n?a.set(r,t-r.length):a.set(r,0),Kn(a)}function Dn(e,t){return zn(e,t,!0)}var Ln=BigInt(0),Un=BigInt(1),jn=9007199254740991;function On(e,t){var n=Pn(e,"value"),r=BigInt(er(t,"width")),a=Un<<r-Un;return n<Ln?(Sn((n=-n)<=a,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~n&(Un<<r)-Un)+Un):(Sn(n<a,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n)}function Qn(e,t){var n=_n(e,"value"),r=BigInt(er(t,"bits"));return n&(Un<<r)-Un}function Pn(e,t){switch(typeof e){case"bigint":return e;case"number":return wn(Number.isInteger(e),"underflow",t||"value",e),wn(e>=-jn&&e<=jn,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){wn(!1,"invalid BigNumberish string: ".concat(n.message),t||"value",e)}}wn(!1,"invalid BigNumberish value",t||"value",e)}function _n(e,t){var n=Pn(e,t);return Sn(n>=Ln,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}var qn="0123456789abcdef";function $n(e){if(e instanceof Uint8Array){var t,n="0x0",r=Xe(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=qn[a>>4],n+=qn[15&a]}}catch(o){r.e(o)}finally{r.f()}return BigInt(n)}return Pn(e)}function er(e,t){switch(typeof e){case"bigint":return wn(e>=-jn&&e<=jn,"overflow",t||"value",e),Number(e);case"number":return wn(Number.isInteger(e),"underflow",t||"value",e),wn(e>=-jn&&e<=jn,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return er(BigInt(e),t)}catch(n){wn(!1,"invalid numeric string: ".concat(n.message),t||"value",e)}}wn(!1,"invalid numeric value",t||"value",e)}function tr(e,t){var n=_n(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{var r=er(t,"width");for(Sn(2*r>=n.length,"value exceeds width (".concat(r," bits)"),"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*r;)n="0"+n}return"0x"+n}function nr(e){var t=_n(e,"value");if(t===Ln)return new Uint8Array([]);var n=t.toString(16);n.length%2&&(n="0"+n);for(var r=new Uint8Array(n.length/2),a=0;a<r.length;a++){var o=2*a;r[a]=parseInt(n.substring(o,o+2),16)}return r}function rr(e){for(var t=Kn(Hn(e)?e:nr(e)).substring(2);t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}var ar=32,or=new Uint8Array(ar),ir=["then"],gr={};function sr(e,t){var n=new Error("deferred error during ABI decoding triggered accessing ".concat(e));throw n.error=t,n}var cr=new WeakMap,lr=function(e){d(n,e);var t=p(n);function n(){var e;Z(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var s=a[0],c=a[1],l=(a[2]||[]).slice(),u=!0;s!==gr&&(c=a,l=[],u=!1),ln(i(e=t.call(this,c.length)),cr,{writable:!0,value:void 0}),c.forEach((function(t,n){e[n]=t}));var f=l.reduce((function(e,t){return"string"===typeof t&&e.set(t,(e.get(t)||0)+1),e}),new Map);return In(i(e),cr,Object.freeze(c.map((function(e,t){var n=l[t];return null!=n&&1===f.get(n)?n:null})))),u?(Object.freeze(i(e)),g(e,new Proxy(i(e),{get:function(t,n,r){if("string"===typeof n){if(n.match(/^[0-9]+$/)){var a=er(n,"%index");if(a<0||a>=e.length)throw new RangeError("out of result range");var o=t[a];return o instanceof Error&&sr("index ".concat(a),o),o}if(ir.indexOf(n)>=0)return Reflect.get(t,n,r);var g=t[n];if(g instanceof Function)return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return g.apply(this===r?t:this,n)};if(!(n in t))return t.getValue.apply(i(e)===r?t:i(e),[n])}return Reflect.get(t,n,r)}}))):g(e)}return B(n,[{key:"toArray",value:function(){var e=[];return this.forEach((function(t,n){t instanceof Error&&sr("index ".concat(n),t),e.push(t)})),e}},{key:"toObject",value:function(){var e=this;return Cn(this,cr).reduce((function(t,n,r){return Sn(null!=n,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),n in t||(t[n]=e.getValue(n)),t}),{})}},{key:"slice",value:function(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);for(var r=[],a=[],o=e;o<t;o++)r.push(this[o]),a.push(Cn(this,cr)[o]);return new n(gr,r,a)}},{key:"filter",value:function(e,t){for(var r=[],a=[],o=0;o<this.length;o++){var i=this[o];i instanceof Error&&sr("index ".concat(o),i),e.call(t,i,o,this)&&(r.push(i),a.push(Cn(this,cr)[o]))}return new n(gr,r,a)}},{key:"map",value:function(e,t){for(var n=[],r=0;r<this.length;r++){var a=this[r];a instanceof Error&&sr("index ".concat(r),a),n.push(e.call(t,a,r,this))}return n}},{key:"getValue",value:function(e){var t=Cn(this,cr).indexOf(e);if(-1!==t){var n=this[t];return n instanceof Error&&sr("property ".concat(JSON.stringify(e)),n.error),n}}}],[{key:"fromItems",value:function(e,t){return new n(gr,e,t)}}]),n}(Ve(Array));function ur(e){var t=nr(e);return Sn(t.length<=ar,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:ar,offset:t.length}),t.length!==ar&&(t=Yn(En([or.slice(t.length%ar),t]))),t}var fr=function(){function e(t,n,r,a){Z(this,e),b(this,"name",void 0),b(this,"type",void 0),b(this,"localName",void 0),b(this,"dynamic",void 0),vn(this,{name:t,type:n,localName:r,dynamic:a},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}return B(e,[{key:"_throwError",value:function(e,t){wn(!1,e,this.localName,t)}}]),e}(),Ir=new WeakMap,Cr=new WeakMap,dr=new WeakSet,Ar=function(){function e(){Z(this,e),cn(this,dr),ln(this,Ir,{writable:!0,value:void 0}),ln(this,Cr,{writable:!0,value:void 0}),In(this,Ir,[]),In(this,Cr,0)}return B(e,[{key:"data",get:function(){return En(Cn(this,Ir))}},{key:"length",get:function(){return Cn(this,Cr)}},{key:"appendWriter",value:function(e){return un(this,dr,hr).call(this,Yn(e.data))}},{key:"writeBytes",value:function(e){var t=Yn(e),n=t.length%ar;return n&&(t=Yn(En([t,or.slice(n)]))),un(this,dr,hr).call(this,t)}},{key:"writeValue",value:function(e){return un(this,dr,hr).call(this,ur(e))}},{key:"writeUpdatableValue",value:function(){var e=this,t=Cn(this,Ir).length;return Cn(this,Ir).push(or),In(this,Cr,Cn(this,Cr)+ar),function(n){Cn(e,Ir)[t]=ur(n)}}}]),e}();function hr(e){return Cn(this,Ir).push(e),In(this,Cr,Cn(this,Cr)+e.length),e.length}var pr=new WeakMap,mr=new WeakMap,br=new WeakSet,yr=function(){function e(t,n){Z(this,e),cn(this,br),b(this,"allowLoose",void 0),ln(this,pr,{writable:!0,value:void 0}),ln(this,mr,{writable:!0,value:void 0}),vn(this,{allowLoose:!!n}),In(this,pr,Yn(t)),In(this,mr,0)}return B(e,[{key:"data",get:function(){return Kn(Cn(this,pr))}},{key:"dataLength",get:function(){return Cn(this,pr).length}},{key:"consumed",get:function(){return Cn(this,mr)}},{key:"bytes",get:function(){return new Uint8Array(Cn(this,pr))}},{key:"subReader",value:function(t){return new e(Cn(this,pr).slice(Cn(this,mr)+t),this.allowLoose)}},{key:"readBytes",value:function(e,t){var n=un(this,br,vr).call(this,0,e,!!t);return In(this,mr,Cn(this,mr)+n.length),n.slice(0,e)}},{key:"readValue",value:function(){return $n(this.readBytes(ar))}},{key:"readIndex",value:function(){return er($n(this.readBytes(ar)))}}]),e}();function vr(e,t,n){var r=Math.ceil(t/ar)*ar;return Cn(this,mr)+r>Cn(this,pr).length&&(this.allowLoose&&n&&Cn(this,mr)+t<=Cn(this,pr).length?r=t:Sn(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Yn(Cn(this,pr)),length:Cn(this,pr).length,offset:Cn(this,mr)+r})),Cn(this,pr).slice(Cn(this,mr),Cn(this,mr)+r)}function Zr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function Gr(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new TypeError("Expected Uint8Array of length ".concat(n,", not of length=").concat(e.length))}var Br={number:Zr,bool:function(e){if("boolean"!==typeof e)throw new Error("Expected boolean, not ".concat(e))},bytes:Gr,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Zr(e.outputLen),Zr(e.blockLen)},exists:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){Gr(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}},kr=Br,Sr=BigInt(Math.pow(2,32)-1),wr=BigInt(32);function Wr(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&Sr),l:Number(e>>wr&Sr)}:{h:0|Number(e>>wr&Sr),l:0|Number(e&Sr)}}var Rr,Vr,Xr={fromBig:Wr,split:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length),a=0;a<e.length;a++){var o=Wr(e[a],t),i=[o.h,o.l];n[a]=i[0],r[a]=i[1]}return[n,r]},toBig:function(e,t){return BigInt(e>>>0)<<wr|BigInt(t>>>0)},shrSH:function(e,t,n){return e>>>n},shrSL:function(e,t,n){return e<<32-n|t>>>n},rotrSH:function(e,t,n){return e>>>n|t<<32-n},rotrSL:function(e,t,n){return e<<32-n|t>>>n},rotrBH:function(e,t,n){return e<<64-n|t>>>n-32},rotrBL:function(e,t,n){return e>>>n-32|t<<64-n},rotr32H:function(e,t){return t},rotr32L:function(e,t){return e},rotlSH:function(e,t,n){return e<<n|t>>>32-n},rotlSL:function(e,t,n){return t<<n|e>>>32-n},rotlBH:function(e,t,n){return t<<n-32|e>>>64-n},rotlBL:function(e,t,n){return e<<n-32|t>>>64-n},add:function(e,t,n,r){var a=(t>>>0)+(r>>>0);return{h:e+n+(a/Math.pow(2,32)|0)|0,l:0|a}},add3L:function(e,t,n){return(e>>>0)+(t>>>0)+(n>>>0)},add3H:function(e,t,n,r){return t+n+r+(e/Math.pow(2,32)|0)|0},add4L:function(e,t,n,r){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)},add4H:function(e,t,n,r,a){return t+n+r+a+(e/Math.pow(2,32)|0)|0},add5H:function(e,t,n,r,a,o){return t+n+r+a+o+(e/Math.pow(2,32)|0)|0},add5L:function(e,t,n,r,a){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(a>>>0)}},Jr=Xr,xr=("object"===typeof self&&"crypto"in self&&self.crypto,function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}),Yr=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},Nr=function(e,t){return e<<32-t|e>>>t};if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));var Hr=function(){return(Rr=Rr||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)};function Fr(e,t,n){return(Vr=Vr||hn(dn().mark((function e(t,n,r){var a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Date.now(),o=0;case 2:if(!(o<t)){e.next=13;break}if(r(o),!((i=Date.now()-a)>=0&&i<n)){e.next=7;break}return e.abrupt("continue",10);case 7:return e.next=9,Hr();case 9:a+=i;case 10:o++,e.next=2;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kr(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new TypeError("utf8ToBytes expected string, got ".concat(typeof e));return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError("Expected input type is Uint8Array (got ".concat(typeof e,")"));return e}var Er=function(){function e(){Z(this,e)}return B(e,[{key:"clone",value:function(){return this._cloneInto()}}]),e}(),Tr=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object};function Mr(e,t){if(void 0!==t&&("object"!==typeof t||!Tr(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function zr(e){var t=function(t){return e().update(Kr(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}for(var Dr=[],Lr=[],Ur=[],jr=BigInt(0),Or=BigInt(1),Qr=BigInt(2),Pr=BigInt(7),_r=BigInt(256),qr=BigInt(113),$r=0,ea=Or,ta=1,na=0;$r<24;$r++){var ra=[na,(2*ta+3*na)%5];ta=ra[0],na=ra[1],Dr.push(2*(5*na+ta)),Lr.push(($r+1)*($r+2)/2%64);for(var aa=jr,oa=0;oa<7;oa++)(ea=(ea<<Or^(ea>>Pr)*qr)%_r)&Qr&&(aa^=Or<<(Or<<BigInt(oa))-Or);Ur.push(aa)}var ia=Ge(Jr.split(Ur,!0),2),ga=ia[0],sa=ia[1],ca=function(e,t,n){return n>32?Jr.rotlBH(e,t,n):Jr.rotlSH(e,t,n)},la=function(e,t,n){return n>32?Jr.rotlBL(e,t,n):Jr.rotlSL(e,t,n)};var ua=function(e){d(n,e);var t=p(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(Z(this,n),(o=t.call(this)).blockLen=e,o.suffix=r,o.outputLen=a,o.enableXOF=i,o.rounds=g,o.pos=0,o.posOut=0,o.finished=!1,o.destroyed=!1,kr.number(a),0>=o.blockLen||o.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");return o.state=new Uint8Array(200),o.state32=xr(o.state),o}return B(n,[{key:"keccak",value:function(){!function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10),r=24-t;r<24;r++){for(var a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(var o=0;o<10;o+=2)for(var i=(o+8)%10,g=(o+2)%10,s=n[g],c=n[g+1],l=ca(s,c,1)^n[i],u=la(s,c,1)^n[i+1],f=0;f<50;f+=10)e[o+f]^=l,e[o+f+1]^=u;for(var I=e[2],C=e[3],d=0;d<24;d++){var A=Lr[d],h=ca(I,C,A),p=la(I,C,A),m=Dr[d];I=e[m],C=e[m+1],e[m]=h,e[m+1]=p}for(var b=0;b<50;b+=10){for(var y=0;y<10;y++)n[y]=e[b+y];for(var v=0;v<10;v++)e[b+v]^=~n[(v+2)%10]&n[(v+4)%10]}e[0]^=ga[r],e[1]^=sa[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}},{key:"update",value:function(e){kr.exists(this);for(var t=this.blockLen,n=this.state,r=(e=Kr(e)).length,a=0;a<r;){for(var o=Math.min(t-this.pos,r-a),i=0;i<o;i++)n[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,n=this.pos,r=this.blockLen;e[n]^=t,0!==(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}}},{key:"writeInto",value:function(e){kr.exists(this,!1),kr.bytes(e),this.finish();for(var t=this.state,n=this.blockLen,r=0,a=e.length;r<a;){this.posOut>=n&&this.keccak();var o=Math.min(n-this.posOut,a-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(e){return kr.number(e),this.xofInto(new Uint8Array(e))}},{key:"digestInto",value:function(e){if(kr.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,this.state.fill(0)}},{key:"_cloneInto",value:function(e){var t=this.blockLen,r=this.suffix,a=this.outputLen,o=this.rounds,i=this.enableXOF;return e||(e=new n(t,r,a,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=a,e.enableXOF=i,e.destroyed=this.destroyed,e}}]),n}(Er),fa=function(e,t,n){return zr((function(){return new ua(t,e,n)}))},Ia=(fa(6,144,28),fa(6,136,32),fa(6,104,48),fa(6,72,64),fa(1,144,28),fa(1,136,32)),Ca=(fa(1,104,48),fa(1,72,64),function(e,t,n){return function(e){var t=function(t,n){return e(n).update(Kr(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t}((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ua(t,e,void 0===r.dkLen?n:r.dkLen,!0)}))}),da=(Ca(31,168,16),Ca(31,136,32),!1),Aa=function(e){return Ia(e)},ha=Aa;function pa(e){var t=xn(e,"data");return Kn(ha(t))}pa._=Aa,pa.lock=function(){da=!0},pa.register=function(e){if(da)throw new TypeError("keccak256 is locked");ha=e},Object.freeze(pa);var ma=BigInt(0),ba=BigInt(36);function ya(e){for(var t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40),r=0;r<40;r++)n[r]=t[r].charCodeAt(0);for(var a=xn(pa(n)),o=0;o<40;o+=2)a[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&a[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var va={},Za=0;Za<10;Za++)va[String(Za)]=String(Za);for(var Ga=0;Ga<26;Ga++)va[String.fromCharCode(65+Ga)]=String(10+Ga);var Ba=15;function ka(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return va[e]})).join("");t.length>=Ba;){var n=t.substring(0,Ba);t=parseInt(n,10)%97+t.substring(n.length)}for(var r=String(98-parseInt(t,10)%97);r.length<2;)r="0"+r;return r}var Sa=function(){for(var e={},t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function wa(e){if(wn("string"===typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);var t=ya(e);return wn(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){wn(e.substring(2,4)===ka(e),"bad icap checksum","address",e);for(var n=function(e){e=e.toLowerCase();for(var t=ma,n=0;n<e.length;n++)t=t*ba+Sa[e[n]];return t}(e.substring(4)).toString(16);n.length<40;)n="0"+n;return ya("0x"+n)}wn(!1,"invalid address","address",e)}var Wa={};function Ra(e,t){var n=!1;return t<0&&(n=!0,t*=-1),new xa(Wa,"".concat(n?"":"u","int").concat(t),e,{signed:n,width:t})}function Va(e,t){return new xa(Wa,"bytes".concat(t||""),e,{size:t})}var Xa=Symbol.for("_ethers_typed"),Ja=new WeakMap,xa=function(){function e(t,n,r,a){Z(this,e),b(this,"type",void 0),b(this,"value",void 0),ln(this,Ja,{writable:!0,value:void 0}),b(this,"_typedSymbol",void 0),null==a&&(a=null),Xn(Wa,t,"Typed"),vn(this,{_typedSymbol:Xa,type:n,value:r}),In(this,Ja,a),this.format()}return B(e,[{key:"format",value:function(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?"tuple(".concat(this.value.map((function(e){return e.format()})).join(","),")"):this.type}},{key:"defaultValue",value:function(){return 0}},{key:"minValue",value:function(){return 0}},{key:"maxValue",value:function(){return 0}},{key:"isBigInt",value:function(){return!!this.type.match(/^u?int[0-9]+$/)}},{key:"isData",value:function(){return this.type.startsWith("bytes")}},{key:"isString",value:function(){return"string"===this.type}},{key:"tupleName",get:function(){if("tuple"!==this.type)throw TypeError("not a tuple");return Cn(this,Ja)}},{key:"arrayLength",get:function(){if("array"!==this.type)throw TypeError("not an array");return!0===Cn(this,Ja)?-1:!1===Cn(this,Ja)?this.value.length:null}}],[{key:"from",value:function(t,n){return new e(Wa,t,n)}},{key:"uint8",value:function(e){return Ra(e,8)}},{key:"uint16",value:function(e){return Ra(e,16)}},{key:"uint24",value:function(e){return Ra(e,24)}},{key:"uint32",value:function(e){return Ra(e,32)}},{key:"uint40",value:function(e){return Ra(e,40)}},{key:"uint48",value:function(e){return Ra(e,48)}},{key:"uint56",value:function(e){return Ra(e,56)}},{key:"uint64",value:function(e){return Ra(e,64)}},{key:"uint72",value:function(e){return Ra(e,72)}},{key:"uint80",value:function(e){return Ra(e,80)}},{key:"uint88",value:function(e){return Ra(e,88)}},{key:"uint96",value:function(e){return Ra(e,96)}},{key:"uint104",value:function(e){return Ra(e,104)}},{key:"uint112",value:function(e){return Ra(e,112)}},{key:"uint120",value:function(e){return Ra(e,120)}},{key:"uint128",value:function(e){return Ra(e,128)}},{key:"uint136",value:function(e){return Ra(e,136)}},{key:"uint144",value:function(e){return Ra(e,144)}},{key:"uint152",value:function(e){return Ra(e,152)}},{key:"uint160",value:function(e){return Ra(e,160)}},{key:"uint168",value:function(e){return Ra(e,168)}},{key:"uint176",value:function(e){return Ra(e,176)}},{key:"uint184",value:function(e){return Ra(e,184)}},{key:"uint192",value:function(e){return Ra(e,192)}},{key:"uint200",value:function(e){return Ra(e,200)}},{key:"uint208",value:function(e){return Ra(e,208)}},{key:"uint216",value:function(e){return Ra(e,216)}},{key:"uint224",value:function(e){return Ra(e,224)}},{key:"uint232",value:function(e){return Ra(e,232)}},{key:"uint240",value:function(e){return Ra(e,240)}},{key:"uint248",value:function(e){return Ra(e,248)}},{key:"uint256",value:function(e){return Ra(e,256)}},{key:"uint",value:function(e){return Ra(e,256)}},{key:"int8",value:function(e){return Ra(e,-8)}},{key:"int16",value:function(e){return Ra(e,-16)}},{key:"int24",value:function(e){return Ra(e,-24)}},{key:"int32",value:function(e){return Ra(e,-32)}},{key:"int40",value:function(e){return Ra(e,-40)}},{key:"int48",value:function(e){return Ra(e,-48)}},{key:"int56",value:function(e){return Ra(e,-56)}},{key:"int64",value:function(e){return Ra(e,-64)}},{key:"int72",value:function(e){return Ra(e,-72)}},{key:"int80",value:function(e){return Ra(e,-80)}},{key:"int88",value:function(e){return Ra(e,-88)}},{key:"int96",value:function(e){return Ra(e,-96)}},{key:"int104",value:function(e){return Ra(e,-104)}},{key:"int112",value:function(e){return Ra(e,-112)}},{key:"int120",value:function(e){return Ra(e,-120)}},{key:"int128",value:function(e){return Ra(e,-128)}},{key:"int136",value:function(e){return Ra(e,-136)}},{key:"int144",value:function(e){return Ra(e,-144)}},{key:"int152",value:function(e){return Ra(e,-152)}},{key:"int160",value:function(e){return Ra(e,-160)}},{key:"int168",value:function(e){return Ra(e,-168)}},{key:"int176",value:function(e){return Ra(e,-176)}},{key:"int184",value:function(e){return Ra(e,-184)}},{key:"int192",value:function(e){return Ra(e,-192)}},{key:"int200",value:function(e){return Ra(e,-200)}},{key:"int208",value:function(e){return Ra(e,-208)}},{key:"int216",value:function(e){return Ra(e,-216)}},{key:"int224",value:function(e){return Ra(e,-224)}},{key:"int232",value:function(e){return Ra(e,-232)}},{key:"int240",value:function(e){return Ra(e,-240)}},{key:"int248",value:function(e){return Ra(e,-248)}},{key:"int256",value:function(e){return Ra(e,-256)}},{key:"int",value:function(e){return Ra(e,-256)}},{key:"bytes1",value:function(e){return Va(e,1)}},{key:"bytes2",value:function(e){return Va(e,2)}},{key:"bytes3",value:function(e){return Va(e,3)}},{key:"bytes4",value:function(e){return Va(e,4)}},{key:"bytes5",value:function(e){return Va(e,5)}},{key:"bytes6",value:function(e){return Va(e,6)}},{key:"bytes7",value:function(e){return Va(e,7)}},{key:"bytes8",value:function(e){return Va(e,8)}},{key:"bytes9",value:function(e){return Va(e,9)}},{key:"bytes10",value:function(e){return Va(e,10)}},{key:"bytes11",value:function(e){return Va(e,11)}},{key:"bytes12",value:function(e){return Va(e,12)}},{key:"bytes13",value:function(e){return Va(e,13)}},{key:"bytes14",value:function(e){return Va(e,14)}},{key:"bytes15",value:function(e){return Va(e,15)}},{key:"bytes16",value:function(e){return Va(e,16)}},{key:"bytes17",value:function(e){return Va(e,17)}},{key:"bytes18",value:function(e){return Va(e,18)}},{key:"bytes19",value:function(e){return Va(e,19)}},{key:"bytes20",value:function(e){return Va(e,20)}},{key:"bytes21",value:function(e){return Va(e,21)}},{key:"bytes22",value:function(e){return Va(e,22)}},{key:"bytes23",value:function(e){return Va(e,23)}},{key:"bytes24",value:function(e){return Va(e,24)}},{key:"bytes25",value:function(e){return Va(e,25)}},{key:"bytes26",value:function(e){return Va(e,26)}},{key:"bytes27",value:function(e){return Va(e,27)}},{key:"bytes28",value:function(e){return Va(e,28)}},{key:"bytes29",value:function(e){return Va(e,29)}},{key:"bytes30",value:function(e){return Va(e,30)}},{key:"bytes31",value:function(e){return Va(e,31)}},{key:"bytes32",value:function(e){return Va(e,32)}},{key:"address",value:function(t){return new e(Wa,"address",t)}},{key:"bool",value:function(t){return new e(Wa,"bool",!!t)}},{key:"bytes",value:function(t){return new e(Wa,"bytes",t)}},{key:"string",value:function(t){return new e(Wa,"string",t)}},{key:"array",value:function(e,t){throw new Error("not implemented yet")}},{key:"tuple",value:function(e,t){throw new Error("not implemented yet")}},{key:"overrides",value:function(t){return new e(Wa,"overrides",Object.assign({},t))}},{key:"isTyped",value:function(e){return e&&"object"===typeof e&&"_typedSymbol"in e&&e._typedSymbol===Xa}},{key:"dereference",value:function(t,n){if(e.isTyped(t)){if(t.type!==n)throw new Error("invalid type: expecetd ".concat(n,", got ").concat(t.type));return t.value}return t}}]),e}(),Ya=function(e){d(n,e);var t=p(n);function n(e){return Z(this,n),t.call(this,"address","address",e,!1)}return B(n,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"encode",value:function(e,t){var n=xa.dereference(t,"string");try{n=wa(n)}catch(r){return this._throwError(r.message,t)}return e.writeValue(n)}},{key:"decode",value:function(e){return wa(tr(e.readValue(),20))}}]),n}(fr),Na=function(e){d(n,e);var t=p(n);function n(e){var r;return Z(this,n),b(i(r=t.call(this,e.name,e.type,"_",e.dynamic)),"coder",void 0),r.coder=e,r}return B(n,[{key:"defaultValue",value:function(){return this.coder.defaultValue()}},{key:"encode",value:function(e,t){return this.coder.encode(e,t)}},{key:"decode",value:function(e){return this.coder.decode(e)}}]),n}(fr);function Ha(e,t,n){var r=[];if(Array.isArray(n))r=n;else if(n&&"object"===typeof n){var a={};r=t.map((function(e){var t=e.localName;return Sn(t,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:n}),Sn(!a[t],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:n}),a[t]=!0,n[t]}))}else wn(!1,"invalid tuple value","tuple",n);wn(t.length===r.length,"types/value length mismatch","tuple",n);var o=new Ar,i=new Ar,g=[];t.forEach((function(e,t){var n=r[t];if(e.dynamic){var a=i.length;e.encode(i,n);var s=o.writeUpdatableValue();g.push((function(e){s(e+a)}))}else e.encode(o,n)})),g.forEach((function(e){e(o.length)}));var s=e.appendWriter(o);return s+=e.appendWriter(i)}function Fa(e,t){var n=[],r=[],a=e.subReader(0);return t.forEach((function(t){var o=null;if(t.dynamic){var i=e.readIndex(),g=a.subReader(i);try{o=t.decode(g)}catch(s){if(Gn(s,"BUFFER_OVERRUN"))throw s;(o=s).baseType=t.name,o.name=t.localName,o.type=t.type}}else try{o=t.decode(e)}catch(s){if(Gn(s,"BUFFER_OVERRUN"))throw s;(o=s).baseType=t.name,o.name=t.localName,o.type=t.type}if(void 0==o)throw new Error("investigate");n.push(o),r.push(t.localName||null)})),lr.fromItems(n,r)}var Ka=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;Z(this,n);var g=e.type+"["+(r>=0?r:"")+"]",s=-1===r||e.dynamic;return b(i(o=t.call(this,"array",g,a,s)),"coder",void 0),b(i(o),"length",void 0),vn(i(o),{coder:e,length:r}),o}return B(n,[{key:"defaultValue",value:function(){for(var e=this.coder.defaultValue(),t=[],n=0;n<this.length;n++)t.push(e);return t}},{key:"encode",value:function(e,t){var n=xa.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);var r=this.length;-1===r&&(r=n.length,e.writeValue(n.length)),Wn(n.length,r,"coder array"+(this.localName?" "+this.localName:""));for(var a=[],o=0;o<n.length;o++)a.push(this.coder);return Ha(e,a,n)}},{key:"decode",value:function(e){var t=this.length;-1===t&&Sn((t=e.readIndex())*ar<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*ar,length:e.dataLength});for(var n=[],r=0;r<t;r++)n.push(new Na(this.coder));return Fa(e,n)}}]),n}(fr),Ea=function(e){d(n,e);var t=p(n);function n(e){return Z(this,n),t.call(this,"bool","bool",e,!1)}return B(n,[{key:"defaultValue",value:function(){return!1}},{key:"encode",value:function(e,t){var n=xa.dereference(t,"bool");return e.writeValue(n?1:0)}},{key:"decode",value:function(e){return!!e.readValue()}}]),n}(fr),Ta=function(e){d(n,e);var t=p(n);function n(e,r){return Z(this,n),t.call(this,e,e,r,!0)}return B(n,[{key:"defaultValue",value:function(){return"0x"}},{key:"encode",value:function(e,t){t=Yn(t);var n=e.writeValue(t.length);return n+=e.writeBytes(t)}},{key:"decode",value:function(e){return e.readBytes(e.readIndex(),!0)}}]),n}(fr),Ma=function(e){d(n,e);var t=p(n);function n(e){return Z(this,n),t.call(this,"bytes",e)}return B(n,[{key:"decode",value:function(e){return Kn(gn(A(n.prototype),"decode",this).call(this,e))}}]),n}(Ta),za=function(e){d(n,e);var t=p(n);function n(e,r){var a;Z(this,n);var o="bytes"+String(e);return b(i(a=t.call(this,o,o,r,!1)),"size",void 0),vn(i(a),{size:e},{size:"number"}),a}return B(n,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}},{key:"encode",value:function(e,t){var n=Yn(xa.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}},{key:"decode",value:function(e){return Kn(e.readBytes(this.size))}}]),n}(fr),Da=new Uint8Array([]),La=function(e){d(n,e);var t=p(n);function n(e){return Z(this,n),t.call(this,"null","",e,!1)}return B(n,[{key:"defaultValue",value:function(){return null}},{key:"encode",value:function(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(Da)}},{key:"decode",value:function(e){return e.readBytes(0),null}}]),n}(fr),Ua=BigInt(0),ja=BigInt(1),Oa=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Qa=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;Z(this,n);var g=(r?"int":"uint")+8*e;return b(i(o=t.call(this,g,g,a,!1)),"size",void 0),b(i(o),"signed",void 0),vn(i(o),{size:e,signed:r},{size:"number",signed:"boolean"}),o}return B(n,[{key:"defaultValue",value:function(){return 0}},{key:"encode",value:function(e,t){var n=Pn(xa.dereference(t,this.type)),r=Qn(Oa,256);if(this.signed){var a=Qn(r,8*this.size-1);(n>a||n<-(a+ja))&&this._throwError("value out-of-bounds",t),n=On(n,256)}else(n<Ua||n>Qn(r,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}},{key:"decode",value:function(e){var t=Qn(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){var n=_n(e,"value"),r=BigInt(er(t,"width"));return Sn(n>>r===Ln,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-Un?-((~n&(Un<<r)-Un)+Un):n}(t,8*this.size)),t}}]),n}(fr);function Pa(e,t,n,r,a){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){for(var o=0,i=t+1;i<n.length&&n[i]>>6===2;i++)o++;return o}return"OVERRUN"===e?n.length-t-1:0}var _a=Object.freeze({error:function(e,t,n,r,a){wn(!1,"invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",n)},ignore:Pa,replace:function(e,t,n,r,a){return"OVERLONG"===e?(wn("number"===typeof a,"invalid bad code point for replacement","badCodepoint",a),r.push(a),0):(r.push(65533),Pa(e,t,n))}});function qa(e,t){null==t&&(t=_a.error);for(var n=xn(e,"bytes"),r=[],a=0;a<n.length;){var o=n[a++];if(o>>7!==0){var i=null,g=null;if(192===(224&o))i=1,g=127;else if(224===(240&o))i=2,g=2047;else{if(240!==(248&o)){a+=t(128===(192&o)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",a-1,n,r);continue}i=3,g=65535}if(a-1+i>=n.length)a+=t("OVERRUN",a-1,n,r);else{for(var s=o&(1<<8-i-1)-1,c=0;c<i;c++){var l=n[a];if(128!=(192&l)){a+=t("MISSING_CONTINUE",a,n,r),s=null;break}s=s<<6|63&l,a++}null!==s&&(s>1114111?a+=t("OUT_OF_RANGE",a-1-i,n,r,s):s>=55296&&s<=57343?a+=t("UTF16_SURROGATE",a-1-i,n,r,s):s<=g?a+=t("OVERLONG",a-1-i,n,r,s):r.push(s))}}else r.push(o)}return r}function $a(e,t){null!=t&&(Vn(t),e=e.normalize(t));for(var n=[],r=0;r<e.length;r++){var a=e.charCodeAt(r);if(a<128)n.push(a);else if(a<2048)n.push(a>>6|192),n.push(63&a|128);else if(55296==(64512&a)){r++;var o=e.charCodeAt(r);wn(r<e.length&&56320===(64512&o),"invalid surrogate pair","str",e);var i=65536+((1023&a)<<10)+(1023&o);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(a>>12|224),n.push(a>>6&63|128),n.push(63&a|128)}return new Uint8Array(n)}function eo(e,t){return qa(e,t).map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}var to,no=function(e){d(n,e);var t=p(n);function n(e){return Z(this,n),t.call(this,"string",e)}return B(n,[{key:"defaultValue",value:function(){return""}},{key:"encode",value:function(e,t){return gn(A(n.prototype),"encode",this).call(this,e,$a(xa.dereference(t,"string")))}},{key:"decode",value:function(e){return eo(gn(A(n.prototype),"decode",this).call(this,e))}}]),n}(Ta),ro=function(e){d(n,e);var t=p(n);function n(e,r){var a;Z(this,n);var o=!1,g=[];e.forEach((function(e){e.dynamic&&(o=!0),g.push(e.type)}));var s="tuple("+g.join(",")+")";return b(i(a=t.call(this,"tuple",s,r,o)),"coders",void 0),vn(i(a),{coders:Object.freeze(e.slice())}),a}return B(n,[{key:"defaultValue",value:function(){var e=[];this.coders.forEach((function(t){e.push(t.defaultValue())}));var t=this.coders.reduce((function(e,t){var n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach((function(n,r){var a=n.localName;a&&1===t[a]&&("length"===a&&(a="_length"),null==e[a]&&(e[a]=e[r]))})),Object.freeze(e)}},{key:"encode",value:function(e,t){var n=xa.dereference(t,"tuple");return Ha(e,this.coders,n)}},{key:"decode",value:function(e){return Fa(e,this.coders)}}]),n}(fr);function ao(e){return pa($a(e))}function oo(e){var t=new Set;return e.forEach((function(e){return t.add(e)})),Object.freeze(t)}var io=oo("external public payable".split(" ")),go="constant external internal payable private public pure view",so=oo(go.split(" ")),co="constructor error event fallback function receive struct",lo=oo(co.split(" ")),uo="calldata memory storage payable indexed",fo=oo(uo.split(" ")),Io=oo([co,uo,"tuple returns",go].join(" ").split(" ")),Co={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Ao=new RegExp("^(\\s*)"),ho=new RegExp("^([0-9]+)"),po=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),mo=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),bo=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),yo=new WeakMap,vo=new WeakMap,Zo=new WeakSet,Go=function(){function e(t){Z(this,e),cn(this,Zo),ln(this,yo,{writable:!0,value:void 0}),ln(this,vo,{writable:!0,value:void 0}),In(this,yo,0),In(this,vo,t.slice())}return B(e,[{key:"offset",get:function(){return Cn(this,yo)}},{key:"length",get:function(){return Cn(this,vo).length-Cn(this,yo)}},{key:"clone",value:function(){return new e(Cn(this,vo))}},{key:"reset",value:function(){In(this,yo,0)}},{key:"popKeyword",value:function(e){var t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error("expected keyword ".concat(t.text));return this.pop().text}},{key:"popType",value:function(e){if(this.peek().type!==e)throw new Error("expected ".concat(e,"; got ").concat(JSON.stringify(this.peek())));return this.pop().text}},{key:"popParen",value:function(){var e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");var t=un(this,Zo,Bo).call(this,Cn(this,yo)+1,e.match+1);return In(this,yo,e.match+1),t}},{key:"popParams",value:function(){var e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");for(var t=[];Cn(this,yo)<e.match-1;){var n=this.peek().linkNext;t.push(un(this,Zo,Bo).call(this,Cn(this,yo)+1,n)),In(this,yo,n)}return In(this,yo,e.match+1),t}},{key:"peek",value:function(){if(Cn(this,yo)>=Cn(this,vo).length)throw new Error("out-of-bounds");return Cn(this,vo)[Cn(this,yo)]}},{key:"peekKeyword",value:function(e){var t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}},{key:"peekType",value:function(e){if(0===this.length)return null;var t=this.peek();return t.type===e?t.text:null}},{key:"pop",value:function(){var e,t=this.peek();return In(this,yo,(e=Cn(this,yo),e++,e)),t}},{key:"toString",value:function(){for(var e=[],t=Cn(this,yo);t<Cn(this,vo).length;t++){var n=Cn(this,vo)[t];e.push("".concat(n.type,":").concat(n.text))}return"<TokenString ".concat(e.join(" "),">")}}]),e}();function Bo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new to(Cn(this,vo).slice(e,t).map((function(t){return Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))})))}function ko(e){for(var t=[],n=function(t){var n=o<e.length?JSON.stringify(e[o]):"$EOI";throw new Error("invalid token ".concat(n," at ").concat(o,": ").concat(t))},r=[],a=[],o=0;o<e.length;){var i=e.substring(o),g=i.match(Ao);g&&(o+=g[1].length,i=e.substring(o));var s={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};t.push(s);var c=Co[i[0]]||"";if(c){if(s.type=c,s.text=i[0],o++,"OPEN_PAREN"===c)r.push(t.length-1),a.push(t.length-1);else if("CLOSE_PAREN"==c)0===r.length&&n("no matching open bracket"),s.match=r.pop(),t[s.match].match=t.length-1,s.depth--,s.linkBack=a.pop(),t[s.linkBack].linkNext=t.length-1;else if("COMMA"===c)s.linkBack=a.pop(),t[s.linkBack].linkNext=t.length-1,a.push(t.length-1);else if("OPEN_BRACKET"===c)s.type="BRACKET";else if("CLOSE_BRACKET"===c){var l=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){var u=t.pop().text;l=u+l,t[t.length-1].value=er(u)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=l}}else if(g=i.match(po)){if(s.text=g[1],o+=s.text.length,Io.has(s.text)){s.type="KEYWORD";continue}if(s.text.match(bo)){s.type="TYPE";continue}s.type="ID"}else{if(!(g=i.match(ho)))throw new Error("unexpected token ".concat(JSON.stringify(i[0])," at position ").concat(o));s.text=g[1],s.type="NUMBER",o+=s.text.length}}return new Go(t.map((function(e){return Object.freeze(e)})))}function So(e,t){var n=[];for(var r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error("conflicting types: ".concat(n.join(", ")))}function wo(e,t){if(t.peekKeyword(lo)){var n=t.pop().text;if(n!==e)throw new Error("expected ".concat(e,", got ").concat(n))}return t.popType("ID")}function Wo(e,t){for(var n=new Set;;){var r=e.peekType("KEYWORD");if(null==r||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error("duplicate keywords: ".concat(JSON.stringify(r)));n.add(r)}return Object.freeze(n)}function Ro(e){var t=Wo(e,so);return So(t,oo("constant payable nonpayable".split(" "))),So(t,oo("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Vo(e,t){return e.popParams().map((function(e){return Uo.from(e,t)}))}function Xo(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Pn(e.pop().text);throw new Error("invalid gas")}return null}function Jo(e){if(e.length)throw new Error("unexpected tokens: ".concat(e.toString()))}to=Go;var xo=new RegExp(/^(.*)\[([0-9]*)\]$/);function Yo(e){var t=e.match(bo);if(wn(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){var n=parseInt(t[2]);wn(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){var r=parseInt(t[3]);wn(0!==r&&r<=256&&r%8===0,"invalid numeric width","type",e)}return e}var No={},Ho=Symbol.for("_ethers_internal"),Fo="_ParamTypeInternal",Ko="_ErrorInternal",Eo="_EventInternal",To="_ConstructorInternal",Mo="_FallbackInternal",zo="_FunctionInternal",Do="_StructInternal",Lo=new WeakSet,Uo=function(e){function t(e,n,r,a,o,i,g,s){if(Z(this,t),cn(this,Lo),b(this,"name",void 0),b(this,"type",void 0),b(this,"baseType",void 0),b(this,"indexed",void 0),b(this,"components",void 0),b(this,"arrayLength",void 0),b(this,"arrayChildren",void 0),Xn(e,No,"ParamType"),Object.defineProperty(this,Ho,{value:Fo}),i&&(i=Object.freeze(i.slice())),"array"===a){if(null==g||null==s)throw new Error("")}else if(null!=g||null!=s)throw new Error("");if("tuple"===a){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");vn(this,{name:n,type:r,baseType:a,indexed:o,components:i,arrayLength:g,arrayChildren:s})}return B(t,[{key:"format",value:function(e){if(null==e&&(e="sighash"),"json"===e){var t=this.name||"";if(this.isArray()){var n=JSON.parse(this.arrayChildren.format("json"));return n.name=t,n.type+="[".concat(this.arrayLength<0?"":String(this.arrayLength),"]"),JSON.stringify(n)}var r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"===typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map((function(t){return JSON.parse(t.format(e))}))),JSON.stringify(r)}var a="";return this.isArray()?(a+=this.arrayChildren.format(e),a+="[".concat(this.arrayLength<0?"":String(this.arrayLength),"]")):this.isTuple()?("sighash"!==e&&(a+=this.type),a+="("+this.components.map((function(t){return t.format(e)})).join("full"===e?", ":",")+")"):a+=this.type,"sighash"!==e&&(!0===this.indexed&&(a+=" indexed"),"full"===e&&this.name&&(a+=" "+this.name)),a}},{key:"isArray",value:function(){return"array"===this.baseType}},{key:"isTuple",value:function(){return"tuple"===this.baseType}},{key:"isIndexable",value:function(){return null!=this.indexed}},{key:"walk",value:function(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");var n=this;return e.map((function(e){return n.arrayChildren.walk(e,t)}))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");var r=this;return e.map((function(e,n){return r.components[n].walk(e,t)}))}return t(this.type,e)}},{key:"walkAsync",value:function(t,n){return(e=e||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],a=[t],un(this,Lo,jo).call(this,r,t,n,(function(e){a[0]=e})),!r.length){e.next=6;break}return e.next=6,Promise.all(r);case 6:return e.abrupt("return",a[0]);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}],[{key:"from",value:function(e,n){if(t.isParamType(e))return e;if("string"===typeof e)try{return t.from(ko(e),n)}catch(p){wn(!1,"invalid param type","obj",e)}else if(e instanceof Go){var r="",a="",o=null;Wo(e,oo(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(a="tuple",o=e.popParams().map((function(e){return t.from(e)})),r="tuple(".concat(o.map((function(e){return e.format()})).join(","),")")):a=r=Yo(e.popType("TYPE"));for(var i=null,g=null;e.length&&e.peekType("BRACKET");){var s=e.pop();i=new t(No,"",r,a,null,o,g,i),g=s.value,r+=s.text,a="array",o=null}var c=null;if(Wo(e,fo).has("indexed")){if(!n)throw new Error("");c=!0}var l=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new t(No,l,r,a,c,o,g,i)}var u=e.name;wn(!u||"string"===typeof u&&u.match(mo),"invalid name","obj.name",u);var f=e.indexed;null!=f&&(wn(n,"parameter cannot be indexed","obj.indexed",e.indexed),f=!!f);var I=e.type,C=I.match(xo);if(C){var d=parseInt(C[2]||"-1"),A=t.from({type:C[1],components:e.components});return new t(No,u||"",I,"array",f,null,d,A)}if("tuple"===I||I.startsWith("tuple(")||I.startsWith("(")){var h=null!=e.components?e.components.map((function(e){return t.from(e)})):null;return new t(No,u||"",I,"tuple",f,h,null,null)}return I=Yo(e.type),new t(No,u||"",I,I,f,null,null,null)}},{key:"isParamType",value:function(e){return e&&e[Ho]===Fo}}]),t}();function jo(e,t,n,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");var a=this.arrayChildren,o=t.slice();return o.forEach((function(t,r){un(a,Lo,jo).call(a,e,t,n,(function(e){o[r]=e}))})),void r(o)}if(this.isTuple()){var i,g=this.components;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!==typeof t)throw new Error("invalid tuple value");i=g.map((function(e){if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error("missing value for component ".concat(e.name));return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach((function(t,r){var a;un(a=g[r],Lo,jo).call(a,e,t,n,(function(e){i[r]=e}))})),void r(i)}var s=n(this.type,t);s.then?e.push(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,s;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()):r(s)}var Oo=function(){function e(t,n,r){Z(this,e),b(this,"type",void 0),b(this,"inputs",void 0),Xn(t,No,"Fragment"),vn(this,{type:n,inputs:r=Object.freeze(r.slice())})}return B(e,null,[{key:"from",value:function(t){if("string"===typeof t){try{e.from(JSON.parse(t))}catch(n){}return e.from(ko(t))}if(t instanceof Go)switch(t.peekKeyword(lo)){case"constructor":return $o.from(t);case"error":return _o.from(t);case"event":return qo.from(t);case"fallback":case"receive":return ei.from(t);case"function":return ti.from(t);case"struct":return ni.from(t)}else if("object"===typeof t){switch(t.type){case"constructor":return $o.from(t);case"error":return _o.from(t);case"event":return qo.from(t);case"fallback":case"receive":return ei.from(t);case"function":return ti.from(t);case"struct":return ni.from(t)}Sn(!1,"unsupported type: ".concat(t.type),"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}wn(!1,"unsupported frgament object","obj",t)}},{key:"isConstructor",value:function(e){return $o.isFragment(e)}},{key:"isError",value:function(e){return _o.isFragment(e)}},{key:"isEvent",value:function(e){return qo.isFragment(e)}},{key:"isFunction",value:function(e){return ti.isFragment(e)}},{key:"isStruct",value:function(e){return ni.isFragment(e)}}]),e}(),Qo=function(e){d(n,e);var t=p(n);function n(e,r,a,o){var g;return Z(this,n),b(i(g=t.call(this,e,r,o)),"name",void 0),wn("string"===typeof a&&a.match(mo),"invalid identifier","name",a),o=Object.freeze(o.slice()),vn(i(g),{name:a}),g}return B(n)}(Oo);function Po(e,t){return"("+t.map((function(t){return t.format(e)})).join("full"===e?", ":",")+")"}var _o=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;return Z(this,n),o=t.call(this,e,"error",r,a),Object.defineProperty(i(o),Ho,{value:Ko}),o}return B(n,[{key:"selector",get:function(){return ao(this.format("sighash")).substring(0,10)}},{key:"format",value:function(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+Po(e,this.inputs)),t.join(" ")}}],[{key:"from",value:function(e){if(n.isFragment(e))return e;if("string"===typeof e)return n.from(ko(e));if(e instanceof Go){var t=wo("error",e),r=Vo(e);return Jo(e),new n(No,t,r)}return new n(No,e.name,e.inputs?e.inputs.map(Uo.from):[])}},{key:"isFragment",value:function(e){return e&&e[Ho]===Ko}}]),n}(Qo),qo=function(e){d(n,e);var t=p(n);function n(e,r,a,o){var g;return Z(this,n),b(i(g=t.call(this,e,"event",r,a)),"anonymous",void 0),Object.defineProperty(i(g),Ho,{value:Eo}),vn(i(g),{anonymous:o}),g}return B(n,[{key:"topicHash",get:function(){return ao(this.format("sighash"))}},{key:"format",value:function(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+Po(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}}],[{key:"getTopicHash",value:function(e,t){return t=(t||[]).map((function(e){return Uo.from(e)})),new n(No,e,t,!1).topicHash}},{key:"from",value:function(e){if(n.isFragment(e))return e;if("string"===typeof e)try{return n.from(ko(e))}catch(o){wn(!1,"invalid event fragment","obj",e)}else if(e instanceof Go){var t=wo("event",e),r=Vo(e,!0),a=!!Wo(e,oo(["anonymous"])).has("anonymous");return Jo(e),new n(No,t,r,a)}return new n(No,e.name,e.inputs?e.inputs.map((function(e){return Uo.from(e,!0)})):[],!!e.anonymous)}},{key:"isFragment",value:function(e){return e&&e[Ho]===Eo}}]),n}(Qo),$o=function(e){d(n,e);var t=p(n);function n(e,r,a,o,g){var s;return Z(this,n),b(i(s=t.call(this,e,r,a)),"payable",void 0),b(i(s),"gas",void 0),Object.defineProperty(i(s),Ho,{value:To}),vn(i(s),{payable:o,gas:g}),s}return B(n,[{key:"format",value:function(e){if(Sn(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t=["constructor".concat(Po(e,this.inputs))];return t.push(this.payable?"payable":"nonpayable"),null!=this.gas&&t.push("@".concat(this.gas.toString())),t.join(" ")}}],[{key:"from",value:function(e){if(n.isFragment(e))return e;if("string"===typeof e)try{return n.from(ko(e))}catch(o){wn(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Go){Wo(e,oo(["constructor"]));var t=Vo(e),r=!!Wo(e,io).has("payable"),a=Xo(e);return Jo(e),new n(No,"constructor",t,r,a)}return new n(No,"constructor",e.inputs?e.inputs.map(Uo.from):[],!!e.payable,null!=e.gas?e.gas:null)}},{key:"isFragment",value:function(e){return e&&e[Ho]===To}}]),n}(Oo),ei=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;return Z(this,n),b(i(o=t.call(this,e,"fallback",r)),"payable",void 0),Object.defineProperty(i(o),Ho,{value:Mo}),vn(i(o),{payable:a}),o}return B(n,[{key:"format",value:function(e){var t=0===this.inputs.length?"receive":"fallback";if("json"===e){var n=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:n})}return"".concat(t,"()").concat(this.payable?" payable":"")}}],[{key:"from",value:function(e){if(n.isFragment(e))return e;if("string"===typeof e)try{return n.from(ko(e))}catch(c){wn(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Go){var t=e.toString();if(wn(e.peekKeyword(oo(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(oo(["fallback","receive"]))){var r=Vo(e);return wn(0===r.length,"receive cannot have arguments","obj.inputs",r),Wo(e,oo(["payable"])),Jo(e),new n(No,[],!0)}var a=Vo(e);a.length?wn(1===a.length&&"bytes"===a[0].type,"invalid fallback inputs","obj.inputs",a.map((function(e){return e.format("minimal")})).join(", ")):a=[Uo.from("bytes")];var o=Ro(e);if(wn("nonpayable"===o||"payable"===o,"fallback cannot be constants","obj.stateMutability",o),Wo(e,oo(["returns"])).has("returns")){var i=Vo(e);wn(1===i.length&&"bytes"===i[0].type,"invalid fallback outputs","obj.outputs",i.map((function(e){return e.format("minimal")})).join(", "))}return Jo(e),new n(No,a,"payable"===o)}if("receive"===e.type)return new n(No,[],!0);if("fallback"===e.type){var g=[Uo.from("bytes")],s="payable"===e.stateMutability;return new n(No,g,s)}wn(!1,"invalid fallback description","obj",e)}},{key:"isFragment",value:function(e){return e&&e[Ho]===Mo}}]),n}(Oo),ti=function(e){d(n,e);var t=p(n);function n(e,r,a,o,g,s){var c;Z(this,n),b(i(c=t.call(this,e,"function",r,o)),"constant",void 0),b(i(c),"outputs",void 0),b(i(c),"stateMutability",void 0),b(i(c),"payable",void 0),b(i(c),"gas",void 0),Object.defineProperty(i(c),Ho,{value:zo}),g=Object.freeze(g.slice());var l="view"===a||"pure"===a,u="payable"===a;return vn(i(c),{constant:l,gas:s,outputs:g,payable:u,stateMutability:a}),c}return B(n,[{key:"selector",get:function(){return ao(this.format("sighash")).substring(0,10)}},{key:"format",value:function(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))})),outputs:this.outputs.map((function(t){return JSON.parse(t.format(e))}))});var t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+Po(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Po(e,this.outputs))),null!=this.gas&&t.push("@".concat(this.gas.toString()))),t.join(" ")}}],[{key:"getSelector",value:function(e,t){return t=(t||[]).map((function(e){return Uo.from(e)})),new n(No,e,"view",t,[],null).selector}},{key:"from",value:function(e){if(n.isFragment(e))return e;if("string"===typeof e)try{return n.from(ko(e))}catch(s){wn(!1,"invalid function fragment","obj",e)}else if(e instanceof Go){var t=wo("function",e),r=Vo(e),a=Ro(e),o=[];Wo(e,oo(["returns"])).has("returns")&&(o=Vo(e));var i=Xo(e);return Jo(e),new n(No,t,a,r,o,i)}var g=e.stateMutability;return null==g&&(g="payable","boolean"===typeof e.constant?(g="view",e.constant||(g="payable","boolean"!==typeof e.payable||e.payable||(g="nonpayable"))):"boolean"!==typeof e.payable||e.payable||(g="nonpayable")),new n(No,e.name,g,e.inputs?e.inputs.map(Uo.from):[],e.outputs?e.outputs.map(Uo.from):[],null!=e.gas?e.gas:null)}},{key:"isFragment",value:function(e){return e&&e[Ho]===zo}}]),n}(Qo),ni=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;return Z(this,n),o=t.call(this,e,"struct",r,a),Object.defineProperty(i(o),Ho,{value:Do}),o}return B(n,[{key:"format",value:function(){throw new Error("@TODO")}}],[{key:"from",value:function(e){if("string"===typeof e)try{return n.from(ko(e))}catch(a){wn(!1,"invalid struct fragment","obj",e)}else if(e instanceof Go){var t=wo("struct",e),r=Vo(e);return Jo(e),new n(No,t,r)}return new n(No,e.name,e.inputs?e.inputs.map(Uo.from):[])}},{key:"isFragment",value:function(e){return e&&e[Ho]===Do}}]),n}(Qo),ri=new Map;ri.set(0,"GENERIC_PANIC"),ri.set(1,"ASSERT_FALSE"),ri.set(17,"OVERFLOW"),ri.set(18,"DIVIDE_BY_ZERO"),ri.set(33,"ENUM_RANGE_ERROR"),ri.set(34,"BAD_STORAGE_DATA"),ri.set(49,"STACK_UNDERFLOW"),ri.set(50,"ARRAY_RANGE_ERROR"),ri.set(65,"OUT_OF_MEMORY"),ri.set(81,"UNINITIALIZED_FUNCTION_CALL");var ai=new RegExp(/^bytes([0-9]*)$/),oi=new RegExp(/^(u?int)([0-9]*)$/),ii=null;var gi,si=new WeakSet,ci=function(){function e(){Z(this,e),cn(this,si)}return B(e,[{key:"getDefaultValue",value:function(e){var t=this,n=e.map((function(e){return un(t,si,li).call(t,Uo.from(e))}));return new ro(n,"_").defaultValue()}},{key:"encode",value:function(e,t){var n=this;Wn(t.length,e.length,"types/values length mismatch");var r=e.map((function(e){return un(n,si,li).call(n,Uo.from(e))})),a=new ro(r,"_"),o=new Ar;return a.encode(o,t),o.data}},{key:"decode",value:function(e,t,n){var r=this,a=e.map((function(e){return un(r,si,li).call(r,Uo.from(e))}));return new ro(a,"_").decode(new yr(t,n))}}],[{key:"defaultAbiCoder",value:function(){return null==ii&&(ii=new e),ii}},{key:"getBuiltinCallException",value:function(t,n,r){return function(e,t,n,r){var a="missing revert data",o=null,i=null;if(n){a="execution reverted";var g=xn(n);if(n=Kn(n),0===g.length)a+=" (no data present; likely require(false) occurred",o="require(false)";else if(g.length%32!==4)a+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===Kn(g.slice(0,4)))try{i={signature:"Error(string)",name:"Error",args:[o=r.decode(["string"],g.slice(4))[0]]},a+=": ".concat(JSON.stringify(o))}catch(l){a+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===Kn(g.slice(0,4)))try{var s=Number(r.decode(["uint256"],g.slice(4))[0]);i={signature:"Panic(uint256)",name:"Panic",args:[s]},o="Panic due to ".concat(ri.get(s)||"UNKNOWN","(").concat(s,")"),a+=": ".concat(o)}catch(l){a+=" (could not decode panic code)"}else a+=" (unknown custom error)"}var c={to:t.to?wa(t.to):null,data:t.data||"0x"};return t.from&&(c.from=wa(t.from)),kn(a,"CALL_EXCEPTION",{action:e,data:n,reason:o,transaction:c,invocation:null,revert:i})}(t,n,r,e.defaultAbiCoder())}}]),e}();function li(e){var t=this;if(e.isArray())return new Ka(un(this,si,li).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new ro(e.components.map((function(e){return un(t,si,li).call(t,e)})),e.name);switch(e.baseType){case"address":return new Ya(e.name);case"bool":return new Ea(e.name);case"string":return new no(e.name);case"bytes":return new Ma(e.name);case"":return new La(e.name)}var n=e.type.match(oi);if(n){var r=parseInt(n[2]||"256");return wn(0!==r&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Qa(r/8,"int"===n[1],e.name)}if(n=e.type.match(ai)){var a=parseInt(n[1]);return wn(0!==a&&a<=32,"invalid bytes length","param",e),new za(a,e.name)}wn(!1,"invalid type","type",e.type)}function ui(e){return e&&"function"===typeof e.getAddress}function fi(e,t){return(gi=gi||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return null!=(r=e.sent)&&"0x0000000000000000000000000000000000000000"!==r||(Sn("string"!==typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),wn(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),e.abrupt("return",wa(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t){return"string"===typeof e?e.match(/^0x[0-9a-f]{40}$/i)?wa(e):(Sn(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),fi(e,t.resolveName(e))):ui(e)?fi(e,e.getAddress()):e&&"function"===typeof e.then?fi(e,e):void wn(!1,"unsupported addressable value","target",e)}var Ci=new Uint8Array(32);Ci.fill(0);var di=BigInt(-1),Ai=BigInt(0),hi=BigInt(1),pi=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var mi=tr(hi,32),bi=tr(Ai,32),yi={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},vi=["name","version","chainId","verifyingContract","salt"];function Zi(e){return function(t){return wn("string"===typeof t,"invalid domain value for ".concat(JSON.stringify(e)),"domain.".concat(e),t),t}}var Gi={name:Zi("name"),version:Zi("version"),chainId:function(e){var t=Pn(e,"domain.chainId");return wn(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):rr(t)},verifyingContract:function(e){try{return wa(e).toLowerCase()}catch(t){}wn(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){var t=xn(e,"domain.salt");return wn(32===t.length,'invalid domain value "salt"',"domain.salt",e),Kn(t)}};function Bi(e){var t=e.match(/^(u?)int(\d*)$/);if(t){var n=""===t[1],r=parseInt(t[2]||"256");wn(r%8===0&&0!==r&&r<=256&&(null==t[2]||t[2]===String(r)),"invalid numeric width","type",e);var a=Qn(pi,n?r-1:r),o=n?(a+hi)*di:Ai;return function(t){var r=Pn(t,"value");return wn(r>=o&&r<=a,"value out-of-bounds for ".concat(e),"value",r),tr(n?On(r,256):r,32)}}var i=e.match(/^bytes(\d+)$/);if(i){var g=parseInt(i[1]);return wn(0!==g&&g<=32&&i[1]===String(g),"invalid bytes width","type",e),function(t){return wn(xn(t).length===g,"invalid length for ".concat(e),"value",t),function(e){var t=xn(e),n=t.length%32;return n?En([t,Ci.slice(n)]):Kn(t)}(t)}}switch(e){case"address":return function(e){return Dn(wa(e),32)};case"bool":return function(e){return e?mi:bi};case"bytes":return function(e){return pa(e)};case"string":return function(e){return ao(e)}}return null}function ki(e,t){return"".concat(e,"(").concat(t.map((function(e){var t=e.name;return e.type+" "+t})).join(","),")")}var Si,wi,Wi,Ri,Vi,Xi=new WeakMap,Ji=new WeakMap,xi=new WeakMap,Yi=new WeakSet,Ni=function(e){function t(e){Z(this,t),cn(this,Yi),b(this,"primaryType",void 0),ln(this,Xi,{writable:!0,value:void 0}),ln(this,Ji,{writable:!0,value:void 0}),ln(this,xi,{writable:!0,value:void 0}),In(this,Xi,JSON.stringify(e)),In(this,Ji,new Map),In(this,xi,new Map);var n=new Map,r=new Map,a=new Map;for(var o in Object.keys(e).forEach((function(e){n.set(e,new Set),r.set(e,[]),a.set(e,new Set)})),e){var i,g=new Set,s=Xe(e[o]);try{for(s.s();!(i=s.n()).done;){var c=i.value;wn(!g.has(c.name),"duplicate variable name ".concat(JSON.stringify(c.name)," in ").concat(JSON.stringify(o)),"types",e),g.add(c.name);var l=c.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;wn(l!==o,"circular type reference to ".concat(JSON.stringify(l)),"types",e),Bi(l)||(wn(r.has(l),"unknown type ".concat(JSON.stringify(l)),"types",e),r.get(l).push(o),n.get(o).add(l))}}catch(p){s.e(p)}finally{s.f()}}var u=Array.from(r.keys()).filter((function(e){return 0===r.get(e).length}));wn(0!==u.length,"missing primary type","types",e),wn(1===u.length,"ambiguous primary types or unused types: ".concat(u.map((function(e){return JSON.stringify(e)})).join(", ")),"types",e),vn(this,{primaryType:u[0]}),function t(o,i){wn(!i.has(o),"circular type reference to ".concat(JSON.stringify(o)),"types",e),i.add(o);var g,s=Xe(n.get(o));try{for(s.s();!(g=s.n()).done;){var c=g.value;if(r.has(c)){t(c,i);var l,u=Xe(i);try{for(u.s();!(l=u.n()).done;){var f=l.value;a.get(f).add(c)}}catch(p){u.e(p)}finally{u.f()}}}}catch(p){s.e(p)}finally{s.f()}i.delete(o)}(this.primaryType,new Set);var f,I=Xe(a);try{for(I.s();!(f=I.n()).done;){var C=Ge(f.value,2),d=C[0],A=C[1],h=Array.from(A);h.sort(),Cn(this,Ji).set(d,ki(d,e[d])+h.map((function(t){return ki(t,e[t])})).join(""))}}catch(p){I.e(p)}finally{I.f()}}return B(t,[{key:"types",get:function(){return JSON.parse(Cn(this,Xi))}},{key:"getEncoder",value:function(e){var t=Cn(this,xi).get(e);return t||(t=un(this,Yi,Hi).call(this,e),Cn(this,xi).set(e,t)),t}},{key:"encodeType",value:function(e){var t=Cn(this,Ji).get(e);return wn(t,"unknown type: ".concat(JSON.stringify(e)),"name",e),t}},{key:"encodeData",value:function(e,t){return this.getEncoder(e)(t)}},{key:"hashStruct",value:function(e,t){return pa(this.encodeData(e,t))}},{key:"encode",value:function(e){return this.encodeData(this.primaryType,e)}},{key:"hash",value:function(e){return this.hashStruct(this.primaryType,e)}},{key:"_visit",value:function(e,t,n){var r=this;if(Bi(e))return n(e,t);var a=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(a)return wn(!a[3]||parseInt(a[3])===t.length,"array length mismatch; expected length ".concat(parseInt(a[3])),"value",t),t.map((function(e){return r._visit(a[1],e,n)}));var o=this.types[e];if(o)return o.reduce((function(e,a){var o=a.name,i=a.type;return e[o]=r._visit(i,t[o],n),e}),{});wn(!1,"unknown type: ".concat(e),"type",e)}},{key:"visit",value:function(e,t){return this._visit(this.primaryType,e,t)}}],[{key:"from",value:function(e){return new t(e)}},{key:"getPrimaryType",value:function(e){return t.from(e).primaryType}},{key:"hashStruct",value:function(e,n,r){return t.from(n).hashStruct(e,r)}},{key:"hashDomain",value:function(e){var n=[];for(var r in e)if(null!=e[r]){var a=yi[r];wn(a,"invalid typed-data domain key: ".concat(JSON.stringify(r)),"domain",e),n.push({name:r,type:a})}return n.sort((function(e,t){return vi.indexOf(e.name)-vi.indexOf(t.name)})),t.hashStruct("EIP712Domain",{EIP712Domain:n},e)}},{key:"encode",value:function(e,n,r){return En(["0x1901",t.hashDomain(e),t.from(n).hash(r)])}},{key:"hash",value:function(e,n,r){return pa(t.encode(e,n,r))}},{key:"resolveNames",value:function(n,r,a,o){return(e=e||hn(dn().mark((function e(n,r,a,o){var i,g,s,c;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in n=Object.assign({},n))null==n[i]&&delete n[i];g={},n.verifyingContract&&!Nn(n.verifyingContract,20)&&(g[n.verifyingContract]="0x"),(s=t.from(r)).visit(a,(function(e,t){return"address"!==e||Nn(t,20)||(g[t]="0x"),t})),e.t0=dn().keys(g);case 7:if((e.t1=e.t0()).done){e.next=14;break}return c=e.t1.value,e.next=11,o(c);case 11:g[c]=e.sent,e.next=7;break;case 14:return n.verifyingContract&&g[n.verifyingContract]&&(n.verifyingContract=g[n.verifyingContract]),a=s.visit(a,(function(e,t){return"address"===e&&g[t]?g[t]:t})),e.abrupt("return",{domain:n,value:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"getPayload",value:function(e,n,r){t.hashDomain(e);var a={},o=[];vi.forEach((function(t){var n=e[t];null!=n&&(a[t]=Gi[t](n),o.push({name:t,type:yi[t]}))}));var i=t.from(n),g=Object.assign({},n);return wn(null==g.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",n),g.EIP712Domain=o,i.encode(r),{types:g,domain:a,primaryType:i.primaryType,message:i.visit(r,(function(e,t){if(e.match(/^bytes(\d*)/))return Kn(xn(t));if(e.match(/^u?int/))return Pn(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return wn("string"===typeof t,"invalid string","value",t),t}wn(!1,"unsupported type","type",e)}))}}}]),t}();function Hi(e){var t=this,n=Bi(e);if(n)return n;var r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){var a=r[1],o=this.getEncoder(a);return function(e){wn(!r[3]||parseInt(r[3])===e.length,"array length mismatch; expected length ".concat(parseInt(r[3])),"value",e);var n=e.map(o);return Cn(t,Ji).has(a)&&(n=n.map(pa)),pa(En(n))}}var i=this.types[e];if(i){var g=ao(Cn(this,Ji).get(e));return function(e){var n=i.map((function(n){var r=n.name,a=n.type,o=t.getEncoder(a)(e[r]);return Cn(t,Ji).has(a)?pa(o):o}));return n.unshift(g),En(n)}}wn(!1,"unknown type: ".concat(e),"type",e)}function Fi(e,t){return{address:wa(e),storageKeys:t.map((function(e,t){return wn(Nn(e,32),"invalid slot","storageKeys[".concat(t,"]"),e),e.toLowerCase()}))}}function Ki(e){if(Array.isArray(e))return e.map((function(t,n){return Array.isArray(t)?(wn(2===t.length,"invalid slot set","value[".concat(n,"]"),t),Fi(t[0],t[1])):(wn(null!=t&&"object"===typeof t,"invalid address-slot set","value",e),Fi(t.address,t.storageKeys))}));wn(null!=e&&"object"===typeof e,"invalid access list","value",e);var t=Object.keys(e).map((function(t){var n=e[t].reduce((function(e,t){return e[t]=!0,e}),{});return Fi(t,Object.keys(n).sort())}));return t.sort((function(e,t){return e.address.localeCompare(t.address)})),t}function Ei(e){e=atob(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return xn(t)}var Ti=function(e,t){return(Si=Si||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sn("http"===(r=t.url.split(":")[0].toLowerCase())||"https"===r,"unsupported protocol ".concat(r),"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),Sn("https"===r||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),a=void 0,n&&(o=new AbortController,a=o.signal,n.addListener((function(){o.abort()}))),i={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:a},e.next=8,fetch(t.url,i);case 8:return g=e.sent,s={},g.headers.forEach((function(e,t){s[t.toLowerCase()]=e})),e.next=13,g.arrayBuffer();case 13:return c=e.sent,l=null==c?null:new Uint8Array(c),e.abrupt("return",{statusCode:g.status,statusMessage:g.statusText,headers:s,body:l});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Mi=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),zi=new RegExp("^ipfs://(ipfs/)?(.*)$","i"),Di=!1;function Li(e,t){return(Ri=Ri||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.match(Mi)){e.next=4;break}throw new Error("invalid data");case 4:return e.abrupt("return",new vg(200,"OK",{"content-type":r[1]||"text/plain"},r[2]?Ei(r[3]):$a(r[3].replace(/%([0-9a-f][0-9a-f])/gi,(function(e,t){return String.fromCharCode(parseInt(t,16))})))));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new vg(599,"BAD REQUEST (invalid data: URI)",{},null,new Cg(t)));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ui(e){var t;return function(n,r){return(t=t||hn(dn().mark((function t(n,r){var a;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=n.match(zi)){t.next=4;break}throw new Error("invalid link");case 4:return t.abrupt("return",new Cg("".concat(e).concat(a[2])));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",new vg(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Cg(n)));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}}var ji={data:Li,ipfs:Ui("https://gateway.ipfs.io/ipfs/")},Oi=new WeakMap,Qi=new WeakMap,Pi=new WeakMap,_i=function(){function e(t){var n=this;Z(this,e),ln(this,Qi,{writable:!0,value:void 0}),ln(this,Pi,{writable:!0,value:void 0}),In(this,Qi,[]),In(this,Pi,!1),Oi.set(t,(function(){if(!Cn(n,Pi)){In(n,Pi,!0);var e,t=Xe(Cn(n,Qi));try{var r=function(){var t=e.value;setTimeout((function(){t()}),0)};for(t.s();!(e=t.n()).done;)r()}catch(a){t.e(a)}finally{t.f()}In(n,Qi,[])}}))}return B(e,[{key:"addListener",value:function(e){Sn(!Cn(this,Pi),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),Cn(this,Qi).push(e)}},{key:"cancelled",get:function(){return Cn(this,Pi)}},{key:"checkSignal",value:function(){Sn(!this.cancelled,"cancelled","CANCELLED",{})}}]),e}();function qi(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var $i=new WeakMap,eg=new WeakMap,tg=new WeakMap,ng=new WeakMap,rg=new WeakMap,ag=new WeakMap,og=new WeakMap,ig=new WeakMap,gg=new WeakMap,sg=new WeakMap,cg=new WeakMap,lg=new WeakMap,ug=new WeakMap,fg=new WeakMap,Ig=new WeakSet;wi=Symbol.iterator;var Cg=function(){function e(t){Z(this,e),cn(this,Ig),ln(this,$i,{writable:!0,value:void 0}),ln(this,eg,{writable:!0,value:void 0}),ln(this,tg,{writable:!0,value:void 0}),ln(this,ng,{writable:!0,value:void 0}),ln(this,rg,{writable:!0,value:void 0}),ln(this,ag,{writable:!0,value:void 0}),ln(this,og,{writable:!0,value:void 0}),ln(this,ig,{writable:!0,value:void 0}),ln(this,gg,{writable:!0,value:void 0}),ln(this,sg,{writable:!0,value:void 0}),ln(this,cg,{writable:!0,value:void 0}),ln(this,lg,{writable:!0,value:void 0}),ln(this,ug,{writable:!0,value:void 0}),ln(this,fg,{writable:!0,value:void 0}),In(this,ag,String(t)),In(this,$i,!1),In(this,eg,!0),In(this,tg,{}),In(this,ng,""),In(this,rg,3e5),In(this,fg,{slotInterval:250,maxAttempts:12})}return B(e,[{key:"url",get:function(){return Cn(this,ag)},set:function(e){In(this,ag,String(e))}},{key:"body",get:function(){return null==Cn(this,og)?null:new Uint8Array(Cn(this,og))},set:function(e){if(null==e)In(this,og,void 0),In(this,ig,void 0);else if("string"===typeof e)In(this,og,$a(e)),In(this,ig,"text/plain");else if(e instanceof Uint8Array)In(this,og,e),In(this,ig,"application/octet-stream");else{if("object"!==typeof e)throw new Error("invalid body");In(this,og,$a(JSON.stringify(e))),In(this,ig,"application/json")}}},{key:"hasBody",value:function(){return null!=Cn(this,og)}},{key:"method",get:function(){return Cn(this,ng)?Cn(this,ng):this.hasBody()?"POST":"GET"},set:function(e){null==e&&(e=""),In(this,ng,String(e).toUpperCase())}},{key:"headers",get:function(){var e=Object.assign({},Cn(this,tg));return Cn(this,gg)&&(e.authorization="Basic ".concat(function(e){for(var t=xn(e),n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}($a(Cn(this,gg))))),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&Cn(this,ig)&&(e["content-type"]=Cn(this,ig)),this.body&&(e["content-length"]=String(this.body.length)),e}},{key:"getHeader",value:function(e){return this.headers[e.toLowerCase()]}},{key:"setHeader",value:function(e,t){Cn(this,tg)[String(e).toLowerCase()]=String(t)}},{key:"clearHeaders",value:function(){In(this,tg,{})}},{key:wi,value:function(){var e=this.headers,t=Object.keys(e),n=0;return{next:function(){if(n<t.length){var r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}},{key:"credentials",get:function(){return Cn(this,gg)||null}},{key:"setCredentials",value:function(e,t){wn(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),In(this,gg,"".concat(e,":").concat(t))}},{key:"allowGzip",get:function(){return Cn(this,eg)}},{key:"allowGzip",set:function(e){In(this,eg,!!e)}},{key:"allowInsecureAuthentication",get:function(){return!!Cn(this,$i)}},{key:"allowInsecureAuthentication",set:function(e){In(this,$i,!!e)}},{key:"timeout",get:function(){return Cn(this,rg)}},{key:"timeout",set:function(e){wn(e>=0,"timeout must be non-zero","timeout",e),In(this,rg,e)}},{key:"preflightFunc",get:function(){return Cn(this,sg)||null}},{key:"preflightFunc",set:function(e){In(this,sg,e)}},{key:"processFunc",get:function(){return Cn(this,cg)||null}},{key:"processFunc",set:function(e){In(this,cg,e)}},{key:"retryFunc",get:function(){return Cn(this,lg)||null}},{key:"retryFunc",set:function(e){In(this,lg,e)}},{key:"toString",value:function(){return"<FetchRequest method=".concat(JSON.stringify(this.method)," url=").concat(JSON.stringify(this.url)," headers=").concat(JSON.stringify(this.headers)," body=").concat(Cn(this,og)?Kn(Cn(this,og)):"null",">")}},{key:"setThrottleParams",value:function(e){null!=e.slotInterval&&(Cn(this,fg).slotInterval=e.slotInterval),null!=e.maxAttempts&&(Cn(this,fg).maxAttempts=e.maxAttempts)}},{key:"send",value:function(){return Sn(null==Cn(this,ug),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),In(this,ug,new _i(this)),un(this,Ig,dg).call(this,0,Zg()+this.timeout,0,this,new vg(0,"",{},null,this))}},{key:"cancel",value:function(){Sn(null!=Cn(this,ug),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});var e=Oi.get(this);if(!e)throw new Error("missing signal; should not happen");e()}},{key:"redirect",value:function(t){var n=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();Sn("GET"===this.method&&("https"!==n||"http"!==r)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:"redirect(".concat(this.method," ").concat(JSON.stringify(this.url)," => ").concat(JSON.stringify(t),")")});var a=new e(t);return a.method="GET",a.allowGzip=this.allowGzip,a.timeout=this.timeout,In(a,tg,Object.assign({},Cn(this,tg))),Cn(this,og)&&In(a,og,new Uint8Array(Cn(this,og))),In(a,ig,Cn(this,ig)),a}},{key:"clone",value:function(){var t=new e(this.url);return In(t,ng,Cn(this,ng)),Cn(this,og)&&In(t,og,Cn(this,og)),In(t,ig,Cn(this,ig)),In(t,tg,Object.assign({},Cn(this,tg))),In(t,gg,Cn(this,gg)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),In(t,sg,Cn(this,sg)),In(t,cg,Cn(this,cg)),In(t,lg,Cn(this,lg)),t}}],[{key:"lockConfig",value:function(){Di=!0}},{key:"getGateway",value:function(e){return ji[e.toLowerCase()]||null}},{key:"registerGateway",value:function(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error("cannot intercept ".concat(e,"; use registerGetUrl"));if(Di)throw new Error("gateways locked");ji[e]=t}},{key:"registerGetUrl",value:function(e){if(Di)throw new Error("gateways locked");Ti=e}},{key:"createDataGateway",value:function(){return Li}},{key:"createIpfsGatewayFunc",value:function(e){return Ui(e)}}]),e}();function dg(e,t,n,r,a){return(Vi=Vi||hn(dn().mark((function e(t,n,r,a,o){var i,g,s,c,l,u,f,I,C,d,A,h,p;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=Cn(this,fg).maxAttempts)){e.next=2;break}return e.abrupt("return",o.makeServerError("exceeded maximum retry limit"));case 2:if(Sn(Zg()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:a}),!(r>0)){e.next=6;break}return e.next=6,Gg(r);case 6:if(i=this.clone(),!((g=(i.url.split(":")[0]||"").toLowerCase())in ji)){e.next=27;break}return e.next=11,ji[g](i.url,qi(Cn(a,ug)));case 11:if(!((s=e.sent)instanceof vg)){e.next=26;break}if(c=s,!this.processFunc){e.next=25;break}return qi(Cn(a,ug)),e.prev=16,e.next=19,this.processFunc(i,c);case 19:c=e.sent,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),null!=e.t0.throttle&&"number"===typeof e.t0.stall||c.makeServerError("error in post-processing function",e.t0).assertOk();case 25:return e.abrupt("return",c);case 26:i=s;case 27:if(!this.preflightFunc){e.next=31;break}return e.next=30,this.preflightFunc(i);case 30:i=e.sent;case 31:return e.next=33,Ti(i,qi(Cn(a,ug)));case 33:if(l=e.sent,301!==(u=new vg(l.statusCode,l.statusMessage,l.headers,l.body,a)).statusCode&&302!==u.statusCode){e.next=46;break}return e.prev=36,I=u.headers.location||"",e.abrupt("return",un(f=i.redirect(I),Ig,dg).call(f,t+1,n,0,a,u));case 41:e.prev=41,e.t1=e.catch(36);case 43:return e.abrupt("return",u);case 46:if(429!==u.statusCode){e.next=57;break}if(e.t2=null==this.retryFunc,e.t2){e.next=52;break}return e.next=51,this.retryFunc(i,u,t);case 51:e.t2=e.sent;case 52:if(!e.t2){e.next=57;break}return d=u.headers["retry-after"],A=Cn(this,fg).slotInterval*Math.trunc(Math.random()*Math.pow(2,t)),"string"===typeof d&&d.match(/^[1-9][0-9]*$/)&&(A=parseInt(d)),e.abrupt("return",un(C=i.clone(),Ig,dg).call(C,t+1,n,A,a,u));case 57:if(!this.processFunc){e.next=72;break}return qi(Cn(a,ug)),e.prev=59,e.next=62,this.processFunc(i,u);case 62:u=e.sent,e.next=72;break;case 65:return e.prev=65,e.t3=e.catch(59),null!=e.t3.throttle&&"number"===typeof e.t3.stall||u.makeServerError("error in post-processing function",e.t3).assertOk(),p=Cn(this,fg).slotInterval*Math.trunc(Math.random()*Math.pow(2,t)),e.t3.stall>=0&&(p=e.t3.stall),e.abrupt("return",un(h=i.clone(),Ig,dg).call(h,t+1,n,p,a,u));case 72:return e.abrupt("return",u);case 73:case"end":return e.stop()}}),e,this,[[16,22],[36,41],[59,65]])})))).apply(this,arguments)}var Ag=new WeakMap,hg=new WeakMap,pg=new WeakMap,mg=new WeakMap,bg=new WeakMap,yg=new WeakMap;Wi=Symbol.iterator;var vg=function(){function e(t,n,r,a,o){Z(this,e),ln(this,Ag,{writable:!0,value:void 0}),ln(this,hg,{writable:!0,value:void 0}),ln(this,pg,{writable:!0,value:void 0}),ln(this,mg,{writable:!0,value:void 0}),ln(this,bg,{writable:!0,value:void 0}),ln(this,yg,{writable:!0,value:void 0}),In(this,Ag,t),In(this,hg,n),In(this,pg,Object.keys(r).reduce((function(e,t){return e[t.toLowerCase()]=String(r[t]),e}),{})),In(this,mg,null==a?null:new Uint8Array(a)),In(this,bg,o||null),In(this,yg,{message:""})}return B(e,[{key:"toString",value:function(){return"<FetchResponse status=".concat(this.statusCode," body=").concat(Cn(this,mg)?Kn(Cn(this,mg)):"null",">")}},{key:"statusCode",get:function(){return Cn(this,Ag)}},{key:"statusMessage",get:function(){return Cn(this,hg)}},{key:"headers",get:function(){return Object.assign({},Cn(this,pg))}},{key:"body",get:function(){return null==Cn(this,mg)?null:new Uint8Array(Cn(this,mg))}},{key:"bodyText",get:function(){try{return null==Cn(this,mg)?"":eo(Cn(this,mg))}catch(e){Sn(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}},{key:"bodyJson",get:function(){try{return JSON.parse(this.bodyText)}catch(e){Sn(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}},{key:Wi,value:function(){var e=this.headers,t=Object.keys(e),n=0;return{next:function(){if(n<t.length){var r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}},{key:"makeServerError",value:function(t,n){var r;t?r="CLIENT ESCALATED SERVER ERROR (".concat(this.statusCode," ").concat(this.statusMessage,"; ").concat(t,")"):(t="".concat(this.statusCode," ").concat(this.statusMessage),r="CLIENT ESCALATED SERVER ERROR (".concat(t,")"));var a=new e(599,r,this.headers,this.body,Cn(this,bg)||void 0);return In(a,yg,{message:t,error:n}),a}},{key:"throwThrottleError",value:function(e,t){null==t?t=-1:wn(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);var n=new Error(e||"throttling requests");throw vn(n,{stall:t,throttle:!0}),n}},{key:"getHeader",value:function(e){return this.headers[e.toLowerCase()]}},{key:"hasBody",value:function(){return null!=Cn(this,mg)}},{key:"request",get:function(){return Cn(this,bg)}},{key:"ok",value:function(){return""===Cn(this,yg).message&&this.statusCode>=200&&this.statusCode<300}},{key:"assertOk",value:function(){if(!this.ok()){var e=Cn(this,yg),t=e.message,n=e.error;""===t&&(t="server response ".concat(this.statusCode," ").concat(this.statusMessage)),Sn(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n})}}}]),e}();function Zg(){return(new Date).getTime()}function Gg(e){return new Promise((function(t){return setTimeout(t,e)}))}var Bg,kg,Sg="0x0000000000000000000000000000000000000000",wg=B((function e(t,n,r){Z(this,e),b(this,"fragment",void 0),b(this,"name",void 0),b(this,"signature",void 0),b(this,"topic",void 0),b(this,"args",void 0);var a=t.name,o=t.format();vn(this,{fragment:t,name:a,signature:o,topic:n,args:r})})),Wg=B((function e(t,n,r,a){Z(this,e),b(this,"fragment",void 0),b(this,"name",void 0),b(this,"args",void 0),b(this,"signature",void 0),b(this,"selector",void 0),b(this,"value",void 0);var o=t.name,i=t.format();vn(this,{fragment:t,name:o,args:r,signature:i,selector:n,value:a})})),Rg=B((function e(t,n,r){Z(this,e),b(this,"fragment",void 0),b(this,"name",void 0),b(this,"args",void 0),b(this,"signature",void 0),b(this,"selector",void 0);var a=t.name,o=t.format();vn(this,{fragment:t,name:a,args:r,signature:o,selector:n})})),Vg=function(){function e(t){Z(this,e),b(this,"hash",void 0),b(this,"_isIndexed",void 0),vn(this,{hash:t,_isIndexed:!0})}return B(e,null,[{key:"isIndexed",value:function(e){return!(!e||!e._isIndexed)}}]),e}(),Xg={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Jg={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:function(e){return"reverted with reason string ".concat(JSON.stringify(e))}},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:function(e){var t="unknown panic code";return e>=0&&e<=255&&Xg[e.toString()]&&(t=Xg[e.toString()]),"reverted with panic code 0x".concat(e.toString(16)," (").concat(t,")")}}},xg=new WeakMap,Yg=new WeakMap,Ng=new WeakMap,Hg=new WeakMap,Fg=new WeakSet,Kg=new WeakSet,Eg=function(){function e(t){var n=this;Z(this,e),cn(this,Kg),cn(this,Fg),b(this,"fragments",void 0),b(this,"deploy",void 0),b(this,"fallback",void 0),b(this,"receive",void 0),ln(this,xg,{writable:!0,value:void 0}),ln(this,Yg,{writable:!0,value:void 0}),ln(this,Ng,{writable:!0,value:void 0}),ln(this,Hg,{writable:!0,value:void 0});var r=[];r="string"===typeof t?JSON.parse(t):t,In(this,Ng,new Map),In(this,xg,new Map),In(this,Yg,new Map);var a,o=[],i=Xe(r);try{for(i.s();!(a=i.n()).done;){var g=a.value;try{o.push(Oo.from(g))}catch(l){console.log("EE",l)}}}catch(u){i.e(u)}finally{i.f()}vn(this,{fragments:Object.freeze(o)});var s=null,c=!1;In(this,Hg,this.getAbiCoder()),this.fragments.forEach((function(e,t){var r;switch(e.type){case"constructor":return n.deploy?void console.log("duplicate definition - constructor"):void vn(n,{deploy:e});case"fallback":return void(0===e.inputs.length?c=!0:(wn(!s||e.payable!==s.payable,"conflicting fallback fragments","fragments[".concat(t,"]"),e),c=(s=e).payable));case"function":r=Cn(n,Ng);break;case"event":r=Cn(n,Yg);break;case"error":r=Cn(n,xg);break;default:return}var a=e.format();r.has(a)||r.set(a,e)})),this.deploy||vn(this,{deploy:$o.from("constructor()")}),vn(this,{fallback:s,receive:c})}return B(e,[{key:"format",value:function(e){var t=e?"minimal":"full",n=this.fragments.map((function(e){return e.format(t)}));return n}},{key:"formatJson",value:function(){var e=this.fragments.map((function(e){return e.format("json")}));return JSON.stringify(e.map((function(e){return JSON.parse(e)})))}},{key:"getAbiCoder",value:function(){return ci.defaultAbiCoder()}},{key:"getFunctionName",value:function(e){var t=un(this,Fg,Tg).call(this,e,null,!1);return wn(t,"no matching function","key",e),t.name}},{key:"hasFunction",value:function(e){return!!un(this,Fg,Tg).call(this,e,null,!1)}},{key:"getFunction",value:function(e,t){return un(this,Fg,Tg).call(this,e,t||null,!0)}},{key:"forEachFunction",value:function(e){var t=Array.from(Cn(this,Ng).keys());t.sort((function(e,t){return e.localeCompare(t)}));for(var n=0;n<t.length;n++){var r=t[n];e(Cn(this,Ng).get(r),n)}}},{key:"getEventName",value:function(e){var t=un(this,Kg,Mg).call(this,e,null,!1);return wn(t,"no matching event","key",e),t.name}},{key:"hasEvent",value:function(e){return!!un(this,Kg,Mg).call(this,e,null,!1)}},{key:"getEvent",value:function(e,t){return un(this,Kg,Mg).call(this,e,t||null,!0)}},{key:"forEachEvent",value:function(e){var t=Array.from(Cn(this,Yg).keys());t.sort((function(e,t){return e.localeCompare(t)}));for(var n=0;n<t.length;n++){var r=t[n];e(Cn(this,Yg).get(r),n)}}},{key:"getError",value:function(e,t){if(Nn(e)){var n=e.toLowerCase();if(Jg[n])return _o.from(Jg[n].signature);var r,a=Xe(Cn(this,xg).values());try{for(a.s();!(r=a.n()).done;){var o=r.value;if(n===o.selector)return o}}catch(C){a.e(C)}finally{a.f()}return null}if(-1===e.indexOf("(")){var i,g=[],s=Xe(Cn(this,xg));try{for(s.s();!(i=s.n()).done;){var c=Ge(i.value,2),l=c[0],u=c[1];l.split("(")[0]===e&&g.push(u)}}catch(C){s.e(C)}finally{s.f()}if(0===g.length)return"Error"===e?_o.from("error Error(string)"):"Panic"===e?_o.from("error Panic(uint256)"):null;if(g.length>1){var f=g.map((function(e){return JSON.stringify(e.format())})).join(", ");wn(!1,"ambiguous error description (i.e. ".concat(f,")"),"name",e)}return g[0]}if("Error(string)"===(e=_o.from(e).format()))return _o.from("error Error(string)");if("Panic(uint256)"===e)return _o.from("error Panic(uint256)");var I=Cn(this,xg).get(e);return I||null}},{key:"forEachError",value:function(e){var t=Array.from(Cn(this,xg).keys());t.sort((function(e,t){return e.localeCompare(t)}));for(var n=0;n<t.length;n++){var r=t[n];e(Cn(this,xg).get(r),n)}}},{key:"_decodeParams",value:function(e,t){return Cn(this,Hg).decode(e,t)}},{key:"_encodeParams",value:function(e,t){return Cn(this,Hg).encode(e,t)}},{key:"encodeDeploy",value:function(e){return this._encodeParams(this.deploy.inputs,e||[])}},{key:"decodeErrorResult",value:function(e,t){if("string"===typeof e){var n=this.getError(e);wn(n,"unknown error","fragment",e),e=n}return wn(Mn(t,0,4)===e.selector,"data signature does not match error ".concat(e.name,"."),"data",t),this._decodeParams(e.inputs,Mn(t,4))}},{key:"encodeErrorResult",value:function(e,t){if("string"===typeof e){var n=this.getError(e);wn(n,"unknown error","fragment",e),e=n}return En([e.selector,this._encodeParams(e.inputs,t||[])])}},{key:"decodeFunctionData",value:function(e,t){if("string"===typeof e){var n=this.getFunction(e);wn(n,"unknown function","fragment",e),e=n}return wn(Mn(t,0,4)===e.selector,"data signature does not match function ".concat(e.name,"."),"data",t),this._decodeParams(e.inputs,Mn(t,4))}},{key:"encodeFunctionData",value:function(e,t){if("string"===typeof e){var n=this.getFunction(e);wn(n,"unknown function","fragment",e),e=n}return En([e.selector,this._encodeParams(e.inputs,t||[])])}},{key:"decodeFunctionResult",value:function(e,t){if("string"===typeof e){var n=this.getFunction(e);wn(n,"unknown function","fragment",e),e=n}var r="invalid length for result data",a=Yn(t);if(a.length%32===0)try{return Cn(this,Hg).decode(e.outputs,a)}catch(o){r="could not decode result data"}Sn(!1,r,"BAD_DATA",{value:Kn(a),info:{method:e.name,signature:e.format()}})}},{key:"makeError",value:function(e,t){var n=xn(e,"data"),r=ci.getBuiltinCallException("call",t,n);if(r.message.startsWith("execution reverted (unknown custom error)")){var a=Kn(n.slice(0,4)),o=this.getError(a);if(o)try{var i=Cn(this,Hg).decode(o.inputs,n.slice(4));r.revert={name:o.name,signature:o.format(),args:i},r.reason=r.revert.signature,r.message="execution reverted: ".concat(r.reason)}catch(s){r.message="execution reverted (coult not decode custom error)"}}var g=this.parseTransaction(t);return g&&(r.invocation={method:g.name,signature:g.signature,args:g.args}),r}},{key:"encodeFunctionResult",value:function(e,t){if("string"===typeof e){var n=this.getFunction(e);wn(n,"unknown function","fragment",e),e=n}return Kn(Cn(this,Hg).encode(e.outputs,t||[]))}},{key:"encodeFilterTopics",value:function(e,t){var n=this;if("string"===typeof e){var r=this.getEvent(e);wn(r,"unknown event","eventFragment",e),e=r}Sn(t.length<=e.inputs.length,"too many arguments for ".concat(e.format()),"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});var a=[];e.anonymous||a.push(e.topicHash);var o=function(e,t){return"string"===e.type?ao(t):"bytes"===e.type?pa(Kn(t)):("bool"===e.type&&"boolean"===typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=tr(t):e.type.match(/^bytes/)?t=zn(t,32,!1):"address"===e.type&&Cn(n,Hg).encode(["address"],[t]),Dn(Kn(t),32))};for(t.forEach((function(t,n){var r=e.inputs[n];r.indexed?null==t?a.push(null):"array"===r.baseType||"tuple"===r.baseType?wn(!1,"filtering with tuples or arrays not supported","contract."+r.name,t):Array.isArray(t)?a.push(t.map((function(e){return o(r,e)}))):a.push(o(r,t)):wn(null==t,"cannot filter non-indexed parameters; must be null","contract."+r.name,t)}));a.length&&null===a[a.length-1];)a.pop();return a}},{key:"encodeEventLog",value:function(e,t){var n=this;if("string"===typeof e){var r=this.getEvent(e);wn(r,"unknown event","eventFragment",e),e=r}var a=[],o=[],i=[];return e.anonymous||a.push(e.topicHash),wn(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((function(e,r){var g=t[r];if(e.indexed)if("string"===e.type)a.push(ao(g));else if("bytes"===e.type)a.push(pa(g));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");a.push(Cn(n,Hg).encode([e.type],[g]))}else o.push(e),i.push(g)})),{data:Cn(this,Hg).encode(o,i),topics:a}}},{key:"decodeEventLog",value:function(e,t,n){if("string"===typeof e){var r=this.getEvent(e);wn(r,"unknown event","eventFragment",e),e=r}if(null!=n&&!e.anonymous){var a=e.topicHash;wn(Nn(n[0],32)&&n[0].toLowerCase()===a,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}var o=[],i=[],g=[];e.inputs.forEach((function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(o.push(Uo.from({type:"bytes32",name:e.name})),g.push(!0)):(o.push(e),g.push(!1)):(i.push(e),g.push(!1))}));var s=null!=n?Cn(this,Hg).decode(o,En(n)):null,c=Cn(this,Hg).decode(i,t,!0),l=[],u=[],f=0,I=0;return e.inputs.forEach((function(e,t){var n=null;if(e.indexed)if(null==s)n=new Vg(null);else if(g[t])n=new Vg(s[I++]);else try{n=s[I++]}catch(r){n=r}else try{n=c[f++]}catch(r){n=r}l.push(n),u.push(e.name||null)})),lr.fromItems(l,u)}},{key:"parseTransaction",value:function(e){var t=xn(e.data,"tx.data"),n=Pn(null!=e.value?e.value:0,"tx.value"),r=this.getFunction(Kn(t.slice(0,4)));if(!r)return null;var a=Cn(this,Hg).decode(r.inputs,t.slice(4));return new Wg(r,r.selector,a,n)}},{key:"parseCallResult",value:function(e){throw new Error("@TODO")}},{key:"parseLog",value:function(e){var t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new wg(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}},{key:"parseError",value:function(e){var t=Kn(e),n=this.getError(Mn(t,0,4));if(!n)return null;var r=Cn(this,Hg).decode(n.inputs,Mn(t,4));return new Rg(n,n.selector,r)}}],[{key:"from",value:function(t){return t instanceof e?t:"string"===typeof t?new e(JSON.parse(t)):"function"===typeof t.format?new e(t.format("json")):new e(t)}}]),e}();function Tg(e,t,n){if(Nn(e)){var r,a=e.toLowerCase(),o=Xe(Cn(this,Ng).values());try{for(o.s();!(r=o.n()).done;){var i=r.value;if(a===i.selector)return i}}catch(G){o.e(G)}finally{o.f()}return null}if(-1===e.indexOf("(")){var g,s=[],c=Xe(Cn(this,Ng));try{for(c.s();!(g=c.n()).done;){var l=Ge(g.value,2),u=l[0],f=l[1];u.split("(")[0]===e&&s.push(f)}}catch(G){c.e(G)}finally{c.f()}if(t){var I=t.length>0?t[t.length-1]:null,C=t.length,d=!0;xa.isTyped(I)&&"overrides"===I.type&&(d=!1,C--);for(var A=s.length-1;A>=0;A--){var h=s[A].inputs.length;h===C||d&&h===C-1||s.splice(A,1)}for(var p=s.length-1;p>=0;p--)for(var m=s[p].inputs,b=0;b<t.length;b++)if(xa.isTyped(t[b])){if(b>=m.length){if("overrides"===t[b].type)continue;s.splice(p,1);break}if(t[b].type!==m[b].baseType){s.splice(p,1);break}}}if(1===s.length&&t&&t.length!==s[0].inputs.length){var y=t[t.length-1];(null==y||Array.isArray(y)||"object"!==typeof y)&&s.splice(0,1)}if(0===s.length)return null;if(s.length>1&&n){var v=s.map((function(e){return JSON.stringify(e.format())})).join(", ");wn(!1,"ambiguous function description (i.e. matches ".concat(v,")"),"key",e)}return s[0]}var Z=Cn(this,Ng).get(ti.from(e).format());return Z||null}function Mg(e,t,n){if(Nn(e)){var r,a=e.toLowerCase(),o=Xe(Cn(this,Yg).values());try{for(o.s();!(r=o.n()).done;){var i=r.value;if(a===i.topicHash)return i}}catch(m){o.e(m)}finally{o.f()}return null}if(-1===e.indexOf("(")){var g,s=[],c=Xe(Cn(this,Yg));try{for(c.s();!(g=c.n()).done;){var l=Ge(g.value,2),u=l[0],f=l[1];u.split("(")[0]===e&&s.push(f)}}catch(m){c.e(m)}finally{c.f()}if(t){for(var I=s.length-1;I>=0;I--)s[I].inputs.length<t.length&&s.splice(I,1);for(var C=s.length-1;C>=0;C--)for(var d=s[C].inputs,A=0;A<t.length;A++)if(xa.isTyped(t[A])&&t[A].type!==d[A].baseType){s.splice(C,1);break}}if(0===s.length)return null;if(s.length>1&&n){var h=s.map((function(e){return JSON.stringify(e.format())})).join(", ");wn(!1,"ambiguous event description (i.e. matches ".concat(h,")"),"key",e)}return s[0]}var p=Cn(this,Yg).get(qo.from(e).format());return p||null}var zg=BigInt(0);function Dg(e){return null==e?null:e}function Lg(e){return null==e?null:e.toString()}var Ug=function(){function e(t,n,r){Z(this,e),b(this,"gasPrice",void 0),b(this,"maxFeePerGas",void 0),b(this,"maxPriorityFeePerGas",void 0),vn(this,{gasPrice:Dg(t),maxFeePerGas:Dg(n),maxPriorityFeePerGas:Dg(r)})}return B(e,[{key:"toJSON",value:function(){var e=this.gasPrice,t=this.maxFeePerGas,n=this.maxPriorityFeePerGas;return{_type:"FeeData",gasPrice:Lg(e),maxFeePerGas:Lg(t),maxPriorityFeePerGas:Lg(n)}}}]),e}();function jg(e){var t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=Kn(e.data));var n,r=Xe("chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/));try{for(r.s();!(n=r.n()).done;){var a=n.value;a in e&&null!=e[a]&&(t[a]=Pn(e[a],"request.".concat(a)))}}catch(s){r.e(s)}finally{r.f()}var o,i=Xe("type,nonce".split(/,/));try{for(i.s();!(o=i.n()).done;){var g=o.value;g in e&&null!=e[g]&&(t[g]=er(e[g],"request.".concat(g)))}}catch(s){i.e(s)}finally{i.f()}return e.accessList&&(t.accessList=Ki(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),t}var Og=new WeakMap;Bg=Symbol.iterator;var Qg=function(e){function t(e,n){Z(this,t),b(this,"provider",void 0),b(this,"number",void 0),b(this,"hash",void 0),b(this,"timestamp",void 0),b(this,"parentHash",void 0),b(this,"nonce",void 0),b(this,"difficulty",void 0),b(this,"gasLimit",void 0),b(this,"gasUsed",void 0),b(this,"miner",void 0),b(this,"extraData",void 0),b(this,"baseFeePerGas",void 0),ln(this,Og,{writable:!0,value:void 0}),In(this,Og,e.transactions.map((function(e){return"string"!==typeof e?new es(e,n):e}))),vn(this,{provider:n,hash:Dg(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:Dg(e.baseFeePerGas)})}return B(t,[{key:"transactions",get:function(){return Cn(this,Og).map((function(e){return"string"===typeof e?e:e.hash}))}},{key:"prefetchedTransactions",get:function(){var e=Cn(this,Og).slice();return 0===e.length?[]:(Sn("object"===typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}},{key:"toJSON",value:function(){var e=this.baseFeePerGas,t=this.difficulty,n=this.extraData,r=this.gasLimit,a=this.gasUsed,o=this.hash,i=this.miner,g=this.nonce,s=this.number,c=this.parentHash,l=this.timestamp,u=this.transactions;return{_type:"Block",baseFeePerGas:Lg(e),difficulty:Lg(t),extraData:n,gasLimit:Lg(r),gasUsed:Lg(a),hash:o,miner:i,nonce:g,number:s,parentHash:c,timestamp:l,transactions:u}}},{key:Bg,value:function(){var e=this,t=0,n=this.transactions;return{next:function(){return t<e.length?{value:n[t++],done:!1}:{value:void 0,done:!0}}}}},{key:"length",get:function(){return Cn(this,Og).length}},{key:"date",get:function(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}},{key:"getTransaction",value:function(t){return(e=e||hn(dn().mark((function e(t){var n,r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"number"!==typeof t){e.next=5;break}n=Cn(this,Og)[t],e.next=32;break;case 5:r=t.toLowerCase(),a=Xe(Cn(this,Og)),e.prev=7,a.s();case 9:if((o=a.n()).done){e.next=24;break}if("string"!==typeof(i=o.value)){e.next=18;break}if(i===r){e.next=14;break}return e.abrupt("continue",22);case 14:return n=i,e.abrupt("break",24);case 18:if(i.hash!==r){e.next=20;break}return e.abrupt("continue",22);case 20:return n=i,e.abrupt("break",24);case 22:e.next=9;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(7),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:if(null!=n){e.next=34;break}throw new Error("no such tx");case 34:if("string"!==typeof n){e.next=40;break}return e.next=37,this.provider.getTransaction(n);case 37:return e.abrupt("return",e.sent);case 40:return e.abrupt("return",n);case 41:case"end":return e.stop()}}),e,this,[[7,26,29,32]])})))).apply(this,arguments)}},{key:"getPrefetchedTransaction",value:function(e){var t=this.prefetchedTransactions;if("number"===typeof e)return t[e];e=e.toLowerCase();var n,r=Xe(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.hash===e)return a}}catch(o){r.e(o)}finally{r.f()}wn(!1,"no matching transaction","indexOrHash",e)}},{key:"isMined",value:function(){return!!this.hash}},{key:"isLondon",value:function(){return!!this.baseFeePerGas}},{key:"orphanedEvent",value:function(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}]),t}(),Pg=function(e,t,n){function r(e,t){Z(this,r),b(this,"provider",void 0),b(this,"transactionHash",void 0),b(this,"blockHash",void 0),b(this,"blockNumber",void 0),b(this,"removed",void 0),b(this,"address",void 0),b(this,"data",void 0),b(this,"topics",void 0),b(this,"index",void 0),b(this,"transactionIndex",void 0),this.provider=t;var n=Object.freeze(e.topics.slice());vn(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}return B(r,[{key:"toJSON",value:function(){return{_type:"log",address:this.address,blockHash:this.blockHash,blockNumber:this.blockNumber,data:this.data,index:this.index,removed:this.removed,topics:this.topics,transactionHash:this.transactionHash,transactionIndex:this.transactionIndex}}},{key:"getBlock",value:function(){return(e=e||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getBlock(this.blockHash);case 2:return Sn(!!(t=e.sent),"failed to find transaction","UNKNOWN_ERROR",{}),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransaction",value:function(){return(t=t||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getTransaction(this.transactionHash);case 2:return Sn(!!(t=e.sent),"failed to find transaction","UNKNOWN_ERROR",{}),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransactionReceipt",value:function(){return(n=n||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getTransactionReceipt(this.transactionHash);case 2:return Sn(!!(t=e.sent),"failed to find transaction receipt","UNKNOWN_ERROR",{}),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"removedEvent",value:function(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}]),r}(),_g=new WeakMap;kg=Symbol.iterator;var qg=function(e,t,n,r){function a(e,t){Z(this,a),b(this,"provider",void 0),b(this,"to",void 0),b(this,"from",void 0),b(this,"contractAddress",void 0),b(this,"hash",void 0),b(this,"index",void 0),b(this,"blockHash",void 0),b(this,"blockNumber",void 0),b(this,"logsBloom",void 0),b(this,"gasUsed",void 0),b(this,"cumulativeGasUsed",void 0),b(this,"gasPrice",void 0),b(this,"type",void 0),b(this,"status",void 0),b(this,"root",void 0),ln(this,_g,{writable:!0,value:void 0}),In(this,_g,Object.freeze(e.logs.map((function(e){return new Pg(e,t)}))));var n=zg;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),vn(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:n,type:e.type,status:e.status,root:e.root})}return B(a,[{key:"logs",get:function(){return Cn(this,_g)}},{key:"toJSON",value:function(){var e=this.to,t=this.from,n=this.contractAddress,r=this.hash,a=this.index,o=this.blockHash,i=this.blockNumber,g=this.logsBloom,s=this.logs,c=this.status,l=this.root;return{_type:"TransactionReceipt",blockHash:o,blockNumber:i,contractAddress:n,cumulativeGasUsed:Lg(this.cumulativeGasUsed),from:t,gasPrice:Lg(this.gasPrice),gasUsed:Lg(this.gasUsed),hash:r,index:a,logs:s,logsBloom:g,root:l,status:c,to:e}}},{key:"length",get:function(){return this.logs.length}},{key:kg,value:function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e.logs[t++],done:!1}:{value:void 0,done:!0}}}}},{key:"fee",get:function(){return this.gasUsed*this.gasPrice}},{key:"getBlock",value:function(){return(e=e||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getBlock(this.blockHash);case 2:if(null!=(t=e.sent)){e.next=5;break}throw new Error("TODO");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransaction",value:function(){return(t=t||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getTransaction(this.hash);case 2:if(null!=(t=e.sent)){e.next=5;break}throw new Error("TODO");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getResult",value:function(){return(n=n||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getTransactionResult(this.hash);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"confirmations",value:function(){return(r=r||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getBlockNumber();case 2:return e.t0=e.sent,e.t1=this.blockNumber,e.t2=e.t0-e.t1,e.abrupt("return",e.t2+1);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"removedEvent",value:function(){return ns(this)}},{key:"reorderedEvent",value:function(e){return Sn(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ts(this,e)}}]),a}(),$g=new WeakMap,es=function(e,t,n,r){function a(e,t){Z(this,a),b(this,"provider",void 0),b(this,"blockNumber",void 0),b(this,"blockHash",void 0),b(this,"index",void 0),b(this,"hash",void 0),b(this,"type",void 0),b(this,"to",void 0),b(this,"from",void 0),b(this,"nonce",void 0),b(this,"gasLimit",void 0),b(this,"gasPrice",void 0),b(this,"maxPriorityFeePerGas",void 0),b(this,"maxFeePerGas",void 0),b(this,"data",void 0),b(this,"value",void 0),b(this,"chainId",void 0),b(this,"signature",void 0),b(this,"accessList",void 0),ln(this,$g,{writable:!0,value:void 0}),this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,In(this,$g,-1)}return B(a,[{key:"toJSON",value:function(){var e=this.blockNumber,t=this.blockHash,n=this.index,r=this.hash,a=this.type,o=this.to,i=this.from,g=this.nonce,s=this.data,c=this.signature;return{_type:"TransactionReceipt",accessList:this.accessList,blockNumber:e,blockHash:t,chainId:Lg(this.chainId),data:s,from:i,gasLimit:Lg(this.gasLimit),gasPrice:Lg(this.gasPrice),hash:r,maxFeePerGas:Lg(this.maxFeePerGas),maxPriorityFeePerGas:Lg(this.maxPriorityFeePerGas),nonce:g,signature:c,to:o,index:n,type:a,value:Lg(this.value)}}},{key:"getBlock",value:function(){return(e=e||hn(dn().mark((function e(){var t,n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=this.blockNumber)){e.next=6;break}return e.next=4,this.getTransaction();case 4:(n=e.sent)&&(t=n.blockNumber);case 6:if(null!=t){e.next=8;break}return e.abrupt("return",null);case 8:if(null!=(r=this.provider.getBlock(t))){e.next=11;break}throw new Error("TODO");case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransaction",value:function(){return(t=t||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.provider.getTransaction(this.hash));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"confirmations",value:function(){return(n=n||hn(dn().mark((function e(){var t,n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.blockNumber){e.next=9;break}return e.next=3,yn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});case 3:if(t=e.sent,n=t.tx,r=t.blockNumber,null!=n&&null!=n.blockNumber){e.next=8;break}return e.abrupt("return",0);case 8:return e.abrupt("return",r-n.blockNumber+1);case 9:return e.next=11,this.provider.getBlockNumber();case 11:return a=e.sent,e.abrupt("return",a-this.blockNumber+1);case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"wait",value:function(e,t){return(r=r||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l,u,f,I=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null==t?1:t,o=null==n?0:n,i=Cn(this,$g),g=-1,s=-1===i,c=function(){return(r=r||hn(dn().mark((function e(){var t,n,r,o,c,l,u,f,C,d;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,yn({blockNumber:I.provider.getBlockNumber(),nonce:I.provider.getTransactionCount(I.from)});case 4:if(t=e.sent,n=t.blockNumber,!(t.nonce<I.nonce)){e.next=10;break}return i=n,e.abrupt("return");case 10:if(!s){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,I.getTransaction();case 14:if(!(r=e.sent)||null==r.blockNumber){e.next=17;break}return e.abrupt("return");case 17:-1===g&&(g=i-3)<Cn(I,$g)&&(g=Cn(I,$g));case 18:if(!(g<=n)){e.next=67;break}if(!s){e.next=21;break}return e.abrupt("return",null);case 21:return e.next=23,I.provider.getBlock(g,!0);case 23:if(null!=(o=e.sent)){e.next=26;break}return e.abrupt("return");case 26:c=Xe(o),e.prev=27,c.s();case 29:if((l=c.n()).done){e.next=35;break}if(l.value!==I.hash){e.next=33;break}return e.abrupt("return");case 33:e.next=29;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(27),c.e(e.t0);case 40:return e.prev=40,c.f(),e.finish(40);case 43:u=0;case 44:if(!(u<o.length)){e.next=64;break}return e.next=47,o.getTransaction(u);case 47:if((f=e.sent).from!==I.from||f.nonce!==I.nonce){e.next=61;break}if(!s){e.next=51;break}return e.abrupt("return",null);case 51:return e.next=53,I.provider.getTransactionReceipt(f.hash);case 53:if(null!=(C=e.sent)){e.next=56;break}return e.abrupt("return");case 56:if(!(n-C.blockNumber+1<a)){e.next=58;break}return e.abrupt("return");case 58:d="replaced",f.data===I.data&&f.to===I.to&&f.value===I.value?d="repriced":"0x"===f.data&&f.from===f.to&&f.value===zg&&(d="cancelled"),Sn(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===d||"cancelled"===d,reason:d,replacement:f.replaceableTransaction(i),hash:f.hash,receipt:C});case 61:u++,e.next=44;break;case 64:g++,e.next=18;break;case 67:return e.abrupt("return");case 68:case"end":return e.stop()}}),e,null,[[27,37,40,43]])})))).apply(this,arguments)},l=function(e){if(null==e||0!==e.status)return e;Sn(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},e.next=9,this.provider.getTransactionReceipt(this.hash);case 9:if(u=e.sent,0!==a){e.next=12;break}return e.abrupt("return",l(u));case 12:if(!u){e.next=21;break}return e.next=15,u.confirmations();case 15:if(e.t0=e.sent,e.t1=a,!(e.t0>=e.t1)){e.next=19;break}return e.abrupt("return",l(u));case 19:e.next=25;break;case 21:return e.next=23,c();case 23:if(0!==a){e.next=25;break}return e.abrupt("return",null);case 25:return f=new Promise((function(e,t){var n,r=[],g=function(){r.forEach((function(e){return e()}))};if(r.push((function(){s=!0})),o>0){var u=setTimeout((function(){g(),t(kn("wait for transaction timeout","TIMEOUT"))}),o);r.push((function(){clearTimeout(u)}))}var f=function(r){return(n=n||hn(dn().mark((function n(r){return dn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.confirmations();case 2:if(n.t0=n.sent,n.t1=a,!(n.t0>=n.t1)){n.next=7;break}g();try{e(l(r))}catch(o){t(o)}case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)};if(r.push((function(){I.provider.off(I.hash,f)})),I.provider.on(I.hash,f),i>=0){var C,d=function e(){return(C=C||hn(dn().mark((function n(){return dn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c();case 3:n.next=11;break;case 5:if(n.prev=5,n.t0=n.catch(0),!Gn(n.t0,"TRANSACTION_REPLACED")){n.next=11;break}return g(),t(n.t0),n.abrupt("return");case 11:s||I.provider.once("block",e);case 12:case"end":return n.stop()}}),n,null,[[0,5]])})))).apply(this,arguments)};r.push((function(){I.provider.off("block",d)})),I.provider.once("block",d)}})),e.next=28,f;case 28:return e.abrupt("return",e.sent);case 29:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"isMined",value:function(){return null!=this.blockHash}},{key:"isLegacy",value:function(){return 0===this.type}},{key:"isBerlin",value:function(){return 1===this.type}},{key:"isLondon",value:function(){return 2===this.type}},{key:"removedEvent",value:function(){return Sn(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ns(this)}},{key:"reorderedEvent",value:function(e){return Sn(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Sn(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ts(this,e)}},{key:"replaceableTransaction",value:function(e){wn(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);var t=new a(this,this.provider);return In(t,$g,e),t}}]),a}();function ts(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function ns(e){return{orphan:"drop-transaction",tx:e}}var rs,as,os,is,gs,ss,cs,ls=new WeakMap,us=function(e){function t(e,n,r){Z(this,t),b(this,"filter",void 0),b(this,"emitter",void 0),ln(this,ls,{writable:!0,value:void 0}),In(this,ls,n),vn(this,{emitter:e,filter:r})}return B(t,[{key:"removeListener",value:function(){return(e=e||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=Cn(this,ls)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.emitter.off(this.filter,Cn(this,ls));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),t}(),fs=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;Z(this,n),b(i(o=t.call(this,e,e.provider)),"interface",void 0),b(i(o),"fragment",void 0),b(i(o),"args",void 0);var g=r.decodeEventLog(a,e.data,e.topics);return vn(i(o),{args:g,fragment:a,interface:r}),o}return B(n,[{key:"eventName",get:function(){return this.fragment.name}},{key:"eventSignature",get:function(){return this.fragment.format()}}]),n}(Pg),Is=function(e){d(n,e);var t=p(n);function n(e,r){var a;return Z(this,n),b(i(a=t.call(this,e,e.provider)),"error",void 0),vn(i(a),{error:r}),a}return B(n)}(Pg),Cs=new WeakMap,ds=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;return Z(this,n),ln(i(o=t.call(this,a,r)),Cs,{writable:!0,value:void 0}),In(i(o),Cs,e),o}return B(n,[{key:"logs",get:function(){var e=this;return gn(A(n.prototype),"logs",this).map((function(t){var n=t.topics.length?Cn(e,Cs).getEvent(t.topics[0]):null;if(n)try{return new fs(t,Cn(e,Cs),n)}catch(r){return new Is(t,r)}return t}))}}]),n}(qg),As=new WeakMap,hs=function(e,t){d(r,e);var n=p(r);function r(e,t,a){var o;return Z(this,r),ln(i(o=n.call(this,a,t)),As,{writable:!0,value:void 0}),In(i(o),As,e),o}return B(r,[{key:"wait",value:function(e){return(t=t||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(A(r.prototype),"wait",this).call(this,t);case 2:if(null!=(n=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new ds(Cn(this,As),this.provider,n));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),r}(es),ps=function(e,t,n,r){d(o,e);var a=p(o);function o(e,t,n,r){var g;return Z(this,o),b(i(g=a.call(this,e,t,n)),"log",void 0),vn(i(g),{log:r}),g}return B(o,[{key:"getBlock",value:function(){return(t=t||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.log.getBlock();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransaction",value:function(){return(n=n||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.log.getTransaction();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransactionReceipt",value:function(){return(r=r||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.log.getTransactionReceipt();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),o}(us),ms=function(e){d(n,e);var t=p(n);function n(e,r,a,o,g){var s;Z(this,n),s=t.call(this,e,r,a,new fs(g,e.interface,o));var c=e.interface.decodeEventLog(o,s.log.data,s.log.topics);return vn(i(s),{args:c,fragment:o}),s}return B(n,[{key:"eventName",get:function(){return this.fragment.name}},{key:"eventSignature",get:function(){return this.fragment.format()}}]),n}(ps),bs=BigInt(0);function ys(e){return e&&"function"===typeof e.call}function vs(e){return e&&"function"===typeof e.estimateGas}function Zs(e){return e&&"function"===typeof e.resolveName}function Gs(e){return e&&"function"===typeof e.sendTransaction}var Bs=new WeakMap,ks=function(){function e(t,n,r){if(Z(this,e),ln(this,Bs,{writable:!0,value:void 0}),b(this,"fragment",void 0),vn(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");var a=Ss(t.runner,"resolveName"),o=Zs(a)?a:null;In(this,Bs,hn(dn().mark((function e(){var a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.inputs.map((function(e,t){return null==r[t]?null:e.walkAsync(r[t],(function(e,t){return"address"===e?Array.isArray(t)?Promise.all(t.map((function(e){return Ii(e,o)}))):Ii(t,o):t}))})));case 2:return a=e.sent,e.abrupt("return",t.interface.encodeFilterTopics(n,a));case 4:case"end":return e.stop()}}),e)})))())}return B(e,[{key:"getTopicFilter",value:function(){return Cn(this,Bs)}}]),e}();function Ss(e,t){return null==e?null:"function"===typeof e[t]?e:e.provider&&"function"===typeof e.provider[t]?e.provider:null}function ws(e){return null==e?null:e.provider||null}function Ws(e,t){return(rs=rs||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wn("object"===typeof(r=xa.dereference(t,"overrides")),"invalid overrides parameter","overrides",t),wn(null==(a=jg(r)).to||(n||[]).indexOf("to")>=0,"cannot override to","overrides.to",a.to),wn(null==a.data||(n||[]).indexOf("data")>=0,"cannot override data","overrides.data",a.data),!a.from){e.next=9;break}return e.next=8,Ii(a.from);case 8:a.from=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rs(e,t,n){return(as=as||hn(dn().mark((function e(t,n,r){var a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ss(t,"resolveName"),o=Zs(a)?a:null,e.next=4,Promise.all(n.map((function(e,t){return e.walkAsync(r[t],(function(e,t){return t=xa.dereference(t,e),"address"===e?Ii(t,o):t}))})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vs(e){var t,n,r,a,o,i=function(n){return(t=t||hn(dn().mark((function t(n){var r,a,o,i;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ws(n,["data"]);case 2:return r=t.sent,t.next=5,e.getAddress();case 5:return r.to=t.sent,a=e.interface,o=Pn(r.value||bs,"overrides.value")===bs,i="0x"===(r.data||"0x"),!a.fallback||a.fallback.payable||!a.receive||i||o||wn(!1,"cannot send data to receive or send value to non-payable fallback","overrides",n),wn(a.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),wn(a.receive||a.fallback&&a.fallback.payable||o,"cannot send value to non-payable fallback","overrides.value",r.value),wn(a.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),t.abrupt("return",r);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)},g=function(t){return(r=r||hn(dn().mark((function t(n){var r,a,o;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Sn(Gs(r=e.runner),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"}),t.t0=r,t.next=5,i(n);case 5:return t.t1=t.sent,t.next=8,t.t0.sendTransaction.call(t.t0,t.t1);case 8:return a=t.sent,o=ws(e.runner),t.abrupt("return",new hs(e.interface,o,a));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(e){return(o=o||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)};return vn(s,{_contract:e,estimateGas:function(t){return(a=a||hn(dn().mark((function t(n){var r;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Sn(vs(r=Ss(e.runner,"estimateGas")),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),t.t0=r,t.next=5,i(n);case 5:return t.t1=t.sent,t.next=8,t.t0.estimateGas.call(t.t0,t.t1);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)},populateTransaction:i,send:g,staticCall:function(t){return(n=n||hn(dn().mark((function t(n){var r,a;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Sn(ys(r=Ss(e.runner,"call")),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"}),t.next=4,i(n);case 4:return a=t.sent,t.prev=5,t.next=8,r.call(a);case 8:return t.abrupt("return",t.sent);case 11:if(t.prev=11,t.t0=t.catch(5),!Bn(t.t0)||!t.t0.data){t.next=15;break}throw e.interface.makeError(t.t0.data,a);case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[5,11]])})))).apply(this,arguments)}}),s}var Xs=Symbol.for("_ethersInternal_contract"),Js=new WeakMap;function xs(e){return Js.get(e[Xs])}function Ys(e,t){return(os=os||hn(dn().mark((function e(t,n){var r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!Array.isArray(n)){e.next=6;break}o=function(e){if(Nn(e,32))return e;var n=t.interface.getEvent(e);return wn(n,"unknown fragment","name",e),n.topicHash},r=n.map((function(e){return null==e?null:Array.isArray(e)?e.map(o):o(e)})),e.next=21;break;case 6:if("*"!==n){e.next=10;break}r=[null],e.next=21;break;case 10:if("string"!==typeof n){e.next=14;break}Nn(n,32)?r=[n]:(wn(a=t.interface.getEvent(n),"unknown fragment","event",n),r=[a.topicHash]),e.next=21;break;case 14:if(!((g=n)&&"object"===typeof g&&"getTopicFilter"in g&&"function"===typeof g.getTopicFilter&&g.fragment)){e.next=20;break}return e.next=17,n.getTopicFilter();case 17:r=e.sent,e.next=21;break;case 20:"fragment"in n?(a=n.fragment,r=[a.topicHash]):wn(!1,"unknown event name","event",n);case 21:return r=r.map((function(e){if(null==e)return null;if(Array.isArray(e)){var t=Array.from(new Set(e.map((function(e){return e.toLowerCase()}))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})),i=r.map((function(e){return null==e?"null":Array.isArray(e)?e.join("|"):e})).join("&"),e.abrupt("return",{fragment:a,tag:i,topics:r});case 24:case"end":return e.stop()}var g}),e)})))).apply(this,arguments)}function Ns(e,t){return(is=is||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xs(t),a=r.subs,e.t1=a,e.next=4,Ys(t,n);case 4:if(e.t2=e.sent.tag,e.t0=e.t1.get.call(e.t1,e.t2),e.t0){e.next=8;break}e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(e,t,n){return(gs=gs||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l,u,f,I,C,d,A,h;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sn(a=ws(t.runner),"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:n}),e.next=4,Ys(t,r);case 4:return o=e.sent,i=o.fragment,g=o.tag,s=o.topics,c=xs(t),l=c.addr,u=c.subs,(f=u.get(g))||(C={address:l||t,topics:s},d=function(e){var n=i;if(null==n)try{n=t.interface.getEvent(e.topics[0])}catch(g){}if(n){var a=n,o=i?t.interface.decodeEventLog(i,e.data,e.topics):[];Es(t,r,o,(function(n){return new ms(t,n,r,a,e)}))}else Es(t,r,[],(function(n){return new ps(t,n,r,e)}))},A=[],h=function(){return(I=I||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=A.length){e.next=2;break}return e.abrupt("return");case 2:return t=A,A=[],e.next=6,Promise.all(t);case 6:a.off(C,d);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},f={tag:g,listeners:[],start:function(){A.length||A.push(a.on(C,d))},stop:h},u.set(g,f)),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fs=Promise.resolve();function Ks(e,t,n,r){return(ss=ss||hn(dn().mark((function e(t,n,r,a){var o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs;case 2:return e.next=4,Ns(t,n);case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return i=o.listeners.length,o.listeners=o.listeners.filter((function(e){var n=e.listener,o=e.once,i=Array.from(r);a&&i.push(a(o?null:n));try{n.call.apply(n,[t].concat(i))}catch(g){}return!o})),0===o.listeners.length&&(o.stop(),xs(t).subs.delete(o.tag)),e.abrupt("return",i>0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Es(e,t,n,r){return(cs=cs||hn(dn().mark((function e(t,n,r,a){var o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fs;case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return o=Ks(t,n,r,a),Fs=o,e.next=11,o;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var Ts=["then"],Ms=function(e,t,n,r,a,o,i,g,s,c,l,u,f,I){function C(e,t,n,r){var a=this;Z(this,C),b(this,"target",void 0),b(this,"interface",void 0),b(this,"runner",void 0),b(this,"filters",void 0),b(this,Xs,void 0),b(this,"fallback",void 0),wn("string"===typeof e||ui(e),"invalid value for Contract target","target",e),null==n&&(n=null);var o,i=Eg.from(t);vn(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,Xs,{value:{}});var g=null,s=null;if(r){var c=ws(n);s=new hs(this.interface,c,r)}var l,u,f=new Map;if("string"===typeof e)if(Nn(e))g=e,o=Promise.resolve(e);else{var I=Ss(n,"resolveName");if(!Zs(I))throw kn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=I.resolveName(e).then((function(t){if(null==t)throw kn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return xs(a).addr=t,t}))}else o=e.getAddress().then((function(e){if(null==e)throw new Error("TODO");return xs(a).addr=e,e}));l=this,u={addrPromise:o,addr:g,deployTx:s,subs:f},Js.set(l[Xs],u);var d=new Proxy({},{get:function(e,t,n){if("symbol"===typeof t||Ts.indexOf(t)>=0)return Reflect.get(e,t,n);try{return a.getEvent(t)}catch(r){if(!Gn(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:function(e,t){return Ts.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||a.interface.hasEvent(String(t))}});return vn(this,{filters:d}),vn(this,{fallback:i.receive||i.fallback?Vs(this):null}),new Proxy(this,{get:function(e,t,n){if("symbol"===typeof t||t in e||Ts.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(r){if(!Gn(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:function(e,t){return"symbol"===typeof t||t in e||Ts.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)}})}return B(C,[{key:"connect",value:function(e){return new C(this.target,this.interface,e)}},{key:"attach",value:function(e){return new C(e,this.interface,this.runner)}},{key:"getAddress",value:function(){return(e=e||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs(this).addrPromise;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getDeployedCode",value:function(){return(t=t||hn(dn().mark((function e(){var t,n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sn(t=ws(this.runner),"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"}),e.t0=t,e.next=5,this.getAddress();case 5:return e.t1=e.sent,e.next=8,e.t0.getCode.call(e.t0,e.t1);case 8:if("0x"!==(n=e.sent)){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"waitForDeployment",value:function(){return(n=n||hn(dn().mark((function e(){var t,n,r=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.deploymentTransaction())){e.next=5;break}return e.next=4,t.wait();case 4:return e.abrupt("return",this);case 5:return e.next=7,this.getDeployedCode();case 7:if(null==e.sent){e.next=10;break}return e.abrupt("return",this);case 10:return Sn(null!=(n=ws(this.runner)),"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),e.abrupt("return",new Promise((function(e,t){var a;!function o(){return(a=a||hn(dn().mark((function a(){return dn().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.getDeployedCode();case 3:if(null==a.sent){a.next=6;break}return a.abrupt("return",e(r));case 6:n.once("block",o),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),t(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))).apply(this,arguments)}()})));case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"deploymentTransaction",value:function(){return xs(this).deployTx}},{key:"getFunction",value:function(e){"string"!==typeof e&&(e=e.format());var t=function(e,t){var n,r,a,o,i,g,s=function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=e.interface.getFunction(t,r);return Sn(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),o},c=function(){return(n=n||hn(dn().mark((function t(){var n,r,a,o,i,g,c=arguments;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=c.length,r=new Array(n),a=0;a<n;a++)r[a]=c[a];if(o=s.apply(void 0,r),i={},o.inputs.length+1!==r.length){t.next=7;break}return t.next=6,Ws(r.pop());case 6:i=t.sent;case 7:if(o.inputs.length===r.length){t.next=9;break}throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");case 9:return t.next=11,Rs(e.runner,o.inputs,r);case 11:return g=t.sent,t.t0=Object,t.t1={},t.t2=i,t.next=17,yn({to:e.getAddress(),data:e.interface.encodeFunctionData(o,g)});case 17:return t.t3=t.sent,t.abrupt("return",t.t0.assign.call(t.t0,t.t1,t.t2,t.t3));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)},l=function(){return(r=r||hn(dn().mark((function e(){var t,n=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.apply(void 0,n);case 2:if(1!==(t=e.sent).length){e.next=5;break}return e.abrupt("return",t[0]);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(){return(a=a||hn(dn().mark((function t(){var n,r,a,o=arguments;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Sn(Gs(n=e.runner),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"}),t.t0=n,t.next=5,c.apply(void 0,o);case 5:return t.t1=t.sent,t.next=8,t.t0.sendTransaction.call(t.t0,t.t1);case 8:return r=t.sent,a=ws(e.runner),t.abrupt("return",new hs(e.interface,a,r));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)},f=function(){return(i=i||hn(dn().mark((function t(){var n,r,a,o,i=arguments;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Sn(ys(n=Ss(e.runner,"call")),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"}),t.next=4,c.apply(void 0,i);case 4:return r=t.sent,a="0x",t.prev=6,t.next=9,n.call(r);case 9:a=t.sent,t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(6),!Bn(t.t0)||!t.t0.data){t.next=16;break}throw e.interface.makeError(t.t0.data,r);case 16:throw t.t0;case 17:return o=s.apply(void 0,i),t.abrupt("return",e.interface.decodeFunctionResult(o,a));case 19:case"end":return t.stop()}}),t,null,[[6,12]])})))).apply(this,arguments)},I=function(){return(g=g||hn(dn().mark((function e(){var t=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.apply(void 0,t).constant){e.next=5;break}return e.next=4,l.apply(void 0,t);case 4:case 7:return e.abrupt("return",e.sent);case 5:return e.next=7,u.apply(void 0,t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)};return vn(I,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:s,estimateGas:function(){return(o=o||hn(dn().mark((function t(){var n,r=arguments;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Sn(vs(n=Ss(e.runner,"estimateGas")),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),t.t0=n,t.next=5,c.apply(void 0,r);case 5:return t.t1=t.sent,t.next=8,t.t0.estimateGas.call(t.t0,t.t1);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)},populateTransaction:c,send:u,staticCall:l,staticCallResult:f}),Object.defineProperty(I,"fragment",{configurable:!1,enumerable:!0,get:function(){var n=e.interface.getFunction(t);return Sn(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),I}(this,e);return t}},{key:"getEvent",value:function(e){return"string"!==typeof e&&(e=e.format()),function(e,t){var n=function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=e.interface.getEvent(t,r);return Sn(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),o},r=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return new ks(e,n.apply(void 0,r),r)};return vn(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:function(){var n=e.interface.getEvent(t);return Sn(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),r}(this,e)}},{key:"queryTransaction",value:function(e){return(r=r||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("@TODO");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"queryFilter",value:function(e,t,n){return(a=a||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l,u,f,I=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n=0),null==r&&(r="latest"),a=xs(this),o=a.addr,i=a.addrPromise,!o){e.next=7;break}e.t0=o,e.next=10;break;case 7:return e.next=9,i;case 9:e.t0=e.sent;case 10:return g=e.t0,e.next=13,Ys(this,t);case 13:return s=e.sent,c=s.fragment,l=s.topics,u={address:g,topics:l,fromBlock:n,toBlock:r},Sn(f=ws(this.runner),"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),e.next=21,f.getLogs(u);case 21:return e.abrupt("return",e.sent.map((function(e){var t=c;if(null==t)try{t=I.interface.getEvent(e.topics[0])}catch(n){}if(t)try{return new fs(e,I.interface,t)}catch(n){return new Is(e,n)}return new Pg(e,f)})));case 22:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"on",value:function(e,t){return(o=o||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hs(this,"on",t);case 2:return(r=e.sent).listeners.push({listener:n,once:!1}),r.start(),e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"once",value:function(e,t){return(i=i||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hs(this,"once",t);case 2:return(r=e.sent).listeners.push({listener:n,once:!0}),r.start(),e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"emit",value:function(e){return(g=g||hn(dn().mark((function e(t){var n,r,a,o=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=o[a];return e.next=3,Es(this,t,r,null);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"listenerCount",value:function(e){return(s=s||hn(dn().mark((function e(t){var n,r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,Ns(this,t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",0);case 6:return e.abrupt("return",n.listeners.length);case 7:r=xs(this),a=r.subs,o=0,i=Xe(a.values());try{for(i.s();!(g=i.n()).done;)s=g.value.listeners,o+=s.length}catch(c){i.e(c)}finally{i.f()}return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"listeners",value:function(e){return(c=c||hn(dn().mark((function e(t){var n,r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,Ns(this,t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",n.listeners.map((function(e){return e.listener})));case 7:r=xs(this),a=r.subs,o=[],i=Xe(a.values());try{for(i.s();!(g=i.n()).done;)s=g.value.listeners,o=o.concat(s.map((function(e){return e.listener})))}catch(c){i.e(c)}finally{i.f()}return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"off",value:function(e,t){return(l=l||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ns(this,t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",this);case 5:return n&&(a=r.listeners.map((function(e){return e.listener})).indexOf(n))>=0&&r.listeners.splice(a,1),null!=n&&0!==r.listeners.length||(r.stop(),xs(this).subs.delete(r.tag)),e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"removeAllListeners",value:function(e){return(u=u||hn(dn().mark((function e(t){var n,r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.next=3,Ns(this,t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",this);case 6:n.stop(),xs(this).subs.delete(n.tag),e.next=13;break;case 10:r=xs(this),a=r.subs,o=Xe(a.values());try{for(o.s();!(i=o.n()).done;)g=i.value,s=g.tag,(0,g.stop)(),a.delete(s)}catch(c){o.e(c)}finally{o.f()}case 13:return e.abrupt("return",this);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"addListener",value:function(e,t){return(f=f||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.on(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"removeListener",value:function(e,t){return(I=I||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.off(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}],[{key:"buildClass",value:function(e){var t=function(t){d(r,t);var n=p(r);function r(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Z(this,r),n.call(this,t,e,a)}return B(r)}(C);return t}},{key:"from",value:function(e,t,n){return null==n&&(n=null),new this(e,t,n)}}]),C}();var zs=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n)}(Ms);function Ds(e){return function(e){var t=0;return function(){return e[t++]}}(function(e){var t=0;function n(){return e[t++]<<8|e[t++]}for(var r=n(),a=1,o=[0,1],i=1;i<r;i++)o.push(a+=n());var g=n(),s=t;t+=g;var c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}for(var f=Math.pow(2,31),I=f>>>1,C=I>>1,d=f-1,A=0,h=0;h<31;h++)A=A<<1|u();for(var p=[],m=0,b=f;;){for(var y=Math.floor(((A-m+1)*a-1)/b),v=0,Z=r;Z-v>1;){var G=v+Z>>>1;y<o[G]?Z=G:v=G}if(0==v)break;p.push(v);for(var B=m+Math.floor(b*o[v]/a),k=m+Math.floor(b*o[v+1]/a)-1;0==((B^k)&I);)A=A<<1&d|u(),B=B<<1&d,k=k<<1&d|1;for(;B&~k&C;)A=A&I|A<<1&d>>>1|u(),B=B<<1^I,k=(k^I)<<1|I|1;m=B,b=1+k-B}var S=r-4;return p.map((function(t){switch(t-S){case 3:return S+65792+(e[s++]<<16|e[s++]<<8|e[s++]);case 2:return S+256+(e[s++]<<8|e[s++]);case 1:return S+e[s++];default:return t-1}}))}(function(e){var t=[];We("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").forEach((function(e,n){return t[e.charCodeAt(0)]=n}));for(var n=e.length,r=new Uint8Array(6*n>>3),a=0,o=0,i=0,g=0;a<n;a++)g=g<<6|t[e.charCodeAt(a)],(i+=6)>=8&&(r[o++]=g>>(i-=8));return r}(e)))}function Ls(e){return 1&e?~e>>1:e>>1}function Us(e,t){for(var n=Array(e),r=0,a=0;r<e;r++)n[r]=a+=Ls(t());return n}function js(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];;){var r=e(),a=e();if(!a)break;t+=r;for(var o=0;o<a;o++)n.push(t+o);t+=a+1}return n}function Os(e){return Ps((function(){var t=js(e);if(t.length)return t}))}function Qs(e){for(var t=[];;){var n=e();if(0==n)break;t.push(qs(n,e))}for(;;){var r=e()-1;if(r<0)break;t.push($s(r,e))}return t.flat()}function Ps(e){for(var t=[];;){var n=e(t.length);if(!n)break;t.push(n)}return t}function _s(e,t,n){for(var r=Array(e).fill().map((function(){return[]})),a=0;a<t;a++)Us(e,n).forEach((function(e,t){return r[t].push(e)}));return r}function qs(e,t){var n=1+t(),r=t(),a=Ps(t);return _s(a.length,1+e,t).flatMap((function(e,t){var o=I(e),i=o[0],g=o.slice(1);return Array(a[t]).fill().map((function(e,t){var a=t*r;return[i+t*n,g.map((function(e){return e+a}))]}))}))}function $s(e,t){return _s(1+t(),1+e,t).map((function(e){return[e[0],e.slice(1)]}))}var ec=Ds("AEgSbwjEDVYByQKaAQsBOQDpATQAngDUAHsAoABoANQAagCNAEQAhABMAHIAOwA9ACsANgAmAGIAHgAvACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGAAeABMAFwAXAA0ADgAWAA8AFAAVBFsF1QEXE0o3xAXUALIArkABaACmAgPGAK6AMDAwMAE/qAYK7P4HQAblMgVYBVkAPSw5Afa3EgfJwgAPA8meNALGCjACjqIChtk/j2+KAsXMAoPzASDgCgDyrgFCAi6OCkCQAOQA4woWABjVuskNDD6eBBx4AP4COhi+D+wKBirqBgSCaA0cBy4ArABqku+mnIAAXAaUJAbqABwAPAyUFvyp/Mo8INAIvCoDshQ8APcubKQAon4ZABgEJtgXAR4AuhnOBPsKIE04CZgJiR8cVlpM5INDABQADQAWAA9sVQAiAA8ASO8W2T30OVnKluYvChEeX05ZPe0AFAANABYAD2wgXUCYAMPsABwAOgzGFryp/AHauQVcBeMC0KACxLEKTR2kZhR0Gm5M9gC8DmgC4gAMLjSKF8qSAoF8ARMcAL4OaALiAAwuAUlQJpJMCwMt/AUpCthqGK4B2EQAciwSeAIyFiIDKCi6OGwAOuIB9iYAyA7MtgEcZIIAsgYABgCK1EoFHNZsGACoKNIBogAAAAAAKy4DnABoAQoaPu43dQQZGACrAcgCIgDgLBJ0OvRQsTOiKDVJBfsoBVoFWbC5BWo7XkITO1hCmHuUZmCh+QwUA8YIJvJ4JASkTAJUVAJ2HKwoAZCkpjZcA0YYBIRiCgDSBqxAMCQHKgI6XgBsAWIgcgCEHhoAlgFKuAAoahgBsMYDOC4iRFQBcFoGZgJmAPJKGAMqAgYASkIArABeAHQALLYGCPTwGo6AAAAKIgAqALQcSAHSAdwIDDKXeYHpAAsAEgA1AD4AOTR3etTBEGAQXQJNCkxtOxUMAq0PpwvmERYM0irM09kANKoH7ANUB+wDVANUB+wH7ANUB+wDVANUA1QDVBwL8BvUwRBgD0kEbgWPBYwE1wiEJkoRggcpCNNUDnQfHEgDRgD9IyZJHTuUMwwlQ0wNTQQH/TZDbKh9OQNIMaxU9pCjA8wyUDltAh5yEqEAKw90HTW2Tn96SHGhCkxPr7WASWNOaAK/Oqk/+QoiCZRvvHdPBj4QGCeiEPQMMAGyATgN6kvVBO4GOATGH3oZFg/KlZkIoi3aDOom4C6egFcj8iqABepL8TzaC0pRZQ9WC2IJ4DpggUsDHgEKIogK2g02CGoQ8ArGaA3iEUIHNgPSSZcAogb+Cw4dMhWyJg1iqQsGOXQG+BrzC4wmrBMmevkF0BoeBkoBJhr8AMwu5IWtWi5cGU9cBgALIiPEFKVQHQ0iQLR4RRoYBxIlpgKOQ21KhFEzHpAh8zw6DWMuEFF5B/I8AhlMC348m0aoRQsRzz6KPUUiRkwpBDJ8LCwniAnMD4IMtnxvAVYJHgmuDG4TLhEUN8IINgcWKpchJxIIHkaSYJcE9JwD8BPOAwgFPAk+BxADshwqEysVJgUKgSHUAvA20i6wAoxWfQEUBcgPIh/cEE1H3Q7mCJgCYgOAJegAKhUeABQimAhAYABcj9VTAi7ICMRqaSNxA2QU5F4RcAeODlQHpBwwFbwc3nDFXgiGBSigrAlYAXIJlgFcBOAIBjVYjJ0gPmdQi1UYmCBeQTxd+QIuDGIVnES6h3UCiA9oEhgBMgFwBzYM/gJ0EeoRaBCSCOiGATWyM/U6IgRMIYAgDgokA0xsywskJvYM9WYBoBJfAwk0OnfrZ6hgsyEX+gcWMsJBXSHuC49PygyZGr4YP1QrGeEHvAPwGvAn50FUBfwDoAAQOkoz6wS6C2YIiAk8AEYOoBQH1BhnCm6MzQEuiAG0lgNUjoACbIwGNAcIAGQIhAV24gAaAqQIoAACAMwDVAA2AqoHmgAWAII+AToDJCwBHuICjAOQCC7IAZIsAfAmBBjADBIA9DRuRwLDrgKAZ2afBdpVAosCRjIBSiIEAktETgOsbt4A2ABIBhDcRAESqEfIF+BAAdxsKADEAPgAAjIHAj4BygHwagC0AVwLLgmfsLIBSuYmAIAAEmgB1AKGANoAMgB87gFQAEoFVvYF0AJMRgEOLhUoVF4BuAMcATABCgB2BsiKosYEHARqB9ACEBgV3gLvKweyAyLcE8pCwgK921IAMhMKNQqkCqNgWF0wAy5vPU0ACx+lPsQ/SwVOO1A7VTtQO1U7UDtVO1A7VTtQO1UDlLzfvN8KaV9CYegMow3RRMU6RhPYYE5gLxPFLbQUvhXLJVMZOhq5JwIl4VUGDwEt0GYtCCk0che5ADwpZYM+Y4MeLQpIHORTjlT1LRgArkufM6wNqRsSRD0FRHXqYicWCwofAmR+AmI/WEqsWDcdAqH0AmiVAmYGAp+BOBgIAmY4AmYjBGsEfAN/EAN+jzkDOXQUOX86ICACbBoCMjM4BwJtxAJtq+yHMGRCKAFkANsA3gBHAgeVDIoA+wi/AAqyAncsAnafPAJ5SEACeLcaWdhFq0bwAnw8AnrFAn0GAnztR/1IemAhACgSSVVKWBIUSskC0P4C0MlLJAOITAOH40TCkS8C8p5dAAMDq0vLTCoiAMxNSU2sAos8AorVvhgEGkBkArQCjjQCjlk9lH4CjtYCjll1UbFTMgdS0VSCApP4ApMJAOYAGVUbVaxVzQMsGCmSgzLeeGNFODYCl5wC769YHqUAViIClowClnmZAKZZqVoGfkoAOAKWsgKWS1xBXM4CmcgCmWFcx10EFgKcmDm/OpoCnBMCn5gCnrWHABoMLicMAp3uAp6PALI6YTFh7AKe0AKgawGmAp6cHAKeS6JjxWQkIigCJ6wCJnsCoPgCoEnUAqYsAqXLAqf8AHoCp+9oeWiuAABGahlqzgKs4AKsqwKtZAKs/wJXGgJV2QKx3tQDH0tslAKyugoCsuUUbN1tYG1FXAMlygK2WTg8bo0DKUICuFsCuUQSArkndHAzcN4CvRYDLa8DMg4CvoVx/wMzbgK+F3Mfc0wCw8gCwwFzf3RIMkJ03QM8pAM8lwM9vALFeQLGRALGDYYCyGZOAshBAslMAskrAmSaAt3PeHZeeKt5IkvNAxigZv8CYfEZ8JUhewhej164DgLPaALPaSxIUM/wEJwAw6oCz3ABJucDTg9+SAIC3CQC24cC0kwDUlkDU1wA/gNViYCGPMgT6l1CcoLLg4oC2sQC2duEDYRGpzkDhqIALANkC4ZuVvYAUgLfYgLetXB0AuIs7REB8y0kAfSYAfLPhALr8ALpbXYC6vYC6uEA9kQBtgLuhgLrmZanlwAC7jwDhd2YdnDdcZ4C8wAAZgOOE5mQAvcQA5FrA5KEAveVAvnWAvhjmhmaqLg0mxsDnYAC/vcBGAA2nxmfsAMFigOmZwOm1gDOwgMGZ6GFogIGAwxGAQwBHAdqBl62ZAIAuARovA6IHrAKABRyNgAgAzASSgOGfAFgJB4AjOwAHgDmoAScjgi0BhygwgCoBRK86h4+PxZ5BWk4P0EsQiJCtV9yEl+9AJbGBTMAkE0am7o7J2AzErrQDjAYxxiKyfcFWAVZBVgFWQVkBVkFWAVZBVgFWQVYBVkFWAVZRxYI2IZoAwMDCmVe6iwEygOyBjC8vAC8BKi8AOhBKhazBUc+aj5xQkBCt192OF/pAFgSM6wAjP/MbMv9puhGez4nJAUsFyg3Nn5u32vB8hnDLGoBbNdvMRgFYAVrycLJuQjQSlwBAQEKfV5+jL8AND+CAAQW0gbmriQGAIzEDAMCDgDlZh4+JSBLQrJCvUI5JF8oYDcoOSQJwj4KRT9EPnk+gj5xPnICikK9SkM8X8xPUGtOCy1sVTBrDG8gX+E0OxwJaJwKYyQsPR4nQqxCvSzMAsv9X8oPIC8KCQoAACN+nt9rOy5LGMmsya0JZsLMzQphQWAP5hCkEgCTjh5GQiYbqm06zjkKND9EPnFCQBwICx5NSG1cLS5a4rwTCn7uHixCQBxeCUsKDzRVREM4BTtEnC0KghwuQkAb9glUIyQZMTIBBo9i8F8KcmTKYAxgLiRvAERgGjoDHB9gtAcDbBFmT2BOEgIAZOhgFmCWYH5gtGBMYJJpFhgGtg/cVqq8WwtDF6wBvCzOwgMgFgEdBB8BegJtMDGWU4EBiwq5SBsA5SR0jwvLDqdN6wGcAoidUAVBYAD4AD4LATUXWHsMpg0lILuwSABQDTUAFhO4NVUC0wxLZhEcANlPBnYECx9bADIAtwKbKAsWcKwzOaAaAVwBhwn9A9ruEAarBksGugAey1aqWwq7YhOKCy1ADrwBvAEjA0hbKSkpIR8gIi0TJwciDY4AVQJvWJFKlgJvIA9ySAHUdRDPUiEaqrFN6wcSBU1gAPgAPgsBewAHJW0LiAymOTEuyLBXDgwAYL0MAGRKaFAiIhzAADIAtwKbKC08D88CkRh8ULxYyXRzjtilnA72mhU+G+0S2hIHDxwByAk7EJQGESwNNwwAPAC0zwEDAKUA4gCbizAAFQBcG8cvbXcrDsIRAzwlRNTiHR8MG34CfATCC6vxbQA4Oi4Opzkuz6IdB7wKABA7Ls8SGgB9rNsdD7wbSBzOoncfAT4qYB0C7KAJBE3z5R9mDL0M+wg9Cj8ABcELPgJMDbwIvQ09CT0KvS7PoisOvAaYAhwPjBriBBwLvBY8AKELPBC8BRihe90AO2wMPQACpwm9BRzR9QYFB2/LBnwAB7wSXBISvQECAOsCAAB1FVwHFswV/HAXvBg8AC68AuyovAAevAJWISuAAAG8AALkFT0VvCvso7zJqDwEAp8nTAACXADn3hm8CaVcD7/FAPUafAiiBQv/cQDfvKe8GNwavKOMeXMG/KmchAASvAcbDAADlABtvAcAC7ynPAIaPLsIopzLDvwHwak8AOF8L7dtvwNJAAPsABW8AAb8AAm8AGmMABq8AA68Axi8jmoV/AABXAAObAAuTB8ABrwAF7wIIgANSwC6vCcAA7wADpwq7ACyWwAcHAAbvAAB7AqiAAXHCxYV3AAHnABCvAEDAGm8AAt8AB28AAi8CaIABcsAbqAZ1gCSCCIABcsAATwAB9wAHZwIIgAGmwAJfAAbLABtHADmvIEACFwACDwAFLwAaPwJIgAGywDjjAAJPAuiDsX7YAAHPABunUBJAEgACrwFAAM8AAmuAzgABxwAGXwAAgym/AAKHAAKPAAJ/KfsBrwACRwAAwwAEDwBABQ8ABFsAA+MAA3sAA28ABkMBxYcABU8AG6cFrQBvAC7ABM8BABpLAsA4UwAAjwABFMAF3wFHAAG0QAYvB8BfClTADpGALAJBw4McwApK3EBpQYIXwJtJA0ACghwTG1gK4oggRVjLjcDogq1AALZABcC/ARvAXdzSFMVIgNQAhY/AS0GBHRHvnxTe0EAKgAyAvwAVAvcAHyRLQEsAHfmDhIzRwJLAFgGAAJRAQiLzQB5PAQhpgBbANcWAJZpOCCMAM5ssgDQ1RcJw3Z0HBlXHgrSAYmRrCNUVE5JEz3DivoAgB04QSos4RKYUABzASosMSlDGhADMVYE+MbvAExm3QBrAnICQBF7Osh4LzXWBhETIAUVCK6v/xPNACYAAQIbAIYAiQCONgDjALQA1QCdPQC7AKsApgChAOcAnwDTAJwA4AEBAPwAwAB6AFsAywDNAPwA1wDrAIkAogEqAOMA2ADVBAIIKzTT09PTtb/bzM/NQjEWAUsBVS5GAVMBYgFhAVQBRUpCRGcMAUwUBgkEMzcMBwAgDSQmKCs3OTk8PDw9Pg0/HVBQUFBSUlFSKFNUVlVVHFxgYF9hYCNlZ29ucXFxcXFxc3Nzc3Nzc3Nzc3N1dXZ1dFsAPesAQgCTAHEAKwBf8QCHAFAAUAAwAm/oAIT+8fEAXQCM6wCYAEgAWwBd+PipAH4AfgBiAE8AqgAdAK8AfAI5AjwA9QDgAPcA9wDhAPgA4gDiAOEA3wAoAnQBSgE5ATcBTQE3ATcBNwEyATEBMQExARUBURAAKgkBAEwYCxcEFhcPAIcAjwCfAEoAYxkCKgBvAGgAkAMOAyArAxpCP0gqAIoCSADAAlACnQC5Ao8CjwKPAo8CjwKPAoQCjwKPAo8CjwKPAo8CjgKOApECmQKQAo8CjwKNAo0CjQKNAosCjgJuAc0CkAKYAo8CjwKOF3oMAPcGA5gCWgIzGAFNETYC2xILLBQBRzgUTpIBdKU9AWJaAP4DOkgA/wCSKh4ZkGsAKmEAagAvAIoDlcyM8K+FWwa7LA/DEgKe1nUrCwQkWwGzAN5/gYB/gX+Cg4N/hIeFf4aJh4GIg4mDin+Lf4x/jYuOf49/kIORf5J/k3+Uf5WElomXg5h/AIMloQCEBDwEOQQ7BD4EPARCBD8EOgRABEIEQQQ9BD8EQgCkA4gAylIA0AINAPdbAPcBGgD3APUA9QD2APXVhSRmvwD3APUA9QD2APUdAIpbAPcAigEaAPcAigLtAPcAitWFJGa/HQD4WwEaAPcA9wD1APUA9gD1APgA9QD1APYA9dWFJGa/HQCKWwEaAPcAigD3AIoC7QD3AIrVhSRmvx0CRAE3AksBOgJMwgOfAu0Dn9WFJGa/HQCKWwEaA58AigOfAIoC7QOfAIrVhSRmvx0EMQCKBDIAigeOMm4hLQCKAT9vBCQA/gDHWwMAVVv/FDMDAIoDPtkASgMAigMAl2dBtv/TrfLzakaPh3aztmIuZQrR3ER2n5Yo+qNR2jK/aP/V04UK1njIJXLgkab9PjOxyJDVbIN3R/FZLoZVl2kYFQIZ7V6LpRqGDt9OdDohnJKp5yX/HLj0voPpLrneDaN11t5W3sSM4ALscgSw8fyWLVkKa/cNcQmjYOgTLZUgOLi2F05g4TR0RfgZ4PBdntxdV3qvdxQt8DeaMMgjJMgwUxYN3tUNpUNx21AvwADDAIa0+raTWaoBXmShAl5AThpMi282o+WzOKMlxjHj7a+DI6AM6VI9w+xyh3Eyg/1XvPmbqjeg2MGXugHt8wW03DQMRTd5iqqOhjLvyOCcKtViGwAHVLyl86KqvxVX7MxSW8HLq6KCrLpB8SspAOHO9IuOwCh9poLoMEha9CHCxlRAXJNDobducWjqhFHqCkzjTM2V9CHslwq4iU19IxqhIFZMve15lDTiMVZIPdADXGxTqzSTv0dDWyk1ht430yvaYCy9qY0MQ3cC5c1uw4mHcTGkMHTAGC99TkNXFAiLQgw9ZWhwKJjGCe+J5FIaMpYhhyUnEgfrF3zEtzn40DdgCIJUJfZ0mo3eXsDwneJ8AYCr7Vx2eHFnt2H6ZEyAHs9JoQ4Lzh5zBoGOGwAz37NOPuqSNmZf51hBEovtpm2T1wI79OBWDyvCFYkONqAKGVYgIL0F+uxTcMLSPtFbiNDbBPFgip8MGDmLLHbSyGXdCMO6f7teiW9EEmorZ+75KzanZwvUySgjoUQBTfHlOIerJs6Y9wLlgDw18AB1ne0tZRNgGjcrqHbtubSUooEpy4hWpDzTSrmvqw0H9AoXQLolMt9eOM+l9RitBB1OBnrdC1XL4yLFyXqZSgZhv7FnnDEXLUeffb4nVDqYTLY6X7gHVaK4ZZlepja2Oe6OhLDI/Ve5SQTCmJdH3HJeb14cw99XsBQAlDy5s5kil2sGezZA3tFok2IsNja7QuFgM30Hff3NGSsSVFYZLOcTBOvlPx8vLhjJrSI7xrNMA/BOzpBIJrdR1+v+zw4RZ7ry6aq4/tFfvPQxQCPDsXlcRvIZYl+E5g3kJ+zLMZon0yElBvEOQTh6SaAdIO6BwdqJqfvgU+e8Y65FQhdiHkZMVt9/39N2jGd26J6cNjq8cQIyp6RonRPgVn2fl89uRDcQ27GacaN0MPrcNyRlbUWelKfDfyrNVVGBG5sjd3jXzTx06ywyzuWn5jbvEfPPCTbpClkgEu9oPLKICxU5HuDe3jA1XnvU85IYYhaEtOU1YVWYhEFsa4/TQj3rHdsU2da2eVbF8YjSI0m619/8bLMZu3xildwqM7zf1cjn4Whx0PSYXcY5bR7wEQfGC7CTOXwZdmsdTO8q3uGm7Rh/RfCWwpzBHCAaVfjxgibL5vUeL0pH6bzDmI9yCXKC/okkmbc28OJvI87L/bjFzpq0DHepw4kT1Od+fL7cyuFaRgfaUWB2++TCFvz11J0leEtrGkpccfX9z2LY39sph4PBHCjNOOkd0ybUm+ZzS8GkFbqMpq8uiX2yHpa0jllTLfGTDBMYR6FT5FWLLDPMkYxt1Q0eyMvxJWztDjy0m6VvZPvamrFXjHmPpU6WxrZqH6WW//I37RwvqPQhPz8I3RPuXAk1C94ZprQWm9iGM/KgiGDO6SV9sjp+Jmk4TBajMNJ5zzWZ1k1jrteQQBp9C2dOvmbIeeEME8y573Q8TgGe+ZCzutM45gYLBzYm2LNvgq2kebAbMpHRDSyh6dQ27GbsAAdCqQVVXWC1C+zpwBM2Lr4eqtobmmu1vJEDlIQR1iN8CUWpztq50z7FFQBn3SKViX6wSqzVQCoYvAjByjeSa+h1PRnYWvBinTDB9cHt4eqDsPS4jcD3FwXJKT0RQsl8EvslI2SFaz2OtmYLFV8FwgvWroZ3fKmh7btewX9tfL2upXsrsqpLJzpzNGyNlnuZyetg7DIOxQTMBR7dqlrTlZ6FWi1g4j1NSjA2j1Yd7fzTH6k9LxCyUCneAKYCU581bnvKih6KJTeTeCX4Zhme/QIz7w2o+AdSgtLAkdrLS9nfweYEqrMLsrGGSWXtgWamAWp6+x6GM/Z8jNw3BqPNQ39hrzYLECn3tPvh/LqKbRSCiDGauDKBBj/kGbpnM1Bb/my8hv4NWStclkwjfl57y4oNDgw1JAG9VOti3QVVoSziMEsSdfEjaCPIDb7SgpLXykQsM+nbqbt97I0mIlzWv0uqFobLMAq8Rd9pszUBKxFhBPwOjf//gVOz2r7URJ2OnpviCXv9iz3a4X/YLBYbXoYwxBv/Kq0a5s4utQHzoTerJ7PmFW/no/ZAsid/hRIV82tD+Qabh5F1ssIM8Ri3chu0PuPD3sSJRMjDoxLAbwUbroiPAz/V52e8s3DIixxlO7OrvhMj3qfzA0kKxzwicr5wJmZwJxTXgrwYsqhRvpgC2Nfdyd+TYYxJSZgk+gk2g9KyHSlwQVAyPtWWgvVGyVBqsU2LpDlLNosSAtolC1uBKt5pQZLhAxTjeGCWIC/HVpagc5rRwkgpCHKEsjA8d+scp8aiMewwQBhp5dYTV5t/Nvl+HbDMu8F3S0psPyZb1bSnqlHPFUnMQeQqSqwDBT23fJO9gO3aVaa1icrXU0PKwlMM5K+iL3ATcVq2fFWKk0irCTF4LDVDG4gUpkyplq6efcZS+WDR1woApjD18x+2JQR9oOXzuA7uy4b+/91WsJd/tSd1QcAH8PVPXApieA37B7YXPhDPH1azP3PKR+HfHmOoDYLeuKsIi/ssSsdYs62qJo14Hw1P2N/6zpr8F3FTWmJ4ysAVcl84Iv/tl///Z8FaAWbBQbyMNDZjrZ2JwdRjtd1jOeNumSodFtr4/Zf45iRJf/8HSW+KIB/+GlKu8Rv1BPLr/4duoL+kFPRqrstEr41gfJupoJRf4hcYDWX93FOcfEBiIivxtjtV8g7mvOReiamYWKE7vfPbv3v2L9Kwq3cIDFGLyhyfOGuf/9vA5muH6Pjg7B4SUj2ydDXra9fSBI+DrsNHA6l51wfHssJb+11TfNk7B8OleUe3Y+ZmHboMFHdv7FFP2cfISFyeAQR0sk/Xv62HBTdW4HmnGSLFk/cqyWVVFJkdIIa+4hos3JRHcqLoRKM5h2Qtk1RZtzISMtlXTfTqIc77YsCCgQD0r61jtxskCctwJOtjE/pL8wC4LBD4AZFjh2wzzFCrT/PNqW0/DeBbkfMfzVm9yy06WiF+1mTdNNEAytVtohBKg3brWd2VQa+aF+cQ0mW5CvbwOlWCT07liX226PjiVLwFCRs/Ax2/u+ZNPjrNFIWIPf5GjHyUKp60OeXe9F01f7IaPf/SDTvyDAf7LSWWejtiZcsqtWZjrdn6A2MqBwnSeKhrZOlUMmgMionmiCIvXqKZfmhGZ1MwD3uMF4n9KJcfWLA3cL5pq48tm5NDYNh3SS/TKUtmFSlQR89MR4+kxcqJgpGbhm9gXneDELkyqAN5nitmIzTscKeJRXqd64RiaOALR2d295NWwbjHRNG2AU5oR9OS2oJg/5CY6BFPc1JvD2Mxdhp2/MZdI8dLePxiP4KRIp8VXmqfg+jqd/RNG7GNuq1U2SiI4735Bdc0MVFx6mH5UOWEa5HuhYykd6t4M1gYLVS8m1B+9bUqi5DziQq7qT8d94cxB6AB4WqMCOF/zPPtRSZUUaMSsvHOWxGASufywTX8ogy6HgUf9p+Z30wUEosl8qgmwm6o2AV6nO9HKQjRHpN6SUegI5pvR61RLnUJ1lqCtmfcsRQutEizVpAaPXN7xMp5UQ5OSZK6tniCK9CpyMd7LjR6+MxfoMEDPpWdf2p2m5N3KO4QMxf+V7vGdYjemQczQ+m2MGIkFNYDMf0Yop2eSx81sP36WHUczqEhKysp2iJSYAvfgJjinKwToPvRKb+HBi+7cJ96S5ngfLOXaHAFRLkulo4TnXTFO51gX0TCCo4ZUHdbpdgkMEwUZAPjh6M+hA8DzycbtxAgH3uD6i0nN1aTiIuQ4BYCE9dEHHwAmINU+4YEWx4EC3OZwFGfYZMPLScVlb+BAAJeARUh+gdWA3/gRqCrf1jecgqeFf1MdzrrP4SVlGm5mMihSP+zYYksAB7O+SBPwNQqSNMiLnkviY/klwgcRmvqtCqeWeA0gjuir4CMZqmw/ntP6M+l0pdN8/P9xI53aP7x/zavJbbKOz8VzO/nXxIr1tjparMnqd6iWdByHKw4lF4p/u57Yv07WeZPDnRl7wgmDVZZ44fQsjdYO/gmXQ+940PRGst8UMQApFC4OOV22e4N+lVOPyFLAOj4t8R3PFw/FjbSWy0ELuAFReNkee8ORcBOT2NPDcs7OfpUmzvn/F9Czk9o9naMyVYy/j8I5qVFmQDFcptBp65J/+sJA3w/j6y/eqUkKxTsf0CZjtNdRSBEmJ2tmfgmJbqpcsSagk+Ul9qdyV+NnqFBIJZFCB1XwPvWGDBOjVUmpWGHsWA5uDuMgLUNKZ4vlq5qfzY1LnRhCc/mh5/EX+hzuGdDy5aYYx4BAdwTTeZHcZpl3X0YyuxZFWNE6wFNppYs3LcFJePOyfKZ8KYb7dmRyvDOcORLPH0sytC6mH1US3JVj6paYM1GEr+CUmyHRnabHPqLlh6Kl0/BWd3ebziDfvpRQpPoR7N+LkUeYWtQ6Rn5v5+NtNeBPs2+DKDlzEVR5aYbTVPrZekJsZ9UC9qtVcP99thVIt1GREnN8zXP8mBfzS+wKYym8fcW6KqrE702Zco+hFQAEIR7qimo7dd7wO8B7R+QZPTuCWm1UAwblDTyURSbd85P4Pz+wBpQyGPeEpsEvxxIZkKsyfSOUcfE3UqzMFwZKYijb7sOkzpou+tC4bPXey5GI1GUAg9c3vLwIwAhcdPHRsYvpAfzkZHWY20vWxxJO0lvKfj6sG2g/pJ1vd/X2EBZkyEjLN4nUZOpOO7MewyHCrxQK8d5aF7rCeQlFX+XksK6l6z971BPuJqwdjj68ULOj9ZTDdOLopMdOLL0PFSS792SXE/EC9EDnIXZGYhr52aQb+9b2zEdBSnpkxAdBUkwJDqGCpZk/HkRidjdp0zKv/Cm52EenmfeKX6HkLUJgMbTTxxIZkIeL/6xuAaAAHbA7mONVduTHNX/UJj1nJEaI7f3HlUyiqKn7VfBE+bdb4HWln1HPJx001Ulq1tOxFf8WZEARvq5Da1+pE7fPVxLntGACz3nkoLsKcPdUqdCwwiyWkmXTd5+bv3j7HaReRt3ESn783Ew3SWsvkEjKtbocNksbrLmV+GVZn1+Uneo35MT1/4r8fngQX5/ptORfgmWfF6KSB/ssJmUSijXxQqUpzkANEkSkYgYj560OOjJr6uqckFuO15TRNgABEwNDjus1V3q2huLPYERMCLXUNmJJpbMrUQsSO7Qnxta55TvPWL6gWmMOvFknqETzqzFVO8SVkovEdYatypLGmDy9VWfgAc0KyIChiOhbd7UlbAeVLPZyEDp4POXKBwN/KP5pT6Cyqs6yaI00vXMn1ubk9OWT9Q/O2t/C25qlnO/zO0xcBzpMBCAB8vsdsh3U8fnPX1XlPEWfaYJxKVaTUgfCESWl4CCkIyjE6iQ5JFcwU6S4/IH0/Agacp8d5Gzq2+GzPnJ7+sqk40mfFQpKrDbAKwLlr3ONEati2k/ycLMSUu7V/7BBkDlNyXoN9tvqXCbbMc4SSQXgC/DBUY9QjtrCtQ+susEomCq8xcNJNNMWCH31GtlTw2BdCXkJBjT+/QNWlBWwQ5SWCh1LdQ99QVii/DyTxjSR6rmdap3l3L3aiplQpPYlrzNm9er88fXd2+ao+YdUNjtqmxiVxmyYPzJxl67OokDcTezEGqldkGgPbRdXA+fGcuZVkembZByo7J1dMnkGNjwwCny+FNcVcWvWYL9mg8oF7jACVWI3bA64EXpdM8bSIEVIAs5JJH+LHXgnCsgcMGPZyAAVBncvbLiexzg9YozcytjPXVlAbQAC7Tc4S0C8QN4LlAGjj4pQAVWrwkaDoUYGxxvkCWKRRHkdzJB5zpREleBDL1oDKEvAqmkDibVC4kTqF89YO6laUjgtJPebBfzr16tg4t10GmN1sJ5vezk2sUOq8blCn5mPZyT3ltaDcddKupQjqusNM9wtFVD0ABzv17fZDn7GPT1nkCtdcgYejcK1qOcTGtPxnCX1rErEjVWCnEJv5HaOAUjgpiKQjUKkQi64D5g2COgwas8FcgIl0Pw95H9dWxE3QG0VbMNffh6BPlAojLDf4es2/5Xfq7hw5NGcON2g8Qsy2UQm94KddKyy3kdJxWgpNaEc15xcylbLC3vnT26u8qS90qc2MU8LdOJc5VPF5KnSpXIhnj1eJJ/jszjZ01oR6JDFJRoeTPO/wh4IPFbdG9KljuSzeuI92p8JF/bpgDE8wG86/W2EBKgPrmzdLijxssQn8mM44ky/KLGOJcrSwXIpZa/Z3v7W6HCRk7ewds99LTsUW1LbeJytw8Q/BFZVZyfO9BUHOCe2suuEkO8DU4fLX0IQSQ2TdOkKXDtPf3sNV9tYhYFueuPRhfQlEEy+aYM/MCz7diDNmFSswYYlZZPmKr2Q5AxLsSVEqqBtn6hVl1BCFOFExnqnIsmyY/NA8jXnDaNzr7Zv3hu+I1Mf/PJjk0gALN2G8ABzdf9FNvWHvZHhv6xIoDCXf964MxG92vGZtx/LYU5PeZqgly8tT5tGeQGeJzMMsJc5p+a5Rn2PtEhiRzo/5Owjy1n0Lzx3ev8GHQmeWb8vagG6O5Qk5nrZuQTiKODI4UqL0LLAusS2Ve7j1Ivdxquu1BR9Rc4QkOiUPwQXJv6du2E8i5pDhVoQpUhyMWGUT2O2YODIhjAfI71gxep5r5zAY7GBUZpy51hAw0pcCCrhOmU8Wp6ujQTdZQsCjtq6SHX8QAMNiPCIIkoxhHEZPgsBcOlP4aErJZPhF7qvx6gHrn8hEwPwYbx8YmT/n7lbcmTip1v8kgsrIjFTAlvLY4Nuil0KDmgz3svYs0ZJ3O3Is/vSx4xpxF1e2VAtZE8dJxGYEIhCSuPvCjP54l/NSNDnwlKvAW8mG+AQkgp7a87Igh26uKMFGD0PoPHTSvoWxiHuk+su8XkQiHIjeYKl/RdcOHpxhQH3zHCNE3aARm83Bl6zGxU/vMltlVPQhubcqhW4RYkl6uXk5JdP/QpzaKFpw2M8zvysv2qj7xaQECuu2akM0Cssj/uB9+wDR7uA6XOnLNaoczalHoMj33eiiu+DRaFsUmlmUZuh9bjDY4INMNSSAivSh03uJvny4Gj+D+neudoa7iJi7c4VFlZ/J5gUR82308zSNAt/ZroBXDWw0fV3eVPAn3aX0mtJabF6RsUZmL+Ehn+wn51/4QipMjD+6y64t7bjL6bjENan2prQ4h7++hBJ9NXvX8CUocJqMC937IasLzm5K0qwXeFMAimMHkEIQIQI2LrQ9sLBfXuyp66zWvlsh74GPv7Xpabj993pRNNDuFud5oIcn/92isbADXdpRPbjmbCNOrwRbxGZx2XmYNGMiV5kjF4IKyxCBvKier9U4uVoheCdmk83rp5G0PihAm2fAtczI4b9BWqX+nrZTrJX5kSwQddi93NQrXG+Cl3eBGNkM77VBsMpEolhXex1MVvMkZN9fG59GGbciH11FEXaY1MxrArovaSjE/lUUqBg2cZBNmiWbvzCHCPJ4RVGFK2dTbObM1m+gJyEX53fa7u3+TZpm74mNEzWbkVL4vjNwfL9uzRCu1cgbrNx5Yv5dDruNrIOgwIk+UZWwJfdbu/WHul6PMmRflVCIzd7B37Pgm/Up/NuCiQW7RXyafevN3AL6ycciCc4ZPlTRzEu+aURGlUBOJbUEsheX7PPyrrhdUt5JAG12EEEZpY/N3Vhbl5uLAfT0CbC2XmpnryFkxZmBTs5prvEeuf0bn73i3O82WTiQtJWEPLsBXnQmdnKhB06NbbhLtlTZYJMxDMJpFeajSNRDB2v61BMUHqXggUwRJ19m6p5zl51v11q34T74lTXdJURuV6+bg2D6qpfGnLy7KGLuLZngobM4pIouz4+n0/UzFKxDgLM4h+fUwKZozQ9UGrHjcif51Ruonz7oIVZ56xWtZS8z7u5zay6J2LD4gCYh2RXoBRLDKsUlZ80R8kmoxlJiL8aZCy2wCAonnucFxCLT1HKoMhbPKt34D97EXPPh0joO93iJVF1Uruew61Qoy3ZUVNX9uIJDt9AQWKLLo+mSzmTibyLHq0D6hhzpvgUgI6ekyVEL3FD+Fi5R3A8MRHPXspN1VyKkfRlC+OGiNgPC4NREZpFETgVmdXrQ2TxChuS3aY+Ndc7CiYv5+CmzfiqeZrWIQJW/C4RvjbGUoJFf1K6ZdR2xL/bG4kVq1+I4jQWX+26YUijpp+lpN7o5c6ZodXJCF56UkFGsqz44sIg8jrdWvbjRCxi2Bk0iyM3a7ecAV93zB6h1Ei38c0s6+8nrbkopArccGP8vntQe1bFeEh2nJIFOHX/k3/UHb5PtKGpnzbkmnRETMX+9X/QduLZWw/feklW/kH/JnzToJe9Kgu9Hct1UGbH5BPCLo4OOtQnZonW0xnyCcdtKyPQ/sbLiSTYJdSx4sJqWLMnfn6fIqPB3WAgk00J+fCOkomPHqtS67pf0mFmKoItYZUlJu6BihSZ8qve8+/X+LX1MhQXF95AshfUleCtmdn6l6QFXzLg2sgLn1oyVFuZecv7fzsIHzoRlAGp0gwYDOn1S4qabWvB5xUaE+Svw4KmjWtxdnuQbI32dw87D4N95u8qQRJTSQg0wLxOLkxSrPMLEn1UIhNKjAa9VLs3WLaXGrtCIt8bKY2AQP/ZdyRU6zT/E8qP2ltyBE2CCZPgWgEYDoJJO4n92y61ylNaSFXKohJhLjkfvYWm592539sIpmBNLlDo1bExFBfmHJJ0lFEiC/fj8v42OoMC9Mo3whIoWvyHfq6Uacqq55mzFf/EGC+NP/gHjhd6urc6R0hES27VXux7UY8CGKPohplWIZtTrFSaPWslCWy78E22Pw8fvReSUZx/txqLtHrFqg1DY/Eus6Iq1heZdrdcqE0/c971Bz1HW/XNXHsXpUIbI4kHdOfCc6T5zHZzvzQJB0ggMFL6IGPAilU9bj/ASdPk6fNvNtZqPuwEDhMBtBnhCexo6D6VAGIOPvJPPV523Y8R8a9vCqZbswSZKzOT1291BsUbmUWehtbb1fdRX9hiJKXvwr1QX6GjnZMgyMvnwOo2Dr24amr7FqEAbVeJAjRNOceM2EQ1Mna9fInqPJ5mh5X8CzT1aDOv08An0blz0fF5Gq4mS2cwq5glwIOlY5nznE8X4j/UdZ3FJsVIXte1JH0A7iibuPfazStM5O/Vo3KXIpXBeGORV0M9XDXFvsYZUHGvFCUubWzTw248EHE0cpQM2zNg6rjavreq3NHCAWsoZ7wvVy7l5gvtKRmIj1MnvfWEm0yFnGcuOq192350a5WefpfKCcX3Sn+AgHU+qnpstNtddbdVebagJU390lq9ko4aI9rqdaWXYG8tv5O/ZQHSqDRYHC6zfH10l5z++opso7aOSaIczlQ13iAzXvLdEu0V7kwNUZ1c8Y8aq7SeIEe5p902FlNkW8DnwHyueHchbK8vVFJfmr9mz7P8nUSccl1ULaoWMRSI1ls32kvlK0h46h3J25Yd9AzfcJbp9qYF/SEt3H5j69mMdcsNxZcAzT/A89ov3tglTX54y/EwjMfuoDoxPwLJDm5I7q6F9Kp469yNy1zSxz0N4HbRRBj9xFFuogvBspv7DXUNIsGxTINEQfmctb42XImWAODgARNo7dfcTqFKq6aTfivmvunLmzP9f8yLsJvXD3JbcPcDGNriMAcjzeDTNr65t8YB5tsnFDFLa0Uwmd2OvUdkLMX9TsAUYUfooSv47sw5J88j7CpahRjjO3/UhOXjTS39W5YZAel2KTbQd1h7INOw9P23GW7GDAe4agIUFHP48MZr7ubq0efFmmtwYMyk7D0r1oeG/CGOODgb9Ur+JMHxkwzPbtCX2ZnENQuI0RN5SyTIZuoY4XS9Rd/tPe3vNAZGSHM/YYwqs9xkkENx0O+eC2YVW1cwOJ3ckE890nbQeHLKlW15L0P0W2VliyYrfNr0nrIYddoRyGaCtj4OYd2MT7ebApqZOAQIaSHJM4mphhfjNjtnjg6YRyx9qM2FT3xOiYIMqXPFWdzhSgFF8ItocqVV09CmIoO8k6U/oJB7++wSX/YksxfPXHyjSgAGZOj1aKEq9fSvXBqtp2wu8/FxEf5AxapAD06pPGuLVUYLdgEzHR8wqRGYEwiUO9MyYbgswstuLYhwYFpSVKOdzAihZ9LuHtD598EGhINU9xc9xhL+QgTLAstmPIvvm2xyRw/WTUPXkP3ZHu6GyPmj5xFH9/QGpkglKXRVUBgVmLOJx8uZO2AstxQYocZH2JhORlxawj66BAXUEs7K/gPxINIRAFyK3WLuyq9oBTF9wEbnmCot82WjIg7CPNwYK3KrZMrKAz5yFszg4wCVLJVnIL8+OYA0xRDH8cHQjQUiQ2i1mr/be32k/3Xej9sdf3iuGvZHyLFSJvPSqz/wltnxumTJYKZsrWXtx/Rmu39jjV9lFaJttfFn57/No2h/unsJmMHbrnZ8csxkp5HQ4xR1s0HH+t3Iz82a3iQWTUDGq/+l2W3TUYLE8zNdL8Y+5oXaIH/Y2UUcX67cXeN4WvENZjz4+8q7vjhowOI3rSjFhGZ6KzwmU7+5nFV+kGWAZ5z2UWvzq0TK0pk1hPwAN4jbw//1CApRvIaIjhSGhioY6TUmsToek9cF9XjJdHvLPcyyCV3lbR5Jiz/ts46ay2F820VjTXvllElwrGzKcNSyvQlWDXdwrUINXmHorAM3fE19ngLZmgeUaCJLsSITf2VcfAOuWwX7mTPdP8Zb/04KqRniufCpwnDUk7sP0RX6cud/sanFMagnzKInSRVey0YzlVSOtA/AjrofmSH6RYbJQ8b4NDeTkIGc6247+Mnbez/qhJ9GAv9fGNFercPnnrf285Qgs+UqThLRgflcAKFuqWhLzZaR4QqvSwa3xe0LPkqj9xJWub195r7NrrR0e78FR+0mRBNMPsraqZctAUVAJfYKehTDV1MGGQSeDsOK9J3sbUuKRIS/WilX/64CBms9jCZocBlsBSZaIAjWm/SUZ8daWL2a/cJFyUOFqE3Epc2RWbtjNyPwOGpWtzu32kUooUqsJud7IV4E8rstUBXM7tGEtBx99x60g1duhyvxeKJSl8s5E34HTMmADT0836aEdg5Dv9rVyCz8i2REOmiz6wtIVFN0HsjAoN37SrY0bV1Ms8CRUILhvZvvRaDzoVCaSI0u8EPuTe4b7OPowgRGODl22UBBmHSTUY8e4DyL+Bc7bngo+2T8HtNvzyATSL5iJZgFPKpmUyZv54vVL90+/RQGATUmNKnrIvcJMYON9fl83naW5sf6hRkbbTC9RUEE6XADwjgA46wWfUQ+QWZl0J4PVTWAln/YfAz/SV3q3J9+yCYDleruoN5uoc/wT2f4YONGTb6zTGq3V+3JqzmCOjwebKln+fExVLN7sqtqfMnsKVXWbb2Ai5m3D/fCTgX7oKYzTZvj+m28XnDqPbXuP4MyWdmPezcesdrh7rCzA7BWdObiuyDEKjjzBbQ0qnuwjliz+b+j7aPMKlkXyIznV3tGzAfYwIbzGGt098oh4eq3ruDjdgHtjxfFCjHrjjRbHajoz/YOY4raojPFQ910GIlBV7hq47UDgpyajBxQUmD8NctiLV1rTSLAEsQDLTeRKcmPBMVMFF0SPBBhZ5oXoxtD3lMhuAQXmA+57OcciczVW9e9zwSIAHS+FJmvfXMJGF1dMBsIUMaPjvgaVqUc3p32qVCMQYFEiRLzlVSOGMCmv/HJIxAHe3mL/XnoZ1IkWLeRZfgyByjnDbbeRK5KL7bYHSVJZ9UFq+yCiNKeRUaYjgbC3hVUvfJAhy/QNl/JqLKVvGMk9ZcfyGidNeo/VTxK9vUpodzfQI9Z2eAre4nmrkzgxKSnT5IJ1D69oHuUS5hp7pK9IAWuNrAOtOH0mAuwCrY8mXAtVXUeaNK3OXr6PRvmWg4VQqFSy+a1GZfFYgdsJELG8N0kvqmzvwZ02Plf5fH9QTy6br0oY/IDsEA+GBf9pEVWCIuBCjsup3LDSDqI+5+0IKSUFr7A96A2f0FbcU9fqljdqvsd8sG55KcKloHIFZem2Wb6pCLXybnVSB0sjCXzdS8IKvE"),tc=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),nc=4;function rc(e){return"{".concat(function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e),"}")}function ac(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.codePointAt(n);n+=a<65536?1:2,t.push(a)}return t}function oc(e){var t=e.length;if(t<4096)return String.fromCodePoint.apply(String,We(e));for(var n=[],r=0;r<t;)n.push(String.fromCodePoint.apply(String,We(e.slice(r,r+=4096))));return n.join("")}var ic=Ds("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");function gc(e){return e>>24&255}function sc(e){return 16777215&e}var cc,lc=new Map(Os(ic).flatMap((function(e,t){return e.map((function(e){return[e,t+1<<24]}))}))),uc=new Set(js(ic)),fc=new Map,Ic=new Map,Cc=Xe(Qs(ic));try{for(Cc.s();!(cc=Cc.n()).done;){var dc=Ge(cc.value,2),Ac=dc[0],hc=dc[1];if(!uc.has(Ac)&&2==hc.length){var pc=Ge(hc,2),mc=pc[0],bc=pc[1],yc=Ic.get(mc);yc||(yc=new Map,Ic.set(mc,yc)),yc.set(bc,Ac)}fc.set(Ac,hc.reverse())}}catch(xQ){Cc.e(xQ)}finally{Cc.f()}var vc=44032,Zc=4352,Gc=4449,Bc=4519,kc=28,Sc=21*kc,wc=vc+19*Sc,Wc=Zc+19,Rc=Gc+21,Vc=Bc+kc;function Xc(e){return e>=vc&&e<wc}function Jc(e,t){if(e>=Zc&&e<Wc&&t>=Gc&&t<Rc)return vc+(e-Zc)*Sc+(t-Gc)*kc;if(Xc(e)&&t>Bc&&t<Vc&&(e-vc)%kc==0)return e+(t-Bc);var n=Ic.get(e);return n&&(n=n.get(t))?n:-1}function xc(e){var t=[],n=[],r=!1;function a(e){var n=lc.get(e);n&&(r=!0,e|=n),t.push(e)}var o,i=Xe(e);try{for(i.s();!(o=i.n()).done;)for(var g=o.value;;){if(g<128)t.push(g);else if(Xc(g)){var s=g-vc,c=s%Sc/kc|0,l=s%kc;a(Zc+(s/Sc|0)),a(Gc+c),l>0&&a(Bc+l)}else{var u=fc.get(g);u?n.push.apply(n,We(u)):a(g)}if(!n.length)break;g=n.pop()}}catch(xQ){i.e(xQ)}finally{i.f()}if(r&&t.length>1)for(var f=gc(t[0]),I=1;I<t.length;I++){var C=gc(t[I]);if(0==C||f<=C)f=C;else{for(var d=I-1;;){var A=t[d+1];if(t[d+1]=t[d],t[d]=A,!d)break;if((f=gc(t[--d]))<=C)break}f=gc(t[I])}}return t}function Yc(e){return xc(e).map(sc)}function Nc(e){return function(e){var t,n=[],r=[],a=-1,o=0,i=Xe(e);try{for(i.s();!(t=i.n()).done;){var g=t.value,s=gc(g),c=sc(g);if(-1==a)0==s?a=c:n.push(c);else if(o>0&&o>=s)0==s?(n.push.apply(n,[a].concat(r)),r.length=0,a=c):r.push(c),o=s;else{var l=Jc(a,c);l>=0?a=l:0==o&&0==s?(n.push(a),a=c):(r.push(c),o=s)}}}catch(xQ){i.e(xQ)}finally{i.f()}return a>=0&&n.push.apply(n,[a].concat(r)),n}(xc(e))}var Hc=65039,Fc=".",Kc=1,Ec=45;function Tc(){return new Set(js(ec))}var Mc=new Map(Qs(ec)),zc=Tc(),Dc=Tc(),Lc=new Set(js(ec).map((function(e){return this[e]}),We(Dc))),Uc=Tc(),jc=(Tc(),Os(ec));function Oc(){return new Set([js(ec).map((function(e){return jc[e]})),js(ec)].flat(2))}var Qc=ec(),Pc=Ps((function(e){var t=Ps(ec).map((function(e){return e+96}));if(t.length){var n=e>=Qc;t[0]-=32,t=oc(t),n&&(t="Restricted[".concat(t,"]"));var r=Oc(),a=Oc(),o=[].concat(We(r),We(a)).sort((function(e,t){return e-t}));return{N:t,P:r,M:!ec(),R:n,V:new Set(o)}}})),_c=Tc(),qc=new Map;[].concat(We(_c),We(Tc())).sort((function(e,t){return e-t})).map((function(e,t,n){var r=ec(),a=n[t]=r?n[t-r]:{V:[],M:new Map};a.V.push(e),_c.has(e)||qc.set(e,a)}));var $c,el=Xe(new Set(qc.values()));try{for(el.s();!($c=el.n()).done;){var tl,nl=$c.value,rl=nl.V,al=nl.M,ol=[],il=Xe(rl);try{var gl=function(){var e=tl.value,t=Pc.filter((function(t){return t.V.has(e)})),n=ol.find((function(e){var n=e.G;return t.some((function(e){return n.has(e)}))}));n||(n={G:new Set,V:[]},ol.push(n)),n.V.push(e),t.forEach((function(e){return n.G.add(e)}))};for(il.s();!(tl=il.n()).done;)gl()}catch(xQ){il.e(xQ)}finally{il.f()}for(var sl=ol.flatMap((function(e){return We(e.G)})),cl=function(){var e,t=ul[ll],n=t.G,r=t.V,a=new Set(sl.filter((function(e){return!n.has(e)}))),o=Xe(r);try{for(o.s();!(e=o.n()).done;){var i=e.value;al.set(i,a)}}catch(xQ){o.e(xQ)}finally{o.f()}},ll=0,ul=ol;ll<ul.length;ll++)cl()}}catch(xQ){el.e(xQ)}finally{el.f()}var fl,Il=new Set,Cl=new Set,dl=Xe(Pc);try{for(dl.s();!(fl=dl.n()).done;){var Al,hl=Xe(fl.value.V);try{for(hl.s();!(Al=hl.n()).done;){var pl=Al.value;(Il.has(pl)?Cl:Il).add(pl)}}catch(xQ){hl.e(xQ)}finally{hl.f()}}}catch(xQ){dl.e(xQ)}finally{dl.f()}var ml,bl=Xe(Il);try{for(bl.s();!(ml=bl.n()).done;){var yl=ml.value;qc.has(yl)||Cl.has(yl)||qc.set(yl,Kc)}}catch(xQ){bl.e(xQ)}finally{bl.f()}var vl=new Set([].concat(We(Il),We(Yc(Il)))),Zl=js(ec),Gl=function e(t){var n=Ps((function(){var t=js(ec).map((function(e){return Zl[e]}));if(t.length)return e(t)})).sort((function(e,t){return t.Q.size-e.Q.size})),r=ec(),a=r%3,o=1&(r=r/3|0),i=1&(r>>=1),g=2&r;return{B:n,V:a,F:o,S:i,C:g,Q:new Set(t)}}([]);var Bl=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n,[{key:"is_emoji",get:function(){return!0}}]),n}(Ve(Array));function kl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rc,n=[];(function(e){return Dc.has(e)})(e[0])&&n.push("\u25cc");for(var r=0,a=e.length,o=0;o<a;o++){var i=e[o];Rl(i)&&(n.push(oc(e.slice(r,o))),n.push(t(i)),r=o+1)}return n.push(oc(e.slice(r,a))),n.join("")}function Sl(e){return(Rl(e)?"":"".concat(wl(kl([e]))," "))+rc(e)}function wl(e){return'"'.concat(e,'"\u200e')}function Wl(e){for(var t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}function Rl(e){return Uc.has(e)}function Vl(e,t){var n=0;return e.split(Fc).map((function(e){var r,a=ac(e),o={input:a,offset:n};n+=a.length+1;try{var i,g=o.tokens=Nl(a,Nc),s=g.length;if(!s)throw new Error("empty label");var c=g[0],l=s>1||c.is_emoji;if(!l&&c.every((function(e){return e<128})))Wl(r=c),function(e){if(e.length>=4&&e[2]==Ec&&e[3]==Ec)throw new Error("invalid label extension")}(r),i="ASCII";else if(l&&(o.emoji=!0,c=g.flatMap((function(e){return e.is_emoji?[]:e}))),r=g.flatMap((function(e){return!t&&e.is_emoji?Hl(e):e})),Wl(r),c.length){if(Dc.has(r[0]))throw Yl("leading combining mark");for(var u=1;u<s;u++){var f=g[u];if(!f.is_emoji&&Dc.has(f[0]))throw Yl('emoji + combining mark: "'.concat(oc(g[u-1])," + ").concat(kl([f[0]]),'"'))}!function(e){var t=e[0],n=tc.get(t);if(n)throw Yl("leading ".concat(n));for(var r=e.length,a=-1,o=1;o<r;o++){t=e[o];var i=tc.get(t);if(i){if(a==o)throw Yl("".concat(n," + ").concat(i));a=o+1,n=i}}if(a==r)throw Yl("trailing ".concat(n))}(r);var I=We(new Set(c)),C=function(e){var t,n=Pc,r=Xe(e);try{var a=function(){var e=t.value,r=n.filter((function(t){return t.V.has(e)}));if(!r.length)throw n===Pc?Jl(e):xl(n[0],e);if(n=r,1==r.length)return 1};for(r.s();!(t=r.n()).done&&!a(););}catch(xQ){r.e(xQ)}finally{r.f()}return n}(I),d=Ge(C,1)[0];!function(e,t){var n,r=e.V,a=e.M,o=Xe(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(!r.has(i))throw xl(e,i)}}catch(xQ){o.e(xQ)}finally{o.f()}if(a)for(var g=Yc(t),s=1,c=g.length;s<c;s++)if(Lc.has(g[s])){for(var l,u=s+1;u<c&&Lc.has(l=g[u]);u++)for(var f=s;f<u;f++)if(g[f]==l)throw new Error("non-spacing marks: repeated ".concat(Sl(l)));if(u-s>nc)throw new Error("non-spacing marks: too many ".concat(wl(kl(g.slice(s-1,u)))," (").concat(u-s,"/").concat(nc,")"));s=u}}(d,c),function(e,t){var n,r,a=[],o=Xe(t);try{var i,g=function(){var e=r.value,t=qc.get(e);if(t===Kc)return{v:void 0};if(t){var o=t.M.get(e);if(n=n?n.filter((function(e){return o.has(e)})):We(o),!n.length)return{v:void 0}}else a.push(e)};for(o.s();!(r=o.n()).done;)if(i=g())return i.v}catch(xQ){o.e(xQ)}finally{o.f()}if(n){var s,c=Xe(n);try{var l=function(){var t=s.value;if(a.every((function(e){return t.V.has(e)})))throw new Error("whole-script confusable: ".concat(e.N,"/").concat(t.N))};for(c.s();!(s=c.n()).done;)l()}catch(xQ){c.e(xQ)}finally{c.f()}}}(d,I),i=d.N}else i="Emoji";o.type=i}catch(xQ){o.error=xQ}return o.output=r,o}))}function Xl(e){return e.map((function(t){var n=t.input,r=t.error,a=t.output;if(r){var o=r.message;throw new Error(1==e.length?o:"Invalid label ".concat(wl(kl(n)),": ").concat(o))}return oc(a)})).join(Fc)}function Jl(e){return new Error("disallowed character: ".concat(Sl(e)))}function xl(e,t){var n=Sl(t),r=Pc.find((function(e){return e.P.has(t)}));return r&&(n="".concat(r.N," ").concat(n)),new Error("illegal mixture: ".concat(e.N," + ").concat(n))}function Yl(e){return new Error("illegal placement: ".concat(e))}function Nl(e,t){var n=[],r=[];for(e=e.slice().reverse();e.length;){var a=Fl(e);if(a)r.length&&(n.push(t(r)),r=[]),n.push(a);else{var o=e.pop();if(vl.has(o))r.push(o);else{var i,g=Mc.get(o);if(g)(i=r).push.apply(i,We(g));else if(!zc.has(o))throw Jl(o)}}}return r.length&&n.push(t(r)),n}function Hl(e){return e.filter((function(e){return e!=Hc}))}function Fl(e,t){var n,r,a=Gl,o=[],i=e.length;t&&(t.length=0);for(var g=function(){var g=e[--i];if(a=a.B.find((function(e){return e.Q.has(g)})),!a)return 0;if(a.S)r=g;else if(a.C&&g===r)return 0;o.push(g),a.F&&(o.push(Hc),i>0&&e[i-1]==Hc&&i--),a.V&&(n=Kl(o,a),t&&t.push.apply(t,We(e.slice(i).reverse())),e.length=i)};i&&0!==g(););return n}function Kl(e,t){var n=Bl.from(e);return 2==t.V&&n.splice(1,1),n}var El=new Uint8Array(32);function Tl(e){return wn(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Ml(e){var t=$a(function(e){try{return function(e){return Xl(Vl(e))}(e)}catch(t){wn(!1,"invalid ENS name (".concat(t.message,")"),"name",e)}}(e)),n=[];if(0===e.length)return n;for(var r=0,a=0;a<t.length;a++){46===t[a]&&(n.push(Tl(t.slice(r,a))),r=a+1)}return wn(r<t.length,"invalid ENS name; empty component","name",e),n.push(Tl(t.slice(r))),n}function zl(e){wn("string"===typeof e,"invalid ENS name; not a string","name",e);for(var t=El,n=Ml(e);n.length;)t=pa(En([t,pa(n.pop())]));return Kn(t)}El.fill(0);var Dl,Ll="0x0000000000000000000000000000000000000000000000000000000000000000",Ul=BigInt(0),jl=BigInt(1),Ol=BigInt(2),Ql=BigInt(27),Pl=BigInt(28),_l=BigInt(35),ql={};function $l(e){return Dn(nr(e),32)}var eu=new WeakMap,tu=new WeakMap,nu=new WeakMap,ru=new WeakMap;Dl=Symbol.for("nodejs.util.inspect.custom");var au,ou,iu,gu=function(){function e(t,n,r,a){Z(this,e),ln(this,eu,{writable:!0,value:void 0}),ln(this,tu,{writable:!0,value:void 0}),ln(this,nu,{writable:!0,value:void 0}),ln(this,ru,{writable:!0,value:void 0}),Xn(t,ql,"Signature"),In(this,eu,n),In(this,tu,r),In(this,nu,a),In(this,ru,null)}return B(e,[{key:"r",get:function(){return Cn(this,eu)},set:function(e){wn(32===Tn(e),"invalid r","value",e),In(this,eu,Kn(e))}},{key:"s",get:function(){return Cn(this,tu)},set:function(e){wn(32===Tn(e),"invalid s","value",e);var t=Kn(e);wn(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),In(this,tu,t)}},{key:"v",get:function(){return Cn(this,nu)},set:function(e){var t=er(e,"value");wn(27===t||28===t,"invalid v","v",e),In(this,nu,t)}},{key:"networkV",get:function(){return Cn(this,ru)}},{key:"legacyChainId",get:function(){var t=this.networkV;return null==t?null:e.getChainId(t)}},{key:"yParity",get:function(){return 27===this.v?0:1}},{key:"yParityAndS",get:function(){var e=xn(this.s);return this.yParity&&(e[0]|=128),Kn(e)}},{key:"compactSerialized",get:function(){return En([this.r,this.yParityAndS])}},{key:"serialized",get:function(){return En([this.r,this.s,this.yParity?"0x1c":"0x1b"])}},{key:Dl,value:function(){return'Signature { r: "'.concat(this.r,'", s: "').concat(this.s,'", yParity: ').concat(this.yParity,", networkV: ").concat(this.networkV," }")}},{key:"clone",value:function(){var t=new e(ql,this.r,this.s,this.v);return this.networkV&&In(t,ru,this.networkV),t}},{key:"toJSON",value:function(){var e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}}],[{key:"getChainId",value:function(e){var t=Pn(e,"v");return t==Ql||t==Pl?Ul:(wn(t>=_l,"invalid EIP-155 v","v",e),(t-_l)/Ol)}},{key:"getChainIdV",value:function(e,t){return Pn(e)*Ol+BigInt(35+t-27)}},{key:"getNormalizedV",value:function(e){var t=Pn(e);return t===Ul||t===Ql?27:t===jl||t===Pl?28:(wn(t>=_l,"invalid v","v",e),t&jl?27:28)}},{key:"from",value:function(t){function n(e,n){wn(e,n,"signature",t)}if(null==t)return new e(ql,Ll,Ll,27);if("string"===typeof t){var r=xn(t,"signature");if(64===r.length){var a=Kn(r.slice(0,32)),o=r.slice(32,64),i=128&o[0]?28:27;return o[0]&=127,new e(ql,a,Kn(o),i)}if(65===r.length){var g=Kn(r.slice(0,32)),s=r.slice(32,64);n(0===(128&s[0]),"non-canonical s");var c=e.getNormalizedV(r[64]);return new e(ql,g,Kn(s),c)}n(!1,"invalid raw signature length")}if(t instanceof e)return t.clone();var l=t.r;n(null!=l,"missing r");var u=$l(l),f=function(e,t){if(null!=e)return $l(e);if(null!=t){n(Nn(t,32),"invalid yParityAndS");var r=xn(t);return r[0]&=127,Kn(r)}n(!1,"missing s")}(t.s,t.yParityAndS);n(0==(128&xn(f)[0]),"non-canonical s");var I=function(t,r,a){if(null!=t){var o=Pn(t);return{networkV:o>=_l?o:void 0,v:e.getNormalizedV(o)}}if(null!=r)return n(Nn(r,32),"invalid yParityAndS"),{v:128&xn(r)[0]?28:27};if(null!=a){switch(er(a,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),C=I.networkV,d=I.v,A=new e(ql,u,f,d);return C&&In(A,ru,C),n(null==t.yParity||er(t.yParity,"sig.yParity")===A.yParity,"yParity mismatch"),n(null==t.yParityAndS||t.yParityAndS===A.yParityAndS,"yParityAndS mismatch"),A}}]),e}(),su=n(5856),cu=n.t(su,2),lu=BigInt(0),uu=BigInt(1),fu=BigInt(2),Iu=BigInt(3),Cu=BigInt(8),du=Object.freeze({a:lu,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:uu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Au=function(e,t){return(e+t/fu)/t},hu=BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),pu=function(e){var t=du.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-uu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),g=Au(o*e,t),s=Au(-r*e,t),c=Ou(e-g*n-s*a,t),l=Ou(-g*r-s*o,t),u=c>i,f=l>i;if(u&&(c=t-c),f&&(l=t-l),c>i||l>i)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:f,k2:l}},mu=32,bu=32,yu=mu+1,vu=2*mu+1;function Zu(e){var t=du.a,n=du.b,r=Ou(e*e),a=Ou(r*e);return Ou(a+t*e+n)}var Gu=du.a===lu,Bu=function(e){d(n,e);var t=p(n);function n(e){return Z(this,n),t.call(this,e)}return B(n)}(Ve(Error));function ku(e){if(!(e instanceof Su))throw new TypeError("JacobianPoint expected")}var Su=function(){function e(t,n,r){Z(this,e),this.x=t,this.y=n,this.z=r}return B(e,[{key:"equals",value:function(e){ku(e);var t=this.x,n=this.y,r=this.z,a=e.x,o=e.y,i=e.z,g=Ou(r*r),s=Ou(i*i),c=Ou(t*s),l=Ou(a*g),u=Ou(Ou(n*i)*s),f=Ou(Ou(o*r)*g);return c===l&&u===f}},{key:"negate",value:function(){return new e(this.x,Ou(-this.y),this.z)}},{key:"double",value:function(){var t=this.x,n=this.y,r=this.z,a=Ou(t*t),o=Ou(n*n),i=Ou(o*o),g=t+o,s=Ou(fu*(Ou(g*g)-a-i)),c=Ou(Iu*a),l=Ou(c*c),u=Ou(l-fu*s);return new e(u,Ou(c*(s-u)-Cu*i),Ou(fu*n*r))}},{key:"add",value:function(t){ku(t);var n=this.x,r=this.y,a=this.z,o=t.x,i=t.y,g=t.z;if(o===lu||i===lu)return this;if(n===lu||r===lu)return t;var s=Ou(a*a),c=Ou(g*g),l=Ou(n*c),u=Ou(o*s),f=Ou(Ou(r*g)*c),I=Ou(Ou(i*a)*s),C=Ou(u-l),d=Ou(I-f);if(C===lu)return d===lu?this.double():e.ZERO;var A=Ou(C*C),h=Ou(C*A),p=Ou(l*A),m=Ou(d*d-h-fu*p);return new e(m,Ou(d*(p-m)-f*h),Ou(a*g*C))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiplyUnsafe",value:function(t){var n=e.ZERO;if("bigint"===typeof t&&t===lu)return n;var r=ju(t);if(r===uu)return this;if(!Gu){for(var a=n,o=this;r>lu;)r&uu&&(a=a.add(o)),o=o.double(),r>>=uu;return a}for(var i=pu(r),g=i.k1neg,s=i.k1,c=i.k2neg,l=i.k2,u=n,f=n,I=this;s>lu||l>lu;)s&uu&&(u=u.add(I)),l&uu&&(f=f.add(I)),I=I.double(),s>>=uu,l>>=uu;return g&&(u=u.negate()),c&&(f=f.negate()),f=new e(Ou(f.x*hu),f.y,f.z),u.add(f)}},{key:"precomputeWindow",value:function(e){for(var t=Gu?128/e+1:256/e+1,n=[],r=this,a=r,o=0;o<t;o++){a=r,n.push(a);for(var i=1;i<Math.pow(2,e-1);i++)a=a.add(r),n.push(a);r=a.double()}return n}},{key:"wNAF",value:function(t,n){!n&&this.equals(e.BASE)&&(n=Ru.BASE);var r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=n&&Wu.get(n);a||(a=this.precomputeWindow(r),n&&1!==r&&(a=e.normalizeZ(a),Wu.set(n,a)));for(var o=e.ZERO,i=e.BASE,g=1+(Gu?128/r:256/r),s=Math.pow(2,r-1),c=BigInt(Math.pow(2,r)-1),l=Math.pow(2,r),u=BigInt(r),f=0;f<g;f++){var I=f*s,C=Number(t&c);t>>=u,C>s&&(C-=l,t+=uu);var d=I,A=I+Math.abs(C)-1,h=f%2!==0,p=C<0;0===C?i=i.add(wu(h,a[d])):o=o.add(wu(p,a[A]))}return{p:o,f:i}}},{key:"multiply",value:function(t,n){var r,a,o=ju(t);if(Gu){var i=pu(o),g=i.k1neg,s=i.k1,c=i.k2neg,l=i.k2,u=this.wNAF(s,n),f=u.p,I=u.f,C=this.wNAF(l,n),d=C.p,A=C.f;f=wu(g,f),d=new e(Ou((d=wu(c,d)).x*hu),d.y,d.z),r=f.add(d),a=I.add(A)}else{var h=this.wNAF(o,n);r=h.p,a=h.f}return e.normalizeZ([r,a])[0]}},{key:"toAffine",value:function(t){var n=this.x,r=this.y,a=this.z,o=this.equals(e.ZERO);null==t&&(t=o?Cu:Pu(a));var i=t,g=Ou(i*i),s=Ou(g*i),c=Ou(n*g),l=Ou(r*s),u=Ou(a*i);if(o)return Ru.ZERO;if(u!==uu)throw new Error("invZ was invalid");return new Ru(c,l)}}],[{key:"fromAffine",value:function(t){if(!(t instanceof Ru))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Ru.ZERO)?e.ZERO:new e(t.x,t.y,uu)}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:du.P,n=new Array(e.length),r=e.reduce((function(e,r,a){return r===lu?e:(n[a]=e,Ou(e*r,t))}),uu),a=Pu(r,t);return e.reduceRight((function(e,r,a){return r===lu?e:(n[a]=Ou(e*n[a],t),Ou(e*r,t))}),a),n}(e.map((function(e){return e.z})));return e.map((function(e,n){return e.toAffine(t[n])}))}},{key:"normalizeZ",value:function(t){return e.toAffineBatch(t).map(e.fromAffine)}}]),e}();function wu(e,t){var n=t.negate();return e?n:t}Su.BASE=new Su(du.Gx,du.Gy,uu),Su.ZERO=new Su(lu,uu,lu);var Wu=new WeakMap,Ru=function(){function e(t,n){Z(this,e),this.x=t,this.y=n}return B(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,Wu.delete(this)}},{key:"hasEvenY",value:function(){return this.y%fu===lu}},{key:"toRawBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Du(this.toHex(e))}},{key:"toHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Eu(this.x);if(e){var n=this.hasEvenY()?"02":"03";return"".concat(n).concat(t)}return"04".concat(t).concat(Eu(this.y))}},{key:"toHexX",value:function(){return this.toHex(!0).slice(2)}},{key:"toRawX",value:function(){return this.toRawBytes(!0).slice(1)}},{key:"assertValidity",value:function(){var e="Point is not on elliptic curve",t=this.x,n=this.y;if(!ef(t)||!ef(n))throw new Error(e);var r=Ou(n*n);if(Ou(r-Zu(t))!==lu)throw new Error(e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(this.x,Ou(-this.y))}},{key:"double",value:function(){return Su.fromAffine(this).double().toAffine()}},{key:"add",value:function(e){return Su.fromAffine(this).add(Su.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return Su.fromAffine(this).multiply(e,this).toAffine()}},{key:"multiplyAndAddUnsafe",value:function(t,n,r){var a=Su.fromAffine(this),o=n===lu||n===uu||this!==e.BASE?a.multiplyUnsafe(n):a.multiply(n),i=Su.fromAffine(t).multiplyUnsafe(r),g=o.add(i);return g.equals(Su.ZERO)?void 0:g.toAffine()}}],[{key:"fromCompressedHex",value:function(t){var n=32===t.length,r=Lu(n?t:t.subarray(1));if(!ef(r))throw new Error("Point is not on curve");var a=function(e){var t=du.P,n=BigInt(6),r=BigInt(11),a=BigInt(22),o=BigInt(23),i=BigInt(44),g=BigInt(88),s=e*e*e%t,c=s*s*e%t,l=Qu(c,Iu)*c%t,u=Qu(l,Iu)*c%t,f=Qu(u,fu)*s%t,I=Qu(f,r)*f%t,C=Qu(I,a)*I%t,d=Qu(C,i)*C%t,A=Qu(d,g)*d%t,h=Qu(A,i)*C%t,p=Qu(h,Iu)*c%t,m=Qu(p,o)*I%t,b=Qu(m,n)*s%t,y=Qu(b,fu),v=y*y%t;if(v!==e)throw new Error("Cannot find square root");return y}(Zu(r)),o=(a&uu)===uu;n?o&&(a=Ou(-a)):1===(1&t[0])!==o&&(a=Ou(-a));var i=new e(r,a);return i.assertValidity(),i}},{key:"fromUncompressedHex",value:function(t){var n=new e(Lu(t.subarray(1,mu+1)),Lu(t.subarray(mu+1,2*mu+1)));return n.assertValidity(),n}},{key:"fromHex",value:function(e){var t=Uu(e),n=t.length,r=t[0];if(n===mu)return this.fromCompressedHex(t);if(n===yu&&(2===r||3===r))return this.fromCompressedHex(t);if(n===vu&&4===r)return this.fromUncompressedHex(t);throw new Error("Point.fromHex: received invalid point. Expected 32-".concat(yu," compressed bytes or ").concat(vu," uncompressed bytes, not ").concat(n))}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(nf(t))}},{key:"fromSignature",value:function(t,n,r){var a=af(n),o=a.r,i=a.s;if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");var g=_u(Uu(t)),s=du.n,c=2===r||3===r?o+s:o,l=Pu(c,s),u=Ou(-g*l,s),f=Ou(i*l,s),I=1&r?"03":"02",C=e.fromHex(I+Eu(c)),d=e.BASE.multiplyAndAddUnsafe(C,u,f);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}}]),e}();function Vu(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Xu(e){if(e.length<2||2!==e[0])throw new Error("Invalid signature integer tag: ".concat(Nu(e)));var t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Lu(n),left:e.subarray(t+2)}}Ru.BASE=new Ru(du.Gx,du.Gy),Ru.ZERO=new Ru(lu,lu);var Ju=function(){function e(t,n){Z(this,e),this.r=t,this.s=n,this.assertValidity()}return B(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!$u(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!$u(t))throw new Error("Invalid Signature: s must be 0 < s < n")}},{key:"hasHighS",value:function(){var e=du.n>>uu;return this.s>e}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,Ou(-this.s,du.n)):this}},{key:"toDERRawBytes",value:function(){return Du(this.toDERHex())}},{key:"toDERHex",value:function(){var e=Vu(Mu(this.s)),t=Vu(Mu(this.r)),n=e.length/2,r=t.length/2,a=Mu(n),o=Mu(r),i=Mu(r+n+4);return"30".concat(i,"02").concat(o).concat(t,"02").concat(a).concat(e)}},{key:"toRawBytes",value:function(){return this.toDERRawBytes()}},{key:"toHex",value:function(){return this.toDERHex()}},{key:"toCompactRawBytes",value:function(){return Du(this.toCompactHex())}},{key:"toCompactHex",value:function(){return Eu(this.r)+Eu(this.s)}}],[{key:"fromCompact",value:function(t){var n=t instanceof Uint8Array,r="Signature.fromCompact";if("string"!==typeof t&&!n)throw new TypeError("".concat(r,": Expected string or Uint8Array"));var a=n?Nu(t):t;if(128!==a.length)throw new Error("".concat(r,": Expected 64-byte hex"));return new e(zu(a.slice(0,64)),zu(a.slice(64,128)))}},{key:"fromDER",value:function(t){var n=t instanceof Uint8Array;if("string"!==typeof t&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");var r=function(e){if(e.length<2||48!=e[0])throw new Error("Invalid signature tag: ".concat(Nu(e)));if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");var t=Xu(e.subarray(2)),n=t.data,r=Xu(t.left),a=r.data,o=r.left;if(o.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(Nu(o)));return{r:n,s:a}}(n?t:Du(t));return new e(r.r,r.s)}},{key:"fromHex",value:function(e){return this.fromDER(e)}}]),e}();function xu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];for(var r=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(r),o=0,i=0;o<t.length;o++){var g=t[o];a.set(g,i),i+=g.length}return a}var Yu=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function Nu(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t="",n=0;n<e.length;n++)t+=Yu[e[n]];return t}var Hu,Fu,Ku=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Eu(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(lu<=e&&e<Ku))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Tu(e){var t=Du(Eu(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function Mu(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function zu(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function Du(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);for(var t=new Uint8Array(e.length/2),n=0;n<t.length;n++){var r=2*n,a=e.slice(r,r+2),o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Lu(e){return zu(Nu(e))}function Uu(e){return e instanceof Uint8Array?Uint8Array.from(e):Du(e)}function ju(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&$u(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Ou(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:du.P,n=e%t;return n>=lu?n:t+n}function Qu(e,t){for(var n=du.P,r=e;t-- >lu;)r*=r,r%=n;return r}function Pu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:du.P;if(e===lu||t<=lu)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var n=Ou(e,t),r=t,a=lu,o=uu,i=uu,g=lu;n!==lu;){var s=r/n,c=r%n,l=a-i*s,u=o-g*s;r=n,n=c,a=i,o=g,i=l,g=u}if(r!==uu)throw new Error("invert: does not exist");return Ou(a,t)}function _u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){var t=8*e.length-8*bu,n=Lu(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;var r=du.n;return n>=r?n-r:n}var qu=function(e,t){function n(e,t){if(Z(this,n),this.hashLen=e,this.qByteLen=t,"number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}return B(n,[{key:"hmac",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cf.hmacSha256.apply(Cf,[this.k].concat(t))}},{key:"hmacSync",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fu.apply(void 0,[this.k].concat(t))}},{key:"checkSync",value:function(){if("function"!==typeof Fu)throw new Bu("hmacSha256Sync needs to be set")}},{key:"incr",value:function(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}},{key:"reseed",value:function(){return(e=e||hn(dn().mark((function e(){var t,n=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:new Uint8Array,e.next=3,this.hmac(this.v,Uint8Array.from([0]),t);case 3:return this.k=e.sent,e.next=6,this.hmac(this.v);case 6:if(this.v=e.sent,0!==t.length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.hmac(this.v,Uint8Array.from([1]),t);case 11:return this.k=e.sent,e.next=14,this.hmac(this.v);case 14:this.v=e.sent;case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"reseedSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}},{key:"generate",value:function(){return(t=t||hn(dn().mark((function e(){var t,n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.incr(),t=0,n=[];case 3:if(!(t<this.qByteLen)){e.next=12;break}return e.next=6,this.hmac(this.v);case 6:this.v=e.sent,r=this.v.slice(),n.push(r),t+=this.v.length,e.next=3;break;case 12:return e.abrupt("return",xu.apply(void 0,n));case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"generateSync",value:function(){this.checkSync(),this.incr();for(var e=0,t=[];e<this.qByteLen;){this.v=this.hmacSync(this.v);var n=this.v.slice();t.push(n),e+=this.v.length}return xu.apply(void 0,t)}}]),n}();function $u(e){return lu<e&&e<du.n}function ef(e){return lu<e&&e<du.P}function tf(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=du.n,o=_u(e,!0);if($u(o)){var i=Pu(o,a),g=Ru.BASE.multiply(o),s=Ou(g.x,a);if(s!==lu){var c=Ou(i*Ou(t+n*s,a),a);if(c!==lu){var l=new Ju(s,c),u=(g.x===l.r?0:2)|Number(g.y&uu);return r&&l.hasHighS()&&(l=l.normalizeS(),u^=1),{sig:l,recovery:u}}}}}function nf(e){var t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(e.length!==2*bu)throw new Error("Expected 32 bytes of private key");t=zu(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==bu)throw new Error("Expected 32 bytes of private key");t=Lu(e)}if(!$u(t))throw new Error("Expected private key: 0 < key < n");return t}function rf(e){return e instanceof Ru?(e.assertValidity(),e):Ru.fromHex(e)}function af(e){if(e instanceof Ju)return e.assertValidity(),e;try{return Ju.fromDER(e)}catch(t){return Ju.fromCompact(e)}}function of(e){var t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===yu||r===vu:n?r===2*yu||r===2*vu:e instanceof Ru}function gf(e){return Lu(e.length>mu?e.slice(0,mu):e)}function sf(e){var t=gf(e),n=Ou(t,du.n);return cf(n<lu?t:n)}function cf(e){return Tu(e)}function lf(e,t,n){if(null==e)throw new Error('sign: expected valid message hash, not "'.concat(e,'"'));var r=Uu(e),a=nf(t),o=[cf(a),sf(r)];if(null!=n){!0===n&&(n=Cf.randomBytes(mu));var i=Uu(n);if(i.length!==mu)throw new Error("sign: Expected ".concat(mu," bytes of extra data"));o.push(i)}return{seed:xu.apply(void 0,o),m:gf(r),d:a}}function uf(e,t){var n=e.sig,r=e.recovery,a=Object.assign({canonical:!0,der:!0},t),o=a.der,i=a.recovered,g=o?n.toDERRawBytes():n.toCompactRawBytes();return i?[g,r]:g}Ru.BASE._setWindowSize(8);var ff={node:cu,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},If={},Cf={bytesToHex:Nu,hexToBytes:Du,concatBytes:xu,mod:Ou,invert:Pu,isValidPrivateKey:function(e){try{return nf(e),!0}catch(t){return!1}},_bigintTo32Bytes:Tu,_normalizePrivateKey:nf,hashToPrivateKey:function(e){e=Uu(e);var t=bu+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Tu(Ou(Lu(e),du.n-uu)+uu)},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(ff.web)return ff.web.getRandomValues(new Uint8Array(e));if(ff.node){var t=ff.node.randomBytes;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return Cf.hashToPrivateKey(Cf.randomBytes(bu+8))},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ru.BASE,n=t===Ru.BASE?t:new Ru(t.x,t.y);return n._setWindowSize(e),n.multiply(Iu),n},sha256:function(){return(au=au||hn(dn().mark((function e(){var t,n,r,a,o,i,g=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=g.length,n=new Array(t),r=0;r<t;r++)n[r]=g[r];if(!ff.web){e.next=8;break}return e.next=4,ff.web.subtle.digest("SHA-256",xu.apply(void 0,n));case 4:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 8:if(!ff.node){e.next=15;break}return o=ff.node.createHash,i=o("sha256"),n.forEach((function(e){return i.update(e)})),e.abrupt("return",Uint8Array.from(i.digest()));case 15:throw new Error("The environment doesn't have sha256 function");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)},hmacSha256:function(e){return(ou=ou||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c,l=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=l.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=l[a];if(!ff.web){e.next=12;break}return e.next=4,ff.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);case 4:return o=e.sent,i=xu.apply(void 0,r),e.next=8,ff.web.subtle.sign("HMAC",o,i);case 8:return g=e.sent,e.abrupt("return",new Uint8Array(g));case 12:if(!ff.node){e.next=19;break}return s=ff.node.createHmac,c=s("sha256",t),r.forEach((function(e){return c.update(e)})),e.abrupt("return",Uint8Array.from(c.digest()));case 19:throw new Error("The environment doesn't have hmac-sha256 function");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:function(e){return(iu=iu||hn(dn().mark((function e(t){var n,r,a,o,i,g=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=If[t])){e.next=7;break}return e.next=4,Cf.sha256(Uint8Array.from(t,(function(e){return e.charCodeAt(0)})));case 4:r=e.sent,n=xu(r,r),If[t]=n;case 7:for(a=g.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=g[i];return e.abrupt("return",Cf.sha256.apply(Cf,[n].concat(o)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},taggedHashSync:function(e){if("function"!==typeof Hu)throw new Bu("sha256Sync is undefined, you need to set it");var t=If[e];if(void 0===t){var n=Hu(Uint8Array.from(e,(function(e){return e.charCodeAt(0)})));t=xu(n,n),If[e]=t}for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return Hu.apply(void 0,[t].concat(a))},_JacobianPoint:Su};Object.defineProperties(Cf,{sha256Sync:{configurable:!1,get:function(){return Hu},set:function(e){Hu||(Hu=e)}},hmacSha256Sync:{configurable:!1,get:function(){return Fu},set:function(e){Fu||(Fu=e)}}});var df=function(e){d(n,e);var t=p(n);function n(e,r){var a;Z(this,n),(a=t.call(this)).finished=!1,a.destroyed=!1,kr.hash(e);var o=Kr(r);if(a.iHash=e.create(),!(a.iHash instanceof Er))throw new TypeError("Expected instance of class which extends utils.Hash");var i=a.blockLen=a.iHash.blockLen;a.outputLen=a.iHash.outputLen;var g=new Uint8Array(i);g.set(o.length>a.iHash.blockLen?e.create().update(o).digest():o);for(var s=0;s<g.length;s++)g[s]^=54;a.iHash.update(g),a.oHash=e.create();for(var c=0;c<g.length;c++)g[c]^=106;return a.oHash.update(g),g.fill(0),a}return B(n,[{key:"update",value:function(e){return kr.exists(this),this.iHash.update(e),this}},{key:"digestInto",value:function(e){kr.exists(this),kr.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}},{key:"digest",value:function(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}},{key:"_cloneInto",value:function(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,n=this.iHash,r=this.finished,a=this.destroyed,o=this.blockLen,i=this.outputLen;return e.finished=r,e.destroyed=a,e.blockLen=o,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}]),n}(Er),Af=function(e,t,n){return new df(e,t).update(n).digest()};function hf(e,t,n,r){kr.hash(e);var a=Mr({dkLen:32,asyncTick:10},r),o=a.c,i=a.dkLen,g=a.asyncTick;if(kr.number(o),kr.number(i),kr.number(g),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");var s=Kr(t),c=Kr(n),l=new Uint8Array(i),u=Af.create(e,s),f=u._cloneInto().update(c);return{c:o,dkLen:i,asyncTick:g,DK:l,PRF:u,PRFSalt:f}}function pf(e,t,n,r,a){return e.destroy(),t.destroy(),r&&r.destroy(),a.fill(0),n}function mf(e,t,n,r){for(var a,o=hf(e,t,n,r),i=o.c,g=o.dkLen,s=o.DK,c=o.PRF,l=o.PRFSalt,u=new Uint8Array(4),f=Yr(u),I=new Uint8Array(c.outputLen),C=1,d=0;d<g;C++,d+=c.outputLen){var A=s.subarray(d,d+c.outputLen);f.setInt32(0,C,!1),(a=l._cloneInto(a)).update(u).digestInto(I),A.set(I.subarray(0,A.length));for(var h=1;h<i;h++){c._cloneInto(a).update(I).digestInto(I);for(var p=0;p<A.length;p++)A[p]^=I[p]}}return pf(c,l,s,a,I)}Af.create=function(e,t){return new df(e,t)};var bf=function(e){d(n,e);var t=p(n);function n(e,r,a,o){var i;return Z(this,n),(i=t.call(this)).blockLen=e,i.outputLen=r,i.padOffset=a,i.isLE=o,i.finished=!1,i.length=0,i.pos=0,i.destroyed=!1,i.buffer=new Uint8Array(e),i.view=Yr(i.buffer),i}return B(n,[{key:"update",value:function(e){kr.exists(this);for(var t=this.view,n=this.buffer,r=this.blockLen,a=(e=Kr(e)).length,o=0;o<a;){var i=Math.min(r-this.pos,a-o);if(i!==r)n.set(e.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(t,0),this.pos=0);else for(var g=Yr(e);r<=a-o;o+=r)this.process(g,o)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){kr.exists(this),kr.output(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,a=this.isLE,o=this.pos;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(var i=o;i<r;i++)t[i]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);var a=BigInt(32),o=BigInt(4294967295),i=Number(n>>a&o),g=Number(n&o),s=r?4:0,c=r?0:4;e.setUint32(t+s,i,r),e.setUint32(t+c,g,r)}(n,r-8,BigInt(8*this.length),a),this.process(n,0);var g=Yr(e);this.get().forEach((function(e,t){return g.setUint32(4*t,e,a)}))}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,We(this.get()));var n=this.blockLen,r=this.buffer,a=this.length,o=this.finished,i=this.destroyed,g=this.pos;return e.length=a,e.pos=g,e.finished=o,e.destroyed=i,a%n&&e.buffer.set(r),e}}]),n}(Er),yf=function(e,t,n){return e&t^~e&n},vf=function(e,t,n){return e&t^e&n^t&n},Zf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bf=new Uint32Array(64),kf=function(e){d(n,e);var t=p(n);function n(){var e;return Z(this,n),(e=t.call(this,64,32,8,!1)).A=0|Gf[0],e.B=0|Gf[1],e.C=0|Gf[2],e.D=0|Gf[3],e.E=0|Gf[4],e.F=0|Gf[5],e.G=0|Gf[6],e.H=0|Gf[7],e}return B(n,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,a,o,i,g){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|a,this.F=0|o,this.G=0|i,this.H=0|g}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Bf[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var a=Bf[r-15],o=Bf[r-2],i=Nr(a,7)^Nr(a,18)^a>>>3,g=Nr(o,17)^Nr(o,19)^o>>>10;Bf[r]=g+Bf[r-7]+i+Bf[r-16]|0}for(var s=this.A,c=this.B,l=this.C,u=this.D,f=this.E,I=this.F,C=this.G,d=this.H,A=0;A<64;A++){var h=d+(Nr(f,6)^Nr(f,11)^Nr(f,25))+yf(f,I,C)+Zf[A]+Bf[A]|0,p=(Nr(s,2)^Nr(s,13)^Nr(s,22))+vf(s,c,l)|0;d=C,C=I,I=f,f=u+h|0,u=l,l=c,c=s,s=h+p|0}s=s+this.A|0,c=c+this.B|0,l=l+this.C|0,u=u+this.D|0,f=f+this.E|0,I=I+this.F|0,C=C+this.G|0,d=d+this.H|0,this.set(s,c,l,u,f,I,C,d)}},{key:"roundClean",value:function(){Bf.fill(0)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}]),n}(bf),Sf=zr((function(){return new kf})),wf=Jr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((function(e){return BigInt(e)}))),Wf=Ge(wf,2),Rf=Wf[0],Vf=Wf[1],Xf=new Uint32Array(80),Jf=new Uint32Array(80),xf=function(e){d(n,e);var t=p(n);function n(){var e;return Z(this,n),(e=t.call(this,128,64,16,!1)).Ah=1779033703,e.Al=-205731576,e.Bh=-1150833019,e.Bl=-2067093701,e.Ch=1013904242,e.Cl=-23791573,e.Dh=-1521486534,e.Dl=1595750129,e.Eh=1359893119,e.El=-1377402159,e.Fh=-1694144372,e.Fl=725511199,e.Gh=528734635,e.Gl=-79577749,e.Hh=1541459225,e.Hl=327033209,e}return B(n,[{key:"get",value:function(){return[this.Ah,this.Al,this.Bh,this.Bl,this.Ch,this.Cl,this.Dh,this.Dl,this.Eh,this.El,this.Fh,this.Fl,this.Gh,this.Gl,this.Hh,this.Hl]}},{key:"set",value:function(e,t,n,r,a,o,i,g,s,c,l,u,f,I,C,d){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|a,this.Cl=0|o,this.Dh=0|i,this.Dl=0|g,this.Eh=0|s,this.El=0|c,this.Fh=0|l,this.Fl=0|u,this.Gh=0|f,this.Gl=0|I,this.Hh=0|C,this.Hl=0|d}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Xf[n]=e.getUint32(t),Jf[n]=e.getUint32(t+=4);for(var r=16;r<80;r++){var a=0|Xf[r-15],o=0|Jf[r-15],i=Jr.rotrSH(a,o,1)^Jr.rotrSH(a,o,8)^Jr.shrSH(a,o,7),g=Jr.rotrSL(a,o,1)^Jr.rotrSL(a,o,8)^Jr.shrSL(a,o,7),s=0|Xf[r-2],c=0|Jf[r-2],l=Jr.rotrSH(s,c,19)^Jr.rotrBH(s,c,61)^Jr.shrSH(s,c,6),u=Jr.rotrSL(s,c,19)^Jr.rotrBL(s,c,61)^Jr.shrSL(s,c,6),f=Jr.add4L(g,u,Jf[r-7],Jf[r-16]),I=Jr.add4H(f,i,l,Xf[r-7],Xf[r-16]);Xf[r]=0|I,Jf[r]=0|f}for(var C=this.Ah,d=this.Al,A=this.Bh,h=this.Bl,p=this.Ch,m=this.Cl,b=this.Dh,y=this.Dl,v=this.Eh,Z=this.El,G=this.Fh,B=this.Fl,k=this.Gh,S=this.Gl,w=this.Hh,W=this.Hl,R=0;R<80;R++){var V=Jr.rotrSH(v,Z,14)^Jr.rotrSH(v,Z,18)^Jr.rotrBH(v,Z,41),X=Jr.rotrSL(v,Z,14)^Jr.rotrSL(v,Z,18)^Jr.rotrBL(v,Z,41),J=v&G^~v&k,x=Z&B^~Z&S,Y=Jr.add5L(W,X,x,Vf[R],Jf[R]),N=Jr.add5H(Y,w,V,J,Rf[R],Xf[R]),H=0|Y,F=Jr.rotrSH(C,d,28)^Jr.rotrBH(C,d,34)^Jr.rotrBH(C,d,39),K=Jr.rotrSL(C,d,28)^Jr.rotrBL(C,d,34)^Jr.rotrBL(C,d,39),E=C&A^C&p^A&p,T=d&h^d&m^h&m;w=0|k,W=0|S,k=0|G,S=0|B,G=0|v,B=0|Z;var M=Jr.add(0|b,0|y,0|N,0|H);v=M.h,Z=M.l,b=0|p,y=0|m,p=0|A,m=0|h,A=0|C,h=0|d;var z=Jr.add3L(H,K,T);C=Jr.add3H(z,N,F,E),d=0|z}var D=Jr.add(0|this.Ah,0|this.Al,0|C,0|d);C=D.h,d=D.l;var L=Jr.add(0|this.Bh,0|this.Bl,0|A,0|h);A=L.h,h=L.l;var U=Jr.add(0|this.Ch,0|this.Cl,0|p,0|m);p=U.h,m=U.l;var j=Jr.add(0|this.Dh,0|this.Dl,0|b,0|y);b=j.h,y=j.l;var O=Jr.add(0|this.Eh,0|this.El,0|v,0|Z);v=O.h,Z=O.l;var Q=Jr.add(0|this.Fh,0|this.Fl,0|G,0|B);G=Q.h,B=Q.l;var P=Jr.add(0|this.Gh,0|this.Gl,0|k,0|S);k=P.h,S=P.l;var _=Jr.add(0|this.Hh,0|this.Hl,0|w,0|W);w=_.h,W=_.l,this.set(C,d,A,h,p,m,b,y,v,Z,G,B,k,S,w,W)}},{key:"roundClean",value:function(){Xf.fill(0),Jf.fill(0)}},{key:"destroy",value:function(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}]),n}(bf),Yf=function(e){d(n,e);var t=p(n);function n(){var e;return Z(this,n),(e=t.call(this)).Ah=573645204,e.Al=-64227540,e.Bh=-1621794909,e.Bl=-934517566,e.Ch=596883563,e.Cl=1867755857,e.Dh=-1774684391,e.Dl=1497426621,e.Eh=-1775747358,e.El=-1467023389,e.Fh=-1101128155,e.Fl=1401305490,e.Gh=721525244,e.Gl=746961066,e.Hh=246885852,e.Hl=-2117784414,e.outputLen=32,e}return B(n)}(xf),Nf=function(e){d(n,e);var t=p(n);function n(){var e;return Z(this,n),(e=t.call(this)).Ah=-876896931,e.Al=-1056596264,e.Bh=1654270250,e.Bl=914150663,e.Ch=-1856437926,e.Cl=812702999,e.Dh=355462360,e.Dl=-150054599,e.Eh=1731405415,e.El=-4191439,e.Fh=-1900787065,e.Fl=1750603025,e.Gh=-619958771,e.Gl=1694076839,e.Hh=1203062813,e.Hl=-1090891868,e.outputLen=48,e}return B(n)}(xf),Hf=zr((function(){return new xf}));zr((function(){return new Yf})),zr((function(){return new Nf}));var Ff=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("unable to locate global object")}(),Kf=Ff.crypto||Ff.msCrypto;function Ef(e){switch(e){case"sha256":return Sf.create();case"sha512":return Hf.create()}wn(!1,"invalid hashing algorithm name","algorithm",e)}var Tf=!1,Mf=function(e,t,n){return function(e,t){var n={sha256:Sf,sha512:Hf}[e];return wn(null!=n,"invalid hmac algorithm","algorithm",e),Af.create(n,t)}(e,t).update(n).digest()},zf=Mf;function Df(e,t,n){var r=xn(t,"key"),a=xn(n,"data");return Kn(zf(e,r,a))}Df._=Mf,Df.lock=function(){Tf=!0},Df.register=function(e){if(Tf)throw new Error("computeHmac is locked");zf=e},Object.freeze(Df),Cf.hmacSha256Sync=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xn(Df("sha256",e,En(n)))};var Lf=new WeakMap,Uf=function(){function e(t){Z(this,e),ln(this,Lf,{writable:!0,value:void 0}),wn(32===Tn(t),"invalid private key","privateKey","[REDACTED]"),In(this,Lf,Kn(t))}return B(e,[{key:"privateKey",get:function(){return Cn(this,Lf)}},{key:"publicKey",get:function(){return e.computePublicKey(Cn(this,Lf))}},{key:"compressedPublicKey",get:function(){return e.computePublicKey(Cn(this,Lf),!0)}},{key:"sign",value:function(e){wn(32===Tn(e),"invalid digest length","digest",e);var t=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=lf(e,t,r.extraEntropy),o=a.seed,i=a.m,g=a.d,s=new qu(32,bu);for(s.reseedSync(o);!(n=tf(s.generateSync(),i,g,r.canonical));)s.reseedSync();return uf(n,r)}(Yn(e),Yn(Cn(this,Lf)),{recovered:!0,canonical:!0}),n=Ge(t,2),r=n[0],a=n[1],o=Ju.fromHex(r);return gu.from({r:tr("0x"+o.r.toString(16),32),s:tr("0x"+o.s.toString(16),32),v:a?28:27})}},{key:"computeSharedSecret",value:function(t){var n=e.computePublicKey(t);return Kn(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(of(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!of(t))throw new TypeError("getSharedSecret: second arg must be public key");var r=rf(t);return r.assertValidity(),r.multiply(nf(e)).toRawBytes(n)}(Yn(Cn(this,Lf)),xn(n)))}}],[{key:"computePublicKey",value:function(e,t){var n=xn(e,"key");if(32===n.length){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ru.fromPrivateKey(e).toRawBytes(t)}(n,!!t);return Kn(r)}if(64===n.length){var a=new Uint8Array(65);a[0]=4,a.set(n,1),n=a}return Kn(Ru.fromHex(n).toRawBytes(t))}},{key:"recoverPublicKey",value:function(e,t){wn(32===Tn(e),"invalid digest length","digest",e);var n=gu.from(t),r=Ju.fromCompact(Yn(En([n.r,n.s]))).toDERRawBytes(),a=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ru.fromSignature(e,t,n).toRawBytes(r)}(Yn(e),r,n.yParity);return wn(null!=a,"invalid signature for digest","signature",t),Kn(a)}},{key:"addPoints",value:function(t,n,r){var a=Ru.fromHex(e.computePublicKey(t).substring(2)),o=Ru.fromHex(e.computePublicKey(n).substring(2));return"0x"+a.add(o).toHex(!!r)}}]),e}();function jf(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return"0x"+t}function Of(e,t,n){for(var r=0,a=0;a<n;a++)r=256*r+e[t+a];return r}function Qf(e,t,n,r){for(var a=[];n<t+1+r;){var o=Pf(e,n);a.push(o.result),Sn((n+=o.consumed)<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:a}}function Pf(e,t){Sn(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});var n=function(t){Sn(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){var r=e[t]-247;n(t+1+r);var a=Of(e,t+1,r);return n(t+1+r+a),Qf(e,t,t+1+r,r+a)}if(e[t]>=192){var o=e[t]-192;return n(t+1+o),Qf(e,t,t+1,o)}if(e[t]>=184){var i=e[t]-183;n(t+1+i);var g=Of(e,t+1,i);return n(t+1+i+g),{consumed:1+i+g,result:Kn(e.slice(t+1+i,t+1+i+g))}}if(e[t]>=128){var s=e[t]-128;return n(t+1+s),{consumed:1+s,result:Kn(e.slice(t+1,t+1+s))}}return{consumed:1,result:jf(e[t])}}function _f(e){var t=xn(e,"data"),n=Pf(t,0);return wn(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function qf(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function $f(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat($f(e))})),t.length<=55)return t.unshift(192+t.length),t;var n=qf(t.length);return n.unshift(247+n.length),n.concat(t)}var r=Array.prototype.slice.call(xn(e,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;var a=qf(r.length);return a.unshift(183+a.length),a.concat(r)}var eI="0123456789abcdef";function tI(e){var t,n="0x",r=Xe($f(e));try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=eI[a>>4],n+=eI[15&a]}}catch(xQ){r.e(xQ)}finally{r.f()}return n}function nI(e){return wa(pa("0x"+("string"===typeof e?Uf.computePublicKey(e,!1):e.publicKey).substring(4)).substring(26))}var rI=BigInt(0),aI=BigInt(2),oI=BigInt(27),iI=BigInt(28),gI=BigInt(35),sI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function cI(e){return"0x"===e?null:wa(e)}function lI(e,t){try{return Ki(e)}catch(n){wn(!1,n.message,t,e)}}function uI(e,t){return"0x"===e?0:er(e,t)}function fI(e,t){if("0x"===e)return rI;var n=Pn(e,t);return wn(n<=sI,"value exceeds uint size",t,n),n}function II(e,t){var n=Pn(e,"value"),r=nr(n);return wn(r.length<=32,"value too large","tx.".concat(t),n),r}function CI(e){return Ki(e).map((function(e){return[e.address,e.storageKeys]}))}function dI(e,t){var n=[II(e.nonce||0,"nonce"),II(e.gasPrice||0,"gasPrice"),II(e.gasLimit||0,"gasLimit"),null!=e.to?wa(e.to):"0x",II(e.value||0,"value"),e.data||"0x"],r=rI;if(e.chainId!=rI)r=Pn(e.chainId,"tx.chainId"),wn(!t||null==t.networkV||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){var a=e.signature.legacyChainId;null!=a&&(r=a)}if(!t)return r!==rI&&(n.push(nr(r)),n.push("0x"),n.push("0x")),tI(n);var o=BigInt(27+t.yParity);return r!==rI?o=gu.getChainIdV(r,t.v):BigInt(t.v)!==o&&wn(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(nr(o)),n.push(nr(t.r)),n.push(nr(t.s)),tI(n)}function AI(e,t){var n;try{if(0!==(n=uI(t[0],"yParity"))&&1!==n)throw new Error("bad yParity")}catch(i){wn(!1,"invalid yParity","yParity",t[0])}var r=Dn(t[1],32),a=Dn(t[2],32),o=gu.from({r:r,s:a,yParity:n});e.signature=o}function hI(e,t){var n=[II(e.chainId||0,"chainId"),II(e.nonce||0,"nonce"),II(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),II(e.maxFeePerGas||0,"maxFeePerGas"),II(e.gasLimit||0,"gasLimit"),null!=e.to?wa(e.to):"0x",II(e.value||0,"value"),e.data||"0x",CI(e.accessList||[])];return t&&(n.push(II(t.yParity,"yParity")),n.push(nr(t.r)),n.push(nr(t.s))),En(["0x02",tI(n)])}function pI(e,t){var n=[II(e.chainId||0,"chainId"),II(e.nonce||0,"nonce"),II(e.gasPrice||0,"gasPrice"),II(e.gasLimit||0,"gasLimit"),null!=e.to?wa(e.to):"0x",II(e.value||0,"value"),e.data||"0x",CI(e.accessList||[])];return t&&(n.push(II(t.yParity,"recoveryParam")),n.push(nr(t.r)),n.push(nr(t.s))),En(["0x01",tI(n)])}var mI=new WeakMap,bI=new WeakMap,yI=new WeakMap,vI=new WeakMap,ZI=new WeakMap,GI=new WeakMap,BI=new WeakMap,kI=new WeakMap,SI=new WeakMap,wI=new WeakMap,WI=new WeakMap,RI=new WeakMap,VI=function(){function e(){Z(this,e),ln(this,mI,{writable:!0,value:void 0}),ln(this,bI,{writable:!0,value:void 0}),ln(this,yI,{writable:!0,value:void 0}),ln(this,vI,{writable:!0,value:void 0}),ln(this,ZI,{writable:!0,value:void 0}),ln(this,GI,{writable:!0,value:void 0}),ln(this,BI,{writable:!0,value:void 0}),ln(this,kI,{writable:!0,value:void 0}),ln(this,SI,{writable:!0,value:void 0}),ln(this,wI,{writable:!0,value:void 0}),ln(this,WI,{writable:!0,value:void 0}),ln(this,RI,{writable:!0,value:void 0}),In(this,mI,null),In(this,bI,null),In(this,vI,0),In(this,ZI,BigInt(0)),In(this,GI,null),In(this,BI,null),In(this,kI,null),In(this,yI,"0x"),In(this,SI,BigInt(0)),In(this,wI,BigInt(0)),In(this,WI,null),In(this,RI,null)}return B(e,[{key:"type",get:function(){return Cn(this,mI)},set:function(e){switch(e){case null:In(this,mI,null);break;case 0:case"legacy":In(this,mI,0);break;case 1:case"berlin":case"eip-2930":In(this,mI,1);break;case 2:case"london":case"eip-1559":In(this,mI,2);break;default:wn(!1,"unsupported transaction type","type",e)}}},{key:"typeName",get:function(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}},{key:"to",get:function(){return Cn(this,bI)},set:function(e){In(this,bI,null==e?null:wa(e))}},{key:"nonce",get:function(){return Cn(this,vI)},set:function(e){In(this,vI,er(e,"value"))}},{key:"gasLimit",get:function(){return Cn(this,ZI)},set:function(e){In(this,ZI,Pn(e))}},{key:"gasPrice",get:function(){var e=Cn(this,GI);return null!=e||0!==this.type&&1!==this.type?e:rI},set:function(e){In(this,GI,null==e?null:Pn(e,"gasPrice"))}},{key:"maxPriorityFeePerGas",get:function(){var e=Cn(this,BI);return null==e?2===this.type?rI:null:e},set:function(e){In(this,BI,null==e?null:Pn(e,"maxPriorityFeePerGas"))}},{key:"maxFeePerGas",get:function(){var e=Cn(this,kI);return null==e?2===this.type?rI:null:e},set:function(e){In(this,kI,null==e?null:Pn(e,"maxFeePerGas"))}},{key:"data",get:function(){return Cn(this,yI)},set:function(e){In(this,yI,Kn(e))}},{key:"value",get:function(){return Cn(this,SI)},set:function(e){In(this,SI,Pn(e,"value"))}},{key:"chainId",get:function(){return Cn(this,wI)},set:function(e){In(this,wI,Pn(e))}},{key:"signature",get:function(){return Cn(this,WI)||null},set:function(e){In(this,WI,null==e?null:gu.from(e))}},{key:"accessList",get:function(){var e=Cn(this,RI)||null;return null==e?1===this.type||2===this.type?[]:null:e},set:function(e){In(this,RI,null==e?null:Ki(e))}},{key:"hash",get:function(){return null==this.signature?null:pa(this.serialized)}},{key:"unsignedHash",get:function(){return pa(this.unsignedSerialized)}},{key:"from",get:function(){return null==this.signature?null:(e=this.unsignedHash,t=this.signature,nI(Uf.recoverPublicKey(e,t)));var e,t}},{key:"fromPublicKey",get:function(){return null==this.signature?null:Uf.recoverPublicKey(this.unsignedHash,this.signature)}},{key:"isSigned",value:function(){return null!=this.signature}},{key:"serialized",get:function(){switch(Sn(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return dI(this,this.signature);case 1:return pI(this,this.signature);case 2:return hI(this,this.signature)}Sn(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}},{key:"unsignedSerialized",get:function(){switch(this.inferType()){case 0:return dI(this);case 1:return pI(this);case 2:return hI(this)}Sn(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}},{key:"inferType",value:function(){return this.inferTypes().pop()}},{key:"inferTypes",value:function(){var e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&Sn(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Sn(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Sn(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});var r=[];return null!=this.type?r.push(this.type):t?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(r.push(0),r.push(1),r.push(2)),r.sort(),r}},{key:"isLegacy",value:function(){return 0===this.type}},{key:"isBerlin",value:function(){return 1===this.type}},{key:"isLondon",value:function(){return 2===this.type}},{key:"clone",value:function(){return e.from(this)}},{key:"toJSON",value:function(){var e=function(e){return null==e?null:e.toString()};return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}}],[{key:"from",value:function(t){if(null==t)return new e;if("string"===typeof t){var n=xn(t);if(n[0]>=127)return e.from(function(e){var t=_f(e);wn(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);var n={type:0,nonce:uI(t[0],"nonce"),gasPrice:fI(t[1],"gasPrice"),gasLimit:fI(t[2],"gasLimit"),to:cI(t[3]),value:fI(t[4],"value"),data:Kn(t[5]),chainId:rI};if(6===t.length)return n;var r=fI(t[6],"v"),a=fI(t[7],"r"),o=fI(t[8],"s");if(a===rI&&o===rI)n.chainId=r;else{var i=(r-gI)/aI;i<rI&&(i=rI),n.chainId=i,wn(i!==rI||r===oI||r===iI,"non-canonical legacy v","v",t[6]),n.signature=gu.from({r:Dn(t[7],32),s:Dn(t[8],32),v:r}),n.hash=pa(e)}return n}(n));switch(n[0]){case 1:return e.from(function(e){var t=_f(xn(e).slice(1));wn(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",Kn(e));var n={type:1,chainId:fI(t[0],"chainId"),nonce:uI(t[1],"nonce"),gasPrice:fI(t[2],"gasPrice"),gasLimit:fI(t[3],"gasLimit"),to:cI(t[4]),value:fI(t[5],"value"),data:Kn(t[6]),accessList:lI(t[7],"accessList")};return 8===t.length||(n.hash=pa(e),AI(n,t.slice(8))),n}(n));case 2:return e.from(function(e){var t=_f(xn(e).slice(1));wn(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",Kn(e));var n=fI(t[2],"maxPriorityFeePerGas"),r=fI(t[3],"maxFeePerGas"),a={type:2,chainId:fI(t[0],"chainId"),nonce:uI(t[1],"nonce"),maxPriorityFeePerGas:n,maxFeePerGas:r,gasPrice:null,gasLimit:fI(t[4],"gasLimit"),to:cI(t[5]),value:fI(t[6],"value"),data:Kn(t[7]),accessList:lI(t[8],"accessList")};return 9===t.length||(a.hash=pa(e),AI(a,t.slice(9))),a}(n))}Sn(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}var r=new e;return null!=t.type&&(r.type=t.type),null!=t.to&&(r.to=t.to),null!=t.nonce&&(r.nonce=t.nonce),null!=t.gasLimit&&(r.gasLimit=t.gasLimit),null!=t.gasPrice&&(r.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null!=t.data&&(r.data=t.data),null!=t.value&&(r.value=t.value),null!=t.chainId&&(r.chainId=t.chainId),null!=t.signature&&(r.signature=gu.from(t.signature)),null!=t.accessList&&(r.accessList=t.accessList),null!=t.hash&&(wn(r.isSigned(),"unsigned transaction cannot define hash","tx",t),wn(r.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(wn(r.isSigned(),"unsigned transaction cannot define from","tx",t),wn(r.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),r}}]),e}();function XI(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}var JI="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",xI=null;function YI(e){if(null==xI){xI={};for(var t=0;t<JI.length;t++)xI[JI[t]]=BigInt(t)}var n=xI[e];return wn(null!=n,"invalid base58 value","letter",e),n}var NI,HI,FI,KI=BigInt(0),EI=BigInt(58);function TI(e){for(var t=$n(xn(e)),n="";t;)n=JI[Number(t%EI)]+n,t/=EI;return n}function MI(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):wn(!1,"unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/".concat(e)}var zI=function(e,t){function n(e){Z(this,n),b(this,"name",void 0),vn(this,{name:e})}return B(n,[{key:"connect",value:function(e){return this}},{key:"supportsCoinType",value:function(e){return!1}},{key:"encodeAddress",value:function(t,n){return(e=e||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("unsupported coin");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"decodeAddress",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("unsupported coin");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}]),n}(),DI=new RegExp("^(ipfs)://(.*)$","i"),LI=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),DI,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],UI=new WeakMap,jI=new WeakMap,OI=new WeakSet,QI=function(e,t,n,r,a,o,i,g){function s(e,t,n){Z(this,s),cn(this,OI),b(this,"provider",void 0),b(this,"address",void 0),b(this,"name",void 0),ln(this,UI,{writable:!0,value:void 0}),ln(this,jI,{writable:!0,value:void 0}),vn(this,{provider:e,address:t,name:n}),In(this,UI,null),In(this,jI,new zs(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}return B(s,[{key:"supportsWildcard",value:function(){return(e=e||hn(dn().mark((function e(){var t=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==Cn(this,UI)&&In(this,UI,hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn(t,jI).supportsInterface("0x9061b923");case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!Gn(e.t0,"CALL_EXCEPTION")){e.next=10;break}return e.abrupt("return",!1);case 10:throw In(t,UI,null),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))()),e.next=3,Cn(this,UI);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getAddress",value:function(e){return(t=t||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t&&(t=60),60!==t){e.next=16;break}return e.prev=2,e.next=5,un(this,OI,PI).call(this,"addr(bytes32)");case 5:if(null!=(n=e.sent)&&n!==Sg){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",n);case 11:if(e.prev=11,e.t0=e.catch(2),!Gn(e.t0,"CALL_EXCEPTION")){e.next=15;break}return e.abrupt("return",null);case 15:throw e.t0;case 16:if(!(t>=0&&t<2147483648)){e.next=23;break}return r=t+2147483648,e.next=20,un(this,OI,PI).call(this,"addr(bytes32,uint)",[r]);case 20:if(!Nn(a=e.sent,20)){e.next=23;break}return e.abrupt("return",wa(a));case 23:o=null,i=Xe(this.provider.plugins),e.prev=25,i.s();case 27:if((g=i.n()).done){e.next=36;break}if((s=g.value)instanceof zI){e.next=31;break}return e.abrupt("continue",34);case 31:if(!s.supportsCoinType(t)){e.next=34;break}return o=s,e.abrupt("break",36);case 34:e.next=27;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(25),i.e(e.t1);case 41:return e.prev=41,i.f(),e.finish(41);case 44:if(null!=o){e.next=46;break}return e.abrupt("return",null);case 46:return e.next=48,un(this,OI,PI).call(this,"addr(bytes32,uint)",[t]);case 48:if(null!=(c=e.sent)&&"0x"!==c){e.next=51;break}return e.abrupt("return",null);case 51:return e.next=53,o.decodeAddress(t,c);case 53:if(null==(l=e.sent)){e.next=56;break}return e.abrupt("return",l);case 56:Sn(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:"getAddress(".concat(t,")"),info:{coinType:t,data:c}});case 57:case"end":return e.stop()}}),e,this,[[2,11],[25,38,41,44]])})))).apply(this,arguments)}},{key:"getText",value:function(e){return(n=n||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(this,OI,PI).call(this,"text(bytes32,string)",[t]);case 2:if(null!=(n=e.sent)&&"0x"!==n){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getContentHash",value:function(){return(r=r||hn(dn().mark((function e(){var t,n,r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(this,OI,PI).call(this,"contenthash(bytes32)");case 2:if(null!=(t=e.sent)&&"0x"!==t){e.next=5;break}return e.abrupt("return",null);case 5:if(!(n=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){e.next=11;break}if(r="e3010170"===n[1]?"ipfs":"ipns",a=parseInt(n[4],16),n[5].length!==2*a){e.next=11;break}return e.abrupt("return","".concat(r,"://").concat(TI("0x"+n[2])));case 11:if(!(o=t.match(/^0xe40101fa011b20([0-9a-f]*)$/))||64!==o[1].length){e.next=14;break}return e.abrupt("return","bzz://".concat(o[1]));case 14:Sn(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}});case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getAvatar",value:function(){return(a=a||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getAvatar();case 2:return t=e.sent,e.abrupt("return",t.url);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_getAvatar",value:function(){return(o=o||hn(dn().mark((function e(){var t,n,r,a,o,i,g,s,c,l,u,f,I,C,d,A,h,p;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{type:"name",value:this.name}],e.prev=1,e.next=4,this.getText("avatar");case 4:if(null!=(n=e.sent)){e.next=8;break}return t.push({type:"!avatar",value:""}),e.abrupt("return",{url:null,linkage:t});case 8:t.push({type:"avatar",value:n}),r=0;case 10:if(!(r<LI.length)){e.next=109;break}if(null!=(a=n.match(LI[r]))){e.next=14;break}return e.abrupt("continue",106);case 14:o=a[1].toLowerCase(),e.t0=o,e.next="https"===e.t0||"data"===e.t0?18:"ipfs"===e.t0?20:"erc721"===e.t0||"erc1155"===e.t0?24:106;break;case 18:return t.push({type:"url",value:n}),e.abrupt("return",{linkage:t,url:n});case 20:return i=MI(n),t.push({type:"ipfs",value:n}),t.push({type:"url",value:i}),e.abrupt("return",{linkage:t,url:i});case 24:return g="erc721"===o?"tokenURI(uint256)":"uri(uint256)",t.push({type:o,value:n}),e.next=28,this.getAddress();case 28:if(null!=(s=e.sent)){e.next=32;break}return t.push({type:"!owner",value:""}),e.abrupt("return",{url:null,linkage:t});case 32:if(2===(c=(a[2]||"").split("/")).length){e.next=36;break}return t.push({type:"!".concat(o,"caip"),value:a[2]||""}),e.abrupt("return",{url:null,linkage:t});case 36:if(l=c[1],u=new zs(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider),"erc721"!==o){e.next=48;break}return e.next=41,u.ownerOf(l);case 41:if(f=e.sent,s===f){e.next=45;break}return t.push({type:"!owner",value:f}),e.abrupt("return",{url:null,linkage:t});case 45:t.push({type:"owner",value:f}),e.next=56;break;case 48:if("erc1155"!==o){e.next=56;break}return e.next=51,u.balanceOf(s,l);case 51:if(I=e.sent){e.next=55;break}return t.push({type:"!balance",value:"0"}),e.abrupt("return",{url:null,linkage:t});case 55:t.push({type:"balance",value:I.toString()});case 56:return e.next=58,u[g](l);case 58:if(null!=(C=e.sent)&&"0x"!==C){e.next=62;break}return t.push({type:"!metadata-url",value:""}),e.abrupt("return",{url:null,linkage:t});case 62:return t.push({type:"metadata-url-base",value:C}),"erc1155"===o&&(C=C.replace("{id}",tr(l,32).substring(2)),t.push({type:"metadata-url-expanded",value:C})),C.match(/^ipfs:/i)&&(C=MI(C)),t.push({type:"metadata-url",value:C}),d={},e.next=69,new Cg(C).send();case 69:(A=e.sent).assertOk(),e.prev=71,d=A.bodyJson,e.next=87;break;case 75:e.prev=75,e.t1=e.catch(71),e.prev=77,t.push({type:"!metadata",value:A.bodyText}),e.next=86;break;case 81:return e.prev=81,e.t2=e.catch(77),(h=A.body)&&t.push({type:"!metadata",value:Kn(h)}),e.abrupt("return",{url:null,linkage:t});case 86:return e.abrupt("return",{url:null,linkage:t});case 87:if(d){e.next=90;break}return t.push({type:"!metadata",value:""}),e.abrupt("return",{url:null,linkage:t});case 90:if(t.push({type:"metadata",value:JSON.stringify(d)}),"string"===typeof(p=d.image)){e.next=95;break}return t.push({type:"!imageUrl",value:""}),e.abrupt("return",{url:null,linkage:t});case 95:if(!p.match(/^(https:\/\/|data:)/i)){e.next=98;break}e.next=104;break;case 98:if(null!=p.match(DI)){e.next=102;break}return t.push({type:"!imageUrl-ipfs",value:p}),e.abrupt("return",{url:null,linkage:t});case 102:t.push({type:"imageUrl-ipfs",value:p}),p=MI(p);case 104:return t.push({type:"url",value:p}),e.abrupt("return",{linkage:t,url:p});case 106:r++,e.next=10;break;case 109:e.next=113;break;case 111:e.prev=111,e.t3=e.catch(1);case 113:return e.abrupt("return",{linkage:t,url:null});case 114:case"end":return e.stop()}}),e,this,[[1,111],[71,75],[77,81]])})))).apply(this,arguments)}}],[{key:"getEnsAddress",value:function(e){return(i=i||hn(dn().mark((function e(t){var n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNetwork();case 2:return n=e.sent,Sn(r=n.getPlugin("org.ethers.plugins.network.Ens"),"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),e.abrupt("return",r.address);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"fromName",value:function(e,t){return(g=g||hn(dn().mark((function e(t,n){var r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n;case 1:if(""!==r&&"."!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("eth"===n||"eth"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,XI(s,s,_I).call(s,t,r);case 8:if(null==(a=e.sent)){e.next=19;break}if(o=new s(t,a,n),e.t0=r!==n,!e.t0){e.next=16;break}return e.next=15,o.supportsWildcard();case 15:e.t0=!e.sent;case 16:if(!e.t0){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",o);case 19:r=r.split(".").slice(1).join("."),e.next=1;break;case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}]),s}();function PI(e,t){return(HI=HI||hn(dn().mark((function e(t,n){var r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(n||[]).slice(),r=Cn(this,jI).interface,n.unshift(zl(this.name)),a=null,e.next=6,this.supportsWildcard();case 6:if(!e.sent){e.next=11;break}Sn(a=r.getFunction(t),"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),n=[(g=this.name,Kn(En(Ml(g).map((function(e){if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"),r.encodeFunctionData(a,n)],t="resolve(bytes,bytes)";case 11:return n.push({enableCcipRead:!0}),e.prev=12,e.next=15,(o=Cn(this,jI))[t].apply(o,We(n));case 15:if(i=e.sent,!a){e.next=18;break}return e.abrupt("return",r.decodeFunctionResult(a,i)[0]);case 18:return e.abrupt("return",i);case 21:if(e.prev=21,e.t0=e.catch(12),Gn(e.t0,"CALL_EXCEPTION")){e.next=25;break}throw e.t0;case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}var g}),e,this,[[12,21]])})))).apply(this,arguments)}function _I(e,t){return(FI=FI||hn(dn().mark((function e(t,n){var r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NI.getEnsAddress(t);case 2:return r=e.sent,e.prev=3,a=new zs(r,["function resolver(bytes32) view returns (address)"],t),e.next=7,a.resolver(zl(n),{enableCcipRead:!0});case 7:if((o=e.sent)!==Sg){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(3),e.t0;case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function qI(e){var t=wa(e.from),n=Pn(e.nonce,"tx.nonce").toString(16);return wa(Mn(pa(tI([t,n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n])),12))}NI=QI;var $I=BigInt(0);function eC(e,t){return function(n){return null==n?t:e(n)}}function tC(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");return t.map((function(t){return e(t)}))}}function nC(e,t){return function(n){var r={};for(var a in e){var o=a;if(t&&a in t&&!(o in n)){var i,g=Xe(t[a]);try{for(g.s();!(i=g.n()).done;){var s=i.value;if(s in n){o=s;break}}}catch(xQ){g.e(xQ)}finally{g.f()}}try{var c=e[a](n[o]);void 0!==c&&(r[a]=c)}catch(u){var l=u instanceof Error?u.message:"not-an-error";Sn(!1,"invalid value for value.".concat(a," (").concat(l,")"),"BAD_DATA",{value:n})}}return r}}function rC(e){return wn(Nn(e,!0),"invalid data","value",e),e}function aC(e){return wn(Nn(e,32),"invalid hash","value",e),e}var oC=nC({address:wa,blockHash:aC,blockNumber:er,data:rC,index:er,removed:eC((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}wn(!1,"invalid boolean; ".concat(JSON.stringify(e)),"value",e)}),!1),topics:tC(aC),transactionHash:aC,transactionIndex:er},{index:["logIndex"]});var iC=nC({hash:eC(aC),parentHash:aC,number:er,timestamp:er,nonce:eC(rC),difficulty:Pn,gasLimit:Pn,gasUsed:Pn,miner:eC(wa),extraData:rC,baseFeePerGas:eC(Pn)});var gC=nC({transactionIndex:er,blockNumber:er,transactionHash:aC,address:wa,topics:tC(aC),data:rC,index:er,blockHash:aC},{index:["logIndex"]});var sC=nC({to:eC(wa,null),from:eC(wa,null),contractAddress:eC(wa,null),index:er,root:eC(Kn),gasUsed:Pn,logsBloom:eC(rC),blockHash:aC,hash:aC,logs:tC((function(e){return gC(e)})),blockNumber:er,cumulativeGasUsed:Pn,effectiveGasPrice:eC(Pn),status:eC(er),type:eC(er,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function cC(e){e.to&&Pn(e.to)===$I&&(e.to="0x0000000000000000000000000000000000000000");var t=nC({hash:aC,type:function(e){return"0x"===e||null==e?0:er(e)},accessList:eC(Ki,null),blockHash:eC(aC,null),blockNumber:eC(er,null),transactionIndex:eC(er,null),from:wa,gasPrice:eC(Pn),maxPriorityFeePerGas:eC(Pn),maxFeePerGas:eC(Pn),gasLimit:Pn,to:eC(wa,null),value:Pn,nonce:er,data:rC,creates:eC(wa,null),chainId:eC(Pn,null)},{data:["input"],gasLimit:["gas"]})(e);if(null==t.to&&null==t.creates&&(t.creates=qI(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=gu.from(e.signature):t.signature=gu.from(e),null==t.chainId){var n=t.signature.legacyChainId;null!=n&&(t.chainId=n)}return t.blockHash&&Pn(t.blockHash)===$I&&(t.blockHash=null),t}var lC=function(){function e(t){Z(this,e),b(this,"name",void 0),vn(this,{name:t})}return B(e,[{key:"clone",value:function(){return new e(this.name)}}]),e}(),uC=function(e){d(n,e);var t=p(n);function n(e,r){var a;Z(this,n),null==e&&(e=0),b(i(a=t.call(this,"org.ethers.network.plugins.GasCost#".concat(e||0))),"effectiveBlock",void 0),b(i(a),"txBase",void 0),b(i(a),"txCreate",void 0),b(i(a),"txDataZero",void 0),b(i(a),"txDataNonzero",void 0),b(i(a),"txAccessListStorageKey",void 0),b(i(a),"txAccessListAddress",void 0);var o={effectiveBlock:e};function g(e,t){var n=(r||{})[e];null==n&&(n=t),wn("number"===typeof n,"invalud value for ".concat(e),"costs",r),o[e]=n}return g("txBase",21e3),g("txCreate",32e3),g("txDataZero",4),g("txDataNonzero",16),g("txAccessListStorageKey",1900),g("txAccessListAddress",2400),vn(i(a),o),a}return B(n,[{key:"clone",value:function(){return new n(this.effectiveBlock,this)}}]),n}(lC),fC=function(e){d(n,e);var t=p(n);function n(e,r){var a;return Z(this,n),b(i(a=t.call(this,"org.ethers.plugins.network.Ens")),"address",void 0),b(i(a),"targetNetwork",void 0),vn(i(a),{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==r?1:r}),a}return B(n,[{key:"clone",value:function(){return new n(this.address,this.targetNetwork)}}]),n}(lC),IC=new WeakMap,CC=new WeakMap,dC=function(e){d(n,e);var t=p(n);function n(e,r){var a;return Z(this,n),ln(i(a=t.call(this,"org.ethers.plugins.network.FetchUrlFeeDataPlugin")),IC,{writable:!0,value:void 0}),ln(i(a),CC,{writable:!0,value:void 0}),In(i(a),IC,e),In(i(a),CC,r),a}return B(n,[{key:"url",get:function(){return Cn(this,IC)}},{key:"processFunc",get:function(){return Cn(this,CC)}},{key:"clone",value:function(){return this}}]),n}(lC),AC=new Map,hC=new WeakMap,pC=new WeakMap,mC=new WeakMap,bC=function(){function e(t,n){Z(this,e),ln(this,hC,{writable:!0,value:void 0}),ln(this,pC,{writable:!0,value:void 0}),ln(this,mC,{writable:!0,value:void 0}),In(this,hC,t),In(this,pC,Pn(n)),In(this,mC,new Map)}return B(e,[{key:"toJSON",value:function(){return{name:this.name,chainId:String(this.chainId)}}},{key:"name",get:function(){return Cn(this,hC)},set:function(e){In(this,hC,e)}},{key:"chainId",get:function(){return Cn(this,pC)},set:function(e){In(this,pC,Pn(e,"chainId"))}},{key:"matches",value:function(e){if(null==e)return!1;if("string"===typeof e){try{return this.chainId===Pn(e)}catch(t){}return this.name===e}if("number"===typeof e||"bigint"===typeof e){try{return this.chainId===Pn(e)}catch(t){}return!1}if("object"===typeof e){if(null!=e.chainId){try{return this.chainId===Pn(e.chainId)}catch(t){}return!1}return null!=e.name&&this.name===e.name}return!1}},{key:"plugins",get:function(){return Array.from(Cn(this,mC).values())}},{key:"attachPlugin",value:function(e){if(Cn(this,mC).get(e.name))throw new Error("cannot replace existing plugin: ".concat(e.name," "));return Cn(this,mC).set(e.name,e.clone()),this}},{key:"getPlugin",value:function(e){return Cn(this,mC).get(e)||null}},{key:"getPlugins",value:function(e){return this.plugins.filter((function(t){return t.name.split("#")[0]===e}))}},{key:"clone",value:function(){var t=new e(this.name,this.chainId);return this.plugins.forEach((function(e){t.attachPlugin(e.clone())})),t}},{key:"computeIntrinsicGas",value:function(e){var t=this.getPlugin("org.ethers.plugins.network.GasCost")||new uC,n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(var r=2;r<e.data.length;r+=2)"00"===e.data.substring(r,r+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){var a=Ki(e.accessList);for(var o in a)n+=t.txAccessListAddress+t.txAccessListStorageKey*a[o].storageKeys.length}return n}}],[{key:"from",value:function(t){if(SC(),null==t)return e.from("mainnet");if("number"===typeof t&&(t=BigInt(t)),"string"===typeof t||"bigint"===typeof t){var n=AC.get(t);if(n)return n();if("bigint"===typeof t)return new e("unknown",t);wn(!1,"unknown network","network",t)}if("function"===typeof t.clone)return t.clone();if("object"===typeof t){wn("string"===typeof t.name&&"number"===typeof t.chainId,"invalid network object name or chainId","network",t);var r=new e(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&r.attachPlugin(new fC(t.ensAddress,t.ensNetwork)),r}wn(!1,"invalid network","network",t)}},{key:"register",value:function(e,t){"number"===typeof e&&(e=BigInt(e));var n=AC.get(e);n&&wn(!1,"conflicting network for ".concat(JSON.stringify(n.name)),"nameOrChainId",e),AC.set(e,t)}}]),e}();function yC(e,t){var n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error("invalid gwei value: ".concat(e));var r=n.split(".");if(1===r.length&&r.push(""),2!==r.length)throw new Error("invalid gwei value: ".concat(e));for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){var a=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||a++,r[1]=a.toString()}return BigInt(r[0]+r[1])}function vC(e){var t;return new dC(e,(function(e,n,r){return(t=t||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setHeader("User-Agent","ethers"),e.prev=1,e.next=4,Promise.all([r.send(),t()]);case 4:return o=e.sent,i=Ge(o,2),g=i[0],s=i[1],c=(a=g).bodyJson.standard,l={gasPrice:s.gasPrice,maxFeePerGas:yC(c.maxFee,9),maxPriorityFeePerGas:yC(c.maxPriorityFee,9)},e.abrupt("return",l);case 14:e.prev=14,e.t0=e.catch(1),Sn(!1,"error encountered with polygon gas station (".concat(JSON.stringify(r.url),")"),"SERVER_ERROR",{request:r,response:a,error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}))}function ZC(e){var t;return new dC("data:",(function(n,r,a){return(t=t||hn(dn().mark((function t(n,r,a){var o,i;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(null!=(o=t.sent).maxFeePerGas&&null!=o.maxPriorityFeePerGas){t.next=5;break}return t.abrupt("return",o);case 5:return i=o.maxFeePerGas-o.maxPriorityFeePerGas,t.abrupt("return",{gasPrice:o.gasPrice,maxFeePerGas:i+e,maxPriorityFeePerGas:e});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}))}var GC,BC,kC=!1;function SC(){function e(e,t,n){var r=function(){var r=new bC(e,t);return null!=n.ensNetwork&&r.attachPlugin(new fC(null,n.ensNetwork)),r.attachPlugin(new uC),(n.plugins||[]).forEach((function(e){r.attachPlugin(e)})),r};bC.register(e,r),bC.register(t,r),n.altNames&&n.altNames.forEach((function(e){bC.register(e,r)}))}kC||(kC=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("matic",137,{ensNetwork:1,plugins:[vC("https://gasstation.polygon.technology/v2")]}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[vC("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[ZC(BigInt("1000000"))]}),e("optimism-goerli",420,{}),e("xdai",100,{ensNetwork:1}))}function wC(e){return JSON.parse(JSON.stringify(e))}var WC=new WeakMap,RC=new WeakMap,VC=new WeakMap,XC=new WeakMap,JC=new WeakSet,xC=function(){function e(t){Z(this,e),cn(this,JC),ln(this,WC,{writable:!0,value:void 0}),ln(this,RC,{writable:!0,value:void 0}),ln(this,VC,{writable:!0,value:void 0}),ln(this,XC,{writable:!0,value:void 0}),In(this,WC,t),In(this,RC,null),In(this,VC,4e3),In(this,XC,-2)}return B(e,[{key:"pollingInterval",get:function(){return Cn(this,VC)},set:function(e){In(this,VC,e)}},{key:"start",value:function(){Cn(this,RC)||(In(this,RC,Cn(this,WC)._setTimeout(un(this,JC,YC).bind(this),Cn(this,VC))),un(this,JC,YC).call(this))}},{key:"stop",value:function(){Cn(this,RC)&&(Cn(this,WC)._clearTimeout(Cn(this,RC)),In(this,RC,null))}},{key:"pause",value:function(e){this.stop(),e&&In(this,XC,-2)}},{key:"resume",value:function(){this.start()}}]),e}();function YC(){return(GC=GC||hn(dn().mark((function e(){var t,n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn(this,WC).getBlockNumber();case 3:if(t=e.sent,-2!==Cn(this,XC)){e.next=7;break}return In(this,XC,t),e.abrupt("return");case 7:if(t===Cn(this,XC)){e.next=18;break}n=Cn(this,XC)+1;case 9:if(!(n<=t)){e.next=17;break}if(null!=Cn(this,RC)){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,Cn(this,WC).emit("block",n);case 14:n++,e.next=9;break;case 17:In(this,XC,t);case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(0);case 22:if(null!=Cn(this,RC)){e.next=24;break}return e.abrupt("return");case 24:In(this,RC,Cn(this,WC)._setTimeout(un(this,JC,YC).bind(this),Cn(this,VC)));case 25:case"end":return e.stop()}}),e,this,[[0,20]])})))).apply(this,arguments)}var NC,HC,FC,KC,EC,TC,MC,zC,DC=new WeakMap,LC=new WeakMap,UC=new WeakMap,jC=function(e){function t(e){var n=this;Z(this,t),ln(this,DC,{writable:!0,value:void 0}),ln(this,LC,{writable:!0,value:void 0}),ln(this,UC,{writable:!0,value:void 0}),In(this,DC,e),In(this,UC,!1),In(this,LC,(function(e){n._poll(e,Cn(n,DC))}))}return B(t,[{key:"_poll",value:function(t,n){return(e=e||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("sub-classes must override this");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"start",value:function(){Cn(this,UC)||(In(this,UC,!0),Cn(this,LC).call(this,-2),Cn(this,DC).on("block",Cn(this,LC)))}},{key:"stop",value:function(){Cn(this,UC)&&(In(this,UC,!1),Cn(this,DC).off("block",Cn(this,LC)))}},{key:"pause",value:function(e){this.stop()}},{key:"resume",value:function(){this.start()}}]),t}(),OC=new WeakMap,QC=function(e,t){d(r,e);var n=p(r);function r(e,t){var a;return Z(this,r),ln(i(a=n.call(this,e)),OC,{writable:!0,value:void 0}),In(i(a),OC,wC(t)),a}return B(r,[{key:"_poll",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("@TODO");case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),r}(jC),PC=new WeakMap,_C=function(e,t){d(r,e);var n=p(r);function r(e,t){var a;return Z(this,r),ln(i(a=n.call(this,e)),PC,{writable:!0,value:void 0}),In(i(a),PC,t),a}return B(r,[{key:"_poll",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getTransactionReceipt(Cn(this,PC));case 2:(r=e.sent)&&n.emit(Cn(this,PC),r);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),r}(jC),qC=new WeakMap,$C=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap,rd=new WeakSet,ad=function(){function e(t,n){Z(this,e),cn(this,rd),ln(this,qC,{writable:!0,value:void 0}),ln(this,$C,{writable:!0,value:void 0}),ln(this,ed,{writable:!0,value:void 0}),ln(this,td,{writable:!0,value:void 0}),ln(this,nd,{writable:!0,value:void 0}),In(this,qC,t),In(this,$C,wC(n)),In(this,ed,un(this,rd,od).bind(this)),In(this,td,!1),In(this,nd,-2)}return B(e,[{key:"start",value:function(){var e=this;Cn(this,td)||(In(this,td,!0),-2===Cn(this,nd)&&Cn(this,qC).getBlockNumber().then((function(t){In(e,nd,t)})),Cn(this,qC).on("block",Cn(this,ed)))}},{key:"stop",value:function(){Cn(this,td)&&(In(this,td,!1),Cn(this,qC).off("block",Cn(this,ed)))}},{key:"pause",value:function(e){this.stop(),e&&In(this,nd,-2)}},{key:"resume",value:function(){this.start()}}]),e}();function od(e){return(BC=BC||hn(dn().mark((function e(t){var n,r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-2!==Cn(this,nd)){e.next=2;break}return e.abrupt("return");case 2:return(n=wC(Cn(this,$C))).fromBlock=Cn(this,nd)+1,n.toBlock=t,e.next=7,Cn(this,qC).getLogs(n);case 7:if(0!==(r=e.sent).length){e.next=11;break}return Cn(this,nd)<t-60&&In(this,nd,t-60),e.abrupt("return");case 11:a=Xe(r);try{for(a.s();!(o=a.n()).done;)i=o.value,Cn(this,qC).emit(Cn(this,$C),i),In(this,nd,i.blockNumber)}catch(xQ){a.e(xQ)}finally{a.f()}case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var id=BigInt(2);function gd(e){return e&&"function"===typeof e.then}function sd(e,t){return e+":"+JSON.stringify(t,(function(e,t){if(null==t)return"null";if("bigint"===typeof t)return"bigint:".concat(t.toString());if("string"===typeof t)return t.toLowerCase();if("object"===typeof t&&!Array.isArray(t)){var n=Object.keys(t);return n.sort(),n.reduce((function(e,n){return e[n]=t[n],e}),{})}return t}))}var cd=function(){function e(t){Z(this,e),b(this,"name",void 0),vn(this,{name:t})}return B(e,[{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"pause",value:function(e){}},{key:"resume",value:function(){}}]),e}();function ld(e){return(e=Array.from(new Set(e).values())).sort(),e}function ud(e,t){return(NC=NC||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("invalid event");case 2:if(Array.isArray(t)&&(t={topics:t}),"string"!==typeof t){e.next=8;break}e.t0=t,e.next="block"===e.t0||"pending"===e.t0||"debug"===e.t0||"error"===e.t0||"network"===e.t0?7:8;break;case 7:return e.abrupt("return",{type:t,tag:t});case 8:if(!Nn(t,32)){e.next=11;break}return r=t.toLowerCase(),e.abrupt("return",{type:"transaction",tag:sd("tx",{hash:r}),hash:r});case 11:if(!t.orphan){e.next=14;break}return a=t,e.abrupt("return",{type:"orphan",tag:sd("orphan",a),filter:(l=a,JSON.parse(JSON.stringify(l)))});case 14:if(!t.address&&!t.topics){e.next=27;break}if(i={topics:((o=t).topics||[]).map((function(e){return null==e?null:Array.isArray(e)?ld(e.map((function(e){return e.toLowerCase()}))):e.toLowerCase()}))},!o.address){e.next=26;break}if(g=[],s=[],c=function(e){Nn(e)?g.push(e):s.push(hn(dn().mark((function t(){return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,Ii(e,n);case 3:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})))())},Array.isArray(o.address)?o.address.forEach(c):c(o.address),!s.length){e.next=25;break}return e.next=25,Promise.all(s);case 25:i.address=ld(g.map((function(e){return e.toLowerCase()})));case 26:return e.abrupt("return",{filter:i,tag:sd("event",i),type:"event"});case 27:wn(!1,"unknown ProviderEvent","event",t);case 28:case"end":return e.stop()}var l}),e)})))).apply(this,arguments)}function fd(){return(new Date).getTime()}var Id={cacheTimeout:250,pollingInterval:4e3},Cd=new WeakMap,dd=new WeakMap,Ad=new WeakMap,hd=new WeakMap,pd=new WeakMap,md=new WeakMap,bd=new WeakMap,yd=new WeakMap,vd=new WeakMap,Zd=new WeakMap,Gd=new WeakMap,Bd=new WeakMap,kd=new WeakSet,Sd=new WeakSet,wd=new WeakSet,Wd=new WeakSet,Rd=new WeakSet,Vd=new WeakSet,Xd=new WeakSet,Jd=function(e,t,n,r,a,o,i,g,s,c,l,u,f,I,C,d,A,h,p,m,b,y,v,G,k,S,w,W,R,V,X,J){function x(e,t){var n=this;if(Z(this,x),cn(this,Xd),cn(this,Vd),cn(this,Rd),cn(this,Wd),cn(this,wd),cn(this,Sd),cn(this,kd),ln(this,Cd,{writable:!0,value:void 0}),ln(this,dd,{writable:!0,value:void 0}),ln(this,Ad,{writable:!0,value:void 0}),ln(this,hd,{writable:!0,value:void 0}),ln(this,pd,{writable:!0,value:void 0}),ln(this,md,{writable:!0,value:void 0}),ln(this,bd,{writable:!0,value:void 0}),ln(this,yd,{writable:!0,value:void 0}),ln(this,vd,{writable:!0,value:void 0}),ln(this,Zd,{writable:!0,value:void 0}),ln(this,Gd,{writable:!0,value:void 0}),ln(this,Bd,{writable:!0,value:void 0}),In(this,Bd,Object.assign({},Id,t||{})),"any"===e)In(this,md,!0),In(this,pd,null);else if(e){var r=bC.from(e);In(this,md,!1),In(this,pd,Promise.resolve(r)),setTimeout((function(){n.emit("network",r,null)}),0)}else In(this,md,!1),In(this,pd,null);In(this,yd,-1),In(this,bd,new Map),In(this,Cd,new Map),In(this,dd,new Map),In(this,Ad,null),In(this,hd,!1),In(this,vd,1),In(this,Zd,new Map),In(this,Gd,!1)}return B(x,[{key:"pollingInterval",get:function(){return Cn(this,Bd).pollingInterval}},{key:"provider",get:function(){return this}},{key:"plugins",get:function(){return Array.from(Cn(this,dd).values())}},{key:"attachPlugin",value:function(e){if(Cn(this,dd).get(e.name))throw new Error("cannot replace existing plugin: ".concat(e.name," "));return Cn(this,dd).set(e.name,e.connect(this)),this}},{key:"getPlugin",value:function(e){return Cn(this,dd).get(e)||null}},{key:"disableCcipRead",get:function(){return Cn(this,Gd)},set:function(e){In(this,Gd,!!e)}},{key:"ccipReadFetch",value:function(t,n,r){return(e=e||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l,u,f,I;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disableCcipRead&&0!==r.length&&null!=t.to){e.next=2;break}return e.abrupt("return",null);case 2:a=t.to.toLowerCase(),o=n.toLowerCase(),i=[],g=0;case 6:if(!(g<r.length)){e.next=32;break}return s=r[g],c=s.replace("{sender}",a).replace("{data}",o),l=new Cg(c),-1===s.indexOf("{data}")&&(l.body={data:o,sender:a}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:g,urls:r}),u="unknown error",e.next=15,l.send();case 15:if(f=e.sent,e.prev=16,!(I=f.bodyJson).data){e.next=21;break}return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:I}),e.abrupt("return",I.data);case 21:I.message&&(u=I.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:I}),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(16);case 27:Sn(f.statusCode<400||f.statusCode>=500,"response not found during CCIP fetch: ".concat(u),"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:s,errorMessage:u}}),i.push(u);case 29:g++,e.next=6;break;case 32:Sn(!1,"error encountered during CCIP fetch: ".concat(i.map((function(e){return JSON.stringify(e)})).join(", ")),"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:i}});case 33:case"end":return e.stop()}}),e,this,[[16,25]])})))).apply(this,arguments)}},{key:"_wrapBlock",value:function(e,t){return new Qg(function(e){var t=iC(e);return t.transactions=e.transactions.map((function(e){return"string"===typeof e?e:cC(e)})),t}(e),this)}},{key:"_wrapLog",value:function(e,t){return new Pg(function(e){return oC(e)}(e),this)}},{key:"_wrapTransactionReceipt",value:function(e,t){return new qg(function(e){return sC(e)}(e),this)}},{key:"_wrapTransactionResponse",value:function(e,t){return new es(cC(e),this)}},{key:"_detectNetwork",value:function(){Sn(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}},{key:"_perform",value:function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sn(!1,"unsupported method: ".concat(t.method),"UNSUPPORTED_OPERATION",{operation:t.method,info:t});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"getBlockNumber",value:function(){return(n=n||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=er,e.next=3,un(this,kd,xd).call(this,{method:"getBlockNumber"});case 3:return e.t1=e.sent,t=(0,e.t0)(e.t1,"%response"),Cn(this,yd)>=0&&In(this,yd,t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_getAddress",value:function(e){return Ii(e,this)}},{key:"_getBlockTag",value:function(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}return Nn(e)?Nn(e,32)?e:rr(e):("bigint"===typeof e&&(e=er(e,"blockTag")),"number"===typeof e?e>=0?rr(e):Cn(this,yd)>=0?rr(Cn(this,yd)+e):this.getBlockNumber().then((function(t){return rr(t+e)})):void wn(!1,"invalid blockTag","blockTag",e))}},{key:"_getFilter",value:function(e){var t=(e.topics||[]).map((function(e){return null==e?null:Array.isArray(e)?ld(e.map((function(e){return e.toLowerCase()}))):e.toLowerCase()})),n="blockHash"in e?e.blockHash:void 0,r=function(e,r,a){var o=void 0;switch(e.length){case 0:break;case 1:o=e[0];break;default:e.sort(),o=e}if(n&&(null!=r||null!=a))throw new Error("invalid filter");var i={};return o&&(i.address=o),t.length&&(i.topics=t),r&&(i.fromBlock=r),a&&(i.toBlock=a),n&&(i.blockHash=n),i},a=[];if(e.address)if(Array.isArray(e.address)){var o,i=Xe(e.address);try{for(i.s();!(o=i.n()).done;){var g=o.value;a.push(this._getAddress(g))}}catch(xQ){i.e(xQ)}finally{i.f()}}else a.push(this._getAddress(e.address));var s=void 0;"fromBlock"in e&&(s=this._getBlockTag(e.fromBlock));var c=void 0;return"toBlock"in e&&(c=this._getBlockTag(e.toBlock)),a.filter((function(e){return"string"!==typeof e})).length||null!=s&&"string"!==typeof s||null!=c&&"string"!==typeof c?Promise.all([Promise.all(a),s,c]).then((function(e){return r(e[0],e[1],e[2])})):r(a,s,c)}},{key:"_getTransactionRequest",value:function(e){var t=jg(e),n=[];if(["to","from"].forEach((function(e){if(null!=t[e]){var r=Ii(t[e]);gd(r)?n.push(hn(dn().mark((function n(){return dn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r;case 2:t[e]=n.sent;case 3:case"end":return n.stop()}}),n)})))()):t[e]=r}})),null!=t.blockTag){var r=this._getBlockTag(t.blockTag);gd(r)?n.push(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:t.blockTag=e.sent;case 3:case"end":return e.stop()}}),e)})))()):t.blockTag=r}return n.length?hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))():t}},{key:"getNetwork",value:function(){return(r=r||hn(dn().mark((function e(){var t,n,r,a,o,i,g=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=Cn(this,pd)){e.next=6;break}return t=this._detectNetwork().then((function(e){return g.emit("network",e,null),e}),(function(e){throw Cn(g,pd)===t&&In(g,pd,null),e})),In(this,pd,t),e.next=5,t;case 5:return e.abrupt("return",e.sent.clone());case 6:return n=Cn(this,pd),e.next=9,Promise.all([n,this._detectNetwork()]);case 9:return r=e.sent,a=Ge(r,2),o=a[0],i=a[1],o.chainId!==i.chainId&&(Cn(this,md)?(this.emit("network",i,o),Cn(this,pd)===n&&In(this,pd,Promise.resolve(i))):Sn(!1,"network changed: ".concat(o.chainId," => ").concat(i.chainId," "),"NETWORK_ERROR",{event:"changed"})),e.abrupt("return",o.clone());case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getFeeData",value:function(){return(a=a||hn(dn().mark((function e(){var t,n,r,a,o,i,g=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:if(n=e.sent,r=function(){return(t=t||hn(dn().mark((function e(){var t,r,a,o,i,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({_block:un(g,Rd,Fd).call(g,"latest",!1),gasPrice:hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un(g,kd,xd).call(g,{method:"getGasPrice"});case 3:return t=e.sent,e.abrupt("return",Pn(t,"%response"));case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()});case 2:return t=e.sent,r=t._block,a=t.gasPrice,o=null,i=null,(s=g._wrapBlock(r,n))&&s.baseFeePerGas&&(i=BigInt("1000000000"),o=s.baseFeePerGas*id+i),e.abrupt("return",new Ug(a,o,i));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},!(a=n.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin"))){e.next=11;break}return o=new Cg(a.url),e.next=9,a.processFunc(r,this,o);case 9:return i=e.sent,e.abrupt("return",new Ug(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas));case 11:return e.next=13,r();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"estimateGas",value:function(e){return(o=o||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gd(n=this._getTransactionRequest(t))){e.next=5;break}return e.next=4,n;case 4:n=e.sent;case 5:return e.t0=Pn,e.next=8,un(this,kd,xd).call(this,{method:"estimateGas",transaction:n});case 8:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"%response"));case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"call",value:function(e){return(i=i||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});case 2:return n=e.sent,r=n.tx,a=n.blockTag,e.next=7,un(this,wd,Nd).call(this,un(this,Sd,Yd).call(this,r,a,t.enableCcipRead?0:-1));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getBalance",value:function(e,t){return(g=g||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Pn,e.next=3,un(this,Wd,Hd).call(this,{method:"getBalance"},t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"%response"));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransactionCount",value:function(e,t){return(s=s||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=er,e.next=3,un(this,Wd,Hd).call(this,{method:"getTransactionCount"},t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,"%response"));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getCode",value:function(e,t){return(c=c||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kn,e.next=3,un(this,Wd,Hd).call(this,{method:"getCode"},t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getStorage",value:function(e,t,n){return(l=l||hn(dn().mark((function e(t,n,r){var a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pn(n,"position"),e.t0=Kn,e.next=4,un(this,Wd,Hd).call(this,{method:"getStorage",position:a},t,r);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"broadcastTransaction",value:function(e){return(u=u||hn(dn().mark((function e(t){var n,r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()});case 2:if(n=e.sent,r=n.blockNumber,a=n.hash,o=n.network,(i=VI.from(t)).hash===a){e.next=9;break}throw new Error("@TODO: the returned hash did not match");case 9:return e.abrupt("return",this._wrapTransactionResponse(i,o).replaceableTransaction(r));case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getBlock",value:function(e,t){return(f=f||hn(dn().mark((function e(t,n){var r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({network:this.getNetwork(),params:un(this,Rd,Fd).call(this,t,!!n)});case 2:if(r=e.sent,a=r.network,null!=(o=r.params)){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",this._wrapBlock(o,a));case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransaction",value:function(e){return(I=I||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({network:this.getNetwork(),params:un(this,kd,xd).call(this,{method:"getTransaction",hash:t})});case 2:if(n=e.sent,r=n.network,null!=(a=n.params)){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",this._wrapTransactionResponse(a,r));case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransactionReceipt",value:function(e){return(C=C||hn(dn().mark((function e(t){var n,r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({network:this.getNetwork(),params:un(this,kd,xd).call(this,{method:"getTransactionReceipt",hash:t})});case 2:if(n=e.sent,r=n.network,null!=(a=n.params)){e.next=7;break}return e.abrupt("return",null);case 7:if(null!=a.gasPrice||null!=a.effectiveGasPrice){e.next=14;break}return e.next=10,un(this,kd,xd).call(this,{method:"getTransaction",hash:t});case 10:if(null!=(o=e.sent)){e.next=13;break}throw new Error("report this; could not find tx or effectiveGasPrice");case 13:a.effectiveGasPrice=o.gasPrice;case 14:return e.abrupt("return",this._wrapTransactionReceipt(a,r));case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getTransactionResult",value:function(e){return(d=d||hn(dn().mark((function e(t){var n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({network:this.getNetwork(),result:un(this,kd,xd).call(this,{method:"getTransactionResult",hash:t})});case 2:if(n=e.sent,null!=(r=n.result)){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",Kn(r));case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getLogs",value:function(e){return(A=A||hn(dn().mark((function e(t){var n,r,a,o,i=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gd(n=this._getFilter(t))){e.next=5;break}return e.next=4,n;case 4:n=e.sent;case 5:return e.next=7,yn({network:this.getNetwork(),params:un(this,kd,xd).call(this,{method:"getLogs",filter:n})});case 7:return r=e.sent,a=r.network,o=r.params,e.abrupt("return",o.map((function(e){return i._wrapLog(e,a)})));case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_getProvider",value:function(e){Sn(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}},{key:"getResolver",value:function(e){return(h=h||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QI.fromName(this,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getAvatar",value:function(e){return(p=p||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResolver(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,n.getAvatar();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"resolveName",value:function(e){return(m=m||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResolver(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,n.getAddress();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"lookupAddress",value:function(e){return(b=b||hn(dn().mark((function e(t){var n,r,a,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wa(t),n=zl(t.substring(2).toLowerCase()+".addr.reverse"),e.prev=2,e.next=5,QI.getEnsAddress(this);case 5:return r=e.sent,a=new zs(r,["function resolver(bytes32) view returns (address)"],this),e.next=9,a.resolver(n);case 9:if(null!=(o=e.sent)&&o!==Sg){e.next=12;break}return e.abrupt("return",null);case 12:return i=new zs(o,["function name(bytes32) view returns (string)"],this),e.next=15,i.name(n);case 15:return g=e.sent,e.next=18,this.resolveName(g);case 18:if(e.sent===t){e.next=21;break}return e.abrupt("return",null);case 21:return e.abrupt("return",g);case 24:if(e.prev=24,e.t0=e.catch(2),!Gn(e.t0,"BAD_DATA")||"0x"!==e.t0.value){e.next=28;break}return e.abrupt("return",null);case 28:if(!Gn(e.t0,"CALL_EXCEPTION")){e.next=30;break}return e.abrupt("return",null);case 30:throw e.t0;case 31:return e.abrupt("return",null);case 32:case"end":return e.stop()}}),e,this,[[2,24]])})))).apply(this,arguments)}},{key:"waitForTransaction",value:function(e,t,n){return(y=y||hn(dn().mark((function e(t,n,r){var a,o,i=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(o=null!=n?n:1)){e.next=3;break}return e.abrupt("return",this.getTransactionReceipt(t));case 3:return e.abrupt("return",new Promise((function(e,n){return(a=a||hn(dn().mark((function e(n,a){var g,s,c;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null,c=function e(r){return(g=g||hn(dn().mark((function r(a){var g;return dn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.getTransactionReceipt(t);case 3:if(null==(g=r.sent)){r.next=9;break}if(!(a-g.blockNumber+1>=o)){r.next=9;break}return n(g),s&&(clearTimeout(s),s=null),r.abrupt("return");case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("EEE",r.t0);case 14:i.once("block",e);case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))).apply(this,arguments)},null!=r&&(s=setTimeout((function(){null!=s&&(s=null,i.off("block",c),a(kn("timeout","TIMEOUT",{reason:"timeout"})))}),r)),e.t0=c,e.next=6,i.getBlockNumber();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"waitForBlock",value:function(e){return(v=v||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sn(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"_clearTimeout",value:function(e){var t=Cn(this,Zd).get(e);t&&(t.timer&&clearTimeout(t.timer),Cn(this,Zd).delete(e))}},{key:"_setTimeout",value:function(e,t){var n,r,a=this;null==t&&(t=0);var o=(In(this,vd,(n=Cn(this,vd),r=n++,n)),r),i=function(){Cn(a,Zd).delete(o),e()};if(this.paused)Cn(this,Zd).set(o,{timer:null,func:i,time:t});else{var g=setTimeout(i,t);Cn(this,Zd).set(o,{timer:g,func:i,time:fd()})}return o}},{key:"_forEachSubscriber",value:function(e){var t,n=Xe(Cn(this,Cd).values());try{for(n.s();!(t=n.n()).done;){e(t.value.subscriber)}}catch(xQ){n.e(xQ)}finally{n.f()}}},{key:"_getSubscriber",value:function(e){switch(e.type){case"debug":case"error":case"network":return new cd(e.type);case"block":var t=new xC(this);return t.pollingInterval=this.pollingInterval,t;case"event":return new ad(this,e.filter);case"transaction":return new _C(this,e.hash);case"orphan":return new QC(this,e.filter)}throw new Error("unsupported event: ".concat(e.type))}},{key:"_recoverSubscriber",value:function(e,t){var n,r=Xe(Cn(this,Cd).values());try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.subscriber===e){a.started&&a.subscriber.stop(),a.subscriber=t,a.started&&t.start(),null!=Cn(this,Ad)&&t.pause(Cn(this,Ad));break}}}catch(xQ){r.e(xQ)}finally{r.f()}}},{key:"on",value:function(e,t){return(G=G||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(this,Xd,Ed).call(this,t);case 2:return(r=e.sent).listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=Cn(this,Ad)&&r.subscriber.pause(Cn(this,Ad))),e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"once",value:function(e,t){return(k=k||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(this,Xd,Ed).call(this,t);case 2:return(r=e.sent).listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=Cn(this,Ad)&&r.subscriber.pause(Cn(this,Ad))),e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"emit",value:function(e){return(S=S||hn(dn().mark((function e(t){var n,r,a,o,i,g=this,s=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=s[a];return e.next=3,un(this,Vd,Kd).call(this,t,r);case 3:if((o=e.sent)&&0!==o.listeners.length){e.next=6;break}return e.abrupt("return",!1);case 6:return i=o.listeners.length,o.listeners=o.listeners.filter((function(e){var n=e.listener,a=e.once,o=new us(g,a?null:n,t);try{n.call.apply(n,[g].concat(r,[o]))}catch(i){}return!a})),0===o.listeners.length&&(o.started&&o.subscriber.stop(),Cn(this,Cd).delete(o.tag)),e.abrupt("return",i>0);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"listenerCount",value:function(e){return(w=w||hn(dn().mark((function e(t){var n,r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,un(this,Vd,Kd).call(this,t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",0);case 6:return e.abrupt("return",n.listeners.length);case 7:r=0,a=Xe(Cn(this,Cd).values());try{for(a.s();!(o=a.n()).done;)i=o.value.listeners,r+=i.length}catch(xQ){a.e(xQ)}finally{a.f()}return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"listeners",value:function(e){return(W=W||hn(dn().mark((function e(t){var n,r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,un(this,Vd,Kd).call(this,t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",n.listeners.map((function(e){return e.listener})));case 7:r=[],a=Xe(Cn(this,Cd).values());try{for(a.s();!(o=a.n()).done;)i=o.value.listeners,r=r.concat(i.map((function(e){return e.listener})))}catch(xQ){a.e(xQ)}finally{a.f()}return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"off",value:function(e,t){return(R=R||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(this,Vd,Kd).call(this,t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",this);case 5:return n&&(a=r.listeners.map((function(e){return e.listener})).indexOf(n))>=0&&r.listeners.splice(a,1),n&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),Cn(this,Cd).delete(r.tag)),e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"removeAllListeners",value:function(e){return(V=V||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c,l,u,f;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.next=3,un(this,Xd,Ed).call(this,t);case 3:n=e.sent,r=n.tag,a=n.started,o=n.subscriber,a&&o.stop(),Cn(this,Cd).delete(r),e.next=13;break;case 11:i=Xe(Cn(this,Cd));try{for(i.s();!(g=i.n()).done;)s=Ge(g.value,2),c=s[0],l=s[1],u=l.started,f=l.subscriber,u&&f.stop(),Cn(this,Cd).delete(c)}catch(xQ){i.e(xQ)}finally{i.f()}case 13:return e.abrupt("return",this);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"addListener",value:function(e,t){return(X=X||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.on(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"removeListener",value:function(e,t){return(J=J||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.off(t,n));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"destroyed",get:function(){return Cn(this,hd)}},{key:"destroy",value:function(){this.removeAllListeners();var e,t=Xe(Cn(this,Zd).keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._clearTimeout(n)}}catch(xQ){t.e(xQ)}finally{t.f()}In(this,hd,!0)}},{key:"paused",get:function(){return null!=Cn(this,Ad)},set:function(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}},{key:"pause",value:function(e){if(In(this,yd,-1),null!=Cn(this,Ad)){if(Cn(this,Ad)==!!e)return;Sn(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((function(t){return t.pause(e)})),In(this,Ad,!!e);var t,n=Xe(Cn(this,Zd).values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timer&&clearTimeout(r.timer),r.time=fd()-r.time}}catch(xQ){n.e(xQ)}finally{n.f()}}},{key:"resume",value:function(){if(null!=Cn(this,Ad)){this._forEachSubscriber((function(e){return e.resume()})),In(this,Ad,null);var e,t=Xe(Cn(this,Zd).values());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.time;r<0&&(r=0),n.time=fd(),setTimeout(n.func,r)}}catch(xQ){t.e(xQ)}finally{t.f()}}}}]),x}();function xd(e){return(HC=HC||hn(dn().mark((function e(t){var n,r,a,o=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Cn(this,Bd).cacheTimeout)<0)){e.next=5;break}return e.next=4,this._perform(t);case 4:case 10:return e.abrupt("return",e.sent);case 5:return r=sd(t.method,t),(a=Cn(this,bd).get(r))||(a=this._perform(t),Cn(this,bd).set(r,a),setTimeout((function(){Cn(o,bd).get(r)===a&&Cn(o,bd).delete(r)}),n)),e.next=10,a;case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Yd(e,t,n){return(FC=FC||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sn(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:n,enableCcipRead:!0})}),a=jg(t),e.prev=2,e.t0=Kn,e.next=6,this._perform({method:"call",transaction:a,blockTag:n});case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:if(e.prev=10,e.t2=e.catch(2),!(!this.disableCcipRead&&Bn(e.t2)&&e.t2.data&&r>=0&&"latest"===n&&null!=a.to&&"0x556f1830"===Mn(e.t2.data,0,4))){e.next=37;break}return o=e.t2.data,e.next=16,Ii(a.to,this);case 16:i=e.sent;try{g=Qd(Mn(e.t2.data,4))}catch(u){Sn(!1,u.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:a,info:{data:o}})}return Sn(g.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:a,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:g.errorArgs}}),e.next=21,this.ccipReadFetch(a,g.calldata,g.urls);case 21:return Sn(null!=(s=e.sent),"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:a,info:{data:e.t2.data,errorArgs:g.errorArgs}}),c={to:i,data:En([g.selector,Ud([s,g.extraData])])},this.emit("debug",{action:"sendCcipReadCall",transaction:c}),e.prev=25,e.next=28,un(this,Sd,Yd).call(this,c,n,r+1);case 28:return l=e.sent,this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:l}),e.abrupt("return",l);case 33:throw e.prev=33,e.t3=e.catch(25),this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:e.t3}),e.t3;case 37:throw e.t2;case 38:case"end":return e.stop()}}),e,this,[[2,10],[25,33]])})))).apply(this,arguments)}function Nd(e){return(KC=KC||hn(dn().mark((function e(t){var n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({network:this.getNetwork(),value:t});case 2:return n=e.sent,r=n.value,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Hd(e,t,n){return(EC=EC||hn(dn().mark((function e(t,n,r){var a,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._getAddress(n),o=this._getBlockTag(r),"string"===typeof a&&"string"===typeof o){e.next=9;break}return e.next=5,Promise.all([a,o]);case 5:i=e.sent,g=Ge(i,2),a=g[0],o=g[1];case 9:return e.next=11,un(this,wd,Nd).call(this,un(this,kd,xd).call(this,Object.assign(t,{address:a,blockTag:o})));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Fd(e,t){return(TC=TC||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Nn(t,32)){e.next=4;break}return e.next=3,un(this,kd,xd).call(this,{method:"getBlock",blockHash:t,includeTransactions:n});case 3:return e.abrupt("return",e.sent);case 4:if("string"===typeof(r=this._getBlockTag(t))){e.next=9;break}return e.next=8,r;case 8:r=e.sent;case 9:return e.next=11,un(this,kd,xd).call(this,{method:"getBlock",blockTag:r,includeTransactions:n});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Kd(e,t){return(MC=MC||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ud(t,this);case 2:if(!("event"===(r=e.sent).type&&n&&n.length>0&&!0===n[0].removed)){e.next=7;break}return e.next=6,ud({orphan:"drop-log",log:n[0]},this);case 6:r=e.sent;case 7:return e.abrupt("return",Cn(this,Cd).get(r.tag)||null);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ed(e){return(zC=zC||hn(dn().mark((function e(t){var n,r,a,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ud(t,this);case 2:return n=e.sent,r=n.tag,(a=Cn(this,Cd).get(r))||(o=this._getSubscriber(n),i=new WeakMap,g=new Map,a={subscriber:o,tag:r,addressableMap:i,nameMap:g,started:!1,listeners:[]},Cn(this,Cd).set(r,a)),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Td(e,t){try{var n=Md(e,t);if(n)return eo(n)}catch(r){}return null}function Md(e,t){if("0x"===e)return null;try{var n=er(Mn(e,t,t+32)),r=er(Mn(e,n,n+32));return Mn(e,n+32,n+32+r)}catch(a){}return null}function zd(e){var t=nr(e);if(t.length>32)throw new Error("internal; should not happen");var n=new Uint8Array(32);return n.set(t,32-t.length),n}function Dd(e){if(e.length%32===0)return e;var t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}var Ld=new Uint8Array([]);function Ud(e){for(var t=[],n=0,r=0;r<e.length;r++)t.push(Ld),n+=32;for(var a=0;a<e.length;a++){var o=xn(e[a]);t[a]=zd(n),t.push(zd(o.length)),t.push(Dd(o)),n+=32+32*Math.ceil(o.length/32)}return En(t)}var jd,Od="0x0000000000000000000000000000000000000000000000000000000000000000";function Qd(e){var t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Sn(Tn(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});var n=Mn(e,0,32);Sn(Mn(n,0,12)===Mn(Od,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=Mn(n,12);try{for(var r=[],a=er(Mn(e,32,64)),o=er(Mn(e,a,a+32)),i=Mn(e,a+32),g=0;g<o;g++){var s=Td(i,32*g);if(null==s)throw new Error("abort");r.push(s)}t.urls=r}catch(u){Sn(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{var c=Md(e,64);if(null==c)throw new Error("abort");t.calldata=c}catch(u){Sn(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Sn(Mn(e,100,128)===Mn(Od,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=Mn(e,96,100);try{var l=Md(e,128);if(null==l)throw new Error("abort");t.extraData=l}catch(u){Sn(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((function(e){return t[e]})),t}function Pd(e,t){if(e.provider)return e.provider;Sn(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}function _d(e,t){return(jd=jd||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(r=jg(n)).to&&(r.to=Ii(r.to,t)),null!=r.from?(a=r.from,r.from=Promise.all([t.getAddress(),Ii(a,t)]).then((function(e){var t=Ge(e,2),n=t[0],r=t[1];return wn(n.toLowerCase()===r.toLowerCase(),"transaction from mismatch","tx.from",r),n}))):r.from=t.getAddress(),e.next=5,yn(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qd,$d=function(e,t,n,r,a,o,i){function g(e){Z(this,g),b(this,"provider",void 0),vn(this,{provider:e||null})}return B(g,[{key:"getNonce",value:function(t){return(e=e||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Pd(this,"getTransactionCount"),e.next=3,this.getAddress();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",e.t0.getTransactionCount.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"populateCall",value:function(e){return(t=t||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_d(this,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"populateTransaction",value:function(e){return(n=n||hn(dn().mark((function e(t){var n,r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pd(this,"populateTransaction"),e.next=3,_d(this,t);case 3:if(null!=(r=e.sent).nonce){e.next=8;break}return e.next=7,this.getNonce("pending");case 7:r.nonce=e.sent;case 8:if(null!=r.gasLimit){e.next=12;break}return e.next=11,this.estimateGas(r);case 11:r.gasLimit=e.sent;case 12:return e.next=14,this.provider.getNetwork();case 14:if(a=e.sent,null!=r.chainId?wn(Pn(r.chainId)===a.chainId,"transaction chainId mismatch","tx.chainId",t.chainId):r.chainId=a.chainId,o=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas,null==r.gasPrice||2!==r.type&&!o?0!==r.type&&1!==r.type||!o||wn(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):wn(!1,"eip-1559 transaction do not support gasPrice","tx",t),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas){e.next=22;break}r.type=2,e.next=34;break;case 22:if(0!==r.type&&1!==r.type){e.next=30;break}return e.next=25,n.getFeeData();case 25:Sn(null!=(i=e.sent).gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=i.gasPrice),e.next=34;break;case 30:return e.next=32,n.getFeeData();case 32:g=e.sent,null==r.type?null!=g.maxFeePerGas&&null!=g.maxPriorityFeePerGas?(r.type=2,null!=r.gasPrice?(s=r.gasPrice,delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s):(null==r.maxFeePerGas&&(r.maxFeePerGas=g.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=g.maxPriorityFeePerGas))):null!=g.gasPrice?(Sn(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=g.gasPrice),r.type=0):Sn(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"}):2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=g.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=g.maxPriorityFeePerGas));case 34:return e.next=36,yn(r);case 36:return e.abrupt("return",e.sent);case 37:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"estimateGas",value:function(e){return(r=r||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Pd(this,"estimateGas"),e.next=3,this.populateCall(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.estimateGas.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"call",value:function(e){return(a=a||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Pd(this,"call"),e.next=3,this.populateCall(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.call.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"resolveName",value:function(e){return(o=o||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pd(this,"resolveName"),e.next=3,n.resolveName(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"sendTransaction",value:function(e){return(i=i||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pd(this,"sendTransaction"),e.next=3,this.populateTransaction(t);case 3:return delete(r=e.sent).from,a=VI.from(r),e.t0=n,e.next=9,this.signTransaction(a);case 9:return e.t1=e.sent,e.next=12,e.t0.broadcastTransaction.call(e.t0,e.t1);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),g}(),eA=new WeakSet,tA=function(e,t,n,r,a){d(g,e);var o=p(g);function g(e,t){var n;return Z(this,g),cn(i(n=o.call(this,t)),eA),b(i(n),"address",void 0),vn(i(n),{address:e}),n}return B(g,[{key:"getAddress",value:function(){return(t=t||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.address);case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"connect",value:function(e){return new g(this.address,e)}},{key:"signTransaction",value:function(e){return(n=n||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:un(this,eA,nA).call(this,"transactions","signTransaction");case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signMessage",value:function(e){return(r=r||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:un(this,eA,nA).call(this,"messages","signMessage");case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signTypedData",value:function(e,t,n){return(a=a||hn(dn().mark((function e(t,n,r){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:un(this,eA,nA).call(this,"typed-data","signTypedData");case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),g}($d);function nA(e,t){Sn(!1,"VoidSigner cannot sign ".concat(e),"UNSUPPORTED_OPERATION",{operation:t})}var rA=new WeakMap,aA=new WeakMap,oA=new WeakMap,iA=new WeakMap,gA=new WeakMap,sA=new WeakMap,cA=new WeakSet,lA=new WeakSet,uA=function(){function e(t){Z(this,e),cn(this,lA),cn(this,cA),ln(this,rA,{writable:!0,value:void 0}),ln(this,aA,{writable:!0,value:void 0}),ln(this,oA,{writable:!0,value:void 0}),ln(this,iA,{writable:!0,value:void 0}),ln(this,gA,{writable:!0,value:void 0}),ln(this,sA,{writable:!0,value:void 0}),In(this,rA,t),In(this,aA,null),In(this,oA,un(this,cA,fA).bind(this)),In(this,iA,!1),In(this,gA,null),In(this,sA,!1)}return B(e,[{key:"_subscribe",value:function(e){throw new Error("subclasses must override this")}},{key:"_emitResults",value:function(e,t){throw new Error("subclasses must override this")}},{key:"_recover",value:function(e){throw new Error("subclasses must override this")}},{key:"start",value:function(){Cn(this,iA)||(In(this,iA,!0),un(this,cA,fA).call(this,-2))}},{key:"stop",value:function(){Cn(this,iA)&&(In(this,iA,!1),In(this,sA,!0),un(this,lA,IA).call(this),Cn(this,rA).off("block",Cn(this,oA)))}},{key:"pause",value:function(e){e&&un(this,lA,IA).call(this),Cn(this,rA).off("block",Cn(this,oA))}},{key:"resume",value:function(){this.start()}}]),e}();function fA(e){return(qd=qd||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==Cn(this,aA)&&In(this,aA,this._subscribe(Cn(this,rA))),n=null,e.prev=3,e.next=6,Cn(this,aA);case 6:n=e.sent,e.next=13;break;case 9:if(e.prev=9,e.t0=e.catch(3),Gn(e.t0,"UNSUPPORTED_OPERATION")&&"eth_newFilter"===e.t0.operation){e.next=13;break}throw e.t0;case 13:if(null!=n){e.next=17;break}return In(this,aA,null),Cn(this,rA)._recoverSubscriber(this,this._recover(Cn(this,rA))),e.abrupt("return");case 17:return e.next=19,Cn(this,rA).getNetwork();case 19:if(r=e.sent,Cn(this,gA)||In(this,gA,r),Cn(this,gA).chainId===r.chainId){e.next=23;break}throw new Error("chaid changed");case 23:if(!Cn(this,sA)){e.next=25;break}return e.abrupt("return");case 25:return e.next=27,Cn(this,rA).send("eth_getFilterChanges",[n]);case 27:return a=e.sent,e.next=30,this._emitResults(Cn(this,rA),a);case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),console.log("@TODO",e.t1);case 35:Cn(this,rA).once("block",Cn(this,oA));case 36:case"end":return e.stop()}}),e,this,[[0,32],[3,9]])})))).apply(this,arguments)}function IA(){var e=this,t=Cn(this,aA);t&&(In(this,aA,null),t.then((function(t){Cn(e,rA).send("eth_uninstallFilter",[t])})))}var CA=new WeakMap,dA=function(e,t,n){d(a,e);var r=p(a);function a(e,t){var n,o;return Z(this,a),ln(i(n=r.call(this,e)),CA,{writable:!0,value:void 0}),In(i(n),CA,(o=t,JSON.parse(JSON.stringify(o)))),n}return B(a,[{key:"_recover",value:function(e){return new ad(e,Cn(this,CA))}},{key:"_subscribe",value:function(e){return(t=t||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.send("eth_newFilter",[Cn(this,CA)]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_emitResults",value:function(e,t){return(n=n||hn(dn().mark((function e(t,n){var r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Xe(n);try{for(r.s();!(a=r.n()).done;)o=a.value,t.emit(Cn(this,CA),t._wrapLog(o,t._network))}catch(xQ){r.e(xQ)}finally{r.f()}case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),a}(uA),AA=function(e,t,n){d(a,e);var r=p(a);function a(){return Z(this,a),r.apply(this,arguments)}return B(a,[{key:"_subscribe",value:function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.send("eth_newPendingTransactionFilter",[]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"_emitResults",value:function(e,t){return(n=n||hn(dn().mark((function e(t,n){var r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Xe(n);try{for(r.s();!(a=r.n()).done;)o=a.value,t.emit("pending",o)}catch(xQ){r.e(xQ)}finally{r.f()}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}]),a}(uA),hA="bigint,boolean,function,number,string,symbol".split(/,/g);function pA(e){if(null==e||hA.indexOf(typeof e)>=0)return e;if("function"===typeof e.getAddress)return e;if(Array.isArray(e))return e.map(pA);if("object"===typeof e)return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),{});throw new Error("should not happen: ".concat(e," (").concat(typeof e,")"))}function mA(e){return new Promise((function(t){setTimeout(t,e)}))}function bA(e){return e?e.toLowerCase():e}function yA(e){return e&&"number"===typeof e.pollingInterval}var vA={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3},ZA=function(e,t,n,r,a,o,g,s,c,l){d(f,e);var u=p(f);function f(e,t){var n;return Z(this,f),b(i(n=u.call(this,e)),"address",void 0),t=wa(t),vn(i(n),{address:t}),n}return B(f,[{key:"connect",value:function(e){Sn(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}},{key:"getAddress",value:function(){return(t=t||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.address);case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"populateTransaction",value:function(e){return(n=n||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateCall(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"sendUncheckedTransaction",value:function(e){return(r=r||hn(dn().mark((function e(t){var n,r,a,o,i,g=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=pA(t),r=[],n.from?(a=n.from,r.push(hn(dn().mark((function e(){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ii(a,g.provider);case 2:wn(null!=(r=e.sent)&&r.toLowerCase()===g.address.toLowerCase(),"from address mismatch","transaction",t),n.from=r;case 5:case"end":return e.stop()}}),e)})))())):n.from=this.address,null==n.gasLimit&&r.push(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.provider.estimateGas(v(v({},n),{},{from:g.address}));case 2:n.gasLimit=e.sent;case 3:case"end":return e.stop()}}),e)})))()),null!=n.to&&(o=n.to,r.push(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ii(o,g.provider);case 2:n.to=e.sent;case 3:case"end":return e.stop()}}),e)})))())),!r.length){e.next=8;break}return e.next=8,Promise.all(r);case 8:return i=this.provider.getRpcTransaction(n),e.abrupt("return",this.provider.send("eth_sendTransaction",[i]));case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"sendTransaction",value:function(e){return(a=a||hn(dn().mark((function e(t){var n,r,a=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getBlockNumber();case 2:return n=e.sent,e.next=5,this.sendUncheckedTransaction(t);case 5:return r=e.sent,e.next=8,new Promise((function(e,t){var o,i=[1e3,100];!function t(){return(o=o||hn(dn().mark((function o(){var g;return dn().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,a.provider.getTransaction(r);case 2:if(null==(g=o.sent)){o.next=6;break}return e(g.replaceableTransaction(n)),o.abrupt("return");case 6:a.provider._setTimeout((function(){t()}),i.pop()||4e3);case 7:case"end":return o.stop()}}),o)})))).apply(this,arguments)}()}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signTransaction",value:function(e){return(o=o||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=pA(t)).from){e.next=9;break}return e.next=4,Ii(n.from,this.provider);case 4:wn(null!=(r=e.sent)&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=r,e.next=10;break;case 9:n.from=this.address;case 10:return a=this.provider.getRpcTransaction(n),e.next=13,this.provider.send("eth_signTransaction",[a]);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signMessage",value:function(e){return(g=g||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?$a(t):t,e.next=3,this.provider.send("personal_sign",[Kn(n),this.address.toLowerCase()]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signTypedData",value:function(e,t,n){return(s=s||hn(dn().mark((function e(t,n,r){var a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=pA(r),e.next=3,Ni.resolveNames(t,n,o,(function(e){return(a=a||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ii(t);case 2:return wn(null!=(n=e.sent),"TypedData does not support null address","value",t),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}));case 3:return i=e.sent,e.next=6,this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Ni.getPayload(i.domain,n,i.value))]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"unlock",value:function(e){return(c=c||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null]));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_legacySignMessage",value:function(e){return(l=l||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?$a(t):t,e.next=3,this.provider.send("eth_sign",[this.address.toLowerCase(),Kn(n)]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),f}($d),GA=new WeakMap,BA=new WeakMap,kA=new WeakMap,SA=new WeakMap,wA=new WeakMap,WA=new WeakMap,RA=new WeakSet,VA=function(e,t,n,r,a,o){d(s,e);var g=p(s);function s(e,t){var n;Z(this,s),cn(i(n=g.call(this,e,t)),RA),ln(i(n),GA,{writable:!0,value:void 0}),ln(i(n),BA,{writable:!0,value:void 0}),ln(i(n),kA,{writable:!0,value:void 0}),ln(i(n),SA,{writable:!0,value:void 0}),ln(i(n),wA,{writable:!0,value:void 0}),ln(i(n),WA,{writable:!0,value:void 0}),In(i(n),BA,1),In(i(n),GA,Object.assign({},vA,t||{})),In(i(n),kA,[]),In(i(n),SA,null),In(i(n),WA,null);var r=null,a=new Promise((function(e){r=e}));In(i(n),wA,{promise:a,resolve:r});var o=n._getOption("staticNetwork");return o&&(wn(null==e||o.matches(e),"staticNetwork MUST match network object","options",t),In(i(n),WA,o)),n}return B(s,[{key:"_getOption",value:function(e){return Cn(this,GA)[e]}},{key:"_network",get:function(){return Sn(Cn(this,WA),"network is not available yet","NETWORK_ERROR"),Cn(this,WA)}},{key:"_perform",value:function(e){return(t=t||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("call"!==t.method&&"estimateGas"!==t.method){e.next=8;break}if(!(n=t.transaction)||null==n.type||!Pn(n.type)){e.next=8;break}if(null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas){e.next=8;break}return e.next=6,this.getFeeData();case 6:null==(r=e.sent).maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},n,{type:void 0})}));case 8:if(null==(a=this.getRpcRequest(t))){e.next=13;break}return e.next=12,this.send(a.method,a.args);case 12:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",gn(A(s.prototype),"_perform",this).call(this,t));case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_detectNetwork",value:function(){return(n=n||hn(dn().mark((function e(){var t,n,r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._getOption("staticNetwork"))){e.next=3;break}return e.abrupt("return",r);case 3:if(!this.ready){e.next=11;break}return e.t0=bC,e.t1=Pn,e.next=8,this.send("eth_chainId",[]);case 8:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",e.t0.from.call(e.t0,e.t3));case 11:return a={id:(In(this,BA,(t=Cn(this,BA),n=t++,t)),n),method:"eth_chainId",params:[],jsonrpc:"2.0"},this.emit("debug",{action:"sendRpcPayload",payload:a}),e.prev=13,e.next=16,this._send(a);case 16:o=e.sent[0],e.next=23;break;case 19:throw e.prev=19,e.t4=e.catch(13),this.emit("debug",{action:"receiveRpcError",error:e.t4}),e.t4;case 23:if(this.emit("debug",{action:"receiveRpcResult",result:o}),!("result"in o)){e.next=26;break}return e.abrupt("return",bC.from(Pn(o.result)));case 26:throw this.getRpcError(a,o);case 27:case"end":return e.stop()}}),e,this,[[13,19]])})))).apply(this,arguments)}},{key:"_start",value:function(){var e=this;null!=Cn(this,wA)&&null!=Cn(this,wA).resolve&&(Cn(this,wA).resolve(),In(this,wA,null),hn(dn().mark((function t(){return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=Cn(e,WA)||e.destroyed){t.next=21;break}return t.prev=1,t.t0=In,t.t1=e,t.t2=WA,t.next=7,e._detectNetwork();case 7:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),t.next=19;break;case 11:if(t.prev=11,t.t4=t.catch(1),!e.destroyed){t.next=15;break}return t.abrupt("break",21);case 15:return console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),e.emit("error",kn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t.t4}})),t.next=19,mA(1e3);case 19:t.next=0;break;case 21:un(e,RA,XA).call(e);case 22:case"end":return t.stop()}}),t,null,[[1,11]])})))())}},{key:"_waitUntilReady",value:function(){return(r=r||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=Cn(this,wA)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cn(this,wA).promise;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_getSubscriber",value:function(e){return"pending"===e.type?new AA(this):"event"===e.type?this._getOption("polling")?new ad(this,e.filter):new dA(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new cd("orphan"):gn(A(s.prototype),"_getSubscriber",this).call(this,e)}},{key:"ready",get:function(){return null==Cn(this,wA)}},{key:"getRpcTransaction",value:function(e){var t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(n){if(null!=e[n]){var r=n;"gasLimit"===n&&(r="gas"),t[r]=rr(Pn(e[n],"tx.".concat(n)))}})),["from","to","data"].forEach((function(n){null!=e[n]&&(t[n]=Kn(e[n]))})),e.accessList&&(t.accessList=Ki(e.accessList)),t}},{key:"getRpcRequest",value:function(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[bA(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[bA(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[bA(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[bA(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(bA):e.filter.address=bA(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}},{key:"getRpcError",value:function(e,t){var n=e.method,r=t.error;if("eth_estimateGas"===n&&r.message){var a=r.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return kn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}})}if("eth_call"===n||"eth_estimateGas"===n){var o=HA(r),i=ci.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],o?o.data:null);return i.info={error:r,payload:e},i}var g=JSON.stringify(function(e){var t=[];return FA(e,t),t}(r));if("string"===typeof r.message&&r.message.match(/user denied|ethers-user-denied/i)){return kn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:r}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){var s=e.params[0];if(g.match(/insufficient funds|base fee exceeds gas limit/i))return kn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:s,info:{error:r}});if(g.match(/nonce/i)&&g.match(/too low/i))return kn("nonce has already been used","NONCE_EXPIRED",{transaction:s,info:{error:r}});if(g.match(/replacement transaction/i)&&g.match(/underpriced/i))return kn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:s,info:{error:r}});if(g.match(/only replay-protected/i))return kn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:s,info:{error:r}}})}var c=!!g.match(/the method .* does not exist/i);return c||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(c=!0),c?kn("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):kn("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}},{key:"send",value:function(e,t){var n,r,a=this;if(this.destroyed)return Promise.reject(kn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));var o=(In(this,BA,(n=Cn(this,BA),r=n++,n)),r),i=new Promise((function(n,r){Cn(a,kA).push({resolve:n,reject:r,payload:{method:e,params:t,id:o,jsonrpc:"2.0"}})}));return un(this,RA,XA).call(this),i}},{key:"getSigner",value:function(e){return(a=a||hn(dn().mark((function e(t){var n,r,a,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t&&(t=0),n=this.send("eth_accounts",[]),"number"!==typeof t){e.next=9;break}return e.next=5,n;case 5:if(r=e.sent,!(t>=r.length)){e.next=8;break}throw new Error("no such account");case 8:return e.abrupt("return",new ZA(this,r[t]));case 9:return e.next=11,yn({network:this.getNetwork(),accounts:n});case 11:a=e.sent,o=a.accounts,t=wa(t),i=Xe(o),e.prev=15,i.s();case 17:if((g=i.n()).done){e.next=23;break}if(wa(g.value)!==t){e.next=21;break}return e.abrupt("return",new ZA(this,t));case 21:e.next=17;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(15),i.e(e.t0);case 28:return e.prev=28,i.f(),e.finish(28);case 31:throw new Error("invalid account");case 32:case"end":return e.stop()}}),e,this,[[15,25,28,31]])})))).apply(this,arguments)}},{key:"listAccounts",value:function(){return(o=o||hn(dn().mark((function e(){var t,n=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("eth_accounts",[]);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return new ZA(n,e)})));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"destroy",value:function(){Cn(this,SA)&&(clearTimeout(Cn(this,SA)),In(this,SA,null));var e,t=Xe(Cn(this,kA));try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.payload;(0,n.reject)(kn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}))}}catch(xQ){t.e(xQ)}finally{t.f()}In(this,kA,[]),gn(A(s.prototype),"destroy",this).call(this)}}]),s}(Jd);function XA(){var e=this;if(!Cn(this,SA)){var t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");In(this,SA,setTimeout((function(){In(e,SA,null);var t=Cn(e,kA);In(e,kA,[]);for(var n=function(){for(var n=[t.shift()];t.length&&n.length!==Cn(e,GA).batchMaxCount;){n.push(t.shift());var r=JSON.stringify(n.map((function(e){return e.payload})));if(r.length>Cn(e,GA).batchMaxSize){t.unshift(n.pop());break}}hn(dn().mark((function t(){var r,a,o,i,g,s,c;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=1===n.length?n[0].payload:n.map((function(e){return e.payload})),e.emit("debug",{action:"sendRpcPayload",payload:r}),t.prev=2,t.next=5,e._send(r);case 5:a=t.sent,e.emit("debug",{action:"receiveRpcResult",result:a}),o=dn().mark((function t(){var n,r,o,s,c,l;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=g[i],r=n.resolve,o=n.reject,s=n.payload,!e.destroyed){t.next=4;break}return o(kn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method})),t.abrupt("return",0);case 4:if(c=a.filter((function(e){return e.id===s.id}))[0],null!=c){t.next=10;break}return l=kn("missing response for request","BAD_DATA",{value:a,info:{payload:s}}),e.emit("error",l),o(l),t.abrupt("return",0);case 10:if(!("error"in c)){t.next=13;break}return o(e.getRpcError(s,c)),t.abrupt("return",0);case 13:r(c.result);case 14:case"end":return t.stop()}}),t)})),i=0,g=n;case 9:if(!(i<g.length)){t.next=17;break}return t.delegateYield(o(),"t0",11);case 11:if(0!==t.t0){t.next=14;break}return t.abrupt("continue",14);case 14:i++,t.next=9;break;case 17:t.next=23;break;case 19:for(t.prev=19,t.t1=t.catch(2),e.emit("debug",{action:"receiveRpcError",error:t.t1}),s=0,c=n;s<c.length;s++)(0,c[s].reject)(t.t1);case 23:case"end":return t.stop()}}),t,null,[[2,19]])})))()};t.length;)n()}),t))}}var JA=new WeakMap,xA=function(e){d(n,e);var t=p(n);function n(e,r){var a;return Z(this,n),ln(i(a=t.call(this,e,r)),JA,{writable:!0,value:void 0}),In(i(a),JA,4e3),a}return B(n,[{key:"_getSubscriber",value:function(e){var t=gn(A(n.prototype),"_getSubscriber",this).call(this,e);return yA(t)&&(t.pollingInterval=Cn(this,JA)),t}},{key:"pollingInterval",get:function(){return Cn(this,JA)},set:function(e){var t=this;if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");In(this,JA,e),this._forEachSubscriber((function(e){yA(e)&&(e.pollingInterval=Cn(t,JA))}))}}]),n}(VA),YA=new WeakMap,NA=function(e,t,n){d(a,e);var r=p(a);function a(e,t,n){var o;return Z(this,a),null==e&&(e="http://localhost:8545"),ln(i(o=r.call(this,t,n)),YA,{writable:!0,value:void 0}),In(i(o),YA,"string"===typeof e?new Cg(e):e.clone()),o}return B(a,[{key:"_getConnection",value:function(){return Cn(this,YA).clone()}},{key:"send",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._start();case 2:return e.next=4,gn(A(a.prototype),"send",this).call(this,t,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"_send",value:function(e){return(n=n||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this._getConnection()).body=JSON.stringify(t),n.setHeader("content-type","application/json"),e.next=5,n.send();case 5:return(r=e.sent).assertOk(),a=r.bodyJson,Array.isArray(a)||(a=[a]),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),a}(xA);function HA(e){if(null==e)return null;if("string"===typeof e.message&&e.message.match(/revert/i)&&Nn(e.data))return{message:e.message,data:e.data};if("object"===typeof e){for(var t in e){var n=HA(e[t]);if(n)return n}return null}if("string"===typeof e)try{return HA(JSON.parse(e))}catch(r){}return null}function FA(e,t){if(null!=e){if("string"===typeof e.message&&t.push(e.message),"object"===typeof e)for(var n in e)FA(e[n],t);if("string"===typeof e)try{return FA(JSON.parse(e),t)}catch(r){}}}var KA="\x19Ethereum Signed Message:\n";function EA(e){return"string"===typeof e&&(e=$a(e)),pa(En([$a(KA),$a(String(e.length)),e]))}var TA=new WeakMap,MA=function(e,t,n,r,a){d(g,e);var o=p(g);function g(e,t){var n;Z(this,g),b(i(n=o.call(this,t)),"address",void 0),ln(i(n),TA,{writable:!0,value:void 0}),wn(e&&"function"===typeof e.sign,"invalid private key","privateKey","[ REDACTED ]"),In(i(n),TA,e);var r=nI(n.signingKey.publicKey);return vn(i(n),{address:r}),n}return B(g,[{key:"signingKey",get:function(){return Cn(this,TA)}},{key:"privateKey",get:function(){return this.signingKey.privateKey}},{key:"getAddress",value:function(){return(t=t||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.address);case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"connect",value:function(e){return new g(Cn(this,TA),e)}},{key:"signTransaction",value:function(e){return(n=n||hn(dn().mark((function e(t){var n,r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn({to:t.to?Ii(t.to,this.provider):void 0,from:t.from?Ii(t.from,this.provider):void 0});case 2:return n=e.sent,r=n.to,a=n.from,null!=r&&(t.to=r),null!=a&&(t.from=a),null!=t.from&&(wn(wa(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from),(o=VI.from(t)).signature=this.signingKey.sign(o.unsignedHash),e.abrupt("return",o.serialized);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signMessage",value:function(e){return(r=r||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signMessageSync(t));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"signMessageSync",value:function(e){return this.signingKey.sign(EA(e)).serialized}},{key:"signTypedData",value:function(e,t,n){return(a=a||hn(dn().mark((function e(t,n,r){var a,o,i=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ni.resolveNames(t,n,r,(function(e){return(a=a||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sn(null!=i.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:t}}),e.next=3,i.provider.resolveName(t);case 3:return Sn(null!=(n=e.sent),"unconfigured ENS name","UNCONFIGURED_NAME",{value:t}),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}));case 2:return o=e.sent,e.abrupt("return",this.signingKey.sign(Ni.hash(o.domain,n,o.value)).serialized);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),g}($d),zA=function(e){return Ef("sha256").update(e).digest()},DA=function(e){return Ef("sha512").update(e).digest()},LA=zA,UA=DA,jA=!1,OA=!1;function QA(e){var t=xn(e,"data");return Kn(LA(t))}function PA(e){var t=xn(e,"data");return Kn(UA(t))}QA._=zA,QA.lock=function(){jA=!0},QA.register=function(e){if(jA)throw new Error("sha256 is locked");LA=e},Object.freeze(QA),PA._=DA,PA.lock=function(){OA=!0},PA.register=function(e){if(OA)throw new Error("sha512 is locked");UA=e},Object.freeze(QA);for(var _A=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),qA=Uint8Array.from({length:16},(function(e,t){return t})),$A=qA.map((function(e){return(9*e+5)%16})),eh=[qA],th=[$A],nh=0;nh<4;nh++)for(var rh=0,ah=[eh,th];rh<ah.length;rh++){var oh=ah[rh];oh.push(oh[nh].map((function(e){return _A[e]})))}var ih=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((function(e){return new Uint8Array(e)})),gh=eh.map((function(e,t){return e.map((function(e){return ih[t][e]}))})),sh=th.map((function(e,t){return e.map((function(e){return ih[t][e]}))})),ch=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),lh=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),uh=function(e,t){return e<<t|e>>>32-t};function fh(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}var Ih=new Uint32Array(16),Ch=function(e){d(n,e);var t=p(n);function n(){var e;return Z(this,n),(e=t.call(this,64,20,8,!0)).h0=1732584193,e.h1=-271733879,e.h2=-1732584194,e.h3=271733878,e.h4=-1009589776,e}return B(n,[{key:"get",value:function(){return[this.h0,this.h1,this.h2,this.h3,this.h4]}},{key:"set",value:function(e,t,n,r,a){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|a}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Ih[n]=e.getUint32(t,!0);for(var r=0|this.h0,a=r,o=0|this.h1,i=o,g=0|this.h2,s=g,c=0|this.h3,l=c,u=0|this.h4,f=u,I=0;I<5;I++){for(var C=4-I,d=ch[I],A=lh[I],h=eh[I],p=th[I],m=gh[I],b=sh[I],y=0;y<16;y++){var v=uh(r+fh(I,o,g,c)+Ih[h[y]]+d,m[y])+u|0;r=u,u=c,c=0|uh(g,10),g=o,o=v}for(var Z=0;Z<16;Z++){var G=uh(a+fh(C,i,s,l)+Ih[p[Z]]+A,b[Z])+f|0;a=f,f=l,l=0|uh(s,10),s=i,i=G}}this.set(this.h1+g+l|0,this.h2+c+f|0,this.h3+u+a|0,this.h4+r+i|0,this.h0+o+s|0)}},{key:"roundClean",value:function(){Ih.fill(0)}},{key:"destroy",value:function(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}]),n}(bf),dh=zr((function(){return new Ch})),Ah=!1,hh=function(e){return dh(e)},ph=hh;function mh(e){var t=xn(e,"data");return Kn(ph(t))}mh._=hh,mh.lock=function(){Ah=!0},mh.register=function(e){if(Ah)throw new TypeError("ripemd160 is locked");ph=e},Object.freeze(mh);var bh=!1,yh=function(e){return new Uint8Array(function(e){Sn(null!=Kf,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),wn(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);var t=new Uint8Array(e);return Kf.getRandomValues(t),t}(e))},vh=yh;function Zh(e){return vh(e)}Zh._=yh,Zh.lock=function(){bh=!0},Zh.register=function(e){if(bh)throw new Error("randomBytes is locked");vh=e},Object.freeze(Zh);var Gh=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Bh=/^[a-z]*$/i;function kh(e,t){var n=97;return e.reduce((function(e,r){return r===t?n++:r.match(Bh)?e.push(String.fromCharCode(n)+r):(n=97,e.push(r)),e}),[])}function Sh(e){return wn("0"===e[0],"unsupported auwl data","data",e),function(e,t){for(var n=Gh.length-1;n>=0;n--)e=e.split(Gh[n]).join(t.substring(2*n,2*n+2));var r=[],a=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(function(e,t,n,a){if(n)for(var o=parseInt(n);o>=0;o--)r.push(";");else r.push(t.toLowerCase());return""}));if(a)throw new Error("leftovers: ".concat(JSON.stringify(a)));return kh(kh(r,";"),":")}(e.substring(1+2*Gh.length),e.substring(1,1+2*Gh.length))}var wh=function(){function e(t){Z(this,e),b(this,"locale",void 0),vn(this,{locale:t})}return B(e,[{key:"split",value:function(e){return e.toLowerCase().split(/\s+/g)}},{key:"join",value:function(e){return e.join(" ")}}]),e}(),Wh=new WeakMap,Rh=new WeakMap,Vh=new WeakMap,Xh=new WeakSet,Jh=function(e){d(n,e);var t=p(n);function n(e,r,a){var o;return Z(this,n),cn(i(o=t.call(this,e)),Xh),ln(i(o),Wh,{writable:!0,value:void 0}),ln(i(o),Rh,{writable:!0,value:void 0}),ln(i(o),Vh,{writable:!0,value:void 0}),In(i(o),Wh,r),In(i(o),Rh,a),In(i(o),Vh,null),o}return B(n,[{key:"_data",get:function(){return Cn(this,Wh)}},{key:"_decodeWords",value:function(){return Sh(Cn(this,Wh))}},{key:"getWord",value:function(e){var t=un(this,Xh,xh).call(this);return wn(e>=0&&e<t.length,"invalid word index: ".concat(e),"index",e),t[e]}},{key:"getWordIndex",value:function(e){return un(this,Xh,xh).call(this).indexOf(e)}}]),n}(wh);function xh(){if(null==Cn(this,Vh)){var e=this._decodeWords();if(ao(e.join("\n")+"\n")!==Cn(this,Rh))throw new Error("BIP39 Wordlist for ".concat(this.locale," FAILED"));In(this,Vh,e)}return Cn(this,Vh)}var Yh=null,Nh=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.call(this,"en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}return B(n,null,[{key:"wordlist",value:function(){return null==Yh&&(Yh=new n),Yh}}]),n}(Jh),Hh=!1,Fh=function(e,t,n,r,a){return function(e,t,n,r,a){var o={sha256:Sf,sha512:Hf}[a];return wn(null!=o,"invalid pbkdf2 algorithm","algorithm",a),mf(o,e,t,{c:n,dkLen:r})}(e,t,n,r,a)},Kh=Fh;function Eh(e,t,n,r,a){var o=xn(e,"password"),i=xn(t,"salt");return Kn(Kh(o,i,n,r,a))}function Th(e){return(1<<e)-1<<8-e&255}function Mh(e,t){Vn("NFKD"),null==t&&(t=Nh.wordlist());var n=t.split(e);wn(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");for(var r=new Uint8Array(Math.ceil(11*n.length/8)),a=0,o=0;o<n.length;o++){var i=t.getWordIndex(n[o].normalize("NFKD"));wn(i>=0,"invalid mnemonic word at index ".concat(o),"mnemonic","[ REDACTED ]");for(var g=0;g<11;g++)i&1<<10-g&&(r[a>>3]|=1<<7-a%8),a++}var s=32*n.length/3,c=Th(n.length/3);return wn((xn(QA(r.slice(0,s/8)))[0]&c)===(r[r.length-1]&c),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),Kn(r.slice(0,s/8))}function zh(e,t){wn(e.length%4===0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==t&&(t=Nh.wordlist());for(var n=[0],r=11,a=0;a<e.length;a++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=e[a],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=e[a]>>8-r,n.push(e[a]&((1<<8-r)-1&255)),r+=3);var o=e.length/4,i=parseInt(QA(e).substring(2,4),16)&Th(o);return n[n.length-1]<<=o,n[n.length-1]|=i>>8-o,t.join(n.map((function(e){return t.getWord(e)})))}Eh._=Fh,Eh.lock=function(){Hh=!0},Eh.register=function(e){if(Hh)throw new Error("pbkdf2 is locked");Kh=e},Object.freeze(Eh);var Dh,Lh,Uh,jh={},Oh=function(){function e(t,n,r,a,o){Z(this,e),b(this,"phrase",void 0),b(this,"password",void 0),b(this,"wordlist",void 0),b(this,"entropy",void 0),null==a&&(a=""),null==o&&(o=Nh.wordlist()),Xn(t,jh,"Mnemonic"),vn(this,{phrase:r,password:a,wordlist:o,entropy:n})}return B(e,[{key:"computeSeed",value:function(){var e=$a("mnemonic"+this.password,"NFKD");return Eh($a(this.phrase,"NFKD"),e,2048,64,"sha512")}}],[{key:"fromPhrase",value:function(t,n,r){var a=Mh(t,r);return t=zh(xn(a),r),new e(jh,a,t,n,r)}},{key:"fromEntropy",value:function(t,n,r){var a=xn(t,"entropy"),o=zh(a,r);return new e(jh,Kn(a),o,n,r)}},{key:"entropyToPhrase",value:function(e,t){return zh(xn(e,"entropy"),t)}},{key:"phraseToEntropy",value:function(e,t){return Mh(e,t)}},{key:"isValidMnemonic",value:function(e,t){try{return Mh(e,t),!0}catch(n){}return!1}}]),e}(),Qh=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Ph=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},_h={16:10,24:12,32:14},qh=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],$h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ep=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],tp=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],np=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],rp=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],ap=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],op=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],ip=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],gp=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],sp=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],cp=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],lp=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],up=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],fp=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Ip(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}var Cp=function(){function e(t){if(Z(this,e),Dh.set(this,void 0),Lh.set(this,void 0),Uh.set(this,void 0),!(this instanceof e))throw Error("AES must be instanitated with `new`");Ph(this,Dh,new Uint8Array(t),"f");var n=_h[this.key.length];if(null==n)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ph(this,Uh,[],"f"),Ph(this,Lh,[],"f");for(var r=0;r<=n;r++)Qh(this,Uh,"f").push([0,0,0,0]),Qh(this,Lh,"f").push([0,0,0,0]);for(var a,o=4*(n+1),i=this.key.length/4,g=Ip(this.key),s=0;s<i;s++)a=s>>2,Qh(this,Uh,"f")[a][s%4]=g[s],Qh(this,Lh,"f")[n-a][s%4]=g[s];for(var c,l=0,u=i;u<o;){if(c=g[i-1],g[0]^=$h[c>>16&255]<<24^$h[c>>8&255]<<16^$h[255&c]<<8^$h[c>>24&255]^qh[l]<<24,l+=1,8!=i)for(var f=1;f<i;f++)g[f]^=g[f-1];else{for(var I=1;I<i/2;I++)g[I]^=g[I-1];c=g[i/2-1],g[i/2]^=$h[255&c]^$h[c>>8&255]<<8^$h[c>>16&255]<<16^$h[c>>24&255]<<24;for(var C=i/2+1;C<i;C++)g[C]^=g[C-1]}for(var d=0,A=void 0,h=void 0;d<i&&u<o;)A=u>>2,h=u%4,Qh(this,Uh,"f")[A][h]=g[d],Qh(this,Lh,"f")[n-A][h]=g[d++],u++}for(var p=1;p<n;p++)for(var m=0;m<4;m++)c=Qh(this,Lh,"f")[p][m],Qh(this,Lh,"f")[p][m]=cp[c>>24&255]^lp[c>>16&255]^up[c>>8&255]^fp[255&c]}return B(e,[{key:"key",get:function(){return Qh(this,Dh,"f").slice()}},{key:"encrypt",value:function(e){if(16!=e.length)throw new TypeError("invalid plaintext size (must be 16 bytes)");for(var t=Qh(this,Uh,"f").length-1,n=[0,0,0,0],r=Ip(e),a=0;a<4;a++)r[a]^=Qh(this,Uh,"f")[0][a];for(var o=1;o<t;o++){for(var i=0;i<4;i++)n[i]=tp[r[i]>>24&255]^np[r[(i+1)%4]>>16&255]^rp[r[(i+2)%4]>>8&255]^ap[255&r[(i+3)%4]]^Qh(this,Uh,"f")[o][i];r=n.slice()}for(var g=new Uint8Array(16),s=0,c=0;c<4;c++)s=Qh(this,Uh,"f")[t][c],g[4*c]=255&($h[r[c]>>24&255]^s>>24),g[4*c+1]=255&($h[r[(c+1)%4]>>16&255]^s>>16),g[4*c+2]=255&($h[r[(c+2)%4]>>8&255]^s>>8),g[4*c+3]=255&($h[255&r[(c+3)%4]]^s);return g}},{key:"decrypt",value:function(e){if(16!=e.length)throw new TypeError("invalid ciphertext size (must be 16 bytes)");for(var t=Qh(this,Lh,"f").length-1,n=[0,0,0,0],r=Ip(e),a=0;a<4;a++)r[a]^=Qh(this,Lh,"f")[0][a];for(var o=1;o<t;o++){for(var i=0;i<4;i++)n[i]=op[r[i]>>24&255]^ip[r[(i+3)%4]>>16&255]^gp[r[(i+2)%4]>>8&255]^sp[255&r[(i+1)%4]]^Qh(this,Lh,"f")[o][i];r=n.slice()}for(var g=new Uint8Array(16),s=0,c=0;c<4;c++)s=Qh(this,Lh,"f")[t][c],g[4*c]=255&(ep[r[c]>>24&255]^s>>24),g[4*c+1]=255&(ep[r[(c+3)%4]>>16&255]^s>>16),g[4*c+2]=255&(ep[r[(c+2)%4]>>8&255]^s>>8),g[4*c+3]=255&(ep[255&r[(c+1)%4]]^s);return g}}]),e}();Dh=new WeakMap,Lh=new WeakMap,Uh=new WeakMap;var dp,Ap,hp=B((function e(t,n,r){if(Z(this,e),r&&!(this instanceof r))throw new Error("".concat(t,' must be instantiated with "new"'));Object.defineProperties(this,{aes:{enumerable:!0,value:new Cp(n)},name:{enumerable:!0,value:t}})})),pp=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},mp=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},bp=function(e){d(n,e);var t=p(n);function n(e,r){var a;if(Z(this,n),a=t.call(this,"ECC",e,n),dp.set(i(a),void 0),Ap.set(i(a),void 0),r){if(r.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");pp(i(a),dp,new Uint8Array(r),"f")}else pp(i(a),dp,new Uint8Array(16),"f");return pp(i(a),Ap,a.iv,"f"),a}return B(n,[{key:"iv",get:function(){return new Uint8Array(mp(this,dp,"f"))}},{key:"encrypt",value:function(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");for(var t=new Uint8Array(e.length),n=0;n<e.length;n+=16){for(var r=0;r<16;r++)mp(this,Ap,"f")[r]^=e[n+r];pp(this,Ap,this.aes.encrypt(mp(this,Ap,"f")),"f"),t.set(mp(this,Ap,"f"),n)}return t}},{key:"decrypt",value:function(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=new Uint8Array(e.length),n=0;n<e.length;n+=16)for(var r=this.aes.decrypt(e.subarray(n,n+16)),a=0;a<16;a++)t[n+a]=r[a]^mp(this,Ap,"f")[a],mp(this,Ap,"f")[a]=e[n+a];return t}}]),n}(hp);dp=new WeakMap,Ap=new WeakMap;var yp,vp=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};new WeakMap,yp=new WeakMap,new WeakSet;var Zp,Gp,Bp,kp=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},Sp=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},wp=function(e){d(n,e);var t=p(n);function n(e,r){var a;return Z(this,n),a=t.call(this,"CTR",e,n),Zp.set(i(a),void 0),Gp.set(i(a),void 0),Bp.set(i(a),void 0),kp(i(a),Bp,new Uint8Array(16),"f"),Sp(i(a),Bp,"f").fill(0),kp(i(a),Zp,Sp(i(a),Bp,"f"),"f"),kp(i(a),Gp,16,"f"),null==r&&(r=1),"number"===typeof r?a.setCounterValue(r):a.setCounterBytes(r),a}return B(n,[{key:"counter",get:function(){return new Uint8Array(Sp(this,Bp,"f"))}},{key:"setCounterValue",value:function(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(var t=15;t>=0;--t)Sp(this,Bp,"f")[t]=e%256,e=Math.floor(e/256)}},{key:"setCounterBytes",value:function(e){if(16!==e.length)throw new TypeError("invalid counter initial Uint8Array value length");Sp(this,Bp,"f").set(e)}},{key:"increment",value:function(){for(var e=15;e>=0;e--){if(255!==Sp(this,Bp,"f")[e]){Sp(this,Bp,"f")[e]++;break}Sp(this,Bp,"f")[e]=0}}},{key:"encrypt",value:function(e){for(var t,n,r=new Uint8Array(e),a=0;a<r.length;a++)16===Sp(this,Gp,"f")&&(kp(this,Zp,this.aes.encrypt(Sp(this,Bp,"f")),"f"),kp(this,Gp,0,"f"),this.increment()),r[a]^=Sp(this,Zp,"f")[(kp(this,Gp,(n=Sp(this,Gp,"f"),t=n++,n),"f"),t)];return r}},{key:"decrypt",value:function(e){return this.encrypt(e)}}]),n}(hp);Zp=new WeakMap,Gp=new WeakMap,Bp=new WeakMap;var Wp;new WeakMap,new WeakMap,new WeakMap;var Rp,Vp,Xp=function(e,t){return e<<t|e>>>32-t};function Jp(e,t,n,r,a,o){for(var i=e[t++]^n[r++],g=e[t++]^n[r++],s=e[t++]^n[r++],c=e[t++]^n[r++],l=e[t++]^n[r++],u=e[t++]^n[r++],f=e[t++]^n[r++],I=e[t++]^n[r++],C=e[t++]^n[r++],d=e[t++]^n[r++],A=e[t++]^n[r++],h=e[t++]^n[r++],p=e[t++]^n[r++],m=e[t++]^n[r++],b=e[t++]^n[r++],y=e[t++]^n[r++],v=i,Z=g,G=s,B=c,k=l,S=u,w=f,W=I,R=C,V=d,X=A,J=h,x=p,Y=m,N=b,H=y,F=0;F<8;F+=2)k^=Xp(v+x|0,7),R^=Xp(k+v|0,9),x^=Xp(R+k|0,13),v^=Xp(x+R|0,18),V^=Xp(S+Z|0,7),Y^=Xp(V+S|0,9),Z^=Xp(Y+V|0,13),S^=Xp(Z+Y|0,18),N^=Xp(X+w|0,7),G^=Xp(N+X|0,9),w^=Xp(G+N|0,13),X^=Xp(w+G|0,18),B^=Xp(H+J|0,7),W^=Xp(B+H|0,9),J^=Xp(W+B|0,13),H^=Xp(J+W|0,18),Z^=Xp(v+B|0,7),G^=Xp(Z+v|0,9),B^=Xp(G+Z|0,13),v^=Xp(B+G|0,18),w^=Xp(S+k|0,7),W^=Xp(w+S|0,9),k^=Xp(W+w|0,13),S^=Xp(k+W|0,18),J^=Xp(X+V|0,7),R^=Xp(J+X|0,9),V^=Xp(R+J|0,13),X^=Xp(V+R|0,18),x^=Xp(H+N|0,7),Y^=Xp(x+H|0,9),N^=Xp(Y+x|0,13),H^=Xp(N+Y|0,18);a[o++]=i+v|0,a[o++]=g+Z|0,a[o++]=s+G|0,a[o++]=c+B|0,a[o++]=l+k|0,a[o++]=u+S|0,a[o++]=f+w|0,a[o++]=I+W|0,a[o++]=C+R|0,a[o++]=d+V|0,a[o++]=A+X|0,a[o++]=h+J|0,a[o++]=p+x|0,a[o++]=m+Y|0,a[o++]=b+N|0,a[o++]=y+H|0}function xp(e,t,n,r,a){for(var o=r+0,i=r+16*a,g=0;g<16;g++)n[i+g]=e[t+16*(2*a-1)+g];for(var s=0;s<a;s++,o+=16,t+=16)Jp(n,i,e,t,n,o),s>0&&(i+=16),Jp(n,o,e,t+=16,n,i)}function Yp(e,t,n){var r=Mr({dkLen:32,asyncTick:10,maxmem:Math.pow(1024,3)+1024},n),a=r.N,o=r.r,i=r.p,g=r.dkLen,s=r.asyncTick,c=r.maxmem,l=r.onProgress;if(kr.number(a),kr.number(o),kr.number(i),kr.number(g),kr.number(s),kr.number(c),void 0!==l&&"function"!==typeof l)throw new Error("progressCb should be function");var u=128*o,f=u/4;if(a<=1||0!==(a&a-1)||a>=Math.pow(2,u/8)||a>Math.pow(2,32))throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(i<0||i>32*(Math.pow(2,32)-1)/u)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(g<0||g>32*(Math.pow(2,32)-1))throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");var I=u*(a+i);if(I>c)throw new Error("Scrypt: parameters too large, ".concat(I," (128 * r * (N + p)) > ").concat(c," (maxmem)"));var C=mf(Sf,e,t,{c:1,dkLen:u*i}),d=xr(C),A=xr(new Uint8Array(u*a)),h=xr(new Uint8Array(u)),p=function(){};if(l){var m=2*a*i,b=Math.max(Math.floor(m/1e4),1),y=0;p=function(){y++,!l||y%b&&y!==m||l(y/m)}}return{N:a,r:o,p:i,dkLen:g,blockSize32:f,V:A,B32:d,B:C,tmp:h,blockMixCb:p,asyncTick:s}}function Np(e,t,n,r,a){var o=mf(Sf,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),a.fill(0),o}function Hp(e,t,n){return(Wp=Wp||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l,u,f,I,C,d,A,h;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Yp(t,n,r),o=a.N,i=a.r,g=a.p,s=a.dkLen,c=a.blockSize32,l=a.V,u=a.B32,f=a.B,I=a.tmp,C=a.blockMixCb,d=a.asyncTick,A=dn().mark((function e(){var t,n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c*h,n=0;n<c;n++)l[n]=u[t+n];return r=0,e.next=5,Fr(o-1,d,(function(e){xp(l,r,l,r+=c,i),C()}));case 5:return xp(l,(o-1)*c,u,t,i),C(),e.next=9,Fr(o,d,(function(e){for(var n=u[t+c-16]%o,r=0;r<c;r++)I[r]=u[t+r]^l[n*c+r];xp(I,0,u,t,i),C()}));case 9:case"end":return e.stop()}}),e)})),h=0;case 3:if(!(h<g)){e.next=8;break}return e.delegateYield(A(),"t0",5);case 5:h++,e.next=3;break;case 8:return e.abrupt("return",Np(t,s,f,l,I));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fp,Kp,Ep=!1,Tp=!1,Mp=function(e,t,n,r,a,o,i){return(Rp=Rp||hn(dn().mark((function e(t,n,r,a,o,i,g){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hp(t,n,{N:r,r:a,p:o,dkLen:i,onProgress:g});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},zp=function(e,t,n,r,a,o){return function(e,t,n){for(var r=Yp(e,t,n),a=r.N,o=r.r,i=r.p,g=r.dkLen,s=r.blockSize32,c=r.V,l=r.B32,u=r.B,f=r.tmp,I=r.blockMixCb,C=0;C<i;C++){for(var d=s*C,A=0;A<s;A++)c[A]=l[d+A];for(var h=0,p=0;h<a-1;h++)xp(c,p,c,p+=s,o),I();xp(c,(a-1)*s,l,d,o),I();for(var m=0;m<a;m++){for(var b=l[d+s-16]%a,y=0;y<s;y++)f[y]=l[d+y]^c[b*s+y];xp(f,0,l,d,o),I()}}return Np(e,g,u,c,f)}(e,t,{N:n,r:r,p:a,dkLen:o})},Dp=Mp,Lp=zp;function Up(e,t,n,r,a,o,i){return(Vp=Vp||hn(dn().mark((function e(t,n,r,a,o,i,g){var s,c;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=xn(t,"passwd"),c=xn(n,"salt"),e.t0=Kn,e.next=5,Dp(s,c,r,a,o,i,g);case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e,t,n,r,a,o){var i=xn(e,"passwd"),g=xn(t,"salt");return Kn(Lp(i,g,n,r,a,o))}function Op(e){var t=xn(e,"randomBytes");t[6]=15&t[6]|64,t[8]=63&t[8]|128;var n=Kn(t);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}function Qp(e){return"string"!==typeof e||e.startsWith("0x")||(e="0x"+e),Yn(e)}function Pp(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function _p(e){return"string"===typeof e?$a(e,"NFKC"):Yn(e)}function qp(e,t){var n=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);wn(null!=n,"invalid path","path",t);var r,a=n[1],o=n[3],i="!"===n[4],g=e,s=Xe(a.toLowerCase().split("."));try{for(s.s();!(r=s.n()).done;){var c=r.value;if(Array.isArray(g)){if(!c.match(/^[0-9]+$/))break;g=g[parseInt(c)]}else if("object"===typeof g){var l=null;for(var u in g)if(u.toLowerCase()===c){l=g[u];break}g=l}else g=null;if(null==g)break}}catch(xQ){s.e(xQ)}finally{s.f()}if(wn(!i||null!=g,"missing required value","path",a),o&&null!=g){if("int"===o){if("string"===typeof g&&g.match(/^-?[0-9]+$/))return parseInt(g);if(Number.isSafeInteger(g))return g}if("number"===o&&"string"===typeof g&&g.match(/^-?[0-9.]*$/))return parseFloat(g);if("data"===o&&"string"===typeof g)return Qp(g);if("array"===o&&Array.isArray(g))return g;if(o===typeof g)return g;wn(!1,"wrong type found for ".concat(o," "),"path",a)}return g}Up._=Mp,Up.lock=function(){Tp=!0},Up.register=function(e){if(Tp)throw new Error("scrypt is locked");Dp=e},Object.freeze(Up),jp._=zp,jp.lock=function(){Ep=!0},jp.register=function(e){if(Ep)throw new Error("scryptSync is locked");Lp=e},Object.freeze(jp);var $p,em="m/44'/60'/0'/0/0";function tm(e){try{var t=JSON.parse(e);if(3===(null!=t.version?parseInt(t.version):0))return!0}catch(n){}return!1}function nm(e,t){var n=xn(t),r=qp(e,"crypto.ciphertext:data!");wn(Kn(pa(En([n.slice(16,32),r]))).substring(2)===qp(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");var a=function(e,t,n){if("aes-128-ctr"===qp(e,"crypto.cipher:string")){var r=qp(e,"crypto.cipherparams.iv:data!");return Kn(new wp(t,r).decrypt(n))}Sn(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(e,n.slice(0,16),r),o=nI(a);if(e.address){var i=e.address.toLowerCase();i.startsWith("0x")||(i="0x"+i),wn(wa(i)===o,"keystore address/privateKey mismatch","address",e.address)}var g={address:o,privateKey:a};if("0.1"===qp(e,"x-ethers.version:string")){var s=n.slice(32,64),c=qp(e,"x-ethers.mnemonicCiphertext:data!"),l=qp(e,"x-ethers.mnemonicCounter:data!"),u=new wp(s,l);g.mnemonic={path:qp(e,"x-ethers.path:string")||em,locale:qp(e,"x-ethers.locale:string")||"en",entropy:Kn(xn(u.decrypt(c)))}}return g}function rm(e){var t=qp(e,"crypto.kdf:string");if(t&&"string"===typeof t){if("scrypt"===t.toLowerCase()){var n=qp(e,"crypto.kdfparams.salt:data!"),r=qp(e,"crypto.kdfparams.n:int!"),a=qp(e,"crypto.kdfparams.r:int!"),o=qp(e,"crypto.kdfparams.p:int!");wn(r>0&&0===(r&r-1),"invalid kdf.N","kdf.N",r),wn(a>0&&o>0,"invalid kdf","kdf",t);var i=qp(e,"crypto.kdfparams.dklen:int!");return wn(32===i,"invalid kdf.dklen","kdf.dflen",i),{name:"scrypt",salt:n,N:r,r:a,p:o,dkLen:64}}if("pbkdf2"===t.toLowerCase()){var g=qp(e,"crypto.kdfparams.salt:data!"),s=qp(e,"crypto.kdfparams.prf:string!"),c=s.split("-").pop();wn("sha256"===c||"sha512"===c,"invalid kdf.pdf","kdf.pdf",s);var l=qp(e,"crypto.kdfparams.c:int!"),u=qp(e,"crypto.kdfparams.dklen:int!");return wn(32===u,"invalid kdf.dklen","kdf.dklen",u),{name:"pbkdf2",salt:g,count:l,dkLen:u,algorithm:c}}}wn(!1,"unsupported key-derivation function","kdf",t)}function am(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}function om(e,t,n){return(Fp=Fp||hn(dn().mark((function e(t,n,r){var a,o,i,g,s,c,l,u,f,I,C,d,A,h;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(t),o=_p(n),"pbkdf2"!==(i=rm(a)).name){e.next=15;break}if(!r){e.next=8;break}return r(0),e.next=8,am(0);case 8:if(g=i.salt,s=i.count,c=i.dkLen,l=i.algorithm,u=Eh(o,g,s,c,l),!r){e.next=14;break}return r(1),e.next=14,am(0);case 14:return e.abrupt("return",nm(a,u));case 15:return Sn("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i}),f=i.salt,I=i.N,C=i.r,d=i.p,A=i.dkLen,e.next=19,Up(o,f,I,C,d,A,r);case 19:return h=e.sent,e.abrupt("return",nm(a,h));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function im(e){var t=null!=e.salt?xn(e.salt,"options.salt"):Zh(32),n=1<<17,r=8,a=1;return e.scrypt&&(e.scrypt.N&&(n=e.scrypt.N),e.scrypt.r&&(r=e.scrypt.r),e.scrypt.p&&(a=e.scrypt.p)),wn("number"===typeof n&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),wn("number"===typeof r&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),wn("number"===typeof a&&a>0&&Number.isSafeInteger(a),"invalid scrypt p parameter","options.p",a),{name:"scrypt",dkLen:32,salt:t,N:n,r:r,p:a}}function gm(e,t,n,r){var a=xn(n.privateKey,"privateKey"),o=null!=r.iv?xn(r.iv,"options.iv"):Zh(16);wn(16===o.length,"invalid options.iv length","options.iv",r.iv);var i=null!=r.uuid?xn(r.uuid,"options.uuid"):Zh(16);wn(16===i.length,"invalid options.uuid length","options.uuid",r.iv);var g=e.slice(0,16),s=e.slice(16,32),c=xn(new wp(g,o).encrypt(a)),l=pa(En([s,c])),u={address:n.address.substring(2).toLowerCase(),id:Op(i),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Kn(o).substring(2)},ciphertext:Kn(c).substring(2),kdf:"scrypt",kdfparams:{salt:Kn(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:l.substring(2)}};if(n.mnemonic){var f=null!=r.client?r.client:"ethers/".concat(mn),I=n.mnemonic.path||em,C=n.mnemonic.locale||"en",d=e.slice(32,64),A=xn(n.mnemonic.entropy,"account.mnemonic.entropy"),h=Zh(16),p=xn(new wp(d,h).encrypt(A)),m=new Date,b="UTC--"+(m.getUTCFullYear()+"-"+Pp(m.getUTCMonth()+1,2)+"-"+Pp(m.getUTCDate(),2)+"T"+Pp(m.getUTCHours(),2)+"-"+Pp(m.getUTCMinutes(),2)+"-"+Pp(m.getUTCSeconds(),2)+".0Z")+"--"+u.address;u["x-ethers"]={client:f,gethFilename:b,path:I,locale:C,mnemonicCounter:Kn(h).substring(2),mnemonicCiphertext:Kn(p).substring(2),version:"0.1"}}return JSON.stringify(u)}function sm(e,t,n){null==n&&(n={});var r=_p(t),a=im(n);return gm(xn(jp(r,a.salt,a.N,a.r,a.p,64)),a,e,n)}function cm(e,t,n){return(Kp=Kp||hn(dn().mark((function e(t,n,r){var a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==r&&(r={}),a=_p(n),o=im(r),e.next=5,Up(a,o.salt,o.N,o.r,o.p,64,r.progressCallback);case 5:return i=e.sent,e.abrupt("return",gm(xn(i),o,t,r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lm="m/44'/60'/0'/0/0",um=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),fm=2147483648,Im=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Cm(e,t){for(var n="";e;)n="0123456789abcdef"[e%16]+n,e=Math.trunc(e/16);for(;n.length<2*t;)n="0"+n;return"0x"+n}function dm(e){var t=xn(e);return TI(En([t,Mn(QA(QA(t)),0,4)]))}var Am={};function hm(e,t,n,r){var a=new Uint8Array(37);e&fm?(Sn(null!=r,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),a.set(xn(r),1)):a.set(xn(n));for(var o=24;o>=0;o-=8)a[33+(o>>3)]=e>>24-o&255;var i=xn(Df("sha512",t,a));return{IL:i.slice(0,32),IR:i.slice(32)}}function pm(e,t){var n=t.split("/");wn(n.length>0&&("m"===n[0]||e.depth>0),"invalid path","path",t),"m"===n[0]&&n.shift();for(var r=e,a=0;a<n.length;a++){var o=n[a];if(o.match(/^[0-9]+'$/)){var i=parseInt(o.substring(0,o.length-1));wn(i<fm,"invalid path index","path[".concat(a,"]"),o),r=r.deriveChild(fm+i)}else if(o.match(/^[0-9]+$/)){var g=parseInt(o);wn(g<fm,"invalid path index","path[".concat(a,"]"),o),r=r.deriveChild(g)}else wn(!1,"invalid path component","path[".concat(a,"]"),o)}return r}var mm=new WeakSet,bm=function(e,t){d(r,e);var n=p(r);function r(e,t,a,o,g,s,c,l,u){var f;Z(this,r),cn(i(f=n.call(this,t,u)),mm),b(i(f),"publicKey",void 0),b(i(f),"fingerprint",void 0),b(i(f),"parentFingerprint",void 0),b(i(f),"mnemonic",void 0),b(i(f),"chainCode",void 0),b(i(f),"path",void 0),b(i(f),"index",void 0),b(i(f),"depth",void 0),Xn(e,Am,"HDNodeWallet"),vn(i(f),{publicKey:t.compressedPublicKey});var I=Mn(mh(QA(f.publicKey)),0,4);return vn(i(f),{parentFingerprint:a,fingerprint:I,chainCode:o,path:g,index:s,depth:c}),vn(i(f),{mnemonic:l}),f}return B(r,[{key:"connect",value:function(e){return new r(Am,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}},{key:"encrypt",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cm(un(this,mm,ym).call(this),t,{progressCallback:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"encryptSync",value:function(e){return sm(un(this,mm,ym).call(this),e)}},{key:"extendedKey",get:function(){return Sn(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),dm(En(["0x0488ADE4",Cm(this.depth,1),this.parentFingerprint,Cm(this.index,4),this.chainCode,En(["0x00",this.privateKey])]))}},{key:"hasPath",value:function(){return null!=this.path}},{key:"neuter",value:function(){return new Gm(Am,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}},{key:"deriveChild",value:function(e){var t=er(e,"index");wn(t<=4294967295,"invalid index","index",t);var n=this.path;n&&(n+="/"+(2147483647&t),t&fm&&(n+="'"));var a=hm(t,this.chainCode,this.publicKey,this.privateKey),o=a.IR,i=a.IL,g=new Uf(tr(($n(i)+BigInt(this.privateKey))%Im,32));return new r(Am,g,this.fingerprint,Kn(o),n,t,this.depth+1,this.mnemonic,this.provider)}},{key:"derivePath",value:function(e){return pm(this,e)}}],[{key:"fromExtendedKey",value:function(e){var t=nr(function(e){for(var t=KI,n=0;n<e.length;n++)t*=EI,t+=YI(e[n]);return t}(e));wn(82===t.length||dm(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");var n=t[4],a=Kn(t.slice(5,9)),o=parseInt(Kn(t.slice(9,13)).substring(2),16),i=Kn(t.slice(13,45)),g=t.slice(45,78);switch(Kn(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":var s=Kn(g);return new Gm(Am,nI(s),s,a,i,null,o,n,null);case"0x0488ade4":case"0x04358394 ":if(0!==g[0])break;return new r(Am,new Uf(g.slice(1)),a,i,null,o,n,null,null)}wn(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}},{key:"createRandom",value:function(e,t,n){null==e&&(e=""),null==t&&(t=lm),null==n&&(n=Nh.wordlist());var a=Oh.fromEntropy(Zh(16),e,n);return XI(r,r,vm).call(r,a.computeSeed(),a).derivePath(t)}},{key:"fromMnemonic",value:function(e,t){return t||(t=lm),XI(r,r,vm).call(r,e.computeSeed(),e).derivePath(t)}},{key:"fromPhrase",value:function(e,t,n,a){null==t&&(t=""),null==n&&(n=lm),null==a&&(a=Nh.wordlist());var o=Oh.fromPhrase(e,t,a);return XI(r,r,vm).call(r,o.computeSeed(),o).derivePath(n)}},{key:"fromSeed",value:function(e){return XI(r,r,vm).call(r,e,null)}}]),r}(MA);function ym(){var e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&"en"===t.wordlist.locale&&""===t.password&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}function vm(e,t){wn(Hn(e),"invalid seed","seed","[REDACTED]");var n=xn(e,"seed");wn(n.length>=16&&n.length<=64,"invalid seed","seed","[REDACTED]");var r=xn(Df("sha512",um,n)),a=new Uf(Kn(r.slice(0,32)));return new $p(Am,a,"0x00000000",Kn(r.slice(32)),"m",0,0,t,null)}$p=bm;var Zm,Gm=function(e){d(n,e);var t=p(n);function n(e,r,a,o,g,s,c,l,u){var f;Z(this,n),b(i(f=t.call(this,r,u)),"publicKey",void 0),b(i(f),"fingerprint",void 0),b(i(f),"parentFingerprint",void 0),b(i(f),"chainCode",void 0),b(i(f),"path",void 0),b(i(f),"index",void 0),b(i(f),"depth",void 0),Xn(e,Am,"HDNodeVoidWallet"),vn(i(f),{publicKey:a});var I=Mn(mh(QA(a)),0,4);return vn(i(f),{publicKey:a,fingerprint:I,parentFingerprint:o,chainCode:g,path:s,index:c,depth:l}),f}return B(n,[{key:"connect",value:function(e){return new n(Am,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}},{key:"extendedKey",get:function(){return Sn(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),dm(En(["0x0488B21E",Cm(this.depth,1),this.parentFingerprint,Cm(this.index,4),this.chainCode,this.publicKey]))}},{key:"hasPath",value:function(){return null!=this.path}},{key:"deriveChild",value:function(e){var t=er(e,"index");wn(t<=4294967295,"invalid index","index",t);var r=this.path;r&&(r+="/"+(2147483647&t),t&fm&&(r+="'"));var a=hm(t,this.chainCode,this.publicKey,null),o=a.IR,i=a.IL,g=Uf.addPoints(i,this.publicKey,!0),s=nI(g);return new n(Am,s,g,this.fingerprint,Kn(o),r,t,this.depth+1,this.provider)}},{key:"derivePath",value:function(e){return pm(this,e)}}]),n}(tA);function Bm(e){try{if(JSON.parse(e).encseed)return!0}catch(t){}return!1}function km(e,t){var n=JSON.parse(e),r=_p(t),a=wa(qp(n,"ethaddr:string!")),o=Qp(qp(n,"encseed:string!"));wn(o&&o.length%16===0,"invalid encseed","json",e);for(var i=xn(Eh(r,r,2e3,32,"sha256")).slice(0,16),g=o.slice(0,16),s=o.slice(16),c=function(e){if(e.length<16)throw new TypeError("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new TypeError("PKCS#7 padding byte out of range");for(var n=e.length-t,r=0;r<t;r++)if(e[n+r]!==t)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(e.subarray(0,n))}(xn(new bp(i,g).decrypt(s))),l="",u=0;u<c.length;u++)l+=String.fromCharCode(c[u]);return{address:a,privateKey:ao(l)}}function Sm(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}var wm=function(e,t,n){d(a,e);var r=p(a);function a(e,t){Z(this,a),"string"!==typeof e||e.startsWith("0x")||(e="0x"+e);var n="string"===typeof e?new Uf(e):e;return r.call(this,n,t)}return B(a,[{key:"connect",value:function(e){return new a(this.signingKey,e)}},{key:"encrypt",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={address:this.address,privateKey:this.privateKey},e.next=3,cm(r,t,{progressCallback:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"encryptSync",value:function(e){return sm({address:this.address,privateKey:this.privateKey},e)}}],[{key:"fromEncryptedJson",value:function(e,t,r){return(n=n||hn(dn().mark((function e(t,n,r){var o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null,!tm(t)){e.next=7;break}return e.next=4,om(t,n,r);case 4:o=e.sent,e.next=17;break;case 7:if(!Bm(t)){e.next=17;break}if(!r){e.next=12;break}return r(0),e.next=12,Sm(0);case 12:if(o=km(t,n),!r){e.next=17;break}return r(1),e.next=17,Sm(0);case 17:return e.abrupt("return",XI(a,a,Wm).call(a,o));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"fromEncryptedJsonSync",value:function(e,t){var n=null;return tm(e)?n=function(e,t){var n=JSON.parse(e),r=_p(t),a=rm(n);return"pbkdf2"===a.name?nm(n,Eh(r,a.salt,a.count,a.dkLen,a.algorithm)):(Sn("scrypt"===a.name,"cannot be reached","UNKNOWN_ERROR",{params:a}),nm(n,jp(r,a.salt,a.N,a.r,a.p,a.dkLen)))}(e,t):Bm(e)?n=km(e,t):wn(!1,"invalid JSON wallet","json","[ REDACTED ]"),XI(a,a,Wm).call(a,n)}},{key:"createRandom",value:function(e){var t=bm.createRandom();return e?t.connect(e):t}},{key:"fromPhrase",value:function(e,t){var n=bm.fromPhrase(e);return t?n.connect(t):n}}]),a}(MA);function Wm(e){if(wn(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&"en"===e.mnemonic.locale){var t=Oh.fromEntropy(e.mnemonic.entropy),n=bm.fromMnemonic(t,e.mnemonic.path);if(n.address===e.address&&n.privateKey===e.privateKey)return n;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}var r=new Zm(e.privateKey);return wn(r.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),r}Zm=wm;var Rm=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"EntityManagerContractAddress_","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"newMedicineERC20","type":"address"}],"name":"factory","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getEntityManagerContractAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"happyness","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"happynessFactory","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"happynessToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isPanic","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"panic","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"panicFactory","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"panicToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokensAt","outputs":[{"components":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"},{"internalType":"string","name":"_code","type":"string"},{"internalType":"string","name":"_presentation","type":"string"},{"internalType":"string","name":"_unidadDeMedida","type":"string"},{"internalType":"address","name":"_address","type":"address"}],"internalType":"struct Factory.TokenData","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"code","type":"string"}],"name":"tokensByCode","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalContracts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');function Vm(e,t){if(!e)throw new Error(t)}var Xm=34028234663852886e22,Jm=-34028234663852886e22,xm=4294967295,Ym=2147483647,Nm=-2147483648;function Hm(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Ym||e<Nm)throw new Error("invalid int 32: "+e)}function Fm(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>xm||e<0)throw new Error("invalid uint 32: "+e)}function Km(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Xm||e<Jm))throw new Error("invalid float 32: "+e)}var Em=Symbol("@bufbuild/protobuf/enum-type");function Tm(e){var t=e[Em];return Vm(t,"missing enum type on enum object"),t}function Mm(e,t,n,r){e[Em]=zm(t,n.map((function(t){return{no:t.no,name:t.name,localName:e[t.no]}})),r)}function zm(e,t,n){var r,a=Object.create(null),o=Object.create(null),i=[],g=Xe(t);try{for(g.s();!(r=g.n()).done;){var s=r.value,c=Lm(s);i.push(c),a[s.name]=c,o[s.no]=c}}catch(xQ){g.e(xQ)}finally{g.f()}return{typeName:e,values:i,findName:function(e){return a[e]},findNumber:function(e){return o[e]}}}function Dm(e,t,n){var r,a={},o=Xe(t);try{for(o.s();!(r=o.n()).done;){var i=Lm(r.value);a[i.localName]=i.no,a[i.no]=i.localName}}catch(xQ){o.e(xQ)}finally{o.f()}return Mm(a,e,t,n),a}function Lm(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}var Um,jm=function(){function e(){Z(this,e)}return B(e,[{key:"equals",value:function(e){return this.getType().runtime.util.equals(this.getType(),this,e)}},{key:"clone",value:function(){return this.getType().runtime.util.clone(this)}},{key:"fromBinary",value:function(e,t){var n=this.getType().runtime.bin,r=n.makeReadOptions(t);return n.readMessage(this,r.readerFactory(e),e.byteLength,r),this}},{key:"fromJson",value:function(e,t){var n=this.getType(),r=n.runtime.json,a=r.makeReadOptions(t);return r.readMessage(n,e,a,this),this}},{key:"fromJsonString",value:function(e,t){var n;try{n=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(n,t)}},{key:"toBinary",value:function(e){var t=this.getType().runtime.bin,n=t.makeWriteOptions(e),r=n.writerFactory();return t.writeMessage(this,r,n),r.finish()}},{key:"toJson",value:function(e){var t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}},{key:"toJsonString",value:function(e){var t,n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null===e||void 0===e?void 0:e.prettySpaces)&&void 0!==t?t:0)}},{key:"toJSON",value:function(){return this.toJson({emitDefaultValues:!0})}},{key:"getType",value:function(){return Object.getPrototypeOf(this).constructor}}]),e}();function Om(){for(var e=0,t=0,n=0;n<28;n+=7){var r=this.buf[this.pos++];if(e|=(127&r)<<n,0==(128&r))return this.assertBounds(),[e,t]}var a=this.buf[this.pos++];if(e|=(15&a)<<28,t=(112&a)>>4,0==(128&a))return this.assertBounds(),[e,t];for(var o=3;o<=31;o+=7){var i=this.buf[this.pos++];if(t|=(127&i)<<o,0==(128&i))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Qm(e,t,n){for(var r=0;r<28;r+=7){var a=e>>>r,o=!(a>>>7==0&&0==t),i=255&(o?128|a:a);if(n.push(i),!o)return}var g=e>>>28&15|(7&t)<<4,s=!(t>>3==0);if(n.push(255&(s?128|g:g)),s){for(var c=3;c<31;c+=7){var l=t>>>c,u=!(l>>>7==0),f=255&(u?128|l:l);if(n.push(f),!u)return}n.push(t>>>31&1)}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(Um||(Um={}));var Pm=4294967296;function _m(e){var t="-"===e[0];t&&(e=e.slice(1));var n=1e6,r=0,a=0;function o(t,o){var i=Number(e.slice(t,o));a*=n,(r=r*n+i)>=Pm&&(a+=r/Pm|0,r%=Pm)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?eb(r,a):$m(r,a)}function qm(e,t){var n=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t);if(e=n.lo,(t=n.hi)<=2097151)return String(Pm*t+e);var r=16777215&(e>>>24|t<<8),a=t>>16&65535,o=(16777215&e)+6777216*r+6710656*a,i=r+8147497*a,g=2*a,s=1e7;return o>=s&&(i+=Math.floor(o/s),o%=s),i>=s&&(g+=Math.floor(i/s),i%=s),g.toString()+tb(i)+tb(o)}function $m(e,t){return{lo:0|e,hi:0|t}}function eb(e,t){return t=~t,e?e=1+~e:t+=1,$m(e,t)}var tb=function(e){var t=String(e);return"0000000".slice(t.length)+t};function nb(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(var n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function rb(){var e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<7,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<14,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<21,0==(128&e))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(var n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}var ab,ob=function(){var e=new DataView(new ArrayBuffer(8));if("function"===typeof BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64&&("object"!=typeof process||"1"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BUF_BIGINT_DISABLE)){var t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse:function(e){var r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error("int64 invalid: ".concat(e));return r},uParse:function(e){var t="bigint"==typeof e?e:BigInt(e);if(t>a||t<r)throw new Error("uint64 invalid: ".concat(e));return t},enc:function(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc:function(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:function(t,n){return e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)},uDec:function(t,n){return e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0)}}}var o=function(e){return Vm(/^-?[0-9]+$/.test(e),"int64 invalid: ".concat(e))},i=function(e){return Vm(/^[0-9]+$/.test(e),"uint64 invalid: ".concat(e))};return{zero:"0",supported:!1,parse:function(e){return"string"!=typeof e&&(e=e.toString()),o(e),e},uParse:function(e){return"string"!=typeof e&&(e=e.toString()),i(e),e},enc:function(e){return"string"!=typeof e&&(e=e.toString()),o(e),_m(e)},uEnc:function(e){return"string"!=typeof e&&(e=e.toString()),i(e),_m(e)},dec:function(e,t){return function(e,t){var n=$m(e,t),r=2147483648&n.hi;r&&(n=eb(n.lo,n.hi));var a=qm(n.lo,n.hi);return r?"-"+a:a}(e,t)},uDec:function(e,t){return qm(e,t)}}}();!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(ab||(ab={}));var ib=function(){function e(t){Z(this,e),this.stack=[],this.textEncoder=null!==t&&void 0!==t?t:new TextEncoder,this.chunks=[],this.buf=[]}return B(e,[{key:"finish",value:function(){this.chunks.push(new Uint8Array(this.buf));for(var e=0,t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;for(var n=new Uint8Array(e),r=0,a=0;a<this.chunks.length;a++)n.set(this.chunks[a],r),r+=this.chunks[a].length;return this.chunks=[],n}},{key:"fork",value:function(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}},{key:"join",value:function(){var e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}},{key:"tag",value:function(e,t){return this.uint32((e<<3|t)>>>0)}},{key:"raw",value:function(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}},{key:"uint32",value:function(e){for(Fm(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}},{key:"int32",value:function(e){return Hm(e),nb(e,this.buf),this}},{key:"bool",value:function(e){return this.buf.push(e?1:0),this}},{key:"bytes",value:function(e){return this.uint32(e.byteLength),this.raw(e)}},{key:"string",value:function(e){var t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}},{key:"float",value:function(e){Km(e);var t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}},{key:"double",value:function(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}},{key:"fixed32",value:function(e){Fm(e);var t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}},{key:"sfixed32",value:function(e){Hm(e);var t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}},{key:"sint32",value:function(e){return Hm(e),nb(e=(e<<1^e>>31)>>>0,this.buf),this}},{key:"sfixed64",value:function(e){var t=new Uint8Array(8),n=new DataView(t.buffer),r=ob.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}},{key:"fixed64",value:function(e){var t=new Uint8Array(8),n=new DataView(t.buffer),r=ob.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}},{key:"int64",value:function(e){var t=ob.enc(e);return Qm(t.lo,t.hi,this.buf),this}},{key:"sint64",value:function(e){var t=ob.enc(e),n=t.hi>>31;return Qm(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}},{key:"uint64",value:function(e){var t=ob.uEnc(e);return Qm(t.lo,t.hi,this.buf),this}}]),e}(),gb=function(){function e(t,n){Z(this,e),this.varint64=Om,this.uint32=rb,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=null!==n&&void 0!==n?n:new TextDecoder}return B(e,[{key:"tag",value:function(){var e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}},{key:"skip",value:function(e){var t=this.pos;switch(e){case ab.Varint:for(;128&this.buf[this.pos++];);break;case ab.Bit64:this.pos+=4;case ab.Bit32:this.pos+=4;break;case ab.LengthDelimited:var n=this.uint32();this.pos+=n;break;case ab.StartGroup:for(var r;(r=this.tag()[1])!==ab.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}},{key:"assertBounds",value:function(){if(this.pos>this.len)throw new RangeError("premature EOF")}},{key:"int32",value:function(){return 0|this.uint32()}},{key:"sint32",value:function(){var e=this.uint32();return e>>>1^-(1&e)}},{key:"int64",value:function(){return ob.dec.apply(ob,We(this.varint64()))}},{key:"uint64",value:function(){return ob.uDec.apply(ob,We(this.varint64()))}},{key:"sint64",value:function(){var e=Ge(this.varint64(),2),t=e[0],n=e[1],r=-(1&t);return t=(t>>>1|(1&n)<<31)^r,n=n>>>1^r,ob.dec(t,n)}},{key:"bool",value:function(){var e=Ge(this.varint64(),2),t=e[0],n=e[1];return 0!==t||0!==n}},{key:"fixed32",value:function(){return this.view.getUint32((this.pos+=4)-4,!0)}},{key:"sfixed32",value:function(){return this.view.getInt32((this.pos+=4)-4,!0)}},{key:"fixed64",value:function(){return ob.uDec(this.sfixed32(),this.sfixed32())}},{key:"sfixed64",value:function(){return ob.dec(this.sfixed32(),this.sfixed32())}},{key:"float",value:function(){return this.view.getFloat32((this.pos+=4)-4,!0)}},{key:"double",value:function(){return this.view.getFloat64((this.pos+=8)-8,!0)}},{key:"bytes",value:function(){var e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}},{key:"string",value:function(){return this.textDecoder.decode(this.bytes())}}]),e}();function sb(e,t){return t instanceof jm||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}Um.DOUBLE,Um.FLOAT,Um.INT64,Um.UINT64,Um.INT32,Um.UINT32,Um.BOOL,Um.STRING,Um.BYTES;function cb(e,t,n){if(t===n)return!0;if(e==Um.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case Um.UINT64:case Um.FIXED64:case Um.INT64:case Um.SFIXED64:case Um.SINT64:return t==n}return!1}function lb(e){switch(e){case Um.BOOL:return!1;case Um.UINT64:case Um.FIXED64:case Um.INT64:case Um.SFIXED64:case Um.SINT64:return ob.zero;case Um.DOUBLE:case Um.FLOAT:return 0;case Um.BYTES:return new Uint8Array(0);case Um.STRING:return"";default:return 0}}function ub(e,t){var n=void 0===t,r=ab.Varint,a=0===t;switch(e){case Um.STRING:a=n||!t.length,r=ab.LengthDelimited;break;case Um.BOOL:a=!1===t;break;case Um.DOUBLE:r=ab.Bit64;break;case Um.FLOAT:r=ab.Bit32;break;case Um.INT64:case Um.UINT64:a=n||0==t;break;case Um.FIXED64:a=n||0==t,r=ab.Bit64;break;case Um.BYTES:a=n||!t.byteLength,r=ab.LengthDelimited;break;case Um.FIXED32:case Um.SFIXED32:r=ab.Bit32;break;case Um.SFIXED64:a=n||0==t,r=ab.Bit64;break;case Um.SINT64:a=n||0==t}return[r,Um[e].toLowerCase(),n||a]}var fb=Symbol("@bufbuild/protobuf/unknown-fields"),Ib={readUnknownFields:!0,readerFactory:function(e){return new gb(e)}},Cb={writeUnknownFields:!0,writerFactory:function(){return new ib}};function db(e){return e?Object.assign(Object.assign({},Ib),e):Ib}function Ab(e){return e?Object.assign(Object.assign({},Cb),e):Cb}function hb(e,t,n){return t.getType().runtime.bin.readMessage(t,e,e.uint32(),n),t}function pb(e,t,n){for(var r,a,o=t.uint32(),i=t.pos+o;t.pos<i;){switch(Ge(t.tag(),1)[0]){case 1:r=mb(t,e.K);break;case 2:switch(e.V.kind){case"scalar":a=mb(t,e.V.T);break;case"enum":a=t.int32();break;case"message":a=hb(t,new e.V.T,n)}}}if(void 0===r){var g=lb(e.K);r=e.K==Um.BOOL?g.toString():g}if("string"!=typeof r&&"number"!=typeof r&&(r=r.toString()),void 0===a)switch(e.V.kind){case"scalar":a=lb(e.V.T);break;case"enum":a=0;break;case"message":a=new e.V.T}return[r,a]}function mb(e,t){switch(t){case Um.STRING:return e.string();case Um.BOOL:return e.bool();case Um.DOUBLE:return e.double();case Um.FLOAT:return e.float();case Um.INT32:return e.int32();case Um.INT64:return e.int64();case Um.UINT64:return e.uint64();case Um.FIXED64:return e.fixed64();case Um.BYTES:return e.bytes();case Um.FIXED32:return e.fixed32();case Um.SFIXED32:return e.sfixed32();case Um.SFIXED64:return e.sfixed64();case Um.SINT64:return e.sint64();case Um.UINT32:return e.uint32();case Um.SINT32:return e.sint32()}}function bb(e,t,n,r,a){e.tag(n.no,ab.LengthDelimited),e.fork();var o=r;switch(n.K){case Um.INT32:case Um.FIXED32:case Um.UINT32:case Um.SFIXED32:case Um.SINT32:o=Number.parseInt(r);break;case Um.BOOL:Vm("true"==r||"false"==r),o="true"==r}switch(vb(e,n.K,1,o,!0),n.V.kind){case"scalar":vb(e,n.V.T,2,a,!0);break;case"enum":vb(e,Um.INT32,2,a,!0);break;case"message":yb(e,t,n.V.T,2,a)}e.join()}function yb(e,t,n,r,a){if(void 0!==a){var o=sb(n,a);e.tag(r,ab.LengthDelimited).bytes(o.toBinary(t))}}function vb(e,t,n,r,a){var o=Ge(ub(t,r),3),i=o[0],g=o[1];o[2]&&!a||e.tag(n,i)[g](r)}function Zb(e,t,n,r){if(r.length){e.tag(n,ab.LengthDelimited).fork();for(var a=Ge(ub(t),2)[1],o=0;o<r.length;o++)e[a](r[o]);e.join()}}for(var Gb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Bb=[],kb=0;kb<Gb.length;kb++)Bb[Gb[kb].charCodeAt(0)]=kb;Bb["-".charCodeAt(0)]=Gb.indexOf("+"),Bb["_".charCodeAt(0)]=Gb.indexOf("/");var Sb={dec:function(e){var t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);for(var n,r=new Uint8Array(t),a=0,o=0,i=0,g=0;g<e.length;g++){if(void 0===(n=Bb[e.charCodeAt(g)]))switch(e[g]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:i=n,o=1;break;case 1:r[a++]=i<<2|(48&n)>>4,i=n,o=2;break;case 2:r[a++]=(15&i)<<4|(60&n)>>2,i=n,o=3;break;case 3:r[a++]=(3&i)<<6|n,o=0}}if(1==o)throw Error("invalid base64 string.");return r.subarray(0,a)},enc:function(e){for(var t,n="",r=0,a=0,o=0;o<e.length;o++)switch(t=e[o],r){case 0:n+=Gb[t>>2],a=(3&t)<<4,r=1;break;case 1:n+=Gb[a|t>>4],a=(15&t)<<2,r=2;break;case 2:n+=Gb[a|t>>6],n+=Gb[63&t],r=0}return r&&(n+=Gb[a],n+="=",1==r&&(n+="=")),n}},wb={ignoreUnknownFields:!1},Wb={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Rb(e){return e?Object.assign(Object.assign({},wb),e):wb}function Vb(e){return e?Object.assign(Object.assign({},Wb),e):Wb}function Xb(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function Jb(e,t){switch(e){case Um.DOUBLE:case Um.FLOAT:if(null===t)return 0;if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;var n=Number(t);if(Number.isNaN(n))break;if(!Number.isFinite(n))break;return e==Um.FLOAT&&Km(n),n;case Um.INT32:case Um.FIXED32:case Um.SFIXED32:case Um.SINT32:case Um.UINT32:if(null===t)return 0;var r;if("number"==typeof t?r=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(r=Number(t)),void 0===r)break;return e==Um.UINT32?Fm(r):Hm(r),r;case Um.INT64:case Um.SFIXED64:case Um.SINT64:if(null===t)return ob.zero;if("number"!=typeof t&&"string"!=typeof t)break;return ob.parse(t);case Um.FIXED64:case Um.UINT64:if(null===t)return ob.zero;if("number"!=typeof t&&"string"!=typeof t)break;return ob.uParse(t);case Um.BOOL:if(null===t)return!1;if("boolean"!==typeof t)break;return t;case Um.STRING:if(null===t)return"";if("string"!==typeof t)break;try{encodeURIComponent(t)}catch(a){throw new Error("invalid UTF8")}return t;case Um.BYTES:if(null===t||""===t)return new Uint8Array(0);if("string"!==typeof t)break;return Sb.dec(t)}throw new Error}function xb(e,t,n){if(null===t)return 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":var r=e.findName(t);if(r||n)return null===r||void 0===r?void 0:r.no}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Xb(t)))}function Yb(e,t,n,r){var a;if(void 0===t)return t;if(0!==t||n){if(r)return t;if("google.protobuf.NullValue"==e.typeName)return null;var o=e.findNumber(t);return null!==(a=null===o||void 0===o?void 0:o.name)&&void 0!==a?a:t}}function Nb(e,t,n){if(void 0!==t)switch(e){case Um.INT32:case Um.SFIXED32:case Um.SINT32:case Um.FIXED32:case Um.UINT32:return Vm("number"==typeof t),0!=t||n?t:void 0;case Um.FLOAT:case Um.DOUBLE:return Vm("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":0!==t||n?t:void 0;case Um.STRING:return Vm("string"==typeof t),t.length>0||n?t:void 0;case Um.BOOL:return Vm("boolean"==typeof t),t||n?t:void 0;case Um.UINT64:case Um.FIXED64:case Um.INT64:case Um.SFIXED64:case Um.SINT64:return Vm("bigint"==typeof t||"string"==typeof t||"number"==typeof t),n||0!=t?t.toString(10):void 0;case Um.BYTES:return Vm(t instanceof Uint8Array),n||t.byteLength>0?Sb.enc(t):void 0}}function Hb(e){if(void 0===e)return e;if(e instanceof jm)return e.clone();if(e instanceof Uint8Array){var t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function Fb(e){return e instanceof Uint8Array?e:new Uint8Array(e)}var Kb=function(){function e(t,n){Z(this,e),this._fields=t,this._normalizer=n}return B(e,[{key:"findJsonName",value:function(e){if(!this.jsonNames){var t,n={},r=Xe(this.list());try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.jsonName]=n[a.name]=a}}catch(xQ){r.e(xQ)}finally{r.f()}this.jsonNames=n}return this.jsonNames[e]}},{key:"find",value:function(e){if(!this.numbers){var t,n={},r=Xe(this.list());try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.no]=a}}catch(xQ){r.e(xQ)}finally{r.f()}this.numbers=n}return this.numbers[e]}},{key:"list",value:function(){return this.all||(this.all=this._normalizer(this._fields)),this.all}},{key:"byNumber",value:function(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((function(e,t){return e.no-t.no}))),this.numbersAsc}},{key:"byMember",value:function(){if(!this.members){this.members=[];var e,t,n=this.members,r=Xe(this.list());try{for(r.s();!(t=r.n()).done;){var a=t.value;a.oneof?a.oneof!==e&&(e=a.oneof,n.push(e)):n.push(a)}}catch(xQ){r.e(xQ)}finally{r.f()}}return this.members}}]),e}();function Eb(e,t){var n=zb(e);return t?n:Ob(jb(n))}function Tb(e){return Eb(e,!1)}var Mb=zb;function zb(e){for(var t=!1,n=[],r=0;r<e.length;r++){var a=e.charAt(r);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),n.push(a)}}return n.join("")}new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]);var Db=new Set(["constructor","toString","toJSON","valueOf"]),Lb=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Ub=function(e){return"".concat(e,"$")},jb=function(e){return Lb.has(e)?Ub(e):e},Ob=function(e){return Db.has(e)?Ub(e):e},Qb=function(){function e(t){Z(this,e),this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=Tb(t)}return B(e,[{key:"addField",value:function(e){Vm(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}},{key:"findField",value:function(e){if(!this._lookup){this._lookup=Object.create(null);for(var t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}]),e}(),Pb=function(e,t,n,r){return{syntax:e,json:t,bin:n,util:r,makeMessageType:function(e,t,n){return function(e,t,n,r){var a,o=null!==(a=null===r||void 0===r?void 0:r.localName)&&void 0!==a?a:t.substring(t.lastIndexOf(".")+1),i=b({},o,(function(t){e.util.initFields(this),e.util.initPartial(t,this)}))[o];return Object.setPrototypeOf(i.prototype,new jm),Object.assign(i,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:function(e,t){return(new i).fromBinary(e,t)},fromJson:function(e,t){return(new i).fromJson(e,t)},fromJsonString:function(e,t){return(new i).fromJsonString(e,t)},equals:function(t,n){return e.util.equals(i,t,n)}}),i}(this,e,t,n)},makeEnum:Dm,makeEnumType:zm,getEnumType:Tm}}("proto3",function(e){var t=e(Yb,Nb);return{makeReadOptions:Rb,makeWriteOptions:Vb,readMessage:function(e,t,n,r){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(this.debug(t)));r=null!==r&&void 0!==r?r:new e;for(var a={},o=0,i=Object.entries(t);o<i.length;o++){var g=Ge(i[o],2),s=g[0],c=g[1],l=e.fields.findJsonName(s);if(l){var u=l.localName,f=r;if(l.oneof){if(null===c&&"scalar"==l.kind)continue;var I=a[l.oneof.localName];if(I)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(I,'", "').concat(s,'"'));a[l.oneof.localName]=s,f=f[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(null===c)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));var C,d=f[u],A=Xe(c);try{for(A.s();!(C=A.n()).done;){var h=C.value;if(null===h)throw new Error("cannot decode field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h)));var p=void 0;switch(l.kind){case"message":p=l.T.fromJson(h,n);break;case"enum":if(void 0===(p=xb(l.T,h,n.ignoreUnknownFields)))continue;break;case"scalar":try{p=Jb(l.T,h)}catch(X){var m="cannot decode field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h));throw X instanceof Error&&X.message.length>0&&(m+=": ".concat(X.message)),new Error(m)}}d.push(p)}}catch(xQ){A.e(xQ)}finally{A.f()}}else if("map"==l.kind){if(null===c)continue;if(Array.isArray(c)||"object"!=typeof c)throw new Error("cannot decode field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));for(var b=f[u],y=0,v=Object.entries(c);y<v.length;y++){var Z=Ge(v[y],2),G=Z[0],B=Z[1];if(null===B)throw new Error("cannot decode field ".concat(e.typeName,".").concat(l.name," from JSON: map value null"));var k=void 0;switch(l.V.kind){case"message":k=l.V.T.fromJson(B,n);break;case"enum":if(void 0===(k=xb(l.V.T,B,n.ignoreUnknownFields)))continue;break;case"scalar":try{k=Jb(l.V.T,B)}catch(X){var S="cannot decode map value for field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw X instanceof Error&&X.message.length>0&&(S+=": ".concat(X.message)),new Error(S)}}try{b[Jb(l.K,l.K==Um.BOOL?"true"==G||"false"!=G&&G:G).toString()]=k}catch(X){var w="cannot decode map key for field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw X instanceof Error&&X.message.length>0&&(w+=": ".concat(X.message)),new Error(w)}}}else switch(l.kind){case"message":var W=l.T;if(null===c&&"google.protobuf.Value"!=W.typeName){if(l.oneof)throw new Error("cannot decode field ".concat(e.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(s,'"'));continue}f[u]instanceof jm?f[u].fromJson(c,n):(f[u]=W.fromJson(c,n),W.fieldWrapper&&!l.oneof&&(f[u]=W.fieldWrapper.unwrapField(f[u])));break;case"enum":var R=xb(l.T,c,n.ignoreUnknownFields);void 0!==R&&(f[u]=R);break;case"scalar":try{f[u]=Jb(l.T,c)}catch(X){var V="cannot decode field ".concat(e.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw X instanceof Error&&X.message.length>0&&(V+=": ".concat(X.message)),new Error(V)}}}else if(!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}return r},writeMessage:function(e,n){var r,a=e.getType(),o={};try{var i,g=Xe(a.fields.byMember());try{for(g.s();!(i=g.n()).done;){var s=i.value,c=void 0;if("oneof"==s.kind){var l=e[s.localName];if(void 0===l.value)continue;if(!(r=s.findField(l.case)))throw"oneof case not found: "+l.case;c=t(r,l.value,n)}else c=t(r=s,e[r.localName],n);void 0!==c&&(o[n.useProtoFieldName?r.name:r.jsonName]=c)}}catch(xQ){g.e(xQ)}finally{g.f()}}catch(I){var u=r?"cannot encode field ".concat(a.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(a.typeName," to JSON"),f=I instanceof Error?I.message:String(I);throw new Error(u+(f.length>0?": ".concat(f):""))}return o},readScalar:Jb,writeScalar:Nb,debug:Xb}}((function(e,t){return function(n,r,a){if("map"==n.kind){var o={};switch(n.V.kind){case"scalar":for(var i=0,g=Object.entries(r);i<g.length;i++){var s=Ge(g[i],2),c=s[0],l=s[1],u=t(n.V.T,l,!0);Vm(void 0!==u),o[c.toString()]=u}break;case"message":for(var f=0,I=Object.entries(r);f<I.length;f++){var C=Ge(I[f],2),d=C[0],A=C[1];o[d.toString()]=A.toJson(a)}break;case"enum":for(var h=n.V.T,p=0,m=Object.entries(r);p<m.length;p++){var b=Ge(m[p],2),y=b[0],v=b[1];Vm(void 0===v||"number"==typeof v);var Z=e(h,v,!0,a.enumAsInteger);Vm(void 0!==Z),o[y.toString()]=Z}}return a.emitDefaultValues||Object.keys(o).length>0?o:void 0}if(n.repeated){var G=[];switch(n.kind){case"scalar":for(var B=0;B<r.length;B++)G.push(t(n.T,r[B],!0));break;case"enum":for(var k=0;k<r.length;k++)G.push(e(n.T,r[k],!0,a.enumAsInteger));break;case"message":for(var S=0;S<r.length;S++)G.push(sb(n.T,r[S]).toJson(a))}return a.emitDefaultValues||G.length>0?G:void 0}switch(n.kind){case"scalar":return t(n.T,r,!!n.oneof||n.opt||a.emitDefaultValues);case"enum":return e(n.T,r,!!n.oneof||n.opt||a.emitDefaultValues,a.enumAsInteger);case"message":return void 0!==r?sb(n.T,r).toJson(a):void 0}}})),Object.assign(Object.assign({},{makeReadOptions:db,makeWriteOptions:Ab,listUnknownFields:function(e){var t;return null!==(t=e[fb])&&void 0!==t?t:[]},discardUnknownFields:function(e){delete e[fb]},writeUnknownFields:function(e,t){var n=e[fb];if(n){var r,a=Xe(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;t.tag(o.no,o.wireType).raw(o.data)}}catch(xQ){a.e(xQ)}finally{a.f()}}},onUnknownField:function(e,t,n,r){var a=e;Array.isArray(a[fb])||(a[fb]=[]),a[fb].push({no:t,wireType:n,data:r})},readMessage:function(e,t,n,r){for(var a=e.getType(),o=void 0===n?t.len:t.pos+n;t.pos<o;){var i=Ge(t.tag(),2),g=i[0],s=i[1],c=a.fields.find(g);if(c){var l=e,u=c.repeated,f=c.localName;switch(c.oneof&&((l=l[c.oneof.localName]).case!=f&&delete l.value,l.case=f,f="value"),c.kind){case"scalar":case"enum":var I="enum"==c.kind?Um.INT32:c.T;if(u){var C=l[f];if(s==ab.LengthDelimited&&I!=Um.STRING&&I!=Um.BYTES)for(var d=t.uint32()+t.pos;t.pos<d;)C.push(mb(t,I));else C.push(mb(t,I))}else l[f]=mb(t,I);break;case"message":var A=c.T;u?l[f].push(hb(t,new A,r)):l[f]instanceof jm?hb(t,l[f],r):(l[f]=hb(t,new A,r),!A.fieldWrapper||c.oneof||c.repeated||(l[f]=A.fieldWrapper.unwrapField(l[f])));break;case"map":var h=Ge(pb(c,t,r),2),p=h[0],m=h[1];l[f][p]=m}}else{var b=t.skip(s);r.readUnknownFields&&this.onUnknownField(e,g,s,b)}}}}),{writeMessage:function(e,t,n){var r,a=Xe(e.getType().fields.byNumber());try{for(a.s();!(r=a.n()).done;){var o=r.value,i=void 0,g=o.repeated,s=o.localName;if(o.oneof){var c=e[o.oneof.localName];if(c.case!==s)continue;i=c.value}else i=e[s];switch(o.kind){case"scalar":case"enum":var l="enum"==o.kind?Um.INT32:o.T;if(g)if(o.packed)Zb(t,l,o.no,i);else{var u,f=Xe(i);try{for(f.s();!(u=f.n()).done;){var I=u.value;vb(t,l,o.no,I,!0)}}catch(xQ){f.e(xQ)}finally{f.f()}}else void 0!==i&&vb(t,l,o.no,i,!!o.oneof||o.opt);break;case"message":if(g){var C,d=Xe(i);try{for(d.s();!(C=d.n()).done;){var A=C.value;yb(t,n,o.T,o.no,A)}}catch(xQ){d.e(xQ)}finally{d.f()}}else yb(t,n,o.T,o.no,i);break;case"map":for(var h=0,p=Object.entries(i);h<p.length;h++){var m=Ge(p[h],2);bb(t,n,o,m[0],m[1])}}}}catch(xQ){a.e(xQ)}finally{a.f()}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}}),Object.assign(Object.assign({},{setEnumType:Mm,initPartial:function(e,t){if(void 0!==e){var n,r=Xe(t.getType().fields.byMember());try{var a=function(){var r=n.value,a=r.localName,o=t,i=e;if(void 0===i[a])return 0;switch(r.kind){case"oneof":var g=i[a].case;if(void 0===g)return 0;var s=r.findField(g),c=i[a].value;!s||"message"!=s.kind||c instanceof s.T?s&&"scalar"===s.kind&&s.T===Um.BYTES&&(c=Fb(c)):c=new s.T(c),o[a]={case:g,value:c};break;case"scalar":case"enum":var l=i[a];r.T===Um.BYTES&&(l=r.repeated?l.map(Fb):Fb(l)),o[a]=l;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===Um.BYTES)for(var u=0,f=Object.entries(i[a]);u<f.length;u++){var I=Ge(f[u],2),C=I[0],d=I[1];o[a][C]=Fb(d)}else Object.assign(o[a],i[a]);break;case"message":for(var A=r.V.T,h=0,p=Object.keys(i[a]);h<p.length;h++){var m=p[h],b=i[a][m];A.fieldWrapper||(b=new A(b)),o[a][m]=b}}break;case"message":var y=r.T;if(r.repeated)o[a]=i[a].map((function(e){return e instanceof y?e:new y(e)}));else if(void 0!==i[a]){var v=i[a];y.fieldWrapper?"google.protobuf.BytesValue"===y.typeName?o[a]=Fb(v):o[a]=v:o[a]=v instanceof y?v:new y(v)}}};for(r.s();!(n=r.n()).done;)a()}catch(xQ){r.e(xQ)}finally{r.f()}}},equals:function(e,t,n){return t===n||!(!t||!n)&&e.fields.byMember().every((function(e){var r=t[e.localName],a=n[e.localName];if(e.repeated){if(r.length!==a.length)return!1;switch(e.kind){case"message":return r.every((function(t,n){return e.T.equals(t,a[n])}));case"scalar":return r.every((function(t,n){return cb(e.T,t,a[n])}));case"enum":return r.every((function(e,t){return cb(Um.INT32,e,a[t])}))}throw new Error("repeated cannot contain ".concat(e.kind))}switch(e.kind){case"message":return e.T.equals(r,a);case"enum":return cb(Um.INT32,r,a);case"scalar":return cb(e.T,r,a);case"oneof":if(r.case!==a.case)return!1;var o=e.findField(r.case);if(void 0===o)return!0;switch(o.kind){case"message":return o.T.equals(r.value,a.value);case"enum":return cb(Um.INT32,r.value,a.value);case"scalar":return cb(o.T,r.value,a.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":var i=Object.keys(r).concat(Object.keys(a));switch(e.V.kind){case"message":var g=e.V.T;return i.every((function(e){return g.equals(r[e],a[e])}));case"enum":return i.every((function(e){return cb(Um.INT32,r[e],a[e])}));case"scalar":var s=e.V.T;return i.every((function(e){return cb(s,r[e],a[e])}))}}}))},clone:function(e){var t,n=e.getType(),r=new n,a=r,o=Xe(n.fields.byMember());try{for(o.s();!(t=o.n()).done;){var i=t.value,g=e[i.localName],s=void 0;if(i.repeated)s=g.map(Hb);else if("map"==i.kind){s=a[i.localName];for(var c=0,l=Object.entries(g);c<l.length;c++){var u=Ge(l[c],2),f=u[0],I=u[1];s[f]=Hb(I)}}else s="oneof"==i.kind?i.findField(g.case)?{case:g.case,value:Hb(g.value)}:{case:void 0}:Hb(g);a[i.localName]=s}}catch(xQ){o.e(xQ)}finally{o.f()}return r}}),{newFieldList:function(e){return new Kb(e,_b)},initFields:function(e){var t,n=Xe(e.getType().fields.byMember());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.opt){var a=r.localName,o=e;if(r.repeated)o[a]=[];else switch(r.kind){case"oneof":o[a]={case:void 0};break;case"enum":o[a]=0;break;case"map":o[a]={};break;case"scalar":o[a]=lb(r.T)}}}}catch(xQ){n.e(xQ)}finally{n.f()}}}));function _b(e){var t,n,r,a,o,i=[],g=Xe("function"==typeof e?e():e);try{for(g.s();!(o=g.n()).done;){var s=o.value,c=s;if(c.localName=Eb(s.name,void 0!==s.oneof),c.jsonName=null!==(t=s.jsonName)&&void 0!==t?t:Mb(s.name),c.repeated=null!==(n=s.repeated)&&void 0!==n&&n,c.packed=null!==(r=s.packed)&&void 0!==r?r:"enum"==s.kind||"scalar"==s.kind&&s.T!=Um.BYTES&&s.T!=Um.STRING,void 0!==s.oneof){var l="string"==typeof s.oneof?s.oneof:s.oneof.name;a&&a.name==l||(a=new Qb(l)),c.oneof=a,a.addField(c)}i.push(c)}}catch(xQ){g.e(xQ)}finally{g.f()}return i}var qb=Pb.makeMessageType("medichain.v1.Factory",(function(){return[{no:1,name:"owner",kind:"scalar",T:9},{no:2,name:"entity_manager",kind:"scalar",T:9},{no:3,name:"total_contracts",kind:"scalar",T:4},{no:4,name:"panic",kind:"scalar",T:8}]})),$b=Pb.makeMessageType("medichain.v1.Medicine",(function(){return[{no:1,name:"info",kind:"message",T:ey},{no:2,name:"total_supply",kind:"scalar",T:4},{no:3,name:"pending_mint_total",kind:"scalar",T:4},{no:4,name:"pending_burn_total",kind:"scalar",T:4},{no:5,name:"pending_total",kind:"scalar",T:4},{no:6,name:"tranfers_pending_to_approve",kind:"scalar",T:4},{no:7,name:"mints_pending_to_approve",kind:"scalar",T:4},{no:8,name:"burns_pending_to_approve",kind:"scalar",T:4},{no:9,name:"entity_manager",kind:"scalar",T:9},{no:10,name:"owner",kind:"scalar",T:9},{no:11,name:"panic",kind:"scalar",T:8}]})),ey=Pb.makeMessageType("medichain.v1.Medicine.Info",(function(){return[{no:1,name:"address",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"symbol",kind:"scalar",T:9},{no:4,name:"code",kind:"scalar",T:9},{no:5,name:"presentation",kind:"scalar",T:9},{no:6,name:"measure_unit",kind:"scalar",T:9}]}),{localName:"Medicine_Info"}),ty=Pb.makeMessageType("medichain.v1.TransferRequest",(function(){return[{no:1,name:"sender",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]})),ny=function(e,t,n,r,a){function o(e){Z(this,o),this._provider=void 0,this._provider=e}return B(o,[{key:"totalContracts",value:function(t){return(e=e||hn(dn().mark((function e(t){var n;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getFactory(t),e.abrupt("return",n.totalContracts());case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"tokens",value:function(e){return(t=t||hn(dn().mark((function e(t){var n,r=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.totalContracts(t);case 2:return n=e.sent,e.abrupt("return",Promise.all(new Array(Number(n)).fill(0).map((function(e,n){return r.tokenAt(t,n)}))));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"tokenAt",value:function(e,t){return(n=n||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l,u;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFactory(t),e.next=3,r.tokensAt(n);case 3:return a=e.sent,o=Ge(a,6),i=o[0],g=o[1],s=o[2],c=o[3],l=o[4],u=o[5],e.abrupt("return",new ey({name:i,symbol:g,code:s,presentation:c,measureUnit:l,address:u}));case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"tokenByCode",value:function(e,t){return(r=r||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFactory(t),e.next=3,r.byCode(n);case 3:return a=e.sent,o=Ge(a,6),i=o[0],g=o[1],s=o[3],c=o[4],l=o[5],e.abrupt("return",new ey({name:i,symbol:g,code:n,presentation:s,measureUnit:c,address:l}));case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getFactoryInfo",value:function(e){return(a=a||hn(dn().mark((function e(t){var n,r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getFactory(t),e.next=3,Promise.all([n.owner(),n.totalContracts(),n.getEntityManagerContractAddress(),n.isPanic()]);case 3:return r=e.sent,a=Ge(r,4),o=a[0],i=a[1],g=a[2],s=a[3],e.abrupt("return",new qb({entityManager:g,owner:o,panic:s,totalContracts:i}));case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getFactory",value:function(e){return new zs(e,Rm.Mt,this._provider)}}]),o}(),ry=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"},{"internalType":"string","name":"code_","type":"string"},{"internalType":"string","name":"presentation_","type":"string"},{"internalType":"string","name":"unidadDeMedida_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"senderEntity","type":"address"},{"indexed":true,"internalType":"address","name":"senderWorker","type":"address"},{"indexed":true,"internalType":"address","name":"receiverEntity","type":"address"},{"indexed":false,"internalType":"address","name":"receiverWorker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"ApprovedTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"},{"indexed":true,"internalType":"address","name":"approver","type":"address"},{"indexed":true,"internalType":"address","name":"worker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"BurnApproved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"},{"indexed":true,"internalType":"address","name":"approver","type":"address"},{"indexed":true,"internalType":"address","name":"worker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"BurnRejected","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"},{"indexed":true,"internalType":"address","name":"approver","type":"address"},{"indexed":true,"internalType":"address","name":"worker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"MintApproved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"},{"indexed":true,"internalType":"address","name":"approver","type":"address"},{"indexed":true,"internalType":"address","name":"worker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"MintRejected","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"},{"indexed":true,"internalType":"address","name":"worker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"PendingBurnAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"},{"indexed":true,"internalType":"address","name":"worker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"PendingMintAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"senderEntity","type":"address"},{"indexed":true,"internalType":"address","name":"senderWorker","type":"address"},{"indexed":true,"internalType":"address","name":"receiverEntity","type":"address"},{"indexed":false,"internalType":"address","name":"receiverWorker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"PendingTransferAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"senderEntity","type":"address"},{"indexed":true,"internalType":"address","name":"senderWorker","type":"address"},{"indexed":true,"internalType":"address","name":"receiverEntity","type":"address"},{"indexed":false,"internalType":"address","name":"receiverWorker","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferRefused","type":"event"},{"inputs":[],"name":"EntityManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint8","name":"_type","type":"uint8"}],"name":"addPending","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"worker_","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approveBurn","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"worker_","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approveMint","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_senderworker","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approveTransfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"code","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"getBurnsPendingToApprove","outputs":[{"components":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"internalType":"struct MedicineERC20.TransferPending[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"getMintsPendingToApprove","outputs":[{"components":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"internalType":"struct MedicineERC20.TransferPending[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"getTranfersPendingToApprove","outputs":[{"components":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"internalType":"struct MedicineERC20.TransferPending[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"happyness","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isPanic","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"panic","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"pendingBurnTotal","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pendingMintTotal","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pendingTotalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"presentation","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"worker_","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"rejectBurn","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"worker_","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"rejectMint","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_senderworker","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"rejectTransfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_entityManager","type":"address"}],"name":"setEntityManagerAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unidadDeMedida","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}],"eF":"0x60806040523480156200001157600080fd5b50604051620064d7380380620064d7833981810160405281019062000037919062000335565b620000576200004b620000d660201b60201c565b620000de60201b60201c565b84600d9081620000689190620006a3565b5083600e90816200007a9190620006a3565b5082600f90816200008c9190620006a3565b5081601090816200009e9190620006a3565b508060119081620000b09190620006a3565b5060008060146101000a81548160ff02191690831515021790555050505050506200078a565b600033905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6200020b82620001c0565b810181811067ffffffffffffffff821117156200022d576200022c620001d1565b5b80604052505050565b600062000242620001a2565b905062000250828262000200565b919050565b600067ffffffffffffffff821115620002735762000272620001d1565b5b6200027e82620001c0565b9050602081019050919050565b60005b83811015620002ab5780820151818401526020810190506200028e565b60008484015250505050565b6000620002ce620002c88462000255565b62000236565b905082815260208101848484011115620002ed57620002ec620001bb565b5b620002fa8482856200028b565b509392505050565b600082601f8301126200031a5762000319620001b6565b5b81516200032c848260208601620002b7565b91505092915050565b600080600080600060a08688031215620003545762000353620001ac565b5b600086015167ffffffffffffffff811115620003755762000374620001b1565b5b620003838882890162000302565b955050602086015167ffffffffffffffff811115620003a757620003a6620001b1565b5b620003b58882890162000302565b945050604086015167ffffffffffffffff811115620003d957620003d8620001b1565b5b620003e78882890162000302565b935050606086015167ffffffffffffffff8111156200040b576200040a620001b1565b5b620004198882890162000302565b925050608086015167ffffffffffffffff8111156200043d576200043c620001b1565b5b6200044b8882890162000302565b9150509295509295909350565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620004ab57607f821691505b602082108103620004c157620004c062000463565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026200052b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82620004ec565b620005378683620004ec565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620005846200057e62000578846200054f565b62000559565b6200054f565b9050919050565b6000819050919050565b620005a08362000563565b620005b8620005af826200058b565b848454620004f9565b825550505050565b600090565b620005cf620005c0565b620005dc81848462000595565b505050565b5b818110156200060457620005f8600082620005c5565b600181019050620005e2565b5050565b601f82111562000653576200061d81620004c7565b6200062884620004dc565b8101602085101562000638578190505b620006506200064785620004dc565b830182620005e1565b50505b505050565b600082821c905092915050565b6000620006786000198460080262000658565b1980831691505092915050565b600062000693838362000665565b9150826002028217905092915050565b620006ae8262000458565b67ffffffffffffffff811115620006ca57620006c9620001d1565b5b620006d6825462000492565b620006e382828562000608565b600060209050601f8311600181146200071b576000841562000706578287015190505b62000712858262000685565b86555062000782565b601f1984166200072b86620004c7565b60005b8281101562000755578489015182556001820191506020850194506020810190506200072e565b8683101562000775578489015162000771601f89168262000665565b8355505b6001600288020188555050505b505050505050565b615d3d806200079a6000396000f3fe608060405234801561001057600080fd5b50600436106102115760003560e01c806370a0823111610125578063a934c0ae116100ad578063d5492ecd1161007c578063d5492ecd1461066a578063dd62ed3e14610688578063f2fde38b146106b8578063f30c003b146106d4578063fa02c4b7146106de57610211565b8063a934c0ae146105e0578063af84edd4146105fe578063c695aaef1461062e578063cf997a791461064c57610211565b806395d89b41116100f457806395d89b41146105165780639f63a62c14610534578063a0712d6814610564578063a8937ff514610594578063a9059cbb146105b057610211565b806370a08231146104a0578063715018a6146104d057806379c1b34d146104da5780638da5cb5b146104f857610211565b8063313ce567116101a857806343509c301161017757806343509c30146103ea5780634700d30514610406578063581e97cb14610410578063621417e71461044057806368e3df481461047057610211565b8063313ce567146103605780633501d6d01461037e57806342966c681461039c57806342b36aaf146103cc57610211565b806313b39b9c116101e457806313b39b9c146102c457806318160ddd146102f457806323b872dd1461031257806324c12bf61461034257610211565b80630382730e1461021657806306fdde0314610246578063095ea7b3146102645780630cfa031814610294575b600080fd5b610230600480360381019061022b9190614bc8565b61070e565b60405161023d9190614c23565b60405180910390f35b61024e610b80565b60405161025b9190614cce565b60405180910390f35b61027e60048036038101906102799190614bc8565b610c12565b60405161028b9190614c23565b60405180910390f35b6102ae60048036038101906102a99190614bc8565b610c1e565b6040516102bb9190614c23565b60405180910390f35b6102de60048036038101906102d99190614bc8565b611117565b6040516102eb9190614c23565b60405180910390f35b6102fc6116cc565b6040516103099190614cff565b60405180910390f35b61032c60048036038101906103279190614d1a565b6116d6565b6040516103399190614c23565b60405180910390f35b61034a6116e3565b6040516103579190614cce565b60405180910390f35b610368611775565b6040516103759190614d89565b60405180910390f35b61038661177a565b6040516103939190614c23565b60405180910390f35b6103b660048036038101906103b19190614da4565b611790565b6040516103c39190614c23565b60405180910390f35b6103d4611b62565b6040516103e19190614cff565b60405180910390f35b61040460048036038101906103ff9190614dfd565b611b6c565b005b61040e611c90565b005b61042a60048036038101906104259190614bc8565b611cb5565b6040516104379190614c23565b60405180910390f35b61045a60048036038101906104559190614e64565b61217d565b6040516104679190614f8d565b60405180910390f35b61048a60048036038101906104859190614e64565b612191565b6040516104979190614f8d565b60405180910390f35b6104ba60048036038101906104b59190614e64565b6121a5565b6040516104c79190614cff565b60405180910390f35b6104d86121ee565b005b6104e2612202565b6040516104ef9190614cce565b60405180910390f35b610500612294565b60405161050d9190614fbe565b60405180910390f35b61051e6122bd565b60405161052b9190614cce565b60405180910390f35b61054e60048036038101906105499190614bc8565b61234f565b60405161055b9190614c23565b60405180910390f35b61057e60048036038101906105799190614da4565b61294a565b60405161058b9190614c23565b60405180910390f35b6105ae60048036038101906105a99190614e64565b612d46565b005b6105ca60048036038101906105c59190614bc8565b612f29565b6040516105d79190614c23565b60405180910390f35b6105e8612f9c565b6040516105f59190614fbe565b60405180910390f35b61061860048036038101906106139190614e64565b612fc2565b6040516106259190614f8d565b60405180910390f35b610636612fd6565b6040516106439190614cff565b60405180910390f35b610654612fe0565b6040516106619190614cce565b60405180910390f35b610672613072565b60405161067f9190614cff565b60405180910390f35b6106a2600480360381019061069d9190614fd9565b61307c565b6040516106af9190614cff565b60405180910390f35b6106d260048036038101906106cd9190614e64565b613103565b005b6106dc613186565b005b6106f860048036038101906106f39190614bc8565b6131aa565b6040516107059190614c23565b60405180910390f35b6000801515600060149054906101000a900460ff16151514610765576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161075c9061508b565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c336040518263ffffffff1660e01b81526004016107c29190614fbe565b602060405180830381865afa1580156107df573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061080391906150c0565b905082600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156108c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108bb90615139565b60405180910390fd5b600060209050600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d1f856ee82336040518363ffffffff1660e01b815260040161092792919061517c565b602060405180830381865afa158015610944573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061096891906151d1565b6109a7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161099e9061524a565b60405180910390fd5b83600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610a339190615299565b925050819055508360056000828254610a4c9190615299565b925050819055506000600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205403610ae957610ae38583600261380a565b50610af8565b610af68583866002613c16565b505b8473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f89468a7e7aba3bdbd479b98e69975f81d0ef637dc7de7f314fc8fb52cb5f302287604051610b6c9190614cff565b60405180910390a460019250505092915050565b6060600d8054610b8f906152fc565b80601f0160208091040260200160405190810160405280929190818152602001828054610bbb906152fc565b8015610c085780601f10610bdd57610100808354040283529160200191610c08565b820191906000526020600020905b815481529060010190602001808311610beb57829003601f168201915b5050505050905090565b60006001905092915050565b6000801515600060149054906101000a900460ff16151514610c75576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c6c9061508b565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c336040518263ffffffff1660e01b8152600401610cd29190614fbe565b602060405180830381865afa158015610cef573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d1391906150c0565b90508373ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1603610d83576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7a9061539f565b60405180910390fd5b82600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015610e42576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e399061540b565b60405180910390fd5b600060109050600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d1f856ee82336040518363ffffffff1660e01b8152600401610ea592919061517c565b602060405180830381865afa158015610ec2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ee691906151d1565b610f25576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f1c9061549d565b60405180910390fd5b83600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254610fb19190615299565b925050819055508360036000828254610fca9190615299565b925050819055508360066000828254610fe39190615299565b925050819055506000600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054036110805761107a8583600361380a565b5061108f565b61108d8583866003613c16565b505b8473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f5d2dc398e8a92ba0e971431fd1ed245a6dcb7cc729338701565335552346f0e8876040516111039190614cff565b60405180910390a460019250505092915050565b6000801515600060149054906101000a900460ff1615151461116e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111659061508b565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c336040518263ffffffff1660e01b81526004016111cb9190614fbe565b602060405180830381865afa1580156111e8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061120c91906150c0565b90508373ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff160361127c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161127390615509565b60405180910390fd5b82600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101561133b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161133290615139565b60405180910390fd5b600060209050600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d1f856ee82336040518363ffffffff1660e01b815260040161139e92919061517c565b602060405180830381865afa1580156113bb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113df91906151d1565b61141e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114159061524a565b60405180910390fd5b83600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114aa9190615299565b9250508190555083600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546115009190615529565b9250508190555083600360008282546115199190615529565b9250508190555083600560008282546115329190615299565b925050819055506000600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054036115cf576115c98583600261380a565b506115de565b6115dc8583866002613c16565b505b8473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f6a55be8468c49a34aca307e2a7af7809dfd35be7b995b7c5e288df95a543c3f4876040516116529190614cff565b60405180910390a48173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef866040516116b89190614cff565b60405180910390a360019250505092915050565b6000600354905090565b6000600190509392505050565b6060600f80546116f2906152fc565b80601f016020809104026020016040519081016040528092919081815260200182805461171e906152fc565b801561176b5780601f106117405761010080835404028352916020019161176b565b820191906000526020600020905b81548152906001019060200180831161174e57829003601f168201915b5050505050905090565b600090565b60008060149054906101000a900460ff16905090565b6000801515600060149054906101000a900460ff161515146117e7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117de9061508b565b60405180910390fd5b600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663aa156645336040518263ffffffff1660e01b81526004016118429190614fbe565b602060405180830381865afa15801561185f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061188391906151d1565b6118c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118b9906155a9565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c336040518263ffffffff1660e01b815260040161191f9190614fbe565b602060405180830381865afa15801561193c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061196091906150c0565b905082600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156119e4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119db90615615565b60405180910390fd5b82600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611a709190615529565b925050819055508260066000828254611a899190615529565b9250508190555082600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611adf9190615299565b92505081905550611af33382856003611b6c565b3373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f61d24b261f32e92683eff04f7900aa1bb7ced333a0c10bb0766bb20925895aec85604051611b509190614cff565b60405180910390a36001915050919050565b6000600654905090565b611b74614aff565b84816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505082816020018181525050600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008360ff1660ff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906002020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015550505050505050565b611c98613e1c565b6001600060146101000a81548160ff021916908315150217905550565b6000801515600060149054906101000a900460ff16151514611d0c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d039061508b565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c336040518263ffffffff1660e01b8152600401611d699190614fbe565b602060405180830381865afa158015611d86573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611daa91906150c0565b905082600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015611e6b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611e629061540b565b60405180910390fd5b600060109050600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d1f856ee82336040518363ffffffff1660e01b8152600401611ece92919061517c565b602060405180830381865afa158015611eeb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f0f91906151d1565b611f4e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f459061549d565b60405180910390fd5b83600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611fda9190615299565b925050819055508360066000828254611ff39190615299565b9250508190555083600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546120499190615529565b925050819055506000600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054036120e6576120e08583600361380a565b506120f5565b6120f38583866003613c16565b505b8473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f394d211f3efc15e0e9102ee512e525b093ed52c01d7e0fdb758391784d7fa755876040516121699190614cff565b60405180910390a460019250505092915050565b606061218a826001613e9a565b9050919050565b606061219e826003613e9a565b9050919050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6121f6613e1c565b61220060006142a9565b565b606060118054612211906152fc565b80601f016020809104026020016040519081016040528092919081815260200182805461223d906152fc565b801561228a5780601f1061225f5761010080835404028352916020019161228a565b820191906000526020600020905b81548152906001019060200180831161226d57829003601f168201915b5050505050905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060600e80546122cc906152fc565b80601f01602080910402602001604051908101604052809291908181526020018280546122f8906152fc565b80156123455780601f1061231a57610100808354040283529160200191612345565b820191906000526020600020905b81548152906001019060200180831161232857829003601f168201915b5050505050905090565b6000801515600060149054906101000a900460ff161515146123a6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161239d9061508b565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c856040518263ffffffff1660e01b81526004016124039190614fbe565b602060405180830381865afa158015612420573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061244491906150c0565b905060003390506000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c836040518263ffffffff1660e01b81526004016124a89190614fbe565b602060405180830381865afa1580156124c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124e991906150c0565b905084600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015612624576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161261b906156a7565b60405180910390fd5b84600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461272a9190615299565b9250508190555084600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546127809190615529565b9250508190555084600460008282546127999190615299565b925050819055506000600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054036128b0576128aa8683600161380a565b506128bf565b6128bd8683876001613c16565b505b8073ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f75f130935ab5c8e173584389a7961fcf169bdfd5ed42de503f52977e0a74441285896040516129359291906156c7565b60405180910390a46001935050505092915050565b6000801515600060149054906101000a900460ff161515146129a1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016129989061508b565b60405180910390fd5b600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663aa156645336040518263ffffffff1660e01b81526004016129fc9190614fbe565b602060405180830381865afa158015612a19573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a3d91906151d1565b612a7c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612a73906155a9565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c336040518263ffffffff1660e01b8152600401612ad99190614fbe565b602060405180830381865afa158015612af6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b1a91906150c0565b905060016005811115612b3057612b2f6156f0565b5b600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663402bfbec836040518263ffffffff1660e01b8152600401612b8b9190614fbe565b602060405180830381865afa158015612ba8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612bcc9190615744565b6005811115612bde57612bdd6156f0565b5b14612c1e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612c15906157bd565b60405180910390fd5b82600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254612caa9190615529565b925050819055508260056000828254612cc39190615529565b92505081905550612cd73382856002611b6c565b3373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167fde57c7cee4bc3bea5f70ca5c12fc3c438b6563c363075f7aefd4d2474dfb268f85604051612d349190614cff565b60405180910390a36001915050919050565b80600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603612db6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612dad90615829565b60405180910390fd5b60001515600060149054906101000a900460ff16151514612e0c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612e039061508b565b60405180910390fd5b3273ffffffffffffffffffffffffffffffffffffffff16612e2b612294565b73ffffffffffffffffffffffffffffffffffffffff1614612e81576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612e7890615895565b60405180910390fd5b81600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600c60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b6000801515600060149054906101000a900460ff16151514612f80576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612f779061508b565b60405180910390fd5b612f92612f8b61436d565b8484614375565b6001905092915050565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6060612fcf826002613e9a565b9050919050565b6000600454905090565b606060108054612fef906152fc565b80601f016020809104026020016040519081016040528092919081815260200182805461301b906152fc565b80156130685780601f1061303d57610100808354040283529160200191613068565b820191906000526020600020905b81548152906001019060200180831161304b57829003601f168201915b5050505050905090565b6000600554905090565b6000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b61310b613e1c565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361317a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161317190615927565b60405180910390fd5b613183816142a9565b50565b61318e613e1c565b60008060146101000a81548160ff021916908315150217905550565b6000801515600060149054906101000a900460ff16151514613201576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016131f89061508b565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c856040518263ffffffff1660e01b815260040161325e9190614fbe565b602060405180830381865afa15801561327b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061329f91906150c0565b905060003390506000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c836040518263ffffffff1660e01b81526004016133039190614fbe565b602060405180830381865afa158015613320573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061334491906150c0565b905084600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101561347f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613476906156a7565b60405180910390fd5b84600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546135859190615299565b9250508190555084600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546135db9190615529565b9250508190555084600460008282546135f49190615299565b925050819055506000600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020540361370b576137058683600161380a565b5061371a565b6137188683876001613c16565b505b8073ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167faecd274698b143906c8f3f5b57e88cc5e9385a735df6859170929b3eaf0a06fe85896040516137909291906156c7565b60405180910390a48073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef876040516137f59190614cff565b60405180910390a36001935050505092915050565b6000808260ff161480613820575060038260ff16115b1561382e5760009050613c0f565b6000805b600a60008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008560ff1660ff16815260200190815260200160002080549050811015613b5a578573ffffffffffffffffffffffffffffffffffffffff16600a60008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008660ff1660ff168152602001908152602001600020828154811061391257613911615947565b5b906000526020600020906002020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff160361396457600191505b8180156139d557506001600a60008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008660ff1660ff168152602001908152602001600020805490506139d29190615299565b81105b15613b4757600a60008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008560ff1660ff168152602001908152602001600020600182613a3d9190615529565b81548110613a4e57613a4d615947565b5b9060005260206000209060020201600a60008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008660ff1660ff1681526020019081526020016000208281548110613ac457613ac3615947565b5b90600052602060002090600202016000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600182015481600101559050505b8080613b5290615976565b915050613832565b50600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008460ff1660ff168152602001908152602001600020805480613bc157613bc06159be565b5b6001900381819060005260206000209060020201600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560018201600090555050905560019150505b9392505050565b6000808260ff161480613c2c575060038260ff16115b15613c3a5760009050613e14565b60005b600a60008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008460ff1660ff16815260200190815260200160002080549050811015613e0e578473ffffffffffffffffffffffffffffffffffffffff16600a60008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008560ff1660ff1681526020019081526020016000208281548110613d1d57613d1c615947565b5b906000526020600020906002020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1603613dfb5783600a60008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008560ff1660ff1681526020019081526020016000208281548110613dd357613dd2615947565b5b90600052602060002090600202016001016000828254613df39190615299565b925050819055505b8080613e0690615976565b915050613c3d565b50600190505b949350505050565b613e2461436d565b73ffffffffffffffffffffffffffffffffffffffff16613e42612294565b73ffffffffffffffffffffffffffffffffffffffff1614613e98576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613e8f90615a39565b60405180910390fd5b565b606060008260ff16118015613eb3575060038260ff1611155b613ebc57600080fd5b60018260ff1603613fd857600a60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000600160ff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b82821015613fcd57838290600052602060002090600202016040518060400160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160018201548152505081526020019060010190613f3b565b5050505090506142a3565b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c856040518263ffffffff1660e01b81526004016140359190614fbe565b602060405180830381865afa158015614052573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061407691906150c0565b905060028360ff160361419557600a60008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000600260ff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561418957838290600052602060002090600202016040518060400160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481525050815260200190600101906140f7565b505050509150506142a3565b600a60008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000600360ff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561429b57838290600052602060002090600202016040518060400160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160018201548152505081526020019060010190614209565b505050509150505b92915050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036143e4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016143db90615aa5565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603614453576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161444a90615b11565b60405180910390fd5b600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663aa156645846040518263ffffffff1660e01b81526004016144ae9190614fbe565b602060405180830381865afa1580156144cb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906144ef91906151d1565b61452e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161452590615b7d565b60405180910390fd5b600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663aa156645836040518263ffffffff1660e01b81526004016145899190614fbe565b602060405180830381865afa1580156145a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906145ca91906151d1565b614609576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161460090615be9565b60405180910390fd5b6000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c856040518263ffffffff1660e01b81526004016146669190614fbe565b602060405180830381865afa158015614683573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906146a791906150c0565b90506000600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166375894e8c856040518263ffffffff1660e01b81526004016147069190614fbe565b602060405180830381865afa158015614723573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061474791906150c0565b90506000600760008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414614882576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161487990615c7b565b60405180910390fd5b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905083811015614909576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161490090615ce7565b60405180910390fd5b838103600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555083600760008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508360046000828254614a659190615529565b92505081905550614a798686866001611b6c565b8173ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f832e64044325c585c022cf1d4d9825f57efa5999b1a7d31e1eb9be10445841f08888604051614aef9291906156c7565b60405180910390a4505050505050565b6040518060400160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600081525090565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000614b5f82614b34565b9050919050565b614b6f81614b54565b8114614b7a57600080fd5b50565b600081359050614b8c81614b66565b92915050565b6000819050919050565b614ba581614b92565b8114614bb057600080fd5b50565b600081359050614bc281614b9c565b92915050565b60008060408385031215614bdf57614bde614b2f565b5b6000614bed85828601614b7d565b9250506020614bfe85828601614bb3565b9150509250929050565b60008115159050919050565b614c1d81614c08565b82525050565b6000602082019050614c386000830184614c14565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015614c78578082015181840152602081019050614c5d565b60008484015250505050565b6000601f19601f8301169050919050565b6000614ca082614c3e565b614caa8185614c49565b9350614cba818560208601614c5a565b614cc381614c84565b840191505092915050565b60006020820190508181036000830152614ce88184614c95565b905092915050565b614cf981614b92565b82525050565b6000602082019050614d146000830184614cf0565b92915050565b600080600060608486031215614d3357614d32614b2f565b5b6000614d4186828701614b7d565b9350506020614d5286828701614b7d565b9250506040614d6386828701614bb3565b9150509250925092565b600060ff82169050919050565b614d8381614d6d565b82525050565b6000602082019050614d9e6000830184614d7a565b92915050565b600060208284031215614dba57614db9614b2f565b5b6000614dc884828501614bb3565b91505092915050565b614dda81614d6d565b8114614de557600080fd5b50565b600081359050614df781614dd1565b92915050565b60008060008060808587031215614e1757614e16614b2f565b5b6000614e2587828801614b7d565b9450506020614e3687828801614b7d565b9350506040614e4787828801614bb3565b9250506060614e5887828801614de8565b91505092959194509250565b600060208284031215614e7a57614e79614b2f565b5b6000614e8884828501614b7d565b91505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b614ec681614b54565b82525050565b614ed581614b92565b82525050565b604082016000820151614ef16000850182614ebd565b506020820151614f046020850182614ecc565b50505050565b6000614f168383614edb565b60408301905092915050565b6000602082019050919050565b6000614f3a82614e91565b614f448185614e9c565b9350614f4f83614ead565b8060005b83811015614f80578151614f678882614f0a565b9750614f7283614f22565b925050600181019050614f53565b5085935050505092915050565b60006020820190508181036000830152614fa78184614f2f565b905092915050565b614fb881614b54565b82525050565b6000602082019050614fd36000830184614faf565b92915050565b60008060408385031215614ff057614fef614b2f565b5b6000614ffe85828601614b7d565b925050602061500f85828601614b7d565b9150509250929050565b7f496e76616c696420616374696f6e2c20636f6e74726163742069732073746f7060008201527f7065642e00000000000000000000000000000000000000000000000000000000602082015250565b6000615075602483614c49565b915061508082615019565b604082019050919050565b600060208201905081810360008301526150a481615068565b9050919050565b6000815190506150ba81614b66565b92915050565b6000602082840312156150d6576150d5614b2f565b5b60006150e4848285016150ab565b91505092915050565b7f57726f6e6720616d6f756e740000000000000000000000000000000000000000600082015250565b6000615123600c83614c49565b915061512e826150ed565b602082019050919050565b6000602082019050818103600083015261515281615116565b9050919050565b600067ffffffffffffffff82169050919050565b61517681615159565b82525050565b6000604082019050615191600083018561516d565b61519e6020830184614faf565b9392505050565b6151ae81614c08565b81146151b957600080fd5b50565b6000815190506151cb816151a5565b92915050565b6000602082840312156151e7576151e6614b2f565b5b60006151f5848285016151bc565b91505092915050565b7f57726f6e6720726f6c6500000000000000000000000000000000000000000000600082015250565b6000615234600a83614c49565b915061523f826151fe565b602082019050919050565b6000602082019050818103600083015261526381615227565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006152a482614b92565b91506152af83614b92565b92508282039050818111156152c7576152c661526a565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061531457607f821691505b602082108103615327576153266152cd565b5b50919050565b7f50726f706f73657220616e6420617070726f7665722063616e6e6f742062652060008201527f7468652073616d652e0000000000000000000000000000000000000000000000602082015250565b6000615389602983614c49565b91506153948261532d565b604082019050919050565b600060208201905081810360008301526153b88161537c565b9050919050565b7f5468657265206973206e6f207375636820616d6f756e74206f66206275726e2e600082015250565b60006153f5602083614c49565b9150615400826153bf565b602082019050919050565b60006020820190508181036000830152615424816153e8565b9050919050565b7f5468652073656e64657220646f6573206e6f742068617665207468652062757260008201527f6e20726f6c652e00000000000000000000000000000000000000000000000000602082015250565b6000615487602783614c49565b91506154928261542b565b604082019050919050565b600060208201905081810360008301526154b68161547a565b9050919050565b7f53616d6520616464726573730000000000000000000000000000000000000000600082015250565b60006154f3600c83614c49565b91506154fe826154bd565b602082019050919050565b60006020820190508181036000830152615522816154e6565b9050919050565b600061553482614b92565b915061553f83614b92565b92508282019050808211156155575761555661526a565b5b92915050565b7f57726f6e672073656e6465720000000000000000000000000000000000000000600082015250565b6000615593600c83614c49565b915061559e8261555d565b602082019050919050565b600060208201905081810360008301526155c281615586565b9050919050565b7f416d6f756e7420657863656564732062616c616e636500000000000000000000600082015250565b60006155ff601683614c49565b915061560a826155c9565b602082019050919050565b6000602082019050818103600083015261562e816155f2565b9050919050565b7f416d6f756e7420657863656564207468652070656e64696e67207472616e666560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b6000615691602183614c49565b915061569c82615635565b604082019050919050565b600060208201905081810360008301526156c081615684565b9050919050565b60006040820190506156dc6000830185614faf565b6156e96020830184614cf0565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6006811061572c57600080fd5b50565b60008151905061573e8161571f565b92915050565b60006020828403121561575a57615759614b2f565b5b60006157688482850161572f565b91505092915050565b7f57726f6e6720656e746974790000000000000000000000000000000000000000600082015250565b60006157a7600c83614c49565b91506157b282615771565b602082019050919050565b600060208201905081810360008301526157d68161579a565b9050919050565b7f496e76616c696420616464726573732c207a65726f20616464726573732e0000600082015250565b6000615813601e83614c49565b915061581e826157dd565b602082019050919050565b6000602082019050818103600083015261584281615806565b9050919050565b7f214f776e65720000000000000000000000000000000000000000000000000000600082015250565b600061587f600683614c49565b915061588a82615849565b602082019050919050565b600060208201905081810360008301526158ae81615872565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b6000615911602683614c49565b915061591c826158b5565b604082019050919050565b6000602082019050818103600083015261594081615904565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600061598182614b92565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036159b3576159b261526a565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b6000615a23602083614c49565b9150615a2e826159ed565b602082019050919050565b60006020820190508181036000830152615a5281615a16565b9050919050565b7f5472616e736665722066726f6d20746865207a65726f20616464726573730000600082015250565b6000615a8f601e83614c49565b9150615a9a82615a59565b602082019050919050565b60006020820190508181036000830152615abe81615a82565b9050919050565b7f5472616e7366657220746f20746865207a65726f206164647265737300000000600082015250565b6000615afb601c83614c49565b9150615b0682615ac5565b602082019050919050565b60006020820190508181036000830152615b2a81615aee565b9050919050565b7f53656e6465722069742773206e6f7420776f726b657200000000000000000000600082015250565b6000615b67601683614c49565b9150615b7282615b31565b602082019050919050565b60006020820190508181036000830152615b9681615b5a565b9050919050565b7f526563697069656e742069742773206e6f7420776f726b657200000000000000600082015250565b6000615bd3601983614c49565b9150615bde82615b9d565b602082019050919050565b60006020820190508181036000830152615c0281615bc6565b9050919050565b7f5472616e7366657220696d706f737369626c652c20746865726520697320612060008201527f70656e64696e67207472616e7366657200000000000000000000000000000000602082015250565b6000615c65603083614c49565b9150615c7082615c09565b604082019050919050565b60006020820190508181036000830152615c9481615c58565b9050919050565b7f5472616e7366657220616d6f756e7420657863656564732062616c616e63652e600082015250565b6000615cd1602083614c49565b9150615cdc82615c9b565b602082019050919050565b60006020820190508181036000830152615d0081615cc4565b905091905056fea2646970667358221220ffcb27b6541ad9958e7c8068db543c81d7ac3ce54399a72f0d8e046c5c11517664736f6c63430008110033"}'),ay=function(e,t,n,r,a){function o(e){Z(this,o),this._provider=void 0,this._provider=e}return B(o,[{key:"getTransfersPendingToApprove",value:function(t,n){return(e=e||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getMedicine(t),e.prev=1,e.next=4,r.getTranfersPendingToApprove(n);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){var t=Ge(e,2),n=t[0],r=t[1];return new ty({sender:n,amount:r})})));case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))).apply(this,arguments)}},{key:"getMintsPendingToApprove",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getMedicine(t),e.prev=1,e.next=4,r.getMintsPendingToApprove(n);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){var t=Ge(e,2),n=t[0],r=t[1];return new ty({sender:n,amount:r})})));case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))).apply(this,arguments)}},{key:"getBurnsPendingToApprove",value:function(e,t){return(n=n||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getMedicine(t),e.prev=1,e.next=4,r.getBurnsPendingToApprove(n);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){var t=Ge(e,2),n=t[0],r=t[1];return new ty({sender:n,amount:r})})));case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))).apply(this,arguments)}},{key:"balanceOf",value:function(e,t){return(r=r||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getMedicine(t),e.abrupt("return",r.balanceOf(n));case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getMedicineInfo",value:function(e){return(a=a||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c,l,u,f,I,C,d,A,h;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getMedicine(t),e.next=3,Promise.all([n.name(),n.symbol(),n.code(),n.presentation(),n.unidadDeMedida(),n.totalSupply(),n.pendingMintTotal(),n.pendingBurnTotal(),n.pendingTotalSupply(),n.EntityManagerAddress(),n.owner(),n.isPanic()]);case 3:return r=e.sent,a=Ge(r,12),o=a[0],i=a[1],g=a[2],s=a[3],c=a[4],l=a[5],u=a[6],f=a[7],I=a[8],C=a[9],d=a[10],A=a[11],h=new $b({info:{name:o,symbol:i,code:g,presentation:s,measureUnit:c,address:t},totalSupply:l,pendingMintTotal:u,pendingBurnTotal:f,pendingTotal:I,entityManager:C,owner:d,panic:A}),e.abrupt("return",h);case 19:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getMedicine",value:function(e){return new zs(e,ry.Mt,this._provider)}}]),o}(),oy=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"Address","type":"address"},{"indexed":true,"internalType":"enum EntityManager.EntityType","name":"Entity","type":"uint8"},{"indexed":false,"internalType":"string","name":"Metadata","type":"string"}],"name":"EntityRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint64","name":"role","type":"uint64"},{"indexed":true,"internalType":"uint64","name":"previousAdminRole","type":"uint64"},{"indexed":true,"internalType":"uint64","name":"newAdminRole","type":"uint64"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint64","name":"role","type":"uint64"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint64","name":"role","type":"uint64"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"OldAddress","type":"address"},{"indexed":true,"internalType":"address","name":"NewAddress","type":"address"}],"name":"WorkerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"Address","type":"address"},{"indexed":true,"internalType":"address","name":"Entity","type":"address"},{"indexed":true,"internalType":"uint128","name":"WorkerID","type":"uint128"},{"indexed":false,"internalType":"string","name":"Metadata","type":"string"}],"name":"WorkerRegistered","type":"event"},{"inputs":[],"name":"ADMIN_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BURN_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"EMPTY","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINT_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NULL_ADDRESS","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SUPERVISOR_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SUPER_ADMIN_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"WORKER_ROLE","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"entityAddr","type":"address"},{"internalType":"enum EntityManager.EntityType","name":"entityType","type":"uint8"},{"internalType":"string","name":"_metadata","type":"string"}],"name":"addEntity","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"workerAddr","type":"address"},{"internalType":"address","name":"entityAddr","type":"address"},{"internalType":"uint64","name":"role","type":"uint64"},{"internalType":"uint128","name":"workerId","type":"uint128"},{"internalType":"string","name":"_metadata","type":"string"}],"name":"addWorker","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"workerAddr","type":"address"},{"internalType":"address","name":"entityAddr","type":"address"}],"name":"belongTo","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"workerAddr","type":"address"}],"name":"getEntity","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"entity","type":"address"}],"name":"getEntityData","outputs":[{"components":[{"internalType":"enum EntityManager.EntityType","name":"_type","type":"uint8"},{"internalType":"uint128","name":"_countWorkers","type":"uint128"},{"internalType":"string","name":"_metadata","type":"string"}],"internalType":"struct EntityManager.Entity","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"entityAddr","type":"address"}],"name":"getEntityType","outputs":[{"internalType":"enum EntityManager.EntityType","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint64","name":"role","type":"uint64"}],"name":"getRoleAdmin","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalEntities","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalWorkers","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"worker","type":"address"}],"name":"getWorkerData","outputs":[{"components":[{"internalType":"address","name":"_entity","type":"address"},{"internalType":"uint128","name":"_id","type":"uint128"},{"internalType":"bool","name":"_isActive","type":"bool"},{"internalType":"string","name":"_metadata","type":"string"}],"internalType":"struct EntityManager.Worker","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint64","name":"role","type":"uint64"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"happyness","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint64","name":"role","type":"uint64"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"entityAddr","type":"address"}],"name":"isEntity","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"workerAddr","type":"address"}],"name":"isWorker","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"panic","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"entityAddr","type":"address"}],"name":"removeEntity","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"workerAddr","type":"address"}],"name":"removeWorker","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint64","name":"role","type":"uint64"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint64","name":"role","type":"uint64"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"oldAddr","type":"address"},{"internalType":"address","name":"newAddr","type":"address"}],"name":"updateWorkerAddr","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]}'),iy=Pb.makeMessageType("entity.v1.Entity",(function(){return[{no:1,name:"address",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:Pb.getEnumType(sy)},{no:3,name:"count_workers",kind:"scalar",T:4},{no:4,name:"metadata",kind:"message",T:cy}]})),gy=Pb.makeEnum("entity.v1.Entity.Role",[{no:0,name:"ROLE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"ROLE_SUPER_ADMIN",localName:"SUPER_ADMIN"},{no:2,name:"ROLE_ADMIN",localName:"ADMIN"},{no:3,name:"ROLE_SUPERVISOR",localName:"SUPERVISOR"},{no:4,name:"ROLE_BURN",localName:"BURN"},{no:5,name:"ROLE_MINT",localName:"MINT"},{no:6,name:"ROLE_WORKER",localName:"WORKER"}]),sy=Pb.makeEnum("entity.v1.Entity.Type",[{no:0,name:"TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"TYPE_LABORATORY",localName:"LABORATORY"},{no:2,name:"TYPE_WAREHOUSE",localName:"WAREHOUSE"},{no:3,name:"TYPE_PHARMACY",localName:"PHARMACY"},{no:4,name:"TYPE_HOSPITAL",localName:"HOSPITAL"},{no:5,name:"TYPE_TRANSPORT",localName:"TRANSPORT"}]),cy=Pb.makeMessageType("entity.v1.Metadata",(function(){return[{no:1,name:"laboratory",kind:"message",T:ly,oneof:"data"},{no:2,name:"warehouse",kind:"message",T:uy,oneof:"data"},{no:3,name:"pharmacy",kind:"message",T:fy,oneof:"data"},{no:4,name:"hospital",kind:"message",T:Iy,oneof:"data"},{no:5,name:"transport",kind:"message",T:Cy,oneof:"data"}]})),ly=Pb.makeMessageType("entity.v1.Metadata.Laboratory",(function(){return[{no:1,name:"name",kind:"scalar",T:9}]}),{localName:"Metadata_Laboratory"}),uy=Pb.makeMessageType("entity.v1.Metadata.Warehouse",(function(){return[{no:1,name:"name",kind:"scalar",T:9}]}),{localName:"Metadata_Warehouse"}),fy=Pb.makeMessageType("entity.v1.Metadata.Pharmacy",(function(){return[{no:1,name:"name",kind:"scalar",T:9}]}),{localName:"Metadata_Pharmacy"}),Iy=Pb.makeMessageType("entity.v1.Metadata.Hospital",(function(){return[{no:1,name:"name",kind:"scalar",T:9}]}),{localName:"Metadata_Hospital"}),Cy=Pb.makeMessageType("entity.v1.Metadata.Transport",(function(){return[{no:1,name:"name",kind:"scalar",T:9}]}),{localName:"Metadata_Transport"}),dy=Pb.makeMessageType("entity.v1.Worker",(function(){return[{no:1,name:"address",kind:"scalar",T:9},{no:2,name:"entity",kind:"message",T:iy},{no:3,name:"id",kind:"scalar",T:4},{no:4,name:"is_active",kind:"scalar",T:8},{no:5,name:"metadata",kind:"message",T:Ay}]})),Ay=Pb.makeMessageType("entity.v1.Worker.Metadata",(function(){return[{no:1,name:"firstname",kind:"scalar",T:9},{no:2,name:"lastname",kind:"scalar",T:9}]}),{localName:"Worker_Metadata"}),hy=n(9778);n(3430);function py(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";return hy.lW.from(e).toString(t)}function my(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";return Uint8Array.from(hy.lW.from(e,t))}var by=function(e,t,n,r,a,o,i,g){function s(e){Z(this,s),this._provider=void 0,this._provider=e}return B(s,[{key:"getWorkerData",value:function(t,n){return(e=e||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getEntityManager(t),e.next=3,r.getWorkerData(n);case 3:return a=e.sent,o=Ge(a,4),i=o[0],g=o[1],s=o[2],c=o[3],e.next=11,this.getEntityData(t,i);case 11:return l=e.sent,e.abrupt("return",new dy({address:n,entity:l,id:g,isActive:s,metadata:Ay.fromBinary(my(c))}));case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"isEntity",value:function(e,n){return(t=t||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getEntityManager(t),e.abrupt("return",r.isEntity(n));case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"isWorker",value:function(e,t){return(n=n||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getEntityManager(t),e.abrupt("return",r.isWorker(n));case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"belongTo",value:function(e,t,n){return(r=r||hn(dn().mark((function e(t,n,r){var a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getEntityManager(t),e.abrupt("return",a.belongTo(n,r));case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getEntity",value:function(e,t){return(a=a||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getEntityManager(t),e.abrupt("return",r.getEntity(n));case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getEntityData",value:function(e,t){return(o=o||hn(dn().mark((function e(t,n){var r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getEntityManager(t),e.next=3,r.getEntityData(n);case 3:return a=e.sent,o=Ge(a,3),i=o[0],g=o[1],s=o[2],e.abrupt("return",new iy({address:n,countWorkers:g,metadata:cy.fromBinary(my(s)),type:Number(i)}));case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"rolesOf",value:function(e,t){return(i=i||hn(dn().mark((function e(t,n){var r,a,o=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[gy.ADMIN,gy.BURN,gy.MINT,gy.SUPERVISOR,gy.SUPER_ADMIN,gy.WORKER],e.next=3,Promise.all(r.map((function(e){return o.hasRole(t,e,n)})));case 3:return a=e.sent,e.abrupt("return",r.filter((function(e,t){return a[t]})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"hasRole",value:function(e,t,n){return(g=g||hn(dn().mark((function e(t,n,r){var a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getEntityManager(t),e.abrupt("return",a.hasRole(1<<n,r));case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getEntityManager",value:function(e){return new zs(e,oy.Mt,this._provider)}}]),s}(),yy=Pb.makeMessageType("wallet.v1.Wallet",(function(){return[{no:1,name:"address",kind:"scalar",T:9},{no:2,name:"contact",kind:"message",T:vy},{no:3,name:"contacts",kind:"map",K:9,V:{kind:"message",T:vy}},{no:4,name:"entities",kind:"scalar",T:9,repeated:!0}]})),vy=Pb.makeMessageType("wallet.v1.Wallet.Contact",(function(){return[{no:1,name:"address",kind:"scalar",T:9},{no:2,name:"picture",kind:"scalar",T:12,repeated:!0},{no:3,name:"firstname",kind:"scalar",T:9},{no:4,name:"lastname",kind:"scalar",T:9},{no:5,name:"company",kind:"scalar",T:9,opt:!0},{no:6,name:"email",kind:"scalar",T:9,opt:!0},{no:7,name:"phone",kind:"scalar",T:9,opt:!0}]}),{localName:"Wallet_Contact"}),Zy=function(e,t){function n(e,t,r){Z(this,n),b(this,"interface",void 0),b(this,"bytecode",void 0),b(this,"runner",void 0);var a=Eg.from(e);t instanceof Uint8Array||("object"===typeof t&&(t=t.object),t.startsWith("0x")||(t="0x"+t)),vn(this,{bytecode:t=Kn(xn(t)),interface:a,runner:r||null})}return B(n,[{key:"attach",value:function(e){return new Ms(e,this.interface,this.runner)}},{key:"getDeployTransaction",value:function(){return(e=e||hn(dn().mark((function e(){var t,n,r,a,o,i,g,s=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=this.interface.deploy,r=s.length,a=new Array(r),o=0;o<r;o++)a[o]=s[o];if(n.inputs.length+1!==a.length){e.next=7;break}return e.next=6,Ws(a.pop());case 6:t=e.sent;case 7:if(n.inputs.length===a.length){e.next=9;break}throw new Error("incorrect number of arguments to constructor");case 9:return e.next=11,Rs(this.runner,n.inputs,a);case 11:return i=e.sent,g=En([this.bytecode,this.interface.encodeDeploy(i)]),e.abrupt("return",Object.assign({},t,{data:g}));case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"deploy",value:function(){return(t=t||hn(dn().mark((function e(){var t,n,r,a=arguments;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDeployTransaction.apply(this,a);case 2:return t=e.sent,Sn(this.runner&&"function"===typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"}),e.next=6,this.runner.sendTransaction(t);case 6:return n=e.sent,r=qI(n),e.abrupt("return",new Ms(r,this.interface,this.runner,n));case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"connect",value:function(e){return new n(this.interface,this.bytecode,e)}}],[{key:"fromSolidity",value:function(e,t){wn(null!=e,"bad compiler output","output",e),"string"===typeof e&&(e=JSON.parse(e));var n=e.abi,r="";return e.bytecode?r=e.bytecode:e.evm&&e.evm.bytecode&&(r=e.evm.bytecode),new this(n,r,t)}}]),n}(),Gy=function(e,t,n,r,a,o,i){function g(e,t){Z(this,g),this._signer=void 0,this._storage=void 0,this._signer=e,this._storage=t}return B(g,[{key:"loadWalletData",value:function(){return(e=e||hn(dn().mark((function e(){var t,n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.address();case 2:return n=e.sent,e.next=5,null===(t=this._storage)||void 0===t?void 0:t.wallets.findOne(n).exec();case 5:if(!(r=e.sent)){e.next=15;break}return e.prev=7,e.abrupt("return",yy.fromBinary(my(r._data.value)));case 11:return e.prev=11,e.t0=e.catch(7),e.next=15,r.remove();case 15:return e.abrupt("return",new yy({address:n}));case 16:case"end":return e.stop()}}),e,this,[[7,11]])})))).apply(this,arguments)}},{key:"storeWalletData",value:function(e){return(t=t||hn(dn().mark((function e(t){var n,r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.address();case 2:return a=e.sent,e.next=5,null===(n=this._storage)||void 0===n?void 0:n.wallets.findOne(a).exec();case 5:if(!(o=e.sent)){e.next=10;break}return e.next=9,o.modify((function(e){return e.value=py(t.toBinary()),e}));case 9:return e.abrupt("return");case 10:return e.next=12,null===(r=this._storage)||void 0===r?void 0:r.wallets.insert({key:a,value:py(t.toBinary())});case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"address",value:function(){return(n=n||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._signer.getAddress());case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"send",value:function(e){return(r=r||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c,l,u,f,I,C,d,A,h,p,m,b,y,v,Z,G,B,k,S;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.data.case,e.next="factory"===e.t0?3:"deployMedicine"===e.t0?11:"setEntityManagerAddress"===e.t0?19:"addEntity"===e.t0?25:"addWorker"===e.t0?37:"removeWorker"===e.t0?43:"updateWorkerAddr"===e.t0?49:"transfer"===e.t0?55:"approveTransfer"===e.t0?61:"rejectTransfer"===e.t0?67:"mint"===e.t0?73:"approveMint"===e.t0?79:"rejectMint"===e.t0?85:"burn"===e.t0?91:"approveBurn"===e.t0?97:"rejectBurn"===e.t0?103:"panic"===e.t0?109:"happiness"===e.t0?115:121;break;case 3:return e.next=5,this.getFactory(t.contract);case 5:return n=e.sent,e.next=8,n.factory(t.data.value.address);case 8:return r=e.sent,console.log({txe:r}),e.abrupt("return");case 11:return a=new Zy(ry.Mt,ry.eF,this._signer),e.next=14,a.deploy(t.data.value.name,t.data.value.symbol,t.data.value.code,t.data.value.presentation,t.data.value.measureUnit);case 14:return o=e.sent,e.next=17,o.waitForDeployment();case 17:return i=e.sent,e.abrupt("return",i.getAddress());case 19:return e.next=21,this.getMedicine(t.contract);case 21:return g=e.sent,e.next=24,g.setEntityManagerAddress(t.data.value.address);case 24:case 36:case 42:case 48:case 54:case 60:case 66:case 72:case 78:case 84:case 90:case 96:case 102:case 108:case 114:case 120:return e.abrupt("return");case 25:return e.next=27,this.getEntityManager(t.contract);case 27:return l=e.sent,e.next=30,l.addEntity(t.data.value.entityAddress,t.data.value.entityType,py(null!==(s=null===(c=t.data.value.metadata)||void 0===c?void 0:c.toBinary())&&void 0!==s?s:new Uint8Array([])));case 30:return e.next=32,this.loadWalletData();case 32:return(u=e.sent).entities.push(t.data.value.entityAddress),e.next=36,this.storeWalletData(u);case 37:return e.next=39,this.getEntityManager(t.contract);case 39:return C=e.sent,e.next=42,C.addWorker(t.data.value.workerAddress,t.data.value.entityAddress,t.data.value.role,t.data.value.workerId,py(null!==(f=null===(I=t.data.value.metadata)||void 0===I?void 0:I.toBinary())&&void 0!==f?f:new Uint8Array([])));case 43:return e.next=45,this.getEntityManager(t.contract);case 45:return d=e.sent,e.next=48,d.removeWorker(t.data.value.workerAddress);case 49:return e.next=51,this.getEntityManager(t.contract);case 51:return A=e.sent,e.next=54,A.updateWorkerAddr(t.data.value.oldAddress,t.data.value.newAddress);case 55:return e.next=57,this.getMedicine(t.contract);case 57:return h=e.sent,e.next=60,h.transfer(t.data.value.recipient,t.data.value.amount);case 61:return e.next=63,this.getMedicine(t.contract);case 63:return p=e.sent,e.next=66,p.approveTransfer(t.data.value.worker,t.data.value.amount);case 67:return e.next=69,this.getMedicine(t.contract);case 69:return m=e.sent,e.next=72,m.rejectTransfer(t.data.value.worker,t.data.value.amount);case 73:return e.next=75,this.getMedicine(t.contract);case 75:return b=e.sent,e.next=78,b.mint(t.data.value.amount);case 79:return e.next=81,this.getMedicine(t.contract);case 81:return y=e.sent,e.next=84,y.approveMint(t.data.value.worker,t.data.value.amount);case 85:return e.next=87,this.getMedicine(t.contract);case 87:return v=e.sent,e.next=90,v.rejectMint(t.data.value.worker,t.data.value.amount);case 91:return e.next=93,this.getMedicine(t.contract);case 93:return Z=e.sent,e.next=96,Z.burn(t.data.value.amount);case 97:return e.next=99,this.getMedicine(t.contract);case 99:return G=e.sent,e.next=102,G.approveBurn(t.data.value.worker,t.data.value.amount);case 103:return e.next=105,this.getMedicine(t.contract);case 105:return B=e.sent,e.next=108,B.rejectBurn(t.data.value.worker,t.data.value.amount);case 109:return e.next=111,this.getMedicine(t.contract);case 111:return k=e.sent,e.next=114,k.panic();case 115:return e.next=117,this.getMedicine(t.contract);case 117:return S=e.sent,e.next=120,S.happyness();case 121:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getMedicine",value:function(e){return(a=a||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new zs(t,ry.Mt,this._signer));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getFactory",value:function(e){return(o=o||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new zs(t,Rm.Mt,this._signer));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"getEntityManager",value:function(e){return(i=i||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new zs(t,oy.Mt,this._signer));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}}]),g}();function By(e){return By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(e)}function ky(e){var t=function(e,t){if("object"!==By(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==By(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===By(t)?t:String(t)}function Sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ky(r.key),r)}}function wy(e,t,n){return t&&Sy(e.prototype,t),n&&Sy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wy(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r;if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!==r--;)if(!Wy(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var a=Object.keys(e);if((n=a.length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!==r--;){var o=a[r];if(!Wy(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ry(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){!e.hasOwnProperty(t)||null===e[t]||"object"!==typeof e[t]&&"function"!==typeof e[t]||Object.isFrozen(e[t])||Ry(e[t])})),e}function Vy(e){var t=e.split("."),n=t.length;return 1===n?function(t){return t[e]}:function(e){for(var r=e,a=0;a<n;++a){if("undefined"===typeof(r=r[t[a]]))return r}return r}}function Xy(e,t){var n=e[t];if(!n)throw new Error("missing value from object "+t);return n}function Jy(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"===typeof e[n]){var r=Jy(e[n]);for(var a in r)r.hasOwnProperty(a)&&(t[n+"."+a]=r[a])}else t[n]=e[n];return t}function xy(e){return Object.assign({},e)}function Yy(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;if(!t&&Array.isArray(e))return e.sort((function(e,t){return"string"===typeof e&&"string"===typeof t?e.localeCompare(t):"object"===typeof e?1:-1})).map((function(e){return Yy(e,t)}));if("object"===typeof e&&!Array.isArray(e)){if(e instanceof RegExp)return e;var n={};return Object.keys(e).sort((function(e,t){return e.localeCompare(t)})).forEach((function(r){n[r]=Yy(e[r],t)})),n}return e}var Ny=function e(t){if(!t)return t;if(null===t||"object"!==typeof t)return t;if(Array.isArray(t)){for(var n=new Array(t.length),r=n.length;r--;)n[r]=e(t[r]);return n}var a={};for(var o in t)a[o]=e(t[o]);return a};function Hy(e,t,n){return Object.defineProperty(e,t,{get:function(){return n}}),n}function Fy(e,t){return t instanceof RegExp?t.toString():t}function Ky(e){return Array.isArray(e)?e.slice(0):[e]}function Ey(e){return Array.isArray(e)}function Ty(e){return null!==e&&void 0!==e}function My(e,t){var n,r=0,a=-1,o=Xe(e);try{for(o.s();!(n=o.n()).done;){if(!t(n.value,a+=1))break;r+=1}}catch(xQ){o.e(xQ)}finally{o.f()}return r}function zy(e,t){for(var n=t.length,r=0;r<n;++r){var a=t[r];e.push(a)}}function Dy(e,t){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dy(e,t)}function Ly(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Dy(e,t)}function Uy(e){return Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uy(e)}function jy(e,t,n){return jy=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Dy(a,n.prototype),a},jy.apply(null,arguments)}function Oy(e){var t="function"===typeof Map?new Map:void 0;return Oy=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return jy(e,arguments,Uy(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Dy(n,e)},Oy(e)}var Qy={isDevMode:function(){return!1},deepFreezeWhenDevMode:function(e){return e},tunnelErrorMessage:function(e){return"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        "}};function Py(e,t,n){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length?t:(t+="Given parameters: {\n",t+=Object.keys(e).map((function(t){var n="[object Object]";try{n="errors"===t?e[t].map((function(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))})):JSON.stringify(e[t],(function(e,t){return void 0===t?null:t}),2)}catch(r){}return t+":"+n})).join("\n"),t+="}")}(n)}var _y=function(e){function t(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Py(n,t,a);return(r=e.call(this,o)||this).code=t,r.message=o,r.parameters=a,r.rxdb=!0,r}return Ly(t,e),t.prototype.toString=function(){return this.message},wy(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}(Oy(Error)),qy=function(e){function t(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Py(n,t,a);return(r=e.call(this,o)||this).code=t,r.message=o,r.parameters=a,r.rxdb=!0,r}return Ly(t,e),t.prototype.toString=function(){return this.message},wy(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}(Oy(TypeError));function $y(e,t){return new _y(e,Qy.tunnelErrorMessage(e),t)}function ev(e,t){return new qy(e,Qy.tunnelErrorMessage(e),t)}var tv={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function nv(e){return $y("COL20",{name:tv[e.status],document:e.documentId,writeError:e})}var rv={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function av(e,t){rv[e]&&rv[e].forEach((function(e){return e(t)}))}function ov(e,t){return Promise.all(rv[e].map((function(e){return e(t)})))}function iv(e){return"function"===typeof e}function gv(e){return function(t){if(function(e){return iv(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(xQ){this.error(xQ)}}));throw new TypeError("Unable to lift unknown Observable type")}}var sv=function(e,t){return sv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},sv(e,t)};function cv(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}sv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var lv=function(){return lv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},lv.apply(this,arguments)};function uv(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function g(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,g)}s((r=r.apply(e,t||[])).next())}))}function fv(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:g(0),throw:g(1),return:g(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function g(g){return function(s){return function(g){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&g[0]?r.return:g[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,g[1])).done)return a;switch(r=0,a&&(g=[2&g[0],a.value]),g[0]){case 0:case 1:a=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===g[0]||2===g[0])){i=0;continue}if(3===g[0]&&(!a||g[1]>a[0]&&g[1]<a[3])){i.label=g[1];break}if(6===g[0]&&i.label<a[1]){i.label=a[1],a=g;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(g);break}a[2]&&i.ops.pop(),i.trys.pop();continue}g=t.call(e,i)}catch(s){g=[6,s],r=0}finally{n=a=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,s])}}}Object.create;function Iv(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cv(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(g){a={error:g}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function dv(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function Av(e){return this instanceof Av?(this.v=e,this):new Av(e)}function hv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),o=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||g(e,t)}))})}function g(e,t){try{!function(e){e.value instanceof Av?Promise.resolve(e.value.v).then(s,c):l(o[0][2],e)}(a[e](t))}catch(n){l(o[0][3],n)}}function s(e){g("next",e)}function c(e){g("throw",e)}function l(e,t){e(t),o.shift(),o.length&&g(o[0][0],o[0][1])}}function pv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Iv(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,a,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;function mv(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bv=mv((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function yv(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var vv=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var i=Iv(o),g=i.next();!g.done;g=i.next()){g.value.remove(this)}}catch(I){e={error:I}}finally{try{g&&!g.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}else o.remove(this);var s=this.initialTeardown;if(iv(s))try{s()}catch(C){a=C instanceof bv?C.errors:[C]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=Iv(c),u=l.next();!u.done;u=l.next()){var f=u.value;try{Bv(f)}catch(xQ){a=null!==a&&void 0!==a?a:[],xQ instanceof bv?a=dv(dv([],Cv(a)),Cv(xQ.errors)):a.push(xQ)}}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(a)throw new bv(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Bv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&yv(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&yv(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Zv=vv.EMPTY;function Gv(e){return e instanceof vv||e&&"closed"in e&&iv(e.remove)&&iv(e.add)&&iv(e.unsubscribe)}function Bv(e){iv(e)?e():e.unsubscribe()}var kv={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Sv={setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=Sv.delegate;return(null===a||void 0===a?void 0:a.setTimeout)?a.setTimeout.apply(a,dv([e,t],Cv(n))):setTimeout.apply(void 0,dv([e,t],Cv(n)))})),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Sv.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)})),delegate:void 0};function wv(e){Sv.setTimeout((function(){var t=kv.onUnhandledError;if(!t)throw e;t(e)}))}function Wv(){}var Rv=Vv("C",void 0,void 0);function Vv(e,t,n){return{kind:e,value:t,error:n}}var Xv=null;function Jv(e){if(kv.useDeprecatedSynchronousErrorHandling){var t=!Xv;if(t&&(Xv={errorThrown:!1,error:null}),e(),t){var n=Xv,r=n.errorThrown,a=n.error;if(Xv=null,r)throw a}}else e()}var xv=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Gv(t)&&t.add(n)):n.destination=Tv,n}return cv(t,e),t.create=function(e,t,n){return new Fv(e,t,n)},t.prototype.next=function(e){this.isStopped?Ev(function(e){return Vv("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Ev(Vv("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Ev(Rv,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(vv),Yv=Function.prototype.bind;function Nv(e,t){return Yv.call(e,t)}var Hv=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Kv(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Kv(n)}else Kv(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Kv(t)}},e}(),Fv=function(e){function t(t,n,r){var a,o,i=e.call(this)||this;iv(t)||!t?a={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:i&&kv.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return i.unsubscribe()},a={next:t.next&&Nv(t.next,o),error:t.error&&Nv(t.error,o),complete:t.complete&&Nv(t.complete,o)}):a=t;return i.destination=new Hv(a),i}return cv(t,e),t}(xv);function Kv(e){var t;kv.useDeprecatedSynchronousErrorHandling?(t=e,kv.useDeprecatedSynchronousErrorHandling&&Xv&&(Xv.errorThrown=!0,Xv.error=t)):wv(e)}function Ev(e,t){var n=kv.onStoppedNotification;n&&Sv.setTimeout((function(){return n(e,t)}))}var Tv={closed:!0,next:Wv,error:function(e){throw e},complete:Wv};function Mv(e,t,n,r,a){return new zv(e,t,n,r,a)}var zv=function(e){function t(t,n,r,a,o,i){var g=e.call(this,t)||this;return g.onFinalize=o,g.shouldUnsubscribe=i,g._next=n?function(e){try{n(e)}catch(xQ){t.error(xQ)}}:e.prototype._next,g._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,g._complete=r?function(){try{r()}catch(xQ){t.error(xQ)}finally{this.unsubscribe()}}:e.prototype._complete,g}return cv(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(xv);function Dv(e,t){return gv((function(n,r){var a=0;n.subscribe(Mv(r,(function(n){r.next(e.call(t,n,a++))})))}))}function Lv(e,t){return gv((function(n,r){var a=0;n.subscribe(Mv(r,(function(n){return e.call(t,n,a++)&&r.next(n)})))}))}var Uv=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function jv(e){return iv(null===e||void 0===e?void 0:e.then)}var Ov="function"===typeof Symbol&&Symbol.observable||"@@observable";function Qv(e){return e}function Pv(e){return 0===e.length?Qv:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var _v=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,a=this,o=(r=e)&&r instanceof xv||function(e){return e&&iv(e.next)&&iv(e.error)&&iv(e.complete)}(r)&&Gv(r)?e:new Fv(e,t,n);return Jv((function(){var e=a,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?a._subscribe(o):a._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(xQ){e.error(xQ)}},e.prototype.forEach=function(e,t){var n=this;return new(t=qv(t))((function(t,r){var a=new Fv({next:function(t){try{e(t)}catch(xQ){r(xQ),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Ov]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Pv(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=qv(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function qv(e){var t;return null!==(t=null!==e&&void 0!==e?e:kv.Promise)&&void 0!==t?t:Promise}function $v(e){return iv(e[Ov])}function eZ(e){return Symbol.asyncIterator&&iv(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function tZ(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var nZ="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function rZ(e){return iv(null===e||void 0===e?void 0:e[nZ])}function aZ(e){return hv(this,arguments,(function(){var t,n,r;return fv(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Av(t.read())];case 3:return n=a.sent(),r=n.value,n.done?[4,Av(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Av(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function oZ(e){return iv(null===e||void 0===e?void 0:e.getReader)}function iZ(e){if(e instanceof _v)return e;if(null!=e){if($v(e))return a=e,new _v((function(e){var t=a[Ov]();if(iv(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Uv(e))return r=e,new _v((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(jv(e))return n=e,new _v((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,wv)}));if(eZ(e))return gZ(e);if(rZ(e))return t=e,new _v((function(e){var n,r;try{for(var a=Iv(t),o=a.next();!o.done;o=a.next()){var i=o.value;if(e.next(i),e.closed)return}}catch(g){n={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}e.complete()}));if(oZ(e))return gZ(aZ(e))}var t,n,r,a;throw tZ(e)}function gZ(e){return new _v((function(t){(function(e,t){var n,r,a,o;return uv(this,void 0,void 0,(function(){var i,g;return fv(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=pv(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(i=r.value,t.next(i),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return g=s.sent(),a={error:g},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function sZ(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=!1);var o=t.schedule((function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!a)return o}function cZ(e,t,n){return void 0===n&&(n=1/0),iv(t)?cZ((function(n,r){return Dv((function(e,a){return t(n,e,r,a)}))(iZ(e(n,r)))}),n):("number"===typeof t&&(n=t),gv((function(t,r){return function(e,t,n,r,a,o,i,g){var s=[],c=0,l=0,u=!1,f=function(){!u||s.length||c||t.complete()},I=function(e){return c<r?C(e):s.push(e)},C=function e(g){o&&t.next(g),c++;var u=!1;iZ(n(g,l++)).subscribe(Mv(t,(function(e){null===a||void 0===a||a(e),o?I(e):t.next(e)}),(function(){u=!0}),void 0,(function(){if(u)try{c--;for(var n=function(){var n=s.shift();i?sZ(t,i,(function(){return e(n)})):e(n)};s.length&&c<r;)n();f()}catch(xQ){t.error(xQ)}})))};return e.subscribe(Mv(t,I,(function(){u=!0,f()}))),function(){null===g||void 0===g||g()}}(t,r,e,n)})))}function lZ(e){return void 0===e&&(e=1/0),cZ(Qv,e)}function uZ(e){return e[e.length-1]}function fZ(e){return(t=uZ(e))&&iv(t.schedule)?e.pop():void 0;var t}function IZ(e,t){return"number"===typeof uZ(e)?e.pop():t}function CZ(e,t){return void 0===t&&(t=0),gv((function(n,r){n.subscribe(Mv(r,(function(n){return sZ(r,e,(function(){return r.next(n)}),t)}),(function(){return sZ(r,e,(function(){return r.complete()}),t)}),(function(n){return sZ(r,e,(function(){return r.error(n)}),t)})))}))}function dZ(e,t){return void 0===t&&(t=0),gv((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function AZ(e,t){if(!e)throw new Error("Iterable cannot be null");return new _v((function(n){sZ(n,t,(function(){var r=e[Symbol.asyncIterator]();sZ(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function hZ(e,t){if(null!=e){if($v(e))return function(e,t){return iZ(e).pipe(dZ(t),CZ(t))}(e,t);if(Uv(e))return function(e,t){return new _v((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(jv(e))return function(e,t){return iZ(e).pipe(dZ(t),CZ(t))}(e,t);if(eZ(e))return AZ(e,t);if(rZ(e))return function(e,t){return new _v((function(n){var r;return sZ(n,t,(function(){r=e[nZ](),sZ(n,t,(function(){var e,t,a;try{t=(e=r.next()).value,a=e.done}catch(xQ){return void n.error(xQ)}a?n.complete():n.next(t)}),0,!0)})),function(){return iv(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(oZ(e))return function(e,t){return AZ(aZ(e),t)}(e,t)}throw tZ(e)}function pZ(e,t){return t?hZ(e,t):iZ(e)}function mZ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return lZ(1)(pZ(e,fZ(e)))}function bZ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fZ(e);return gv((function(t,r){(n?mZ(e,t,n):mZ(e,t)).subscribe(r)}))}function yZ(e,t){return void 0===t&&(t=Qv),e=null!==e&&void 0!==e?e:vZ,gv((function(n,r){var a,o=!0;n.subscribe(Mv(r,(function(n){var i=t(n);!o&&e(a,i)||(o=!1,a=i,r.next(n))})))}))}function vZ(e,t){return e===t}var ZZ=mv((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),GZ=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return cv(t,e),t.prototype.lift=function(e){var t=new BZ(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new ZZ},t.prototype.next=function(e){var t=this;Jv((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var a=Iv(t.currentObservers),o=a.next();!o.done;o=a.next()){o.value.next(e)}}catch(i){n={error:i}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Jv((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Jv((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,a=n.isStopped,o=n.observers;return r||a?Zv:(this.currentObservers=null,o.push(e),new vv((function(){t.currentObservers=null,yv(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,a=t.isStopped;n?e.error(r):a&&e.complete()},t.prototype.asObservable=function(){var e=new _v;return e.source=this,e},t.create=function(e,t){return new BZ(e,t)},t}(_v),BZ=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return cv(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Zv},t}(GZ),kZ={now:function(){return(kZ.delegate||Date).now()},delegate:void 0},SZ=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=kZ);var a=e.call(this)||this;return a._bufferSize=t,a._windowTime=n,a._timestampProvider=r,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=n===1/0,a._bufferSize=Math.max(1,t),a._windowTime=Math.max(1,n),a}return cv(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,a=n._buffer,o=n._infiniteTimeWindow,i=n._timestampProvider,g=n._windowTime;r||(a.push(t),!o&&a.push(i.now()+g)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),a=0;a<r.length&&!e.closed;a+=n?1:2)e.next(r[a]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,a=e._infiniteTimeWindow,o=(a?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!a){for(var i=n.now(),g=0,s=1;s<r.length&&r[s]<=i;s+=2)g=s;g&&r.splice(0,g+1)}},t}(GZ);function wZ(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var a=new Fv({next:function(){a.unsubscribe(),e()}});return iZ(t.apply(void 0,dv([],Cv(n)))).subscribe(a)}}else e()}function WZ(e,t,n){var r,a,o,i,g=!1;return e&&"object"===typeof e?(r=e.bufferSize,i=void 0===r?1/0:r,a=e.windowTime,t=void 0===a?1/0:a,g=void 0!==(o=e.refCount)&&o,n=e.scheduler):i=null!==e&&void 0!==e?e:1/0,function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new GZ}:t,r=e.resetOnError,a=void 0===r||r,o=e.resetOnComplete,i=void 0===o||o,g=e.resetOnRefCountZero,s=void 0===g||g;return function(e){var t,r,o,g=0,c=!1,l=!1,u=function(){null===r||void 0===r||r.unsubscribe(),r=void 0},f=function(){u(),t=o=void 0,c=l=!1},I=function(){var e=t;f(),null===e||void 0===e||e.unsubscribe()};return gv((function(e,C){g++,l||c||u();var d=o=null!==o&&void 0!==o?o:n();C.add((function(){0!==--g||l||c||(r=wZ(I,s))})),d.subscribe(C),!t&&g>0&&(t=new Fv({next:function(e){return d.next(e)},error:function(e){l=!0,u(),r=wZ(f,a,e),d.error(e)},complete:function(){c=!0,u(),r=wZ(f,i),d.complete()}}),iZ(e).subscribe(t))}))(e)}}({connector:function(){return new SZ(i,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:g})}function RZ(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}var VZ={bufferSize:1,refCount:!0},XZ=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)},JZ=new Set(["__proto__","prototype","constructor"]),xZ=new Set("0123456789");function YZ(e){var t,n=[],r="",a="start",o=!1,i=Xe(e);try{for(i.s();!(t=i.n()).done;){var g=t.value;switch(g){case"\\":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");o&&(r+=g),a="property",o=!o;break;case".":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="property";break}if(o){o=!1,r+=g;break}if(JZ.has(r))return[];n.push(r),r="",a="property";break;case"[":if("index"===a)throw new Error("Invalid character in an index");if("indexEnd"===a){a="index";break}if(o){o=!1,r+=g;break}if("property"===a){if(JZ.has(r))return[];n.push(r),r=""}a="index";break;case"]":if("index"===a){n.push(Number.parseInt(r,10)),r="",a="indexEnd";break}if("indexEnd"===a)throw new Error("Invalid character after an index");default:if("index"===a&&!xZ.has(g))throw new Error("Invalid character in an index");if("indexEnd"===a)throw new Error("Invalid character after an index");"start"===a&&(a="property"),o&&(o=!1,r+="\\"),r+=g}}}catch(xQ){i.e(xQ)}finally{i.f()}switch(o&&(r+="\\"),a){case"property":if(JZ.has(r))return[];n.push(r);break;case"index":throw new Error("Index was not closed");case"start":n.push("")}return n}function NZ(e,t){if("number"!==typeof t&&Array.isArray(e)){var n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function HZ(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!XZ(e)||"string"!==typeof t)return void 0===n?e:n;var r=YZ(t);if(0===r.length)return n;for(var a=0;a<r.length;a++){var o=r[a];if(void 0===(e=NZ(e,o)?a===r.length-1?void 0:null:e[o])||null===e){if(a!==r.length-1)return n;break}}return void 0===e?n:e}Promise.resolve(!0);var FZ=Promise.resolve(!1),KZ=Promise.resolve(null),EZ=Promise.resolve(),TZ=EZ;function MZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return TZ=TZ.then((function(){return"function"===typeof requestIdleCallback?new Promise((function(t){requestIdleCallback((function(){return t()}),{timeout:e})})):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}(0)})),TZ}function zZ(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="abcdefghijklmnopqrstuvwxyz",r=0;r<e;r++)t+=n.charAt(Math.floor(26*Math.random()));return t}function DZ(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function LZ(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}function UZ(e){return!(!e.includes("/")&&!e.includes("\\"))}function jZ(e){var t=e.split("-"),n="RxDB";return t.forEach((function(e){n+=DZ(e)})),n+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+n+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+n+");\n        ")}function OZ(e){return e.documentData?e.documentData:e.previousDocumentData}var QZ=/\./g,PZ=/(\/?)(.+)\1([a-z]*)/i;var _Z=1;function qZ(){return{lwt:_Z}}function $Z(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}function eG(e,t){var n=t;return HZ(e,n=LZ(n="properties."+(n=n.replace(QZ,".properties."))))}function tG(e,t,n){if("string"===typeof t.primaryKey)return n;var r=rG(t,n),a=n[e];if(a&&a!==r)throw $y("DOC19",{args:{documentData:n,existingPrimary:a,newPrimary:r},schema:t});return n[e]=r,n}function nG(e){return"string"===typeof e?e:e.key}function rG(e,t){if("string"===typeof e.primaryKey)return t[e.primaryKey];var n=e.primaryKey;return n.fields.map((function(e){var n=HZ(t,e);if("undefined"===typeof n)throw $y("DOC18",{args:{field:e,documentData:t}});return n})).join(n.separator)}function aG(e){var t=nG((e=xy(e)).primaryKey);e.properties=xy(e.properties),e.additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=oG,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var n=iG(e);return zy(e.required,n),e.required=e.required.filter((function(e){return!e.includes(".")})).filter((function(e,t,n){return n.indexOf(e)===t})),e.version=e.version||0,e.indexes&&(e.indexes=e.indexes.map((function(e){var n=Ey(e)?e.slice(0):[e];if(!n.includes(t)){var r=n.slice(0);return r.push(t),r}return n}))),e}var oG={type:"object",properties:{lwt:{type:"number",minimum:_Z,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function iG(e){var t=Object.keys(e.properties).filter((function(t){return e.properties[t].final})),n=nG(e.primaryKey);return t.push(n),"string"!==typeof e.primaryKey&&e.primaryKey.fields.forEach((function(e){return t.push(e)})),t}var gG=0;function sG(){var e=(new Date).getTime();(e+=.01)<=gG&&(e=gG+.01);var t=parseFloat(e.toFixed(2));return gG=t,t}Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});Object.freeze(["prototype","__proto__","constructor"]);var cG="[native code] }";cG.length;var lG=function(){function e(t,n){Z(this,e),t=this.words=t||[],this.sigBytes=void 0===n?4*t.length:n}return B(e,[{key:"toString",value:function(e){return(e||uG).stringify(this)}},{key:"concat",value:function(e){if(this.clamp(),this.sigBytes%4)for(var t=0;t<e.sigBytes;t++){var n=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=n<<24-(this.sigBytes+t)%4*8}else for(var r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];return this.sigBytes+=e.sigBytes,this}},{key:"clamp",value:function(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}},{key:"clone",value:function(){return new e(We(this.words))}}]),e}(),uG={stringify:function(e){for(var t=[],n=0;n<e.sigBytes;n++){var r=e.words[n>>>2]>>>24-n%4*8&255;t.push((r>>>4).toString(16),(15&r).toString(16))}return t.join("")}},fG=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new lG(n,t)},IG=function(e){return fG(unescape(encodeURIComponent(e)))},CG=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n,[{key:"update",value:function(e){return this._append(e),this._process(),this}},{key:"finalize",value:function(e){e&&this._append(e)}}]),n}(function(){function e(){Z(this,e),this._data=new lG,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}return B(e,[{key:"reset",value:function(){this._data=new lG,this._nDataBytes=0}},{key:"_append",value:function(e){"string"===typeof e&&(e=IG(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}},{key:"_doProcessBlock",value:function(e,t){}},{key:"_process",value:function(e){var t,n=this._data.sigBytes/(4*this.blockSize),r=(n=e?Math.ceil(n):Math.max((0|n)-this._minBufferSize,0))*this.blockSize,a=Math.min(4*r,this._data.sigBytes);if(r){for(var o=0;o<r;o+=this.blockSize)this._doProcessBlock(this._data.words,o);t=this._data.words.splice(0,r),this._data.sigBytes-=a}return new lG(t,a)}}]),e}()),dG=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],AG=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],hG=[],pG=function(e){d(n,e);var t=p(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments))._hash=new lG([].concat(dG)),e}return B(n,[{key:"reset",value:function(){gn(A(n.prototype),"reset",this).call(this),this._hash=new lG([].concat(dG))}},{key:"_doProcessBlock",value:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],g=n[4],s=n[5],c=n[6],l=n[7],u=0;u<64;u++){if(u<16)hG[u]=0|e[t+u];else{var f=hG[u-15],I=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,C=hG[u-2],d=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;hG[u]=I+hG[u-7]+d+hG[u-16]}var A=r&a^r&o^a&o,h=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),p=l+((g<<26|g>>>6)^(g<<21|g>>>11)^(g<<7|g>>>25))+(g&s^~g&c)+AG[u]+hG[u];l=c,c=s,s=g,g=i+p|0,i=o,o=a,a=r,r=p+(h+A)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+g|0,n[5]=n[5]+s|0,n[6]=n[6]+c|0,n[7]=n[7]+l|0}},{key:"finalize",value:function(e){gn(A(n.prototype),"finalize",this).call(this,e);var t=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(r+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}]),n}(CG);var mG;function bG(e){return t=e,(new pG).finalize(t).toString();var t}function yG(e){var t=e.split("-");if(2!==t.length)throw new Error("malformatted revision: "+e);return{height:parseInt(t[0],10),hash:t[1]}}function vG(e,t){var n=t?t._rev:null;return(n?yG(n).height:0)+1+"-"+e}var ZG="_rxdb_internal";function GG(e,t){return(mG=mG||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.findDocumentsById([n],!1);case 2:if(r=e.sent,!(a=r[n])){e.next=8;break}return e.abrupt("return",a);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BG(e,t,n){var r=t.documentData,a=t.previousDocumentData;return{eventId:t.eventId,documentId:t.documentId,collectionName:n?n.name:void 0,startTime:t.startTime,endTime:t.endTime,isLocal:e,operation:t.operation,documentData:Qy.deepFreezeWhenDevMode(r),previousDocumentData:Qy.deepFreezeWhenDevMode(a)}}function kG(e,t,n,r){if(r)throw 409===r.status?$y("CONFLICT",{collection:e.name,id:t,writeError:r,data:n}):422===r.status?$y("VD2",{collection:e.name,id:t,writeError:r,data:n}):r}function SG(e,t,n,r,a){for(var o,i=!!e.schema.attachments,g=[],s=[],c={},l=[],u=zZ(10),f={id:u,events:[],checkpoint:null,context:a},I=[],C=[],d=[],A=sG(),h="function"===typeof n.get,p=h?n.size>0:Object.keys(n).length>0,m=r.length,b=function(){var e,a=r[y],m=a.document[t],b=!1;if(p&&(b=h?n.get(m):n[m]),b){var v=b._rev;if(!a.previous||a.previous&&v!==a.previous._rev){var Z={isError:!0,status:409,documentId:m,writeRow:a,documentInDb:b};return c[m]=Z,1}var G=i?wG(a):a;i&&(a.document._deleted?a.previous&&Object.keys(a.previous._attachments).forEach((function(e){C.push({documentId:m,attachmentId:e,digest:RZ(a.previous)._attachments[e].digest})})):(Object.entries(a.document._attachments).find((function(t){var n=Ge(t,2),r=n[0],o=n[1];return(a.previous?a.previous._attachments[r]:void 0)||o.data||(e={documentId:m,documentInDb:b,isError:!0,status:510,writeRow:a,attachmentId:r}),!0})),e||Object.entries(a.document._attachments).forEach((function(e){var t=Ge(e,2),n=t[0],r=t[1],o=a.previous?a.previous._attachments[n]:void 0;if(o){var i=G.document._attachments[n].digest;r.data&&o.digest!==i&&d.push({documentId:m,attachmentId:n,attachmentData:r,digest:bG(r.data)})}else I.push({documentId:m,attachmentId:n,attachmentData:r,digest:bG(r.data)})})))),e?c[m]=e:(s.push(G),(!o||o.document._meta.lwt<G.document._meta.lwt)&&(o=G));var B=a.document,k=null,S=null,w=null;if(a.previous&&a.previous._deleted&&!B._deleted)w="INSERT",k=i?WG(B):B;else if(!a.previous||a.previous._deleted||B._deleted){if(!B._deleted)throw $y("SNH",{args:{writeRow:a}});w="DELETE",k=RZ(a.document),S=a.previous}else w="UPDATE",k=i?WG(B):B,S=a.previous;l.push(m),f.events.push({eventId:VG(u,y,m,a),documentId:m,documentData:k,previousDocumentData:S,operation:w,startTime:A,endTime:sG()})}else{var W=!!a.document._deleted;i&&Object.entries(a.document._attachments).forEach((function(t){var n=Ge(t,2),r=n[0],o=n[1];o.data?I.push({documentId:m,attachmentId:r,attachmentData:o,digest:bG(o.data)}):(e={documentId:m,isError:!0,status:510,writeRow:a,attachmentId:r},c[m]=e)})),e||(i?g.push(wG(a)):g.push(a),(!o||o.document._meta.lwt<a.document._meta.lwt)&&(o=a)),W||(l.push(m),f.events.push({eventId:VG(u,y,m,a),documentId:m,operation:"INSERT",documentData:i?WG(a.document):a.document,previousDocumentData:i&&a.previous?WG(a.previous):a.previous,startTime:A,endTime:sG()}))}},y=0;y<m;y++)b();return{bulkInsertDocs:g,bulkUpdateDocs:s,newestRow:o,errors:c,changedDocumentIds:l,eventBulk:f,attachmentsAdd:I,attachmentsRemove:C,attachmentsUpdate:d}}function wG(e){return{previous:e.previous,document:WG(e.document)}}function WG(e){var t=xy(e);return t._attachments={},Object.entries(e._attachments).forEach((function(e){var n=Ge(e,2),r=n[0],a=n[1];t._attachments[r]=function(e){var t,n=e.data;return n?{digest:bG(n),length:(t=n,atob(t).length),type:e.type}:e}(a)})),t}function RG(e){var t=xy(e);return t._meta=xy(e._meta),t}function VG(e,t,n,r){return e+"|"+t+"|"+n+"|"+r.document._rev}function XG(e,t,n){Qy.deepFreezeWhenDevMode(n);var r=nG(n.primaryKey);var a={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite:function(a,o){var i=a.map((function(t){return function(t){var a=xy(t.document);return a._meta=xy(a._meta),Qy.isDevMode()&&(a=tG(r,n,a),t.previous,t.previous&&Object.keys(t.previous._meta).forEach((function(e){if(!t.document._meta.hasOwnProperty(e))throw $y("SNH",{dataBefore:t.previous,dataAfter:t.document})}))),a._meta.lwt=sG(),a._rev=vG(e.token,t.previous),{document:a,previous:t.previous}}(t)}));return e.lockedRun((function(){return t.bulkWrite(i,o)})).then((function(n){var r=Object.values(n.error).filter((function(e){return!(409!==e.status||e.writeRow.previous||e.writeRow.document._deleted||!RZ(e.documentInDb)._deleted)}));if(r.length>0){var a={error:xy(n.error),success:xy(n.success)},i=r.map((function(t){return delete a.error[t.documentId],{previous:t.documentInDb,document:Object.assign({},t.writeRow.document,{_rev:vG(e.token,t.documentInDb)})}}));return e.lockedRun((function(){return t.bulkWrite(i,o)})).then((function(e){return a.error=Object.assign(a.error,e.error),a.success=Object.assign(a.success,e.success),a}))}return n}))},query:function(n){return e.lockedRun((function(){return t.query(n)}))},count:function(n){return e.lockedRun((function(){return t.count(n)}))},findDocumentsById:function(n,r){return e.lockedRun((function(){return t.findDocumentsById(n,r)}))},getAttachmentData:function(n,r,a){return e.lockedRun((function(){return t.getAttachmentData(n,r,a)}))},getChangedDocumentsSince:function(n,r){return e.lockedRun((function(){return t.getChangedDocumentsSince(RZ(n),r)}))},cleanup:function(n){return e.lockedRun((function(){return t.cleanup(n)}))},remove:function(){return e.storageInstances.delete(a),e.lockedRun((function(){return t.remove()}))},close:function(){return e.storageInstances.delete(a),e.lockedRun((function(){return t.close()}))},changeStream:function(){return t.changeStream()},conflictResultionTasks:function(){return t.conflictResultionTasks()},resolveConflictResultionTask:function(e){if(e.output.isEqual)return t.resolveConflictResultionTask(e);var n=xy(Object.assign({},e.output.documentData,{_meta:qZ(),_rev:"",_attachments:{}}));return delete n._meta,delete n._rev,delete n._attachments,t.resolveConflictResultionTask({id:e.id,output:{isEqual:!1,documentData:n}})}};return e.storageInstances.add(a),a}function JG(e,t){var n=e.get(t);if("undefined"===typeof n)throw new Error("missing value from map "+t);return n}function xG(e,t,n,r){var a=e.get(t);return"undefined"===typeof a?(a=n(),e.set(t,a)):r&&r(a),a}var YG=function(e){function t(e,t,n,r){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=t,this.preWrite=n,this.postWrite=r}var n=t.prototype;return n.addWrite=function(e,t){var n=this,r=e[this.primaryPath],a=xG(this.queueByDocId,r,(function(){return[]}));return new Promise((function(r,o){var i={lastKnownDocumentState:e,modifier:t,resolve:r,reject:o};RZ(a).push(i),n.triggerRun()}))},n.triggerRun=function(){return(e=e||hn(dn().mark((function e(){var t,n,r,a,o=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.isRunning&&0!==this.queueByDocId.size){e.next=2;break}return e.abrupt("return");case 2:return this.isRunning=!0,n=[],r=this.queueByDocId,this.queueByDocId=new Map,e.next=8,Promise.all(Array.from(r.entries()).map((function(e){return(t=t||hn(dn().mark((function e(t){var r,a,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Ge(t,2),r[0],a=r[1],i=HG(a.map((function(e){return e.lastKnownDocumentState}))),g=i,s=Xe(a),e.prev=4,s.s();case 6:if((c=s.n()).done){e.next=21;break}return l=c.value,e.prev=8,e.next=11,l.modifier(Ny(g));case 11:g=e.sent,e.next=19;break;case 14:e.prev=14,e.t0=e.catch(8),l.reject(e.t0),l.reject=function(){},l.resolve=function(){};case 19:e.next=6;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(4),s.e(e.t1);case 26:return e.prev=26,s.f(),e.finish(26);case 29:return e.prev=29,e.next=32,o.preWrite(g,i);case 32:e.next=38;break;case 34:return e.prev=34,e.t2=e.catch(29),a.forEach((function(t){return t.reject(e.t2)})),e.abrupt("return");case 38:n.push({previous:i,document:g});case 39:case"end":return e.stop()}}),e,null,[[4,23,26,29],[8,14],[29,34]])})))).apply(this,arguments)})));case 8:if(!(n.length>0)){e.next=14;break}return e.next=11,this.storageInstance.bulkWrite(n,"incremental-write");case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0={error:{},success:{}};case 15:return a=e.t0,e.next=18,Promise.all(Array.from(Object.entries(a.success)).map((function(e){var t=Ge(e,2),n=t[0],a=t[1];o.postWrite(a),JG(r,n).forEach((function(e){return e.resolve(a)}))})));case 18:return Array.from(Object.entries(a.error)).forEach((function(e){var t,n=Ge(e,2),a=n[0],i=n[1],g=JG(r,a),s=!(!(t=i)||409!==t.status)&&t;if(s){var c=xG(o.queueByDocId,a,(function(){return[]}));g.reverse().forEach((function(e){e.lastKnownDocumentState=RZ(s.documentInDb),RZ(c).unshift(e)}))}else{var l=nv(i);g.forEach((function(e){return e.reject(l)}))}})),this.isRunning=!1,e.abrupt("return",this.triggerRun());case 21:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},t}();function NG(e){var t;return function(n){return(t=t||hn(dn().mark((function t(n){var r,a,o;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=$Z(n))._deleted=n._deleted,t.next=4,e(r);case 4:return a=t.sent,"undefined"===typeof(o=Object.assign({},a,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:"undefined"!==typeof a._deleted?a._deleted:n._deleted}))._deleted&&(o._deleted=!1),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}function HG(e){var t=e[0],n=yG(t._rev).height;return e.forEach((function(e){var r=yG(e._rev).height;r>n&&(t=e,n=r)})),t}var FG={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe(Dv((function(e){return e._deleted})))},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest:function(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){var e=this;return this.collection.$.pipe(Lv((function(e){return!e.isLocal})),Lv((function(t){return t.documentId===e.primary})),Dv((function(e){return OZ(e)})),bZ(this.collection._docCache.getLatestDocumentData(this.primary)),yZ((function(e,t){return e._rev===t._rev})),Dv((function(t){return e.collection._docCache.getCachedRxDocument(t)})),WZ(VZ))},get$:function(e){if(Qy.isDevMode()){if(e.includes(".item."))throw $y("DOC1",{path:e});if(e===this.primaryPath)throw $y("DOC2");if(this.collection.schema.finalFields.includes(e))throw $y("DOC3",{path:e});if(!eG(this.collection.schema.jsonSchema,e))throw $y("DOC4",{path:e})}return this.$.pipe(Dv((function(t){return HZ(t,e)})),yZ())},populate:function(e){var t=eG(this.collection.schema.jsonSchema,e),n=this.get(e);if(!n)return KZ;if(!t)throw $y("DOC5",{path:e});if(!t.ref)throw $y("DOC6",{path:e,schemaObj:t});var r=this.collection.database.collections[t.ref];if(!r)throw $y("DOC7",{ref:t.ref,path:e,schemaObj:t});return"array"===t.type?r.findByIds(n).exec().then((function(e){var t=e.values();return Array.from(t)})):r.findOne(n).exec()},get:function(e){if(this._data){var t=this._propertyCache.get(e);if(t)return t;var n=HZ(this._data,e);return"object"!==typeof n||Array.isArray(n)?Qy.deepFreezeWhenDevMode(n):(n=Ny(n),EG(this.collection.schema,n,e,this),this._propertyCache.set(e,n),n)}},toJSON:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return Qy.deepFreezeWhenDevMode(this._data);var e=xy(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,Qy.deepFreezeWhenDevMode(e)},toMutableJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ny(this.toJSON(e))},update:function(e){throw jZ("update")},incrementalUpdate:function(e){throw jZ("update")},updateCRDT:function(e){throw jZ("crdt")},putAttachment:function(){throw jZ("attachments")},getAttachment:function(){throw jZ("attachments")},allAttachments:function(){throw jZ("attachments")},get allAttachments$(){throw jZ("attachments")},modify:function(e,t){var n=this;return hn(dn().mark((function t(){var r,a;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n._data,t.next=3,NG(e)(r);case 3:return a=t.sent,t.abrupt("return",n._saveData(a,r));case 5:case"end":return t.stop()}}),t)})))()},incrementalModify:function(e,t){var n=this;return this.collection.incrementalWriteQueue.addWrite(this._data,NG(e)).then((function(e){return n.collection._docCache.getCachedRxDocument(e)}))},patch:function(e){var t=this._data,n=Ny(t);return Object.entries(e).forEach((function(e){var t=Ge(e,2),r=t[0],a=t[1];n[r]=a})),this._saveData(n,t)},incrementalPatch:function(e){return this.incrementalModify((function(t){return Object.entries(e).forEach((function(e){var n=Ge(e,2),r=n[0],a=n[1];t[r]=a})),t}))},_saveData:function(e,t){var n=this;return hn(dn().mark((function r(){var a,o;return dn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=xy(e),!n._data._deleted){r.next=3;break}throw $y("DOC11",{id:n.primary,document:n});case 3:return r.next=5,TG(n.collection,e,t);case 5:return r.next=7,n.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data");case 7:return a=r.sent,o=a.error[n.primary],kG(n.collection,n.primary,e,o),r.next=12,n.collection._runHooks("post","save",e,n);case 12:return r.abrupt("return",n.collection._docCache.getCachedRxDocument(Xy(a.success,n.primary)));case 13:case"end":return r.stop()}}),r)})))()},remove:function(){var e=this,t=this.collection;if(this.deleted)return Promise.reject($y("DOC13",{document:this,id:this.primary}));var n,r=xy(this._data);return t._runHooks("pre","remove",r,this).then(hn(dn().mark((function n(){var a,o;return dn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r._deleted=!0,n.next=3,t.storageInstance.bulkWrite([{previous:e._data,document:r}],"rx-document-remove");case 3:return a=n.sent,o=a.error[e.primary],kG(t,e.primary,r,o),n.abrupt("return",Xy(a.success,e.primary));case 7:case"end":return n.stop()}}),n)})))).then((function(t){return n=t,e.collection._runHooks("post","remove",r,e)})).then((function(){return e.collection._docCache.getCachedRxDocument(n)}))},incrementalRemove:function(){var e,t,n=this;return this.incrementalModify((function(t){return(e=e||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.collection._runHooks("pre","remove",t,n);case 2:return t._deleted=!0,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)})).then((function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.collection._runHooks("post","remove",t._data,t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}))},destroy:function(){throw $y("DOC14")}};function KG(){var e=function(e,t){this.collection=e,this._data=t,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FG,e}function EG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!==t){var a=eG(e.jsonSchema,n);"undefined"!==typeof a&&(a.properties&&(a=a.properties),Object.keys(a).forEach((function(e){var a=LZ(n+"."+e);t.__defineGetter__(e,(function(){var e=r||this;if(e.get&&"function"===typeof e.get)return e.get(a)})),Object.defineProperty(t,e+"$",{get:function(){return(r||this).get$(a)},enumerable:!1,configurable:!1}),Object.defineProperty(t,e+"_",{get:function(){return(r||this).populate(a)},enumerable:!1,configurable:!1}),t.__defineSetter__(e,(function(e){return(r||this).set(a,e)}))})))}}function TG(e,t,n){return t._meta=Object.assign({},n._meta,t._meta),Qy.isDevMode()&&e.schema.validateChange(n,t),e._runHooks("pre","save",t,n)}var MG=function(){function e(e,t){this.jsonSchema=e,this.hashFunction=t,this.indexes=function(e){return(e.indexes||[]).map((function(e){return Ey(e)?e:[e]}))}(this.jsonSchema),this.primaryPath=nG(this.jsonSchema.primaryKey),this.finalFields=iG(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(e,t){var n=this;this.finalFields.forEach((function(r){if(!Wy(e[r],t[r]))throw $y("DOC9",{dataBefore:e,dataAfter:t,fieldName:r,schema:n.jsonSchema})}))},t.getDocumentPrototype=function(){var e={};return EG(this,e,""),Hy(this,"getDocumentPrototype",(function(){return e})),e},t.getPrimaryOfDocumentData=function(e){return rG(this.jsonSchema,e)},wy(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter((function(e){return Ge(e,2)[1].hasOwnProperty("default")})).forEach((function(t){var n=Ge(t,2),r=n[0],a=n[1];return e[r]=a.default})),Hy(this,"defaultValues",e)}},{key:"hash",get:function(){return Hy(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),e}();function zG(e,t){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&av("preCreateRxSchema",e);var n=aG(e);n=function(e){return Yy(e,!0)}(n),Qy.deepFreezeWhenDevMode(n);var r=new MG(n,t);return av("createRxSchema",r),r}var DG=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return cv(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(GZ),LG=mv((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));var UG=new _v((function(e){return e.complete()}));var jG=function(e){e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},OG=function(e){e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},QG=function(e){var t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},PG=function(e){var t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},_G=function(e){e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);for(var t=e.queryParams.primaryKey,n=e.previousResults,r=0;r<n.length;r++){if(n[r][t]===e.changeEvent.id){n.splice(r,1);break}}},qG=function(e){var t=e.changeEvent.id,n=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,n)}else{var r=e.previousResults.find((function(n){return n[e.queryParams.primaryKey]===t}));if(r)return}!function(e,t,n,r){var a,o=r?e:e.slice(0),i=o.length-1,g=0,s=0;if(0===o.length)return o.push(t),[o,0];for(;g<=i;)n(a=o[s=g+(i-g>>1)],t)<=0?g=s+1:i=s-1;n(a,t)<=0&&s++,o.splice(s,0,t)}(e.previousResults,n,e.queryParams.sortComparator,!0)},$G=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],eB={doNothing:function(e){},insertFirst:jG,insertLast:OG,removeFirstItem:QG,removeLastItem:PG,removeFirstInsertLast:function(e){QG(e),OG(e)},removeLastInsertFirst:function(e){PG(e),jG(e)},removeFirstInsertFirst:function(e){QG(e),jG(e)},removeLastInsertLast:function(e){PG(e),OG(e)},removeExisting:_G,replaceExisting:function(e){for(var t=e.changeEvent.doc,n=e.queryParams.primaryKey,r=e.previousResults,a=0;a<r.length;a++){if(r[a][n]===e.changeEvent.id){r[a]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}}},alwaysWrong:function(e){var t={_id:"wrongHuman"+(new Date).getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},insertAtSortPosition:qG,removeExistingAndInsertAtSortPosition:function(e){_G(e),qG(e)},runFullQueryAgain:function(e){throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:function(e){throw new Error("Action unknownAction should never be called")}};function tB(e){return e?"1":"0"}!function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(62*Math.random()))}(4);function nB(e,t){for(var n=[],r=0,a=e.length;r<a;r+=t)n.push(e.substring(r,r+t));return n}var rB=40;function aB(e){return e.charCodeAt(0)-rB}var oB="UNKNOWN";function iB(e){return e[e.length-1]}function gB(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(e)||"string"!==typeof t)return void 0===n?e:n;var r=t.split(".");if(0===r.length)return n;for(var a=0;a<r.length;a++){var o=r[a];if(void 0===(e=sB(e,o)?a===r.length-1?void 0:null:e[o])||null===e){if(a!==r.length-1)return n;break}}return void 0===e?n:e}function sB(e,t){if("number"!==typeof t&&Array.isArray(e)){var n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}var cB=function(e){return!!e.queryParams.limit},lB=function(e){return 1===e.queryParams.limit},uB=function(e){return!!(e.queryParams.skip&&e.queryParams.skip>0)},fB=function(e){return"DELETE"===e.changeEvent.operation},IB=function(e){return"INSERT"===e.changeEvent.operation},CB=function(e){return"UPDATE"===e.changeEvent.operation},dB=function(e){return e.changeEvent.previous===oB},AB=function(e){return cB(e)&&e.previousResults.length>=e.queryParams.limit},hB=function(e){var t=e.queryParams.sortFields,n=e.changeEvent.previous,r=e.changeEvent.doc;if(!r)return!1;if(!n||n===oB)return!0;for(var a=0;a<t.length;a++){var o=t[a];if(gB(n,o)!==gB(r,o))return!0}return!1},pB=function(e){var t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);for(var n=e.queryParams.primaryKey,r=e.previousResults,a=0;a<r.length;a++){if(r[a][n]===t)return!0}return!1},mB=function(e){var t=e.previousResults[0];return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},bB=function(e){var t=iB(e.previousResults);return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},yB=function(e){var t=e.changeEvent.previous;if(!t||t===oB)return!1;var n=e.previousResults[0];return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)<0)},vB=function(e){var t=e.changeEvent.previous;if(!t||t===oB)return!1;var n=iB(e.previousResults);return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)>0)},ZB=function(e){var t=e.changeEvent.doc;if(!t)return!1;var n=e.previousResults[0];return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)<0)},GB=function(e){var t=e.changeEvent.doc;if(!t)return!1;var n=iB(e.previousResults);return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)>0)},BB=function(e){var t=e.changeEvent.previous;return!(!t||t===oB)&&e.queryParams.queryMatcher(t)},kB=function(e){var t=e.changeEvent.doc;return!!t&&e.queryParams.queryMatcher(t)},SB=function(e){return 0===e.previousResults.length},wB={0:IB,1:CB,2:fB,3:cB,4:lB,5:uB,6:SB,7:dB,8:AB,9:mB,10:bB,11:hB,12:pB,13:yB,14:vB,15:ZB,16:GB,17:BB,18:kB};var WB;function RB(){return WB||(WB=function(e){for(var t=new Map,n=2+2*parseInt(e.charAt(0)+e.charAt(1),10),r=nB(e.substring(2,n),2),a=0;a<r.length;a++){var o=r[a],i=o.charAt(0),g=aB(o.charAt(1));t.set(i,g)}for(var s=nB(e.substring(n,e.length-3),4),c=0;c<s.length;c++){var l=s[c],u=l.charAt(0),f=l.charAt(1),I=l.charAt(2),C=aB(l.charAt(3));if(!t.has(f))throw new Error("missing node with id "+f);if(!t.has(I))throw new Error("missing node with id "+I);var d={l:C,0:t.get(f),1:t.get(I)};t.set(u,d)}var A=e.slice(-3),h=A.charAt(0),p=A.charAt(1);return{l:aB(A.charAt(2)),0:t.get(h),1:t.get(p)}}("14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7\x7fef7\xa1bk7\xa2e{7\xa3g|7\xa4ry7\xa5dp7\xa6gk7\xa7eq7\xa8gt7\xa9ac7\xaamv7\xabgu7\xacnm7\xadiy7\xaenw7\xaf\xa4s8\xb0\xab\xa68\xb1\xack8\xb2\xaam8\xb3\xaev8\xb4\xabn8\xb5\xacn8\xb6vm8\xb7xv8\xb8mn8\xb9\xadj8\xba\xaem8\xbbxm8\xbc\xad\xb93\xbd}~3\xbe\xa9\xb03\xbf\x7f\xa23\xc0\xa1\xa33\xc1m\xb13\xc2\xae\xba3\xc3m\xba3\xc4\xa9\xb43\xc5b\xae3\xc6m\xb53\xc7m\xbb3\xc8x\xbb3\xc9kn3\xcam\xb83\xcb\xbcj6\xcc\xc2m6\xcd\xc6\xc36\xce\xc8m6\xcfnm6\xd0\xca\xc76\xd1\xcc\xce,\xd2\xcd\xd0,\xd3\xc5\xc9,\xd4\xb2\xb6,\xd5\xb3\xb7,\xd6\xaen,\xd7\xba\xbb,\xd8mf9\xd9\xcb\xc19\xdaym9\xdbm\xcf9\xdc\xd1\xd29\xddz{2\xdepq2\xdf\xbd\xbf2\xe0\xbe\xc02\xe1\xa5\xa72\xe2\xb0\xa82\xe3\xc4\xd32\xe4\xb4\xd62\xe5\xddn0\xe6\xden0\xe7\xd8\xdb0\xe8\xd9\xdc0\xe9\xdfn0\xea\xe0\xe30\xeb\xb2\xd40\xec\xaf\xd50\xed\xe1n0\xee\xe2\xe40\xef\xb9\xd70\xf0\xe7v/\xf1\xe5\xe6/\xf2\xe7\xeb/\xf3\xe8\xec/\xf4\xe9\xed/\xf5\xea\xee/\xf6\xday/\xf7\xf2m(\xf8\xf3\xef(\xf9\xf6y(\xfa\xf7\xf8:\xfb\xf4\xf5:\xfcm\xf9:\xfd\xf0\xf14\xfe\xfa\xfb4\xff\xfe\xfd*\u0100\xfcm*\xff\u0100.")),WB}var VB=function(e){return function(e,t,n){for(var r=e,a=e.l;;){if("number"===typeof(r=r[tB(t[a](n))])||"string"===typeof r)return r;a=r.l}}(RB(),wB,e)};function XB(e){var t=VB(e);return $G[t]}var JB=String.fromCharCode(65535),xB=Number.MIN_VALUE;function YB(e,t){var n=nG(e.primaryKey),r=t.selector,a=e.indexes?e.indexes.slice(0):[];t.index?a=[t.index]:a.push([n]);var o,i=t.sort.map((function(e){return Object.keys(e)[0]})).join(","),g=!!t.sort.find((function(e){return"desc"===Object.values(e)[0]})),s=-1;return a.forEach((function(e){var n=!0,a=!0,c=e.map((function(e){var t=r[e],o=t?Object.keys(t):[],i={};t&&o.length?o.forEach((function(e){if(NB.has(e)){var n=function(e,t){switch(e){case"$eq":return{startKey:t,endKey:t};case"$lte":return{endKey:t};case"$gte":return{startKey:t};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}(e,t[e]);i=Object.assign(i,n)}})):i={startKey:a?xB:JB,endKey:n?JB:xB,inclusiveStart:!0,inclusiveEnd:!0};return"undefined"===typeof i.startKey&&(i.startKey=xB),"undefined"===typeof i.endKey&&(i.endKey=JB),"undefined"===typeof i.inclusiveStart&&(i.inclusiveStart=!0),"undefined"===typeof i.inclusiveEnd&&(i.inclusiveEnd=!0),a&&!i.inclusiveStart&&(a=!1),n&&!i.inclusiveEnd&&(n=!1),i})),l={index:e,startKeys:c.map((function(e){return e.startKey})),endKeys:c.map((function(e){return e.endKey})),inclusiveEnd:n,inclusiveStart:a,sortFieldsSameAsIndexFields:!g&&i===e.join(","),selectorSatisfiedByIndex:KB(e,t.selector)},u=function(e,t,n){var r=0,a=function(e){e>0&&(r+=e)},o=10,i=My(n.startKeys,(function(e){return e!==xB&&e!==JB}));a(i*o);var g=My(n.startKeys,(function(e){return e!==JB&&e!==xB}));a(g*o);var s=My(n.startKeys,(function(e,t){return e===n.endKeys[t]}));a(s*o*1.5);var c=n.sortFieldsSameAsIndexFields?5:0;return a(c),r}(0,0,l);(u>0&&u>s||t.index)&&(s=u,o=l)})),o||(o={index:[n],startKeys:[xB],endKeys:[JB],inclusiveEnd:!0,inclusiveStart:!0,sortFieldsSameAsIndexFields:!g&&i===n,selectorSatisfiedByIndex:KB([n],t.selector)}),o}var NB=new Set(["$eq","$gt","$gte","$lt","$lte"]),HB=new Set(["$eq","$gt","$gte"]),FB=new Set(["$eq","$lt","$lte"]);function KB(e,t){var n,r,a=Object.entries(t).find((function(t){var n=Ge(t,2),r=n[0],a=n[1];if(!e.includes(r))return!0;var o=Object.entries(a).find((function(e){var t=Ge(e,2),n=t[0];t[1];return!NB.has(n)}));return o}));return!a&&(!e.find((function(e){var r=t[e];if(!r)return!1;var a=Object.keys(r).find((function(e){return HB.has(e)}));return!(!n||!a)||("$eq"!==a&&(n=a),!1)}))&&!e.find((function(e){var n=t[e];if(!n)return!1;var a=Object.keys(n).find((function(e){return FB.has(e)}));return!(!r||!a)||("$eq"!==a&&(r=a),!1)})))}var EB=Number.MAX_SAFE_INTEGER,TB=Number.MIN_SAFE_INTEGER,MB=Symbol("missing"),zB=Object.getPrototypeOf({}),DB=/^\[object ([a-zA-Z0-9]+)\]$/,LB=function(e){for(var t=bk(e),n=0,r=t.length;r;)n=(n<<5)-n^t.charCodeAt(--r);return n>>>0},UB=new Set(["null","undefined","boolean","number","string","date","regexp"]),jB={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},OB=function(e,t){e===MB&&(e=void 0),t===MB&&(t=void 0);var n=[e,t].map((function(e){return jB[_B(e).toLowerCase()]})),r=Ge(n,2),a=r[0],o=r[1];return a!==o?a-o:1===a||2===a||6===a?e<t?-1:e>t?1:0:mk(e,t)?0:e<t?-1:e>t?1:0};function QB(e,t){if(!e)throw new Error(t)}var PB=function(e){var t=new Map,n=function(e){if(t.has(e))throw new Error("cycle detected during clone operation.");t.set(e,!0)};return function e(t){if(t instanceof Date)return new Date(t);if(tk(t)){n(t);for(var r=new Array(t.length),a=t.length,o=0;o<a;o++)r[o]=e(t[o]);return r}if(nk(t)){n(t);var i={};for(var g in t)i[g]=e(t[g]);return i}return t}(e)},_B=function(e){return DB.exec(Object.prototype.toString.call(e))[1]},qB=function(e){return"boolean"===typeof e},$B=function(e){return"string"===typeof e},ek=function(e){return!isNaN(e)&&"number"===typeof e},tk=Array.isArray,nk=function(e){if(!e)return!1;var t=Object.getPrototypeOf(e);return(t===zB||null===t)&&"[object Object]"===Object.prototype.toString.call(e)},rk=function(e){return e===Object(e)},ak=function(e){return e instanceof Date},ok=function(e){return e instanceof RegExp},ik=function(e){return"function"===typeof e},gk=function(e){return null===e||void 0===e},sk=function(e,t){return e.includes(t)},ck=function(e,t){return!sk(e,t)},lk=function(e){return gk(e)||$B(e)&&!e||e instanceof Array&&0===e.length||nk(e)&&0===Object.keys(e).length},uk=function(e){return e===MB},fk=function(e){return e instanceof Array?e:[e]},Ik=function(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)},Ck=function(e,t){return nk(e)&&nk(t)||tk(e)&&tk(t)};function dk(e,t,n){if(n=n||{flatten:!1},uk(e)||gk(e))return t;if(uk(t)||gk(t))return e;if(!Ck(e,t)){if(n.skipValidation)return t||e;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,tk(e)){var r=e,a=t;if(n.flatten){for(var o=0,i=0;o<r.length&&i<a.length;)r[o]=dk(r[o++],a[i++],n);for(;i<a.length;)r.push(t[i++])}else Zk(r,a)}else for(var g in t)e[g]=dk(e[g],t[g],n);return e}function Ak(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LB,n=new Map;return e.forEach((function(r,a){var o=yk(r,t);n.has(o)?n.get(o).some((function(t){return mk(e[t],r)}))||n.get(o).push(a):n.set(o,[a])})),n}function hk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LB;if(e.some((function(e){return 0==e.length})))return[];if(1===e.length)return Array.from(e);var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:OB;if(lk(e))return e;for(var r=new Array,a=new Array,o=0;o<e.length;o++){var i=e[o],g=t(i,o);gk(g)?a.push(i):r.push([g,i])}return r.sort((function(e,t){return n(e[0],t[0])})),Zk(a,r.map((function(e){return e[1]})))}(e.map((function(e,t){return[t,e.length]})),(function(e){return e[1]})),r=e[n[0][0]],a=Ak(r,t),o=new Map,i=new Array;return a.forEach((function(t,a){for(var g,s=t.map((function(e){return r[e]})),c=s.map((function(e){return 0})),l=s.map((function(e){return[n[0][0],0]})),u=!1,f=function(t){var r=Ge(n[t],2),i=r[0],g=(r[1],e[i]);if(o.has(t)||o.set(t,Ak(g)),o.get(t).has(a)){var f=o.get(t).get(a).map((function(e){return g[e]}));u=s.map((function(e,n){return f.some((function(r,g){var s=c[n];return mk(e,r)&&(c[n]++,i<l[n][0]&&(l[n]=[i,o.get(t).get(a)[g]])),s<c[n]}))})).some(Boolean)}if(!u)return{v:void 0}},I=1;I<e.length;I++)if(g=f(I))return g.v;u&&Zk(i,c.map((function(t,n){return t===e.length-1?[s[n],l[n]]:MB})).filter((function(e){return e!==MB})))})),i.sort((function(e,t){var n=Ge(e,2),r=(n[0],Ge(n[1],2)),a=r[0],o=r[1],i=Ge(t,2),g=(i[0],Ge(i[1],2)),s=g[0],c=g[1],l=OB(a,s);return 0!==l?l:OB(o,c)})).map((function(e){return e[0]}))}function pk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Array;return function e(t,r){for(var a=0,o=t.length;a<o;a++)tk(t[a])&&(r>0||r<0)?e(t[a],Math.max(-1,r-1)):n.push(t[a])}(e,t),n}function mk(e,t){for(var n=[e],r=[t];n.length>0;)if((e=n.pop())!==(t=r.pop())){var a=_B(e).toLowerCase();if(a!==_B(t).toLowerCase()||"function"===a)return!1;if("array"===a){var o=e,i=t;if(o.length!==i.length)return!1;if(o.length===i.length&&0===o.length)continue;Zk(n,o),Zk(r,i)}else if("object"===a){var g=Object.keys(e),s=Object.keys(t);if(g.length!==s.length)return!1;for(var c=0,l=g.length;c<l;c++){var u=g[c];if(!Ik(t,u))return!1;n.push(e[u]),r.push(t[u])}}else if(bk(e)!==bk(t))return!1}return 0===n.length}function bk(e){var t=_B(e).toLowerCase();switch(t){case"boolean":case"number":case"regexp":return e.toString();case"string":return JSON.stringify(e);case"date":return e.toISOString();case"null":case"undefined":return t;case"array":return"["+e.map(bk).join(",")+"]"}var n="object"===t?"":"".concat(_B(e)),r=Object.keys(e);return r.sort(),"".concat(n,"{")+r.map((function(t){return"".concat(bk(t),":").concat(bk(e[t]))})).join(",")+"}"}function yk(e,t){return t=t||LB,gk(e)?null:t(e).toString()}var vk=5e4;function Zk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e instanceof Array?n.reduce((function(e,t){for(var n=Math.ceil(t.length/vk),r=0;n-- >0;)Array.prototype.push.apply(e,t.slice(r,r+vk)),r+=vk;return e}),e):n.filter(rk).reduce((function(e,t){return Object.assign(e,t),e}),e)}function Gk(e,t){return rk(e)?e[t]:void 0}function Bk(e,t,n){var r=0;var a=UB.has(_B(e).toLowerCase())?e:function e(t,n){for(var a=t,o=function(){var t=n[i];if(null===/^\d+$/.exec(t)&&a instanceof Array){if(0===i&&r>0)return 0;r+=1;var o=n.slice(i);return a=a.reduce((function(t,n){var r=e(n,o);return void 0!==r&&t.push(r),t}),[]),0}if(void 0===(a=Gk(a,t)))return 0},i=0;i<n.length&&0!==o();i++);return a}(e,t.split("."));return a instanceof Array&&(null===n||void 0===n?void 0:n.unwrapArray)?function(e,t){if(t<1)return e;for(;t--&&1===e.length;)e=e[0];return e}(a,r):a}function kk(e,t,n){var r,a,o=t.split("."),i=o[0],g=o.slice(1).join("."),s=null!==/^\d+$/.exec(i),c=o.length>1;if(e instanceof Array)if(s)r=Gk(e,Number(i)),c&&(r=kk(r,g,n)),r=[r];else{r=[];var l,u=Xe(e);try{for(u.s();!(l=u.n()).done;){a=kk(l.value,t,n),(null===n||void 0===n?void 0:n.preserveMissing)?(void 0===a&&(a=MB),r.push(a)):void 0!==a&&r.push(a)}}catch(xQ){u.e(xQ)}finally{u.f()}}else{if(a=Gk(e,i),c&&(a=kk(a,g,n)),void 0===a)return;(r=(null===n||void 0===n?void 0:n.preserveKeys)?Object.assign({},e):{})[i]=a}return r}function Sk(e){if(e instanceof Array)for(var t=e.length-1;t>=0;t--)e[t]===MB?e.splice(t,1):Sk(e[t]);else if(nk(e))for(var n in e)Ik(e,n)&&Sk(e[n])}var wk=/^\d+$/;function Wk(e,t,n,r){var a=t.split("."),o=a[0],i=a.slice(1).join(".");if(1===a.length)(nk(e)||tk(e)&&wk.test(o))&&n(e,o);else{(null===r||void 0===r?void 0:r.buildGraph)&&gk(e[o])&&(e[o]={});var g=e[o];if(!g)return;var s=!!(a.length>1&&wk.test(a[1]));g instanceof Array&&(null===r||void 0===r?void 0:r.descendArray)&&!s?g.forEach((function(e){return Wk(e,i,n,r)})):Wk(g,i,n,r)}}function Rk(e,t,n){Wk(e,t,(function(e,t){if(e instanceof Array){if(/^\d+$/.test(t))e.splice(parseInt(t),1);else if(n&&n.descendArray){var r,a=Xe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;nk(o)&&delete o[t]}}catch(xQ){a.e(xQ)}finally{a.f()}}}else nk(e)&&delete e[t]}),n)}var Vk,Xk=/^\$[a-zA-Z0-9_]+$/;function Jk(e){return Xk.test(e)}function xk(e){if(UB.has(_B(e).toLowerCase()))return ok(e)?{$regex:e}:{$eq:e};if(rk(e)){var t=e;if(!Object.keys(t).some(Jk))return{$eq:e};if(Ik(e,"$regex")){var n=Object.assign({},e);return n.$regex=new RegExp(e.$regex,e.$options),delete n.$options,n}}return e}!function(e){e.CLONE_ALL="CLONE_ALL",e.CLONE_INPUT="CLONE_INPUT",e.CLONE_OUTPUT="CLONE_OUTPUT",e.CLONE_OFF="CLONE_OFF"}(Vk||(Vk={}));var Yk,Nk=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Z(this,e),this._opts=t,this._root=n,this._local=r,this.timestamp=a,this.update(n,r)}return B(e,[{key:"update",value:function(e,t){var n;return this._root=e,this._local=t?Object.assign({},t,{variables:Object.assign({},null===(n=this._local)||void 0===n?void 0:n.variables,null===t||void 0===t?void 0:t.variables)}):t,this}},{key:"getOptions",value:function(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:Fk.from(this._opts.context)}))}},{key:"root",get:function(){return this._root}},{key:"local",get:function(){return this._local}},{key:"idKey",get:function(){return this._opts.idKey}},{key:"collation",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.collation}},{key:"processingMode",get:function(){var e;return(null===(e=this._opts)||void 0===e?void 0:e.processingMode)||Vk.CLONE_OFF}},{key:"useStrictMode",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.useStrictMode}},{key:"scriptEnabled",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.scriptEnabled}},{key:"useGlobalContext",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.useGlobalContext}},{key:"hashFunction",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.hashFunction}},{key:"collectionResolver",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.collectionResolver}},{key:"jsonSchemaValidator",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.jsonSchemaValidator}},{key:"variables",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.variables}},{key:"context",get:function(){var e;return null===(e=this._opts)||void 0===e?void 0:e.context}}],[{key:"init",value:function(t,n,r){return t instanceof e?new e(t._opts,gk(t.root)?n:t.root,Object.assign({},t.local,r)):new e(t,n,r)}}]),e}();function Hk(e){return e instanceof Nk?e.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:Vk.CLONE_OFF},e),{context:(null===e||void 0===e?void 0:e.context)?Fk.from(null===e||void 0===e?void 0:e.context):Fk.init({})}))}!function(e){e.ACCUMULATOR="accumulator",e.EXPRESSION="expression",e.PIPELINE="pipeline",e.PROJECTION="projection",e.QUERY="query",e.WINDOW="window"}(Yk||(Yk={}));var Fk=function(){function e(t){Z(this,e),this.operators=PB(t)}return B(e,[{key:"addOperators",value:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Ge(r[n],2),o=a[0],i=a[1];this.getOperator(e,o)||(this.operators[e][o]=i)}return this}},{key:"addAccumulatorOps",value:function(e){return this.addOperators(Yk.ACCUMULATOR,e)}},{key:"addExpressionOps",value:function(e){return this.addOperators(Yk.EXPRESSION,e)}},{key:"addQueryOps",value:function(e){return this.addOperators(Yk.QUERY,e)}},{key:"addPipelineOps",value:function(e){return this.addOperators(Yk.PIPELINE,e)}},{key:"addProjectionOps",value:function(e){return this.addOperators(Yk.PROJECTION,e)}},{key:"addWindowOps",value:function(e){return this.addOperators(Yk.WINDOW,e)}},{key:"getOperator",value:function(e,t){return e in this.operators&&this.operators[e][t]||null}}],[{key:"init",value:function(t){var n;return new e(dk((b(n={},Yk.ACCUMULATOR,{}),b(n,Yk.EXPRESSION,{}),b(n,Yk.PIPELINE,{}),b(n,Yk.PROJECTION,{}),b(n,Yk.QUERY,{}),b(n,Yk.WINDOW,{}),n),t,{skipValidation:!0}))}},{key:"from",value:function(t){return new e(t.operators)}}]),e}(),Kk=Fk.init({});function Ek(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Ge(r[n],2),o=a[0],i=a[1];QB(ik(i)&&Jk(o),"'".concat(o,"' is not a valid operator"));var g=Tk(e,o,null);QB(!g||i===g,"".concat(o," already exists for '").concat(e,"' operators. Cannot change operator function once registered."))}Kk.addOperators(e,t)}function Tk(e,t,n){var r=n||{},a=r.context,o=r.useGlobalContext,i=a?a.getOperator(e,t):null;return!i&&o?Kk.getOperator(e,t):i}var Mk={$$ROOT:function(e,t,n){return n.root},$$CURRENT:function(e,t,n){return e},$$REMOVE:function(e,t,n){},$$NOW:function(e,t,n){return new Date(n.timestamp)}},zk={$$KEEP:function(e,t,n){return e},$$PRUNE:function(e,t,n){},$$DESCEND:function(e,t,n){if(!Ik(t,"$cond"))return e;for(var r,a=0,o=Object.entries(e);a<o.length;a++){var i=Ge(o[a],2),g=i[0],s=i[1];if(rk(s)){if(s instanceof Array){var c,l=[],u=Xe(s);try{for(u.s();!(c=u.n()).done;){var f=c.value;nk(f)&&(f=Lk(f,t,n.update(f))),gk(f)||l.push(f)}}catch(xQ){u.e(xQ)}finally{u.f()}r=l}else r=Lk(s,t,n.update(s));gk(r)?delete e[g]:e[g]=r}}return e}};function Dk(e,t,n,r){var a,o=Nk.init(r,e);if(Jk(n=n||"")){var i=Tk(Yk.EXPRESSION,n,r);if(i)return i(e,t,o);var g=Tk(Yk.ACCUMULATOR,n,r);if(g)return e instanceof Array||(e=Dk(e,t,null,o),t=null),QB(e instanceof Array,"'".concat(n,"' target must be an array.")),g(e,t,o.update(null,o.local));throw new Error("operator '".concat(n,"' is not registered"))}if($B(t)&&t.length>0&&"$"===t[0]){if(Ik(zk,t))return t;var s=o.root,c=t.split(".");if(Ik(Mk,c[0]))s=Mk[c[0]](e,null,o),t=t.slice(c[0].length+1);else if("$$"===c[0].slice(0,2)){s=Object.assign({},o.variables,{this:e},null===(a=o.local)||void 0===a?void 0:a.variables);var l=c[0].slice(2);QB(Ik(s,l),"Use of undefined variable: ".concat(l)),t=t.slice(2)}else t=t.slice(1);return""===t?s:Bk(s,t)}if(tk(t))return t.map((function(t){return Dk(e,t,null,o)}));if(nk(t)){for(var u,f={},I=function(){var n=Ge(d[C],2),a=n[0],i=n[1];if(f[a]=Dk(e,i,a,o),[Yk.EXPRESSION,Yk.ACCUMULATOR].some((function(e){return!!Tk(e,a,r)})))return QB(1===Object.keys(t).length,"Invalid aggregation expression '"+JSON.stringify(t)+"'"),{v:f[a]}},C=0,d=Object.entries(t);C<d.length;C++)if(u=I())return u.v;return f}return t}function Lk(e,t,n){var r=Dk(e,t,null,n);return Ik(zk,r)?zk[r](e,t,n):r}function Uk(e){return e instanceof Pk?e:new Pk(e)}function jk(e,t){var n=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,n)}var Ok,Qk=new Error;!function(e){e[e.MAP=0]="MAP",e[e.FILTER=1]="FILTER",e[e.TAKE=2]="TAKE",e[e.DROP=3]="DROP"}(Ok||(Ok={}));var Pk=function(e){function t(e){var n;if(Z(this,t),this.iteratees=[],this.yieldedValues=[],this.isDone=!1,e instanceof Function&&(e={next:e}),function(e){return!!e&&"object"===typeof e&&(null===e||void 0===e?void 0:e.next)instanceof Function}(e)){var r=e;n=function(){var e=r.next();if(e.done)throw Qk;return e.value}}else if(e instanceof Array){var a=e,o=a.length,i=0;n=function(){if(i<o)return a[i++];throw Qk}}else if(!(e instanceof Function))throw new Error("Source is of type '".concat(typeof e,"'. Must be Array, Function, or Generator"));this.getNext=function(e,t,n){var r=!1,a=-1,o=0;return function(i){try{e:for(;!r;){var g=e();a++;for(var s=-1,c=t.length,l=!1;++s<c;){var u=t[s];switch(u.action){case Ok.MAP:g=u.func(g,a);break;case Ok.FILTER:if(!u.func(g,a))continue e;break;case Ok.TAKE:--u.count,u.count||(l=!0);break;case Ok.DROP:--u.count,u.count||jk(t,s);continue e;default:break e}}if(r=l,!i)return{value:g,done:!1};n[o++]=g}}catch(f){if(f!==Qk)throw f}return{done:r=!0}}}(n,this.iteratees,this.yieldedValues)}return B(t,[{key:"push",value:function(e,t){return"function"===typeof t?this.iteratees.push({action:e,func:t}):"number"===typeof t&&this.iteratees.push({action:e,count:t}),this}},{key:"next",value:function(){return this.getNext()}},{key:"map",value:function(e){return this.push(Ok.MAP,e)}},{key:"filter",value:function(e){return this.push(Ok.FILTER,e)}},{key:"take",value:function(e){return e>0?this.push(Ok.TAKE,e):this}},{key:"drop",value:function(e){return e>0?this.push(Ok.DROP,e):this}},{key:"transform",value:function(e){var t,n=this;return Uk((function(){return t||(t=Uk(e(n.value()))),t.next()}))}},{key:"value",value:function(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}},{key:"each",value:function(e){for(;;){var t=this.next();if(t.done)break;if(!1===e(t.value))return!1}return!0}},{key:"reduce",value:function(e,t){var n=this.next();for(void 0!==t||n.done||(t=n.value,n=this.next());!n.done;)t=e(t,n.value),n=this.next();return t}},{key:"size",value:function(){return this.reduce((function(e,t){return++e}),0)}},{key:Symbol.iterator,value:function(){return this}}]),t}(),_k=function(){function e(t,n){Z(this,e),this.pipeline=t,this.options=Hk(n)}return B(e,[{key:"stream",value:function(e){var t=Uk(e),n=this.options.processingMode;n!=Vk.CLONE_ALL&&n!=Vk.CLONE_INPUT||t.map(PB);var r=new Array;if(!lk(this.pipeline)){var a,o=Xe(this.pipeline);try{for(o.s();!(a=o.n()).done;){var i=a.value,g=Object.keys(i),s=g[0],c=Tk(Yk.PIPELINE,s,this.options);QB(1===g.length&&!!c,"invalid pipeline operator ".concat(s)),r.push(s),t=c(t,i[s],this.options)}}catch(xQ){o.e(xQ)}finally{o.f()}}return(n==Vk.CLONE_OUTPUT||n==Vk.CLONE_ALL&&hk([["$group","$unwind"],r]).length)&&t.map(PB),t}},{key:"run",value:function(e){return this.stream(e).value()}}]),e}(),qk=function(e){function t(e,n,r,a){Z(this,t),this.source=e,this.predicate=n,this.projection=r,this.options=a,this.operators=[],this.result=null,this.buffer=[]}return B(t,[{key:"fetch",value:function(){return this.result||(nk(this.projection)&&this.operators.push({$project:this.projection}),this.result=Uk(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new _k(this.operators,this.options).stream(this.result))),this.result}},{key:"fetchAll",value:function(){var e=Uk(We(this.buffer));return this.buffer=[],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=0;return Uk((function(){for(;r<t.length;){var e=t[r].next();if(!e.done)return e;r++}return{done:!0}}))}(e,this.fetch())}},{key:"all",value:function(){return this.fetchAll().value()}},{key:"count",value:function(){return this.all().length}},{key:"skip",value:function(e){return this.operators.push({$skip:e}),this}},{key:"limit",value:function(e){return this.operators.push({$limit:e}),this}},{key:"sort",value:function(e){return this.operators.push({$sort:e}),this}},{key:"collation",value:function(e){return this.options=Object.assign(Object.assign({},this.options),{collation:e}),this}},{key:"next",value:function(){if(this.buffer.length>0)return this.buffer.pop();var e=this.fetch().next();return e.done?void 0:e.value}},{key:"hasNext",value:function(){if(this.buffer.length>0)return!0;var e=this.fetch().next();return!e.done&&(this.buffer.push(e.value),!0)}},{key:"map",value:function(e){return this.all().map(e)}},{key:"forEach",value:function(e){this.all().forEach(e)}},{key:Symbol.iterator,value:function(){return this.fetchAll()}}]),t}(),$k=function(){function e(t,n){Z(this,e),this.condition=t,this.options=Hk(n),this.compiled=[],this.compile()}return B(e,[{key:"compile",value:function(){QB(nk(this.condition),"query criteria must be an object");for(var e={},t=0,n=Object.entries(this.condition);t<n.length;t++){var r=Ge(n[t],2),a=r[0],o=r[1];if("$where"===a)Object.assign(e,{field:a,expr:o});else if(sk(["$and","$or","$nor","$expr","$jsonSchema"],a))this.processOperator(a,a,o);else{QB(!Jk(a),"unknown top level operator: ".concat(a));for(var i=0,g=Object.entries(xk(o));i<g.length;i++){var s=Ge(g[i],2),c=s[0],l=s[1];this.processOperator(a,c,l)}}e.field&&this.processOperator(e.field,e.field,e.expr)}}},{key:"processOperator",value:function(e,t,n){var r=Tk(Yk.QUERY,t,this.options);if(!r)throw new Error("unknown operator ".concat(t));var a=r(e,n,this.options);this.compiled.push(a)}},{key:"test",value:function(e){for(var t=0,n=this.compiled.length;t<n;t++)if(!this.compiled[t](e))return!1;return!0}},{key:"find",value:function(e,t){var n=this;return new qk(e,(function(e){return n.test(e)}),t||{},this.options)}},{key:"remove",value:function(e){var t=this;return e.reduce((function(e,n){return t.test(n)||e.push(n),e}),[])}}]),e}();new WeakMap;function eS(e){var t=function(t,n,r){var a={unwrapArray:!0},o=Math.max(1,t.split(".").length-1);return function(i){var g=Bk(i,t,a);return e(g,n,Object.assign(Object.assign({},r),{depth:o}))}};return t.op="query",t}function tS(e){return function(t,n,r){var a=Dk(t,n,null,r);return e.apply(void 0,We(a))}}function nS(e,t,n){if(mk(e,t))return!0;if(gk(e)&&gk(t))return!0;if(e instanceof Array){var r=mk.bind(null,t);return e.some(r)||pk(e,null===n||void 0===n?void 0:n.depth).some(r)}return!1}function rS(e,t,n){return!nS(e,t,n)}function aS(e,t,n){return gk(e)?t.some((function(e){return null===e})):hk([fk(e),t],null===n||void 0===n?void 0:n.hashFunction).length>0}function oS(e,t,n){return!aS(e,t,n)}function iS(e,t,n){return hS(e,t,(function(e,t){return OB(e,t)<0}))}function gS(e,t,n){return hS(e,t,(function(e,t){return OB(e,t)<=0}))}function sS(e,t,n){return hS(e,t,(function(e,t){return OB(e,t)>0}))}function cS(e,t,n){return hS(e,t,(function(e,t){return OB(e,t)>=0}))}function lS(e){return Jk(e)&&-1===["$and","$or","$nor"].indexOf(e)}function uS(e,t,n){if(tk(e)&&!lk(e)){var r=function(e){return e},a=t;Object.keys(t).every(lS)&&(a={temp:t},r=function(e){return{temp:e}});for(var o=new $k(a,n),i=0,g=e.length;i<g;i++)if(o.test(r(e[i])))return!0}return!1}var fS=function(e){return null===e},IS=function(e){return ek(e)&&e>=-2147483648&&e<=2147483647&&-1===e.toString().indexOf(".")},CS=function(e){return ek(e)&&e>=TB&&e<=EB&&-1===e.toString().indexOf(".")},dS={array:tk,bool:qB,boolean:qB,date:ak,decimal:ek,double:ek,int:IS,long:CS,number:ek,null:fS,object:nk,regex:ok,regexp:ok,string:$B,undefined:gk,function:function(e){throw new Error("unsupported type key `function`.")},1:ek,2:$B,3:nk,4:tk,6:gk,8:qB,9:ak,10:fS,11:ok,16:IS,18:CS,19:ek};function AS(e,t,n){var r=dS[t];return!!r&&r(e)}function hS(e,t,n){return fk(e).some((function(e){return _B(e)===_B(t)&&n(e,t)}))}tS(oS),tS(nS),tS(sS),tS(cS),tS(iS),tS(gS),tS(rS);var pS=function(e,t){var n={};return e.split("").forEach((function(e,r){return n[e]=t*(r+1)})),n};Object.assign(Object.assign(Object.assign({},pS("ABCDEFGHIKLM",1)),pS("NOPQRSTUVWXY",-1)),{Z:0});var mS={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function bS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mS,n=Object.assign({},mS,t),r=new Set(Object.keys(n));return function(t,a,o){var i=Dk(t,a,null,o);if(r.has("".concat(i))){var g=n["".concat(i)];if(g instanceof Error)throw new Error("cannot apply $".concat(e.name," to -inf, value must in (-inf,inf)"));return g}return e(i)}}bS(Math.acos,{Infinity:1/0,0:new Error}),bS(Math.acosh,{Infinity:1/0,0:new Error}),bS(Math.asin),bS(Math.asinh,{Infinity:1/0,"-Infinity":-1/0}),bS(Math.atan),bS(Math.atanh,{1:1/0,"-1":-1/0}),bS(Math.cos),bS(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var yS=Math.PI/180,vS=(bS((function(e){return e*yS}),{Infinity:1/0,"-Infinity":1/0}),180/Math.PI);bS((function(e){return e*vS}),{Infinity:1/0,"-Infinity":-1/0}),bS(Math.sin),bS(Math.sinh,{"-Infinity":-1/0,Infinity:1/0}),bS(Math.tan);var ZS=function(e,t,n){if(lk(t)||!nk(t))return e;var r=OB,a=n.collation;return nk(a)&&$B(a.locale)&&(r=function(e){var t={sensitivity:GS[e.strength||3],caseFirst:"off"===e.caseFirst?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:"shifted"===e.alternate};!0===(e.caseLevel||!1)&&("base"===t.sensitivity&&(t.sensitivity="case"),"accent"===t.sensitivity&&(t.sensitivity="variant"));var n=new Intl.Collator(e.locale,t);return function(e,t){if(!$B(e)||!$B(t))return OB(e,t);var r=n.compare(e,t);return r<0?-1:r>0?1:0}}(a)),e.transform((function(e){var a,o=Xe(Object.keys(t).reverse());try{var i=function(){var o=a.value,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LB;if(e.length<1)return new Map;for(var r=new Map,a=new Map,o=function(){var o=e[i],g=t(o,i),s=yk(g,n);if(null===s)a.has(null)?a.get(null).push(o):a.set(null,[o]);else{var c=r.has(s)?r.get(s).find((function(e){return mk(e,g)})):null;gk(c)?(a.set(g,[o]),r.has(s)?r.get(s).push(g):r.set(s,[g])):a.get(c).push(o)}},i=0;i<e.length;i++)o();return a}(e,(function(e){return Bk(e,o)}),n.hashFunction),g=Array.from(i.keys()).sort(r);-1===t[o]&&g.reverse(),e=[],g.reduce((function(e,t){return Zk(e,i.get(t))}),e)};for(o.s();!(a=o.n()).done;)i()}catch(xQ){o.e(xQ)}finally{o.f()}return e}))},GS={1:"base",2:"accent",3:"variant"};new Set(["$denseRank","$documentNumber","$first","$last","$linearFill","$rank","$shift"]),new Set(["$denseRank","$expMovingAvg","$linearFill","$locf","$rank","$shift"]);var BS=function(e,t,n){if(lk(t))return e;var r=Object.keys(t),a=!1;SS(t,n);var o=n.idKey;if(sk(r,o)){var i=t[o];0!==i&&!1!==i||(r=r.filter(ck.bind(null,[o])),a=0==r.length)}else r.push(o);var g=Nk.init(n);return e.map((function(e){return kS(e,t,g.update(e),r,a)}))};function kS(e,t,n,r,a){var o={},i=!1,g=!1,s=[];a&&s.push(n.idKey);var c,l=Xe(r);try{var u=function(){var r=c.value,a=void 0,l=t[r];if(r!==n.idKey&&sk([0,!1],l)&&(g=!0),r===n.idKey&&lk(l))a=e[r];else if($B(l))a=Dk(e,l,r,n);else if(sk([1,!0],l));else if(l instanceof Array)a=l.map((function(t){var r=Dk(e,t,null,n);return gk(r)?null:r}));else{if(!nk(l))return s.push(r),1;var u=l,f=Object.keys(l),I=1==f.length?f[0]:"",C=Tk(Yk.PROJECTION,I,n);if(C)"$slice"===I?fk(u[I]).every(ek)?(a=C(e,u[I],r,n),i=!0):a=Dk(e,u,r,n):a=C(e,u[I],r,n);else if(Jk(I))a=Dk(e,u[I],I,n);else if(Ik(e,r)){SS(u,n);var d=e[r];a=d instanceof Array?d.map((function(e){return kS(e,u,n,f,!1)})):kS(d=nk(d)?d:e,u,n,f,!1)}else a=Dk(e,l,null,n)}var A=kk(e,r,{preserveMissing:!0});void 0!==A&&dk(o,A,{flatten:!0}),ck([0,1,!1,!0],l)&&(void 0===a?Rk(o,r,{descendArray:!0}):function(e,t,n){Wk(e,t,(function(e,t){e[t]=n}),{buildGraph:!0})}(o,r,a))};for(l.s();!(c=l.n()).done;)u()}catch(xQ){l.e(xQ)}finally{l.f()}if(Sk(o),(i||g||a)&&(o=Zk({},e,o),s.length>0)){var f,I=Xe(s);try{for(I.s();!(f=I.n()).done;){var C=f.value;Rk(o,C,{descendArray:!0})}}catch(xQ){I.e(xQ)}finally{I.f()}}return o}function SS(e,t){for(var n=[!1,!1],r=0,a=Object.entries(e);r<a.length;r++){var o=Ge(a[r],2),i=o[0],g=o[1];if(i===(null===t||void 0===t?void 0:t.idKey))return;0===g||!1===g?n[0]=!0:1!==g&&!0!==g||(n[1]=!0),QB(!(n[0]&&n[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var wS=function(e,t,n){QB(tk(t),"Invalid expression: $and expects value to be an Array.");var r=t.map((function(e){return new $k(e,n)}));return function(e){return r.every((function(t){return t.test(e)}))}},WS=function(e,t,n){QB(tk(t),"Invalid expression. $or expects value to be an Array");var r=t.map((function(e){return new $k(e,n)}));return function(e){return r.some((function(t){return t.test(e)}))}},RS=function(e,t,n){QB(tk(t),"Invalid expression. $nor expects value to be an array.");var r=WS("$or",t,n);return function(e){return!r(e)}},VS=function(e,t,n){var r={};r[e]=xk(t);var a=new $k(r,n);return function(e){return!a.test(e)}},XS=eS(nS),JS=eS(sS),xS=eS(cS),YS=eS(aS),NS=eS(iS),HS=eS(gS),FS=eS(rS),KS=eS(oS);var ES=eS((function(e,t,n){return fk(e).some((function(e){return 2===t.length&&e%t[0]===t[1]}))})),TS=eS((function(e,t,n){var r=fk(e),a=function(e){return $B(e)&&function(e){return!!e||(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&""===e}(t.exec(e),null===n||void 0===n?void 0:n.useStrictMode)};return r.some(a)||pk(r,1).some(a)}));eS((function(e,t,n){if(!tk(e)||!tk(t)||!e.length||!t.length)return!1;var r,a=!0,o=Xe(t);try{var i=function(){var t=r.value;if(!a)return 1;a=nk(t)&&sk(Object.keys(t),"$elemMatch")?uS(e,t.$elemMatch,n):t instanceof RegExp?e.some((function(e){return"string"===typeof e&&t.test(e)})):e.some((function(e){return mk(t,e)}))};for(o.s();!(r=o.n()).done&&!i(););}catch(xQ){o.e(xQ)}finally{o.f()}return a}));var MS=eS(uS),zS=eS((function(e,t,n){return Array.isArray(e)&&e.length===t})),DS=eS((function(e,t,n){return(!1===t||0===t)&&void 0===e||(!0===t||1===t)&&void 0!==e})),LS=eS((function(e,t,n){return Array.isArray(t)?t.findIndex((function(t){return AS(e,t)}))>=0:AS(e,t)})),US=!1;function jS(e,t){var n=nG(e.primaryKey);(t=xy(t)).selector&&(t.selector=OS(t.selector));var r=Ny(t);if("number"!==typeof r.skip&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach((function(e){var t=Ge(e,2),n=t[0],a=t[1];"object"===typeof a&&null!==a||(r.selector[n]={$eq:a})}))):r.selector={},r.index){var a=Ky(r.index);a.includes(n)||a.push(n),r.index=a}if(r.sort){var o=r.sort.find((function(e){return t=e,Object.keys(t)[0]===n;var t}));o||(r.sort=r.sort.slice(0),r.sort.push(b({},n,"asc")))}else if(r.index)r.sort=r.index.map((function(e){return b({},e,"asc")}));else{if(e.indexes){var i=new Set;Object.entries(r.selector).forEach((function(e){var t=Ge(e,2),n=t[0],r=t[1];("object"!==typeof r||null===r||!!Object.keys(r).find((function(e){return NB.has(e)})))&&i.add(n)}));var g,s=-1;e.indexes.forEach((function(e){var t=Ey(e)?e:[e],n=t.findIndex((function(e){return!i.has(e)}));n>0&&n>s&&(s=n,g=t)})),g&&(r.sort=g.map((function(e){return b({},e,"asc")})))}r.sort||(r.sort=[b({},n,"asc")])}return r}function OS(e){if("object"!==typeof e||null===e)return e;var t=Object.keys(e),n={};return t.forEach((function(t){var r=e[t];if("$regex"===t&&r instanceof RegExp){var a=function(e){var t=RZ(e.toString().match(PZ));return{pattern:t[2],flags:t[3]}}(r);n.$regex=a.pattern,n.$options=a.flags}else Array.isArray(r)?n[t]=r.map((function(e){return OS(e)})):n[t]=OS(r)})),n}function QS(e,t){if(!t.sort)throw $y("SNH",{query:t});var n=[];t.sort.forEach((function(e){var t=Object.keys(e)[0],r=Object.values(e)[0];n.push({key:t,direction:r,getValueFn:Vy(t)})}));return function(e,t){for(var r=0;r<n.length;++r){var a=n[r],o=a.getValueFn(e),i=a.getValueFn(t);if(o!==i)return"asc"===a.direction?OB(o,i):OB(i,o)}}}function PS(e,t){if(!t.sort)throw $y("SNH",{query:t});var n,r=(n=t.selector,US||(Ek(Yk.PIPELINE,{$sort:ZS,$project:BS}),Ek(Yk.QUERY,{$and:wS,$eq:XS,$elemMatch:MS,$exists:DS,$gt:JS,$gte:xS,$in:YS,$lt:NS,$lte:HS,$ne:FS,$nin:KS,$mod:ES,$nor:RS,$not:VS,$or:WS,$regex:TS,$size:zS,$type:LS}),US=!0),new $k(n));return function(e){return!e._deleted&&!!r.find([e]).next()}}function _S(e,t){return t.sort&&0!==t.sort.length?t.sort.map((function(e){return Object.keys(e)[0]})):[e]}var qS=new WeakMap;function $S(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=function(e){return xG(qS,e,(function(){var t=e.collection,n=jS(t.storageInstance.schema,Ny(e.mangoQuery)),r=t.schema.primaryPath,a=QS(t.schema.jsonSchema,n),o=PS(t.schema.jsonSchema,n);return{primaryKey:e.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:_S(r,n),sortComparator:function(t,n){var r={docA:t,docB:n,rxQuery:e};return a(r.docA,r.docB)},queryMatcher:function(t){return o({doc:t,rxQuery:e}.doc)}}}))}(e),r=RZ(e._result).docsData.slice(0),a=RZ(e._result).docsDataMap,o=!1,i=t.map((function(e){return function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:Qy.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(e)})).filter(Ty).find((function(e){var t=XB({queryParams:n,changeEvent:e,previousResults:r,keyDocumentMap:a});return"runFullQueryAgain"===t||("doNothing"!==t?(o=!0,function(e,t,n,r,a){(0,eB[e])({queryParams:t,changeEvent:n,previousResults:r,keyDocumentMap:a})}(t,n,e,r,a),!1):void 0)}));return i?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:r}}var ew=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(e){var t=e.toString();return xG(this._map,t,(function(){return e}))},e}();function tw(e,t){t.uncached=!0;var n=t.toString();e._map.delete(n)}function nw(e){return e.refCount$.observers.length}var rw,aw,ow,iw=(rw=100,aw=3e4,function(e,t){if(!(t._map.size<rw)){for(var n=sG()-aw,r=[],a=0,o=Array.from(t._map.values());a<o.length;a++){var i=o[a];nw(i)>0||(0===i._lastEnsureEqual&&i._creationTime<n?tw(t,i):r.push(i))}var g=r.length-rw;if(!(g<=0)){var s=r.sort((function(e,t){return e._lastEnsureEqual-t._lastEnsureEqual}));s.slice(0,g).forEach((function(e){return tw(t,e)}))}}}),gw=new WeakSet;function sw(e){gw.has(e)||(gw.add(e),new Promise((function(e){return setTimeout(e,0)})).then((function(){return MZ(200)})).then((function(){e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),gw.delete(e)})))}var cw,lw,uw=0,fw=function(e){function t(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.id=++uw,this._execOverDatabaseCount=0,this._creationTime=sG(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new DG(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=FZ,this.op=e,this.mangoQuery=t,this.collection=n,this.other=r,t||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function(e,t){if(!t.skip&&t.selector&&1===Object.keys(t.selector).length&&t.selector[e]){var n=t.selector[e];if("string"===typeof n)return n;if(1===Object.keys(n).length&&"string"===typeof n.$eq)return n.$eq;if(1===Object.keys(n).length&&Array.isArray(n.$eq)&&!n.$eq.find((function(e){return"string"!==typeof e})))return n.$eq}return!1}(this.collection.schema.primaryPath,t)}var n=t.prototype;return n._setResultData=function(e){var t=this;if("number"!==typeof e){e instanceof Map&&(e=Array.from(e.values()));var n=new Map,r=new Map,a=e.map((function(e){return t.collection._docCache.getCachedRxDocument(e)})),o=a.map((function(e){return n.set(e.primary,e._data),r.set(e.primary,e),e._data}));this._result={docsData:o,docsMap:r,docsDataMap:n,count:o.length,docs:a,time:sG()}}else this._result={docsData:[],docsMap:new Map,docsDataMap:new Map,count:e,docs:[],time:sG()}},n._execOverDatabase=function(){return(e=e||hn(dn().mark((function e(){var t,n,r,a,o,i,g,s=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=sG(),"count"!==this.op){e.next=12;break}return t=this.getPreparedQuery(),e.next=6,this.collection.storageInstance.count(t);case 6:if("slow"!==(n=e.sent).mode||this.collection.database.allowSlowCount){e.next=11;break}throw $y("QU14",{collection:this.collection,queryObj:this.mangoQuery});case 11:return e.abrupt("return",n.count);case 12:if("findByIds"!==this.op){e.next=23;break}if(r=RZ(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,a=new Map,o=[],r.forEach((function(e){var t=s.collection._docCache.getLatestDocumentDataIfExists(e);if(t){if(!t._deleted){var n=s.collection._docCache.getCachedRxDocument(t);a.set(e,n)}}else o.push(e)})),!(o.length>0)){e.next=22;break}return e.next=20,this.collection.storageInstance.findDocumentsById(o,!1);case 20:i=e.sent,Object.values(i).forEach((function(e){var t=s.collection._docCache.getCachedRxDocument(e);a.set(t.primary,t)}));case 22:return e.abrupt("return",a);case 23:return g=Aw(this),e.abrupt("return",g.then((function(e){return s._lastExecEnd=sG(),e})));case 25:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},n.exec=function(e){var t=this;if(e&&"findOne"!==this.op)throw $y("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return dw(this).then((function(){return function(e,t){var n="object"===typeof t;return new Promise((function(r,a){var o=new Fv({next:function(e){r(e),o.unsubscribe()},error:a,complete:function(){n?r(t.defaultValue):a(new LG)}});e.subscribe(o)}))}(t.$)})).then((function(n){if(!n&&e)throw $y("QU10",{collection:t.collection.name,query:t.mangoQuery,op:t.op});return n}))},n.toString=function(){var e=Yy({op:this.op,query:this.mangoQuery,other:this.other},!0),t=JSON.stringify(e,Fy);return this.toString=function(){return t},t},n.getPreparedQuery=function(){var e={rxQuery:this,mangoQuery:jS(this.collection.schema.jsonSchema,this.mangoQuery)};av("prePrepareQuery",e);var t=this.collection.database.storage.statics.prepareQuery(this.collection.schema.jsonSchema,e.mangoQuery);return this.getPreparedQuery=function(){return t},t},n.doesDocumentDataMatch=function(e){return!e._deleted&&this.queryMatcher(e)},n.remove=function(){return this.exec().then((function(e){return Array.isArray(e)?Promise.all(e.map((function(e){return e.remove()}))):e.remove()}))},n.update=function(e){throw jZ("update")},n.where=function(e){throw jZ("query-builder")},n.sort=function(e){throw jZ("query-builder")},n.skip=function(e){throw jZ("query-builder")},n.limit=function(e){throw jZ("query-builder")},wy(t,[{key:"$",get:function(){var e=this;if(!this._$){var t=this.collection.$.pipe(Lv((function(e){return!e.isLocal})),bZ(null),cZ((function(){return dw(e)})),Dv((function(){return e._result})),WZ(VZ),yZ((function(e,t){return!(!e||e.time!==RZ(t).time)})),Lv((function(e){return!!e})),Dv((function(t){var n=RZ(t);return"count"===e.op?n.count:"findOne"===e.op?0===n.docs.length?null:n.docs[0]:"findByIds"===e.op?n.docsMap:n.docs.slice(0)})));this._$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fZ(e),r=IZ(e,1/0),a=e;return a.length?1===a.length?iZ(a[0]):lZ(r)(pZ(a,n)):UG}(t,this.refCount$.pipe(Lv((function(){return!1}))))}return this._$}},{key:"queryMatcher",get:function(){this.collection.schema.jsonSchema;return Hy(this,"queryMatcher",PS(0,jS(this.collection.schema.jsonSchema,this.mangoQuery)))}},{key:"asRxQuery",get:function(){return this}}]),t}();function Iw(e,t,n,r){av("preCreateRxQuery",{op:e,queryObj:t,collection:n,other:r});var a,o=new fw(e,t,n,r);return o=(a=o).collection._queryCache.getByQuery(a),sw(n),o}function Cw(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function dw(e){return e.collection.database.destroyed||Cw(e)?FZ:(e._ensureEqualQueue=e._ensureEqualQueue.then((function(){return function(e){if(e._lastEnsureEqual=sG(),e.collection.database.destroyed||Cw(e))return FZ;var t=!1,n=!1;-1===e._latestChangeEvent&&(n=!0);if(!n){var r=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===r)n=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var a=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if("count"===e.op){var o=RZ(e._result).count,i=o;a.forEach((function(t){var n=t.previousDocumentData&&e.doesDocumentDataMatch(t.previousDocumentData),r=e.doesDocumentDataMatch(t.documentData);!n&&r&&i++,n&&!r&&i--})),i!==o&&(t=!0,e._setResultData(i))}else{var g=$S(e,a);g.runFullQueryAgain?n=!0:g.changed&&(t=!0,e._setResultData(g.newResults))}}}if(n){var s=e.collection._changeEventBuffer.counter;return e._execOverDatabase().then((function(n){return e._latestChangeEvent=s,"number"===typeof n?(e._result&&n===e._result.count||(t=!0,e._setResultData(n)),t):(e._result&&function(e,t,n){if(t.length!==n.length)return!1;for(var r=0,a=t.length;r<a;){var o=t[r],i=n[r];if(r++,o._rev!==i._rev||o[e]!==i[e])return!1}return!0}(e.collection.schema.primaryPath,n,e._result.docsData)||(t=!0,e._setResultData(n)),t)}))}return Promise.resolve(t)}(e)})),e._ensureEqualQueue)}function Aw(e){return(ow=ow||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],r=t.collection,!t.isFindOneByIdQuery){e.next=23;break}if(!Array.isArray(t.isFindOneByIdQuery)){e.next=13;break}if(a=(a=t.isFindOneByIdQuery).filter((function(e){var r=t.collection._docCache.getLatestDocumentDataIfExists(e);return!r||(r._deleted||n.push(r),!1)})),!(a.length>0)){e.next=11;break}return e.next=9,r.storageInstance.findDocumentsById(a,!1);case 9:o=e.sent,Object.values(o).forEach((function(e){n.push(e)}));case 11:e.next=21;break;case 13:if(i=t.isFindOneByIdQuery,g=t.collection._docCache.getLatestDocumentDataIfExists(i)){e.next=20;break}return e.next=18,r.storageInstance.findDocumentsById([i],!1);case 18:(s=e.sent).hasOwnProperty(i)&&(g=s[i]);case 20:g&&!g._deleted&&n.push(g);case 21:e.next=28;break;case 23:return c=t.getPreparedQuery(),e.next=26,r.storageInstance.query(c);case 26:l=e.sent,n=l.documents;case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hw="collection",pw="storage-token",mw=aG({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[hw,pw,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function bw(e,t){return rG(mw,{key:e,context:t})}function yw(e,t){return(cw=cw||hn(dn().mark((function e(t,n){var r,a,o;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.prepareQuery(n.schema,{selector:{context:hw},sort:[{id:"asc"}],skip:0}),e.next=3,n.query(r);case 3:return a=e.sent,o=a.documents,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vw,Zw,Gw="storageToken",Bw=bw(Gw,pw);function kw(e,t){return e+"-"+t.version}function Sw(e,t){return t=function(e,t){for(var n=Object.keys(e.defaultValues),r=0;r<n.length;++r){var a=n[r];t.hasOwnProperty(a)&&"undefined"!==typeof t[a]||(t[a]=e.defaultValues[a])}return t}(e,t=xy(t)),(t=tG(e.primaryPath,e.jsonSchema,t))._meta=qZ(),t.hasOwnProperty("_deleted")||(t._deleted=!1),t.hasOwnProperty("_attachments")||(t._attachments={}),t.hasOwnProperty("_rev")||(t._rev=""),t}function ww(e,t,n,r,a,o){return(Zw=Zw||hn(dn().mark((function e(t,n,r,a,o,i){var g,s,c,l,u,f;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yw(t.statics,n);case 2:return s=e.sent,c=s.filter((function(e){return e.data.name===o})),l=[],c.forEach((function(e){l.push({collectionName:e.data.name,schema:e.data.schema,isCollection:!0}),e.data.connectedStorages.forEach((function(e){return l.push({collectionName:e.collectionName,isCollection:!1,schema:e.schema})}))})),u=new Set,l=l.filter((function(e){var t=e.collectionName+"||"+e.schema.version;return!u.has(t)&&(u.add(t),!0)})),e.next=10,Promise.all(l.map((function(e){return(g=g||hn(dn().mark((function e(n){var i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createStorageInstance({collectionName:n.collectionName,databaseInstanceToken:r,databaseName:a,multiInstance:!1,options:{},schema:n.schema,devMode:Qy.isDevMode()});case 2:return i=e.sent,e.next=5,i.remove();case 5:if(!n.isCollection){e.next=8;break}return e.next=8,ov("postRemoveRxCollection",{storage:t,databaseName:a,collectionName:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 10:if(!i){e.next=14;break}return f=c.map((function(e){var t=RG(e);return t._deleted=!0,t._meta.lwt=sG(),t._rev=vG(r,e),{previous:e,document:t}})),e.next=14,n.bulkWrite(f,"rx-database-remove-collection-all");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ww=function(){function e(e,t,n){var r=this;this.cacheItemByDocId=new Map,this.registry="function"===typeof FinalizationRegistry?new FinalizationRegistry((function(e){var t=e.docId,n=r.cacheItemByDocId.get(t);n&&(n.documentByRevisionHeight.delete(e.revisionHeight),0===n.documentByRevisionHeight.size&&r.cacheItemByDocId.delete(t))})):void 0,this.primaryPath=e,this.changes$=t,this.documentCreator=n,t.subscribe((function(e){var t=e.documentId,n=r.cacheItemByDocId.get(t);if(n){var a=OZ(e);n.latestDoc=a}}))}var t=e.prototype;return t.getCachedRxDocument=function(e){var t,n,r=e[this.primaryPath],a=(t=e._rev,parseInt(t.split("-")[0],10)),o=xG(this.cacheItemByDocId,r,(function(){return function(e){return{documentByRevisionHeight:new Map,latestDoc:e}}(e)})),i=o.documentByRevisionHeight.get(a),g=i?i.deref():void 0;return g||(e=Qy.deepFreezeWhenDevMode(e),g=this.documentCreator(e),o.documentByRevisionHeight.set(a,(n=g,Rw?new WeakRef(n):{deref:function(){return n}})),this.registry&&this.registry.register(g,{docId:r,revisionHeight:a})),g},t.getLatestDocumentData=function(e){return JG(this.cacheItemByDocId,e).latestDoc},t.getLatestDocumentDataIfExists=function(e){var t=this.cacheItemByDocId.get(e);if(t)return t.latestDoc},e}();var Rw="function"===typeof WeakRef;var Vw=function(){function e(e){var t=this;this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=e,this.subs.push(this.collection.$.pipe(Lv((function(e){return!e.isLocal}))).subscribe((function(e){return t._handleChangeEvent(e)})))}var t=e.prototype;return t._handleChangeEvent=function(e){for(this.counter++,this.buffer.push(e),this.eventCounterMap.set(e,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(e){var t=this.buffer[0],n=this.eventCounterMap.get(t);return e<n?null:e-n},t.getFrom=function(e){var t=[],n=this.getArrayIndexByPointer(e);if(null===n)return null;for(;;){var r=this.buffer[n];if(n++,!r)return t;t.push(r)}},t.runFrom=function(e,t){var n=this.getFrom(e);if(null===n)throw new Error("out of bounds");n.forEach((function(e){return t(e)}))},t.reduceByLastOfDoc=function(e){return e.slice(0)},t.destroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e}();var Xw=new WeakMap;function Jw(e){var t=e.schema.getDocumentPrototype(),n=function(e){var t={};return Object.entries(e.methods).forEach((function(e){var n=Ge(e,2),r=n[0],a=n[1];t[r]=a})),t}(e),r={};return[t,n,FG].forEach((function(e){Object.getOwnPropertyNames(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t),a=!0;(t.startsWith("_")||t.endsWith("_")||t.startsWith("$")||t.endsWith("$"))&&(a=!1),"function"===typeof n.value?Object.defineProperty(r,t,{get:function(){return n.value.bind(this)},enumerable:a,configurable:!1}):(n.enumerable=a,n.configurable=!1,n.writable&&(n.writable=!1),Object.defineProperty(r,t,n))}))})),r}function xw(e,t){var n=function(e,t,n){var r=new e(t,n);return av("createRxDocument",r),r}(function(e){return xG(Xw,e,(function(){return KG(Jw(e))}))}(e),e,Qy.deepFreezeWhenDevMode(t));return e._runHooksSync("post","create",t,n),av("postCreateRxDocument",n),n}var Yw=function(e,t){return Wy(e.newDocumentState,e.realMasterState)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})};var Nw=["pre","post"],Hw=["insert","save","remove","create"],Fw=!1,Kw=function(e,t,n,r,a,o){function i(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:iw,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:{},u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:Yw;this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=new ew,this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=e,this.name=t,this.schema=n,this.internalStorageInstance=r,this.instanceCreationOptions=a,this.migrationStrategies=o,this.methods=i,this.attachments=g,this.options=s,this.cacheReplacementPolicy=c,this.statics=l,this.conflictHandler=u,function(e){if(Fw)return;Fw=!0;var t=Object.getPrototypeOf(e);Hw.forEach((function(e){Nw.map((function(n){var r=n+DZ(e);t[r]=function(t,r){return this.addHook(n,e,t,r)}}))}))}(this.asRxCollection)}var g=i.prototype;return g.prepare=function(){return(e=e||hn(dn().mark((function e(){var t,n,r,a=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.storageInstance=XG(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new YG(this.storageInstance,this.schema.primaryPath,(function(e,t){return TG(a,e,t)}),(function(e){return a._runHooks("post","save",e)})),t=this.database.eventBulks$.pipe(Lv((function(e){return e.collectionName===a.name}))),this.$=t.pipe(cZ((function(e){return e.events}))),this.checkpoint$=t.pipe(Dv((function(e){return e.checkpoint}))),this._changeEventBuffer=(o=this.asRxCollection,new Vw(o)),this._docCache=new Ww(this.schema.primaryPath,this.$.pipe(Lv((function(e){return!e.isLocal}))),(function(e){return xw(a.asRxCollection,e)})),e.next=9,this.database.storageToken;case 9:return n=e.sent,r=this.storageInstance.changeStream().subscribe((function(e){var t={id:e.id,internal:!1,collectionName:a.name,storageToken:n,events:e.events.map((function(e){return BG(!1,e,a)})),databaseToken:a.database.token,checkpoint:e.checkpoint,context:e.context};a.database.$emit(t)})),this._subs.push(r),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe((function(e){a.conflictHandler(e.input,e.context).then((function(t){a.storageInstance.resolveConflictResultionTask({id:e.id,output:t})}))}))),e.abrupt("return",EZ);case 14:case"end":return e.stop()}var o}),e,this)})))).apply(this,arguments)},g.migrationNeeded=function(){throw jZ("migration")},g.getDataMigrator=function(){throw jZ("migration")},g.migrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migrate(e)},g.migratePromise=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migratePromise(e)},g.insert=function(e){return(t=t||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bulkInsert([t]);case 2:return n=e.sent,r=n.error[0],kG(this,t[this.schema.primaryPath],t,r),a=RZ(n.success[0]),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},g.bulkInsert=function(e){return(n=n||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",{success:[],error:[]});case 2:if(n=this.schema.primaryPath,r=t.map((function(e){return Sw(c.schema,e)})),!this.hasHooks("pre","insert")){e.next=10;break}return e.next=7,Promise.all(r.map((function(e){return c._runHooks("pre","insert",e).then((function(){return e}))})));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=r;case 11:return a=e.t0,o=new Map,i=a.map((function(e){return o.set(e[n],e),{document:e}})),e.next=16,this.storageInstance.bulkWrite(i,"rx-collection-bulk-insert");case 16:if(g=e.sent,s=Object.values(g.success).map((function(e){return c._docCache.getCachedRxDocument(e)})),!this.hasHooks("post","insert")){e.next=21;break}return e.next=21,Promise.all(s.map((function(e){return c._runHooks("post","insert",o.get(e.primary),e)})));case 21:return e.abrupt("return",{success:s,error:Object.values(g.error)});case 22:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},g.bulkRemove=function(e){return(r=r||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",{success:[],error:[]});case 2:return e.next=4,this.findByIds(t).exec();case 4:return n=e.sent,r=[],a=new Map,Array.from(n.values()).forEach((function(e){var t=e.toMutableJSON(!0);r.push(t),a.set(e.primary,t)})),e.next=10,Promise.all(r.map((function(e){var t=e[c.schema.primaryPath];return c._runHooks("pre","remove",e,n.get(t))})));case 10:return o=r.map((function(e){var t=xy(e);return t._deleted=!0,{previous:e,document:t}})),e.next=13,this.storageInstance.bulkWrite(o,"rx-collection-bulk-remove");case 13:return i=e.sent,g=Object.keys(i.success),e.next=17,Promise.all(g.map((function(e){return c._runHooks("post","remove",a.get(e),n.get(e))})));case 17:return s=g.map((function(e){return JG(n,e)})),e.abrupt("return",{success:s,error:Object.values(i.error)});case 19:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},g.bulkUpsert=function(e){return(a=a||hn(dn().mark((function e(t){var n,r,a,o,i,g,s=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=new Map,t.forEach((function(e){var t=Sw(s.schema,e),n=t[s.schema.primaryPath];if(!n)throw $y("COL3",{primaryPath:s.schema.primaryPath,data:t,schema:s.schema.jsonSchema});a.set(n,t),r.push(t)})),e.next=5,this.bulkInsert(r);case 5:return o=e.sent,i=o.success.slice(0),e.next=9,Promise.all(o.error.map((function(e){return(n=n||hn(dn().mark((function e(t){var n,r,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(409===t.status){e.next=2;break}throw $y("VD2",{collection:s.name,writeError:t});case 2:return n=t.documentId,r=JG(a,n),o=RZ(t.documentInDb),i=s._docCache.getCachedRxDocument(o),e.next=8,i.incrementalModify((function(){return r}));case 8:return g=e.sent,e.abrupt("return",g);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 9:return g=e.sent,zy(i,g),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},g.upsert=function(e){return this.bulkUpsert([e]).then((function(e){return e[0]}))},g.incrementalUpsert=function(e){var t=this,n=Sw(this.schema,e),r=n[this.schema.primaryPath];if(!r)throw $y("COL4",{data:e});var a=this._incrementalUpsertQueues.get(r);return a||(a=EZ),a=a.then((function(){return function(e,t,n){var r=e._docCache.getLatestDocumentDataIfExists(t);if(r)return Promise.resolve({doc:e._docCache.getCachedRxDocument(r),inserted:!1});return e.findOne(t).exec().then((function(t){return t?{doc:t,inserted:!1}:e.insert(n).then((function(e){return{doc:e,inserted:!0}}))}))}(t,r,n)})).then((function(e){return e.inserted?e.doc:function(e,t){return e.incrementalModify((function(e){return t}))}(e.doc,n)})),this._incrementalUpsertQueues.set(r,a),a},g.find=function(e){if("string"===typeof e)throw $y("COL5",{queryObj:e});return e||(e={selector:{}}),Iw("find",e,this)},g.findOne=function(e){var t;if("string"===typeof e)t=Iw("findOne",{selector:b({},this.schema.primaryPath,e),limit:1},this);else{if(e||(e={selector:{}}),e.limit)throw $y("QU6");e.limit=1,t=Iw("findOne",e,this)}if("number"===typeof e||Array.isArray(e))throw ev("COL6",{queryObj:e});return t},g.count=function(e){return e||(e={selector:{}}),Iw("count",e,this)},g.findByIds=function(e){return Iw("findByIds",{selector:b({},this.schema.primaryPath,{$in:e.slice(0)})},this)},g.exportJSON=function(){throw jZ("json-dump")},g.importJSON=function(e){throw jZ("json-dump")},g.insertCRDT=function(e){throw jZ("crdt")},g.addHook=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!==typeof n)throw ev("COL7",{key:t,when:e});if(!Nw.includes(e))throw ev("COL8",{key:t,when:e});if(!Hw.includes(t))throw $y("COL9",{key:t});if("post"===e&&"create"===t&&!0===r)throw $y("COL10",{when:e,key:t,parallel:r});var a=n.bind(this),o=r?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][o].push(a)},g.getHooks=function(e,t){return this.hooks[t]&&this.hooks[t][e]?this.hooks[t][e]:{series:[],parallel:[]}},g.hasHooks=function(e,t){var n=this.getHooks(e,t);return!!n&&(n.series.length>0||n.parallel.length>0)},g._runHooks=function(e,t,n,r){var a=this.getHooks(e,t);return a?function(e,t){return e.reduce((function(e,t){return e.then(t)}),Promise.resolve(t))}(a.series.map((function(e){return function(){return e(n,r)}}))).then((function(){return Promise.all(a.parallel.map((function(e){return e(n,r)})))})):EZ},g._runHooksSync=function(e,t,n,r){var a=this.getHooks(e,t);a&&a.series.forEach((function(e){return e(n,r)}))},g.promiseWait=function(e){var t=this;return new Promise((function(n){var r=setTimeout((function(){t.timeouts.delete(r),n()}),e);t.timeouts.add(r)}))},g.destroy=function(){var e=this;return this.destroyed?FZ:(this.destroyed=!0,Array.from(this.timeouts).forEach((function(e){return clearTimeout(e)})),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then((function(){return Promise.all(e.onDestroy.map((function(e){return e()})))})).then((function(){return e.storageInstance.close()})).then((function(){return e._subs.forEach((function(e){return e.unsubscribe()})),delete e.database.collections[e.name],ov("postDestroyRxCollection",e).then((function(){return!0}))})))},g.remove=function(){return(o=o||hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.destroy();case 2:return e.next=4,ww(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.hashFunction);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},wy(i,[{key:"insert$",get:function(){return this.$.pipe(Lv((function(e){return"INSERT"===e.operation})))}},{key:"update$",get:function(){return this.$.pipe(Lv((function(e){return"UPDATE"===e.operation})))}},{key:"remove$",get:function(){return this.$.pipe(Lv((function(e){return"DELETE"===e.operation})))}},{key:"asRxCollection",get:function(){return this}}]),i}();function Ew(e){var t=e.database,n=e.name,r=e.schema,a=e.instanceCreationOptions,o=void 0===a?{}:a,i=e.migrationStrategies,g=void 0===i?{}:i,s=e.autoMigrate,c=void 0===s||s,l=e.statics,u=void 0===l?{}:l,f=e.methods,I=void 0===f?{}:f,C=e.attachments,d=void 0===C?{}:C,A=e.options,h=void 0===A?{}:A,p=e.localDocuments,m=void 0!==p&&p,b=e.cacheReplacementPolicy,y=void 0===b?iw:b,v=e.conflictHandler,Z=void 0===v?Yw:v,G={databaseInstanceToken:t.token,databaseName:t.name,collectionName:n,schema:r.jsonSchema,options:o,multiInstance:t.multiInstance,password:t.password,devMode:Qy.isDevMode()};return av("preCreateRxStorageInstance",G),function(e,t){return(vw=vw||hn(dn().mark((function e(t,n){var r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.multiInstance=t.multiInstance,e.next=3,t.storage.createStorageInstance(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(t,G).then((function(e){var a=new Kw(t,n,r,e,o,g,I,d,h,y,u,Z);return a.prepare().then((function(){Object.entries(u).forEach((function(e){var t=Ge(e,2),n=t[0],r=t[1];Object.defineProperty(a,n,{get:function(){return r.bind(a)}})}));var e=EZ;return c&&0!==a.schema.version&&(e=a.migratePromise()),e})).then((function(){return av("createRxCollection",{collection:a,creator:{name:n,schema:r,storageInstance:e,instanceCreationOptions:o,migrationStrategies:g,methods:I,attachments:d,options:h,cacheReplacementPolicy:y,localDocuments:m,statics:u}}),a})).catch((function(t){return e.close().then((function(){return Promise.reject(t)}))}))}))}var Tw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function Mw(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var n=e._pHM.get(t);e._hPM.delete(n),e._pHM.delete(t)}e._iC.delete(t)}}function zw(e){e._tryIR||0===e._iC.size||(e._tryIR=!0,setTimeout((function(){e.isIdle()?setTimeout((function(){e.isIdle()?(!function(e){0!==e._iC.size&&(e._iC.values().next().value._manRes(),setTimeout((function(){return zw(e)}),0))}(e),e._tryIR=!1):e._tryIR=!1}),0):e._tryIR=!1}),0))}Tw.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,zw(this)},wrapCall:function(e){var t,n=this;this.lock();try{t=e()}catch(xQ){throw this.unlock(),xQ}return t.then&&"function"===typeof t.then?t.then((function(e){return n.unlock(),e})).catch((function(e){throw n.unlock(),e})):(this.unlock(),t)},requestIdlePromise:function(e){var t,n=this;e=e||{};var r=new Promise((function(e){return t=e}));if(r._manRes=function(){Mw(n,r),t()},e.timeout){var a=setTimeout((function(){r._manRes()}),e.timeout);r._timeoutObj=a}return this._iC.add(r),zw(this),r},cancelIdlePromise:function(e){Mw(this,e)},requestIdleCallback:function(e,t){var n=this._lHN++,r=this.requestIdlePromise(t);return this._hPM.set(n,r),this._pHM.set(r,n),r.then((function(){return e()})),n},cancelIdleCallback:function(e){var t=this._hPM.get(e);this.cancelIdlePromise(t)},clear:function(){var e=this;this._iC.forEach((function(t){return Mw(e,t)})),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};var Dw,Lw,Uw,jw=function(){function e(e){this.ttl=e,this.map=new Map,this._to=!1}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.add=function(e){var t=this;this.map.set(e,Ow()),this._to||(this._to=!0,setTimeout((function(){t._to=!1,function(e){var t=Ow()-e.ttl,n=e.map[Symbol.iterator]();for(;;){var r=n.next().value;if(!r)return;var a=r[0];if(!(r[1]<t))return;e.map.delete(a)}}(t)}),0))},e.prototype.clear=function(){this.map.clear()},e}();function Ow(){return(new Date).getTime()}var Qw=new Set,Pw=function(e,t,n){function r(e,t,n,r,a,o){var i=this,g=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;this.idleQueue=new Tw,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new GZ,this.observable$=this.eventBulks$.pipe(cZ((function(e){return e.events}))),this.storageToken=FZ,this.storageTokenDocument=FZ,this.emittedEventBulkIds=new jw(6e4),this.name=e,this.token=t,this.storage=n,this.instanceCreationOptions=r,this.password=a,this.multiInstance=o,this.eventReduce=g,this.options=s,this.internalStore=c,this.hashFunction=l,this.cleanupPolicy=u,this.allowSlowCount=f,"pseudoInstance"!==this.name&&(this.internalStore=XG(this.asRxDatabase,c,mw),this.storageTokenDocument=function(e){return(lw=lw||hn(dn().mark((function e(t){var n,r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zZ(10),r=t.password?t.hashFunction(JSON.stringify(t.password)):void 0,a={id:Bw,context:pw,key:Gw,data:{token:n,instanceToken:t.token,passwordHash:r},_deleted:!1,_meta:qZ(),_rev:"",_attachments:{}},e.next=5,t.internalStore.bulkWrite([{document:a}],"internal-add-storage-token");case 5:if(!(o=e.sent).success[Bw]){e.next=8;break}return e.abrupt("return",o.success[Bw]);case 8:if(!(i=RZ(o.error[Bw])).isError||409!==i.status){e.next=15;break}if(g=i,!r||r===g.documentInDb.data.passwordHash){e.next=13;break}throw $y("DB1",{passwordHash:r,existingPasswordHash:g.documentInDb.data.passwordHash});case 13:return s=g.documentInDb,e.abrupt("return",RZ(s));case 15:throw i;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(this.asRxDatabase).catch((function(e){return i.startupErrors.push(e)})),this.storageToken=this.storageTokenDocument.then((function(e){return e.data.token})).catch((function(e){return i.startupErrors.push(e)})))}var a=r.prototype;return a.$emit=function(e){this.emittedEventBulkIds.has(e.id)||(this.emittedEventBulkIds.add(e.id),this.eventBulks$.next(e))},a.removeCollectionDoc=function(t,n){return(e=e||hn(dn().mark((function e(t,n){var r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GG(this.internalStore,bw(kw(t,n),hw));case 2:if(r=e.sent){e.next=5;break}throw $y("SNH",{name:t,schema:n});case 5:return(a=RG(r))._deleted=!0,e.next=9,this.internalStore.bulkWrite([{document:a,previous:r}],"rx-database-remove-collection");case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},a.addCollections=function(e){return(t=t||hn(dn().mark((function e(t){var n,r,a,o,i,g,s,c=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a={},o=[],i={},Object.entries(t).forEach((function(e){var t=Ge(e,2),n=t[0],g=t[1],s=n,l=g.schema;r[s]=l;var u=zG(l,c.hashFunction);if(a[s]=u,c.collections[n])throw $y("DB3",{name:n});var f=kw(n,l),I={id:bw(f,hw),key:f,context:hw,data:{name:s,schemaHash:u.hash,schema:u.jsonSchema,version:u.version,connectedStorages:[]},_deleted:!1,_meta:qZ(),_rev:"",_attachments:{}};o.push({document:I});var C=Object.assign({},g,{name:s,schema:u,database:c}),d=xy(g);d.database=c,d.name=n,av("preCreateRxCollection",d),C.conflictHandler=d.conflictHandler,i[s]=C})),e.next=7,this.internalStore.bulkWrite(o,"rx-database-add-collection");case 7:return g=e.sent,e.next=10,$w(this);case 10:return Object.entries(g.error).forEach((function(e){var t=Ge(e,2),n=(t[0],t[1]);if(409!==n.status)throw $y("DB12",{database:c.name,writeError:n});var o=RZ(n.documentInDb),i=o.data.name,g=a[i];if(o.data.schemaHash!==g.hash)throw $y("DB6",{database:c.name,collection:i,previousSchemaHash:o.data.schemaHash,schemaHash:g.hash,previousSchema:o.data.schema,schema:RZ(r[i])})})),s={},e.next=14,Promise.all(Object.keys(t).map((function(e){return(n=n||hn(dn().mark((function e(t){var n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i[t],e.next=3,Ew(n);case 3:r=e.sent,s[t]=r,c.collections[t]=r,c[t]||Object.defineProperty(c,t,{get:function(){return c.collections[t]}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},a.lockedRun=function(e){return this.idleQueue.wrapCall(e)},a.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},a.exportJSON=function(e){throw jZ("json-dump")},a.importJSON=function(e){throw jZ("json-dump")},a.backup=function(e){throw jZ("backup")},a.leaderElector=function(){throw jZ("leader-election")},a.isLeader=function(){throw jZ("leader-election")},a.waitForLeadership=function(){throw jZ("leader-election")},a.migrationStates=function(){throw jZ("migration")},a.destroy=function(){return(n=n||hn(dn().mark((function e(){var t=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return",FZ);case 2:return this.destroyed=!0,e.next=5,ov("preDestroyRxDatabase",this);case 5:if(this.eventBulks$.complete(),this._subs.map((function(e){return e.unsubscribe()})),"pseudoInstance"!==this.name){e.next=10;break}return e.abrupt("return",FZ);case 10:return e.abrupt("return",this.requestIdlePromise().then((function(){return Promise.all(t.onDestroy.map((function(e){return e()})))})).then((function(){return Promise.all(Object.keys(t.collections).map((function(e){return t.collections[e]})).map((function(e){return e.destroy()})))})).then((function(){return t.internalStore.close()})).then((function(){return Qw.delete(t.name)})).then((function(){return!0})));case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},a.remove=function(){var e=this;return this.destroy().then((function(){return function(e,t){return(Lw=Lw||hn(dn().mark((function e(t,n){var r,a,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zZ(10),e.next=3,_w(r,n,t,{},!1);case 3:return a=e.sent,e.next=6,yw(n.statics,a);case 6:return o=e.sent,i=new Set,o.forEach((function(e){return i.add(e.data.name)})),g=Array.from(i),e.next=12,Promise.all(g.map((function(e){return ww(n,a,r,t,e)})));case 12:return e.next=14,ov("postRemoveRxDatabase",{databaseName:t,storage:n});case 14:return e.next=16,a.remove();case 16:return e.abrupt("return",g);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(e.name,e.storage)}))},wy(r,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),r}();function _w(e,t,n,r,a,o){return(Dw=Dw||hn(dn().mark((function e(t,n,r,a,o,i){var g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:ZG,schema:mw,options:a,multiInstance:o,password:i,devMode:Qy.isDevMode()});case 2:return g=e.sent,e.abrupt("return",g);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qw(e){var t=e.storage,n=e.instanceCreationOptions,r=e.name,a=e.password,o=e.multiInstance,i=void 0===o||o,g=e.eventReduce,s=void 0!==g&&g,c=e.ignoreDuplicate,l=void 0!==c&&c,u=e.options,f=void 0===u?{}:u,I=e.cleanupPolicy,C=e.allowSlowCount,d=void 0!==C&&C,A=e.localDocuments,h=void 0!==A&&A,p=e.hashFunction,m=void 0===p?bG:p;av("preCreateRxDatabase",{storage:t,instanceCreationOptions:n,name:r,password:a,multiInstance:i,eventReduce:s,ignoreDuplicate:l,options:f,localDocuments:h}),l||function(e){if(Qw.has(e))throw $y("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(r),Qw.add(r);var b=zZ(10);return _w(b,t,r,n,i,a).catch((function(e){throw Qw.delete(r),e})).then((function(e){var o=new Pw(r,b,t,n,a,i,s,f,e,m,I,d);return ov("createRxDatabase",{database:o,creator:{storage:t,instanceCreationOptions:n,name:r,password:a,multiInstance:i,eventReduce:s,ignoreDuplicate:l,options:f,localDocuments:h}}).then((function(){return o}))}))}function $w(e){return(Uw=Uw||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storageToken;case 2:if(!t.startupErrors[0]){e.next=4;break}throw t.startupErrors[0];case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eW={RxSchema:MG.prototype,RxDocument:FG,RxQuery:fw.prototype,RxCollection:Kw.prototype,RxDatabase:Pw.prototype},tW=new Set,nW=new Set;var rW,aW,oW={UT1:"given name is no string or empty",UT2:"collection- and database-names must match the regex to be compatible with couchdb databases.\n    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'",UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB8:"RxDatabase.create(): A RxDatabase with the same name and adapter already exists.\nMake sure to use this combination only once or set ignoreDuplicate to true if you do this intentional",DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_P2P_PEER:"RxReplication P2P Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",DXE1:"The dexie.js RxStorage does not support boolean indexes, see https://rxdb.info/rx-storage-dexie.html#boolean-index",SNH:"This should never happen"};var iW,gW=new(KG(FG));function sW(){if(!iW){var e=Object.getOwnPropertyNames(gW),t=Object.getOwnPropertyNames(FG);iW=[].concat(We(e),We(t),["deleted","synced"])}return iW}function cW(e){var t=nG(e.primaryKey);function n(e,n,r){if("string"!==typeof e||"object"!==typeof n||Array.isArray(n)||function(e){if("_deleted"!==e){if(["properties"].includes(e))throw $y("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",n=new RegExp(t);if("_id"!==e&&!e.match(n))throw $y("SC1",{regex:t,fieldName:e})}}(e),n.hasOwnProperty("item")&&"array"!==n.type)throw $y("SC2",{fieldName:e});if(n.hasOwnProperty("required")&&"boolean"===typeof n.required)throw $y("SC24",{fieldName:e});if(n.hasOwnProperty("ref"))if(Array.isArray(n.type)){if(n.type.length>2||!n.type.includes("string")||!n.type.includes("null"))throw $y("SC4",{fieldName:e})}else switch(n.type){case"string":break;case"array":if(!n.items||!n.items.type||"string"!==n.items.type)throw $y("SC3",{fieldName:e});break;default:throw $y("SC4",{fieldName:e})}var a=r.split(".").length>=2;if(a){if(n.primary)throw $y("SC6",{path:r,primary:n.primary});if(n.default)throw $y("SC7",{path:r})}if(!a){if("_id"===e&&"_id"!==t)throw $y("COL2",{fieldName:e});if("_"===e.charAt(0)){if("_id"===e||"_deleted"===e)return;throw $y("SC8",{fieldName:e})}}}return function e(t,r){t&&"object"===typeof t&&Object.keys(t).forEach((function(a){var o=t[a];t.properties||!o||"object"!==typeof o||Array.isArray(t)||n(a,o,r);var i=r;"properties"!==a&&(i=i+"."+a),e(o,i)}))}(e,""),!0}function lW(e){for(var t=e.split("."),n="",r=0;r<t.length;r+=1)n="[]"!==t[r]?n.concat(".properties.".concat(t[r])):n.concat(".items");return LZ(n)}function uW(e){e&&Object.entries(e).forEach((function(e){var t=Ge(e,2),n=t[0],r=t[1];if("string"!==typeof n)throw ev("COL14",{name:n});if(n.startsWith("_"))throw ev("COL15",{name:n});if("function"!==typeof r)throw ev("COL16",{name:n,type:typeof n});if(function(){if(!rW){var e=new Kw,t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));rW=[].concat(We(t),We(n))}return rW}().includes(n)||sW().includes(n))throw $y("COL17",{name:n})}))}function fW(e,t){if("object"!==typeof t||Array.isArray(t))throw ev("COL11",{schema:e});var n=function(e){var t=e.version?e.version:0,n=0;return new Array(t).fill(0).map((function(){return n++}))}(e);if(n.length!==Object.keys(t).length)throw $y("COL12",{have:Object.keys(t),should:n});return n.map((function(e){return{v:e,s:t[e+1]}})).filter((function(e){return"function"!==typeof e.s})).forEach((function(t){throw ev("COL13",{version:t.v,type:typeof t,schema:e})})),!0}function IW(e){if(function(){if(!aW){var e=new Pw("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));aW=[].concat(We(t),We(n)),e.destroy()}return aW}().includes(e.name))throw $y("DB5",{name:e.name});AW(e.name)}var CW="^[a-z][_$a-z0-9\\-]*$",dW=new RegExp(CW);function AW(e){if("string"!==typeof e||0===e.length)throw ev("UT1",{name:e});if(UZ(e))return!0;if(!e.match(dW)&&":memory:"!==e)throw $y("UT2",{regex:CW,givenName:e});return!0}var hW="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,pW=Object.keys,mW=Array.isArray;function bW(e,t){return"object"!=typeof t||pW(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||hW.Promise||(hW.Promise=Promise);var yW=Object.getPrototypeOf,vW={}.hasOwnProperty;function ZW(e,t){return vW.call(e,t)}function GW(e,t){"function"==typeof t&&(t=t(yW(e))),("undefined"==typeof Reflect?pW:Reflect.ownKeys)(t).forEach((function(n){kW(e,n,t[n])}))}var BW=Object.defineProperty;function kW(e,t,n,r){BW(e,t,bW(n&&ZW(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function SW(e){return{from:function(t){return e.prototype=Object.create(t.prototype),kW(e.prototype,"constructor",e),{extend:GW.bind(null,e.prototype)}}}}var wW=Object.getOwnPropertyDescriptor;function WW(e,t){var n;return wW(e,t)||(n=yW(e))&&WW(n,t)}var RW=[].slice;function VW(e,t,n){return RW.call(e,t,n)}function XW(e,t){return t(e)}function JW(e){if(!e)throw new Error("Assertion Failed")}function xW(e){hW.setImmediate?setImmediate(e):setTimeout(e,0)}function YW(e,t){return e.reduce((function(e,n,r){var a=t(n,r);return a&&(e[a[0]]=a[1]),e}),{})}function NW(e,t){if(ZW(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,a=t.length;r<a;++r){var o=NW(e,t[r]);n.push(o)}return n}var i=t.indexOf(".");if(-1!==i){var g=e[t.substr(0,i)];return void 0===g?void 0:NW(g,t.substr(i+1))}}function HW(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){JW("string"!=typeof n&&"length"in n);for(var r=0,a=t.length;r<a;++r)HW(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var i=t.substr(0,o),g=t.substr(o+1);if(""===g)void 0===n?mW(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n;else{var s=e[i];s&&ZW(e,i)||(s=e[i]={}),HW(s,g,n)}}else void 0===n?mW(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function FW(e){var t={};for(var n in e)ZW(e,n)&&(t[n]=e[n]);return t}var KW=[].concat;function EW(e){return KW.apply([],e)}var TW="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(EW([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return hW[e]})),MW=TW.map((function(e){return hW[e]}));YW(TW,(function(e){return[e,!0]}));var zW=null;function DW(e){zW="undefined"!=typeof WeakMap&&new WeakMap;var t=LW(e);return zW=null,t}function LW(e){if(!e||"object"!=typeof e)return e;var t=zW&&zW.get(e);if(t)return t;if(mW(e)){t=[],zW&&zW.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(LW(e[n]))}else if(MW.indexOf(e.constructor)>=0)t=e;else{var a=yW(e);for(var o in t=a===Object.prototype?{}:Object.create(a),zW&&zW.set(e,t),e)ZW(e,o)&&(t[o]=LW(e[o]))}return t}var UW={}.toString;function jW(e){return UW.call(e).slice(8,-1)}var OW="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",QW="symbol"==typeof OW?function(e){var t;return null!=e&&(t=e[OW])&&t.apply(e)}:function(){return null},PW={};function _W(e){var t,n,r,a;if(1===arguments.length){if(mW(e))return e.slice();if(this===PW&&"string"==typeof e)return[e];if(a=QW(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var qW="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},$W="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function eR(e,t){$W=e,tR=t}var tR=function(){return!0},nR=!new Error("").stack;function rR(){if(nR)try{throw rR.arguments,new Error}catch(e){return e}return new Error}function aR(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(tR).map((function(e){return"\n"+e})).join("")):""}var oR=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],iR=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(oR),gR={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function sR(e,t){this._e=rR(),this.name=e,this.message=t}function cR(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function lR(e,t,n,r){this._e=rR(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=cR(e,t)}function uR(e,t){this._e=rR(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=cR(e,t)}SW(sR).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+aR(this._e,2))}},toString:function(){return this.name+": "+this.message}}),SW(lR).from(sR),SW(uR).from(sR);var fR=iR.reduce((function(e,t){return e[t]=t+"Error",e}),{}),IR=sR,CR=iR.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=rR(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=gR[t]||n,this.inner=null)}return SW(r).from(IR),e[t]=r,e}),{});CR.Syntax=SyntaxError,CR.Type=TypeError,CR.Range=RangeError;var dR=oR.reduce((function(e,t){return e[t+"Error"]=CR[t],e}),{}),AR=iR.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=CR[t]),e}),{});function hR(){}function pR(e){return e}function mR(e,t){return null==e||e===pR?t:function(n){return t(e(n))}}function bR(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function yR(e,t){return e===hR?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?bR(r,this.onsuccess):r),a&&(this.onerror=this.onerror?bR(a,this.onerror):a),void 0!==o?o:n}}function vR(e,t){return e===hR?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?bR(n,this.onsuccess):n),r&&(this.onerror=this.onerror?bR(r,this.onerror):r)}}function ZR(e,t){return e===hR?t:function(n){var r=e.apply(this,arguments);bW(n,r);var a=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?bR(a,this.onsuccess):a),o&&(this.onerror=this.onerror?bR(o,this.onerror):o),void 0===r?void 0===i?void 0:i:bW(r,i)}}function GR(e,t){return e===hR?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function BR(e,t){return e===hR?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}AR.ModifyError=lR,AR.DexieError=sR,AR.BulkError=uR;var kR={},SR=Ge("undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,yW(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,yW(t),e]}(),3),wR=SR[0],WR=SR[1],RR=SR[2],VR=WR&&WR.then,XR=wR&&wR.constructor,JR=!!RR,xR=!1,YR=RR?function(){RR.then(aV)}:hW.setImmediate?setImmediate.bind(null,aV):hW.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){aV(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(aV,0)},NR=function(e,t){LR.push([e,t]),FR&&(YR(),FR=!1)},HR=!0,FR=!0,KR=[],ER=[],TR=null,MR=pR,zR={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:wV,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{wV(e[0],e[1])}catch(e){}}))}},DR=zR,LR=[],UR=0,jR=[];function OR(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=hR,this._lib=!1;var t=this._PSD=DR;if($W&&(this._stackHolder=rR(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==kR)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&qR(this,this._value))}this._state=null,this._value=null,++t.ref,_R(this,e)}var QR={get:function(){var e=DR,t=CV;function n(n,r){var a=this,o=!e.global&&(e!==DR||t!==CV),i=o&&!pV(),g=new OR((function(t,g){eV(a,new PR(kV(n,e,o,i),kV(r,e,o,i),t,g,e))}));return $W&&rV(g,this),g}return n.prototype=kR,n},set:function(e){kW(this,"then",e&&e.prototype===kR?QR:{get:function(){return e},set:QR.set})}};function PR(e,t,n,r,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=a}function _R(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&oV();t&&"function"==typeof t.then?_R(e,(function(e,n){t instanceof OR?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,$R(e)),n&&iV()}}),qR.bind(null,e))}catch(t){qR(e,t)}}function qR(e,t){if(ER.push(t),null===e._state){var n=e._lib&&oV();t=MR(t),e._state=!1,e._value=t,$W&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((function(){var n=WW(t,"stack");t._promise=e,kW(t,"stack",{get:function(){return xR?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){KR.some((function(t){return t._value===e._value}))||KR.push(e)}(e),$R(e),n&&iV()}}function $R(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)eV(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===UR&&(++UR,NR((function(){0==--UR&&gV()}),[]))}function eV(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++UR,NR(tV,[n,e,t])}else e._listeners.push(t)}function tV(e,t,n){try{TR=t;var r,a=t._value;t._state?r=e(a):(ER.length&&(ER=[]),r=e(a),-1===ER.indexOf(a)&&function(e){for(var t=KR.length;t;)if(KR[--t]._value===e._value)return void KR.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{TR=null,0==--UR&&gV(),--n.psd.ref||n.psd.finalize()}}function nV(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var a,o,i=e._value;null!=i?(a=i.name||"Error",o=i.message||i,r=aR(i,0)):(a=i,o=""),t.push(a+(o?": "+o:"")+r)}return $W&&((r=aR(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&nV(e._prev,t,n)),t}function rV(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function aV(){oV()&&iV()}function oV(){var e=HR;return HR=!1,FR=!1,e}function iV(){var e,t,n;do{for(;LR.length>0;)for(e=LR,LR=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(LR.length>0);HR=!0,FR=!0}function gV(){var e=KR;KR=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=jR.slice(0),n=t.length;n;)t[--n]()}function sV(e){return new OR(kR,!1,e)}function cV(e,t){var n=DR;return function(){var r=oV(),a=DR;try{return vV(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{vV(a,!1),r&&iV()}}}GW(OR.prototype,{then:QR,_then:function(e,t){eV(this,new PR(null,null,e,t,DR))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):sV(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):sV(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),sV(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{xR=!0;var e=nV(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{xR=!1}}},timeout:function(e,t){var n=this;return e<1/0?new OR((function(r,a){var o=setTimeout((function(){return a(new CR.Timeout(t))}),e);n.then(r,a).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&kW(OR.prototype,Symbol.toStringTag,"Dexie.Promise"),zR.env=ZV(),GW(OR,{all:function(){var e=_W.apply(null,arguments).map(mV);return new OR((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(a,o){return OR.resolve(a).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof OR)return e;if(e&&"function"==typeof e.then)return new OR((function(t,n){e.then(t,n)}));var t=new OR(kR,!0,e);return rV(t,TR),t},reject:sV,race:function(){var e=_W.apply(null,arguments).map(mV);return new OR((function(t,n){e.map((function(e){return OR.resolve(e).then(t,n)}))}))},PSD:{get:function(){return DR},set:function(e){return DR=e}},totalEchoes:{get:function(){return CV}},newPSD:AV,usePSD:GV,scheduler:{get:function(){return NR},set:function(e){NR=e}},rejectionMapper:{get:function(){return MR},set:function(e){MR=e}},follow:function(e,t){return new OR((function(n,r){return AV((function(t,n){var r=DR;r.unhandleds=[],r.onunhandled=n,r.finalize=bR((function(){var e=this;!function(e){jR.push((function t(){e(),jR.splice(jR.indexOf(t),1)})),++UR,NR((function(){0==--UR&&gV()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),XR&&(XR.allSettled&&kW(OR,"allSettled",(function(){var e=_W.apply(null,arguments).map(mV);return new OR((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,a){return OR.resolve(e).then((function(e){return r[a]={status:"fulfilled",value:e}}),(function(e){return r[a]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),XR.any&&"undefined"!=typeof AggregateError&&kW(OR,"any",(function(){var e=_W.apply(null,arguments).map(mV);return new OR((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach((function(e,o){return OR.resolve(e).then((function(e){return t(e)}),(function(e){a[o]=e,--r||n(new AggregateError(a))}))}))}))})));var lV={awaits:0,echoes:0,id:0},uV=0,fV=[],IV=0,CV=0,dV=0;function AV(e,t,n,r){var a=DR,o=Object.create(a);o.parent=a,o.ref=0,o.global=!1,o.id=++dV;var i=zR.env;o.env=JR?{Promise:OR,PromiseProp:{value:OR,configurable:!0,writable:!0},all:OR.all,race:OR.race,allSettled:OR.allSettled,any:OR.any,resolve:OR.resolve,reject:OR.reject,nthen:SV(i.nthen,o),gthen:SV(i.gthen,o)}:{},t&&bW(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=GV(o,e,n,r);return 0===o.ref&&o.finalize(),g}function hV(){return lV.id||(lV.id=++uV),++lV.awaits,lV.echoes+=100,lV.id}function pV(){return!!lV.awaits&&(0==--lV.awaits&&(lV.id=0),lV.echoes=100*lV.awaits,!0)}function mV(e){return lV.echoes&&e&&e.constructor===XR?(hV(),e.then((function(e){return pV(),e}),(function(e){return pV(),WV(e)}))):e}function bV(e){++CV,lV.echoes&&0!=--lV.echoes||(lV.echoes=lV.id=0),fV.push(DR),vV(e,!0)}function yV(){var e=fV[fV.length-1];fV.pop(),vV(e,!1)}function vV(e,t){var n=DR;if((t?!lV.echoes||IV++&&e===DR:!IV||--IV&&e===DR)||BV(t?bV.bind(null,e):yV),e!==DR&&(DR=e,n===zR&&(zR.env=ZV()),JR)){var r=zR.env.Promise,a=e.env;WR.then=a.nthen,r.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(hW,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function ZV(){var e=hW.Promise;return JR?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(hW,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:WR.then,gthen:e.prototype.then}:{}}function GV(e,t,n,r,a){var o=DR;try{return vV(e,!0),t(n,r,a)}finally{vV(o,!1)}}function BV(e){VR.call(wR,e)}function kV(e,t,n,r){return"function"!=typeof e?e:function(){var a=DR;n&&hV(),vV(t,!0);try{return e.apply(this,arguments)}finally{vV(a,!1),r&&BV(pV)}}}function SV(e,t){return function(n,r){return e.call(this,kV(n,t),kV(r,t))}}function wV(e,t){var n;try{n=t.onuncatched(e)}catch(o){}if(!1!==n)try{var r,a={promise:t,reason:e};if(hW.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),bW(r,a)):hW.CustomEvent&&bW(r=new CustomEvent("unhandledrejection",{detail:a}),a),r&&hW.dispatchEvent&&(dispatchEvent(r),!hW.PromiseRejectionEvent&&hW.onunhandledrejection))try{hW.onunhandledrejection(r)}catch(o){}$W&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(o){}}-1===(""+VR).indexOf("[native code]")&&(hV=pV=hR);var WV=OR.reject;function RV(e,t,n,r){if(e.idbdb&&(e._state.openComplete||DR.letThrough||e._vip)){var a=e._createTransaction(t,n,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===fR.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return RV(e,t,n,r)}))):WV(a)}return a._promise(t,(function(e,t){return AV((function(){return DR.trans=a,r(e,t,a)}))})).then((function(e){return a._completion.then((function(){return e}))}))}if(e._state.openComplete)return WV(new CR.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return WV(new CR.DatabaseClosed);e.open().catch(hR)}return e._state.dbReadyPromise.then((function(){return RV(e,t,n,r)}))}var VV=String.fromCharCode(65535),XV="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",JV=[],xV="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),YV=xV,NV=xV,HV=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function FV(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var KV={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function EV(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=DW(t))[e],t}}function TV(){throw CR.Type()}var MV=function(){function e(){Z(this,e)}return B(e,[{key:"_trans",value:function(e,t,n){var r=this._tx||DR.trans,a=this.name;function o(e,n,r){if(!r.schema[a])throw new CR.NotFound("Table "+a+" not part of transaction");return t(r.idbtrans,r)}var i=oV();try{return r&&r.db===this.db?r===DR.trans?r._promise(e,o,n):AV((function(){return r._promise(e,o,n)}),{trans:r,transless:DR.transless||DR}):RV(this.db,e,[this.name],o)}finally{i&&iV()}}},{key:"get",value:function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)}},{key:"where",value:function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(mW(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=pW(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==VV)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&$W&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));var r=this.schema.idxByName,a=this.db._deps.indexedDB;function o(e,t){try{return 0===a.cmp(e,t)}catch(e){return!1}}var i=t.reduce((function(t,n){var a=Ge(t,2),i=a[0],g=a[1],s=r[n],c=e[n];return[i||s,i||!s?FV(g,s&&s.multi?function(e){var t=NW(e,n);return mW(t)&&t.some((function(e){return o(c,e)}))}:function(e){return o(c,NW(e,n))}):g]}),[null,null]),g=Ge(i,2),s=g[0],c=g[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")}},{key:"filter",value:function(e){return this.toCollection().and(e)}},{key:"count",value:function(e){return this.toCollection().count(e)}},{key:"offset",value:function(e){return this.toCollection().offset(e)}},{key:"limit",value:function(e){return this.toCollection().limit(e)}},{key:"each",value:function(e){return this.toCollection().each(e)}},{key:"toArray",value:function(e){return this.toCollection().toArray(e)}},{key:"toCollection",value:function(){return new this.db.Collection(new this.db.WhereClause(this))}},{key:"orderBy",value:function(e){return new this.db.Collection(new this.db.WhereClause(this,mW(e)?"[".concat(e.join("+"),"]"):e))}},{key:"reverse",value:function(){return this.toCollection().reverse()}},{key:"mapToClass",value:function(e){var t=this.db,n=this.name;this.schema.mappedClass=e,e.prototype instanceof TV&&(e=function(e){d(a,e);var r=p(a);function a(){return Z(this,a),r.apply(this,arguments)}return B(a,[{key:"db",get:function(){return t}},{key:"table",value:function(){return n}}]),a}(e));for(var r=new Set,a=e.prototype;a;a=yW(a))Object.getOwnPropertyNames(a).forEach((function(e){return r.add(e)}));var o=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var a in t)if(!r.has(a))try{n[a]=t[a]}catch(o){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),e}},{key:"defineClass",value:function(){return this.mapToClass((function(e){bW(this,e)}))}},{key:"add",value:function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,i=e;return o&&a&&(i=EV(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]})})).then((function(e){return e.numFailures?OR.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{HW(e,o,t)}catch(e){}return t}))}},{key:"update",value:function(e,t){if("object"!=typeof e||mW(e))return this.where(":id").equals(e).modify(t);var n=NW(e,this.schema.primKey.keyPath);if(void 0===n)return WV(new CR.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?pW(t).forEach((function(n){HW(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}},{key:"put",value:function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,i=e;return o&&a&&(i=EV(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?OR.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{HW(e,o,t)}catch(e){}return t}))}},{key:"delete",value:function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?OR.reject(e.failures[0]):void 0}))}},{key:"clear",value:function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:KV})})).then((function(e){return e.numFailures?OR.reject(e.failures[0]):void 0}))}},{key:"bulkGet",value:function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))}},{key:"bulkAdd",value:function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,i=n.auto,g=n.keyPath;if(g&&a)throw new CR.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new CR.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=g&&i?e.map(EV(g)):e;return r.core.mutate({trans:t,type:"add",keys:a,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,a=e.lastResult,i=e.failures;if(0===t)return o?n:a;throw new uR("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),i)}))}))}},{key:"bulkPut",value:function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,i=n.auto,g=n.keyPath;if(g&&a)throw new CR.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new CR.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=g&&i?e.map(EV(g)):e;return r.core.mutate({trans:t,type:"put",keys:a,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,a=e.lastResult,i=e.failures;if(0===t)return o?n:a;throw new uR("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),i)}))}))}},{key:"bulkDelete",value:function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,a=e.lastResult,o=e.failures;if(0===r)return a;throw new uR("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),o)}))}}]),e}();function zV(e){var t={},n=function(n,r){if(r){for(var a=arguments.length,o=new Array(a-1);--a;)o[a-1]=arguments[a];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,a=arguments.length;r<a;++r)o(arguments[r]);return n;function o(e,r,a){if("object"==typeof e)return function(e){pW(e).forEach((function(t){var n=e[t];if(mW(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new CR.InvalidArgument("Invalid event config");var r=o(t,pR,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){xW((function(){e.apply(null,t)}))}))}))}}))}(e);r||(r=GR),a||(a=hR);var i={subscribers:[],fire:a,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=r(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(r,a)}};return t[e]=n[e]=i,i}}function DV(e,t){return SW(t).from({prototype:e}),t}function LV(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function UV(e,t){e.filter=FV(e.filter,t)}function jV(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return FV(r(),t())}:t,e.justLimit=n&&!r}function OV(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new CR.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function QV(e,t,n){var r=OV(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function PV(e,t,n,r){var a=e.replayFilter?FV(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},i=function(e,n,r){if(!a||a(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var i=n.primaryKey,g=""+i;"[object ArrayBuffer]"===g&&(g=""+new Uint8Array(i)),ZW(o,g)||(o[g]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(i,n),_V(QV(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return _V(QV(e,r,n),FV(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function _V(e,t,n,r){var a=cV(r?function(e,t,a){return n(r(e),t,a)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=hR}),(function(t){e.fail(t),n=hR}))||a(e.value,e,(function(e){return n=e})),n()}))}))}function qV(e,t){try{var n=$V(e),r=$V(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,o=0;o<a;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(eX(e),eX(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,o=0;o<a;++o){var i=qV(e[o],t[o]);if(0!==i)return i}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function $V(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=jW(e);return"ArrayBuffer"===n?"binary":n}function eX(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var tX=function(){function e(){Z(this,e)}return B(e,[{key:"_read",value:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,WV.bind(null,n.error)):n.table._trans("readonly",e).then(t)}},{key:"_write",value:function(e){var t=this._ctx;return t.error?t.table._trans(null,WV.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}},{key:"_addAlgorithm",value:function(e){var t=this._ctx;t.algorithm=FV(t.algorithm,e)}},{key:"_iterate",value:function(e,t){return PV(this._ctx,e,t,this._ctx.table.core)}},{key:"clone",value:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&bW(n,e),t._ctx=n,t}},{key:"raw",value:function(){return this._ctx.valueMapper=null,this}},{key:"each",value:function(e){var t=this._ctx;return this._read((function(n){return PV(t,e,n,t.table.core)}))}},{key:"count",value:function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(LV(n,!0))return r.count({trans:e,query:{index:OV(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var a=0;return PV(n,(function(){return++a,!1}),e,r).then((function(){return a}))})).then(e)}},{key:"sortBy",value:function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var i="next"===this._ctx.dir?1:-1;function g(e,t){var n=o(e,a),r=o(t,a);return n<r?-i:n>r?i:0}return this.toArray((function(e){return e.sort(g)})).then(t)}},{key:"toArray",value:function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&LV(n,!0)&&n.limit>0){var r=n.valueMapper,a=OV(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return PV(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)}},{key:"offset",value:function(e){var t=this._ctx;return e<=0||(t.offset+=e,LV(t)?jV(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):jV(t,(function(){var t=e;return function(){return--t<0}}))),this}},{key:"limit",value:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),jV(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}},{key:"until",value:function(e,t){return UV(this._ctx,(function(n,r,a){return!e(n.value)||(r(a),t)})),this}},{key:"first",value:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}},{key:"last",value:function(e){return this.reverse().first(e)}},{key:"filter",value:function(e){var t,n;return UV(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=FV(t.isMatch,n),this}},{key:"and",value:function(e){return this.filter(e)}},{key:"or",value:function(e){return new this.db.WhereClause(this._ctx.table,e,this)}},{key:"reverse",value:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}},{key:"desc",value:function(){return this.reverse()}},{key:"eachKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}},{key:"eachUniqueKey",value:function(e){return this._ctx.unique="unique",this.eachKey(e)}},{key:"eachPrimaryKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}},{key:"keys",value:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}},{key:"primaryKeys",value:function(e){var t=this._ctx;if("next"===t.dir&&LV(t,!0)&&t.limit>0)return this._read((function(e){var n=OV(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}},{key:"uniqueKeys",value:function(e){return this._ctx.unique="unique",this.keys(e)}},{key:"firstKey",value:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}},{key:"lastKey",value:function(e){return this.reverse().firstKey(e)}},{key:"distinct",value:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return UV(this._ctx,(function(e){var t=e.primaryKey.toString(),r=ZW(n,t);return n[t]=!0,!r})),this}},{key:"modify",value:function(e){var t=this,n=this._ctx;return this._write((function(r){var a;if("function"==typeof e)a=e;else{var o=pW(e),i=o.length;a=function(t){for(var n=!1,r=0;r<i;++r){var a=o[r],g=e[a];NW(t,a)!==g&&(HW(t,a,g),n=!0)}return n}}var g=n.table.core,s=g.schema.primaryKey,c=s.outbound,l=s.extractKey,u=t.db._options.modifyChunkSize||200,f=[],I=0,C=[],d=function(e,t){var n=t.failures,r=t.numFailures;I+=e-r;var a,o=Xe(pW(n));try{for(o.s();!(a=o.n()).done;){var i=a.value;f.push(n[i])}}catch(xQ){o.e(xQ)}finally{o.f()}};return t.clone().primaryKeys().then((function(t){return function o(i){var s=Math.min(u,t.length-i);return g.getMany({trans:r,keys:t.slice(i,i+s),cache:"immutable"}).then((function(f){for(var I=[],C=[],A=c?[]:null,h=[],p=0;p<s;++p){var m=f[p],b={value:DW(m),primKey:t[i+p]};!1!==a.call(b,b.value,b)&&(null==b.value?h.push(t[i+p]):c||0===qV(l(m),l(b.value))?(C.push(b.value),c&&A.push(t[i+p])):(h.push(t[i+p]),I.push(b.value)))}var y=LV(n)&&n.limit===1/0&&("function"!=typeof e||e===nX)&&{index:n.index,range:n.range};return Promise.resolve(I.length>0&&g.mutate({trans:r,type:"add",values:I}).then((function(e){for(var t in e.failures)h.splice(parseInt(t),1);d(I.length,e)}))).then((function(){return(C.length>0||y&&"object"==typeof e)&&g.mutate({trans:r,type:"put",keys:A,values:C,criteria:y,changeSpec:"function"!=typeof e&&e}).then((function(e){return d(C.length,e)}))})).then((function(){return(h.length>0||y&&e===nX)&&g.mutate({trans:r,type:"delete",keys:h,criteria:y}).then((function(e){return d(h.length,e)}))})).then((function(){return t.length>i+s&&o(i+u)}))}))}(0).then((function(){if(f.length>0)throw new lR("Error modifying one or more objects",f,I,C);return t.length}))}))}))}},{key:"delete",value:function(){var e=this._ctx,t=e.range;return LV(e)&&(e.isPrimKey&&!NV||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new lR("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(nX)}}]),e}(),nX=function(e,t){return t.value=null};function rX(e,t){return e<t?-1:e===t?0:1}function aX(e,t){return e>t?-1:e===t?0:1}function oX(e,t,n){var r=e instanceof uX?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function iX(e){return new e.Collection(e,(function(){return lX("")})).limit(0)}function gX(e,t,n,r,a,o){for(var i=Math.min(e.length,r.length),g=-1,s=0;s<i;++s){var c=t[s];if(c!==r[s])return a(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):a(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):g>=0?e.substr(0,g)+t[g]+n.substr(g+1):null;a(e[s],c)<0&&(g=s)}return i<r.length&&"next"===o?e+n.substr(e.length):i<e.length&&"prev"===o?e.substr(0,n.length):g<0?null:e.substr(0,g)+r[g]+n.substr(g+1)}function sX(e,t,n,r){var a,o,i,g,s,c,l,u=n.length;if(!n.every((function(e){return"string"==typeof e})))return oX(e,"String expected.");function f(e){a=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),i="next"===e?rX:aX;var t=n.map((function(e){return{lower:o(e),upper:a(e)}})).sort((function(e,t){return i(e.lower,t.lower)}));g=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}f("next");var I=new e.Collection(e,(function(){return cX(g[0],s[u-1]+r)}));I._ondirectionchange=function(e){f(e)};var C=0;return I._addAlgorithm((function(e,n,r){var a=e.key;if("string"!=typeof a)return!1;var f=o(a);if(t(f,s,C))return!0;for(var I=null,d=C;d<u;++d){var A=gX(a,f,g[d],s[d],i,c);null===A&&null===I?C=d+1:(null===I||i(I,A)>0)&&(I=A)}return n(null!==I?function(){e.continue(I+l)}:r),!1})),I}function cX(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function lX(e){return{type:1,lower:e,upper:e}}var uX=function(){function e(){Z(this,e)}return B(e,[{key:"Collection",get:function(){return this._ctx.table.db.Collection}},{key:"between",value:function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?iX(this):new this.Collection(this,(function(){return cX(e,t,!n,!r)}))}catch(e){return oX(this,XV)}}},{key:"equals",value:function(e){return null==e?oX(this,XV):new this.Collection(this,(function(){return lX(e)}))}},{key:"above",value:function(e){return null==e?oX(this,XV):new this.Collection(this,(function(){return cX(e,void 0,!0)}))}},{key:"aboveOrEqual",value:function(e){return null==e?oX(this,XV):new this.Collection(this,(function(){return cX(e,void 0,!1)}))}},{key:"below",value:function(e){return null==e?oX(this,XV):new this.Collection(this,(function(){return cX(void 0,e,!1,!0)}))}},{key:"belowOrEqual",value:function(e){return null==e?oX(this,XV):new this.Collection(this,(function(){return cX(void 0,e)}))}},{key:"startsWith",value:function(e){return"string"!=typeof e?oX(this,"String expected."):this.between(e,e+VV,!0,!0)}},{key:"startsWithIgnoreCase",value:function(e){return""===e?this.startsWith(e):sX(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],VV)}},{key:"equalsIgnoreCase",value:function(e){return sX(this,(function(e,t){return e===t[0]}),[e],"")}},{key:"anyOfIgnoreCase",value:function(){var e=_W.apply(PW,arguments);return 0===e.length?iX(this):sX(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")}},{key:"startsWithAnyOfIgnoreCase",value:function(){var e=_W.apply(PW,arguments);return 0===e.length?iX(this):sX(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,VV)}},{key:"anyOf",value:function(){var e=this,t=_W.apply(PW,arguments),n=this._cmp;try{t.sort(n)}catch(t){return oX(this,XV)}if(0===t.length)return iX(this);var r=new this.Collection(this,(function(){return cX(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm((function(e,r,o){for(var i=e.key;n(i,t[a])>0;)if(++a===t.length)return r(o),!1;return 0===n(i,t[a])||(r((function(){e.continue(t[a])})),!1)})),r}},{key:"notEqual",value:function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}},{key:"noneOf",value:function(){var e=_W.apply(PW,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return oX(this,XV)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}},{key:"inAnyRange",value:function(e,t){var n=this,r=this._cmp,a=this._ascending,o=this._descending,i=this._min,g=this._max;if(0===e.length)return iX(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0})))return oX(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",CR.InvalidArgument);var s,c=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers,u=a;function f(e,t){return u(e[0],t[0])}try{s=e.reduce((function(e,t){for(var n=0,a=e.length;n<a;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=i(o[0],t[0]),o[1]=g(o[1],t[1]);break}}return n===a&&e.push(t),e}),[]),s.sort(f)}catch(e){return oX(this,XV)}var I=0,C=l?function(e){return a(e,s[I][1])>0}:function(e){return a(e,s[I][1])>=0},d=c?function(e){return o(e,s[I][0])>0}:function(e){return o(e,s[I][0])>=0},A=C,h=new this.Collection(this,(function(){return cX(s[0][0],s[s.length-1][1],!c,!l)}));return h._ondirectionchange=function(e){"next"===e?(A=C,u=a):(A=d,u=o),s.sort(f)},h._addAlgorithm((function(e,t,r){for(var o=e.key;A(o);)if(++I===s.length)return t(r),!1;return!!function(e){return!C(e)&&!d(e)}(o)||(0===n._cmp(o,s[I][1])||0===n._cmp(o,s[I][0])||t((function(){u===a?e.continue(s[I][0]):e.continue(s[I][1])})),!1)})),h}},{key:"startsWithAnyOf",value:function(){var e=_W.apply(PW,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?iX(this):this.inAnyRange(e.map((function(e){return[e,e+VV]}))):oX(this,"startsWithAnyOf() only works with strings")}}]),e}();function fX(e){return cV((function(t){return IX(t),e(t.target.error),!1}))}function IX(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var CX=zV(null,"storagemutated"),dX=function(){function e(){Z(this,e)}return B(e,[{key:"_lock",value:function(){return JW(!DR.global),++this._reculock,1!==this._reculock||DR.global||(DR.lockOwnerFor=this),this}},{key:"_unlock",value:function(){if(JW(!DR.global),0==--this._reculock)for(DR.global||(DR.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{GV(e[1],e[0])}catch(e){}}return this}},{key:"_locked",value:function(){return this._reculock&&DR.lockOwnerFor!==this}},{key:"create",value:function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(JW(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new CR.DatabaseClosed(r);case"MissingAPIError":throw new CR.MissingAPI(r.message,r);default:throw new CR.OpenFailed(r)}if(!this.active)throw new CR.TransactionInactive;return JW(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=cV((function(n){IX(n),t._reject(e.error)})),e.onabort=cV((function(n){IX(n),t.active&&t._reject(new CR.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=cV((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&CX.storagemutated.fire(e.mutatedParts)})),this}},{key:"_promise",value:function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return WV(new CR.ReadOnly("Transaction is readonly"));if(!this.active)return WV(new CR.TransactionInactive);if(this._locked())return new OR((function(a,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,o)},DR])}));if(n)return AV((function(){var e=new OR((function(e,n){r._lock();var a=t(e,n,r);a&&a.then&&a.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var a=new OR((function(e,n){var a=t(e,n,r);a&&a.then&&a.then(e,n)}));return a._lib=!0,a}},{key:"_root",value:function(){return this.parent?this.parent._root():this}},{key:"waitFor",value:function(e){var t=this._root(),n=OR.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var a=t._waitingFor;return new OR((function(e,r){n.then((function(n){return t._waitingQueue.push(cV(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(cV(r.bind(null,e)))})).finally((function(){t._waitingFor===a&&(t._waitingFor=null)}))}))}},{key:"abort",value:function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new CR.Abort))}},{key:"table",value:function(e){var t=this._memoizedTables||(this._memoizedTables={});if(ZW(t,e))return t[e];var n=this.schema[e];if(!n)throw new CR.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}]),e}();function AX(e,t,n,r,a,o,i){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:o,src:(n&&!i?"&":"")+(r?"*":"")+(a?"++":"")+hX(t)}}function hX(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function pX(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:YW(n,(function(e){return[e.name,e]}))}}var mX=function(e){try{return e.only([[]]),mX=function(){return[[]]},[[]]}catch(e){return mX=function(){return VV},VV}};function bX(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return NW(t,e)}}(e):function(t){return NW(t,e)}}function yX(e){return[].slice.call(e)}var vX=0;function ZX(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function GX(e,t){var n=e._novip,r=t.db,a=function(e,t,n,r){var a=n.IDBKeyRange,o=(n.indexedDB,function(e,t){return t.reduce((function(e,t){var n=t.create;return v(v({},e),n(e))}),e)}(function(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,a=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!a):t.bound(n,r,!!a,!!o)}var a=function(e,t){var n=yX(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=mW(t),a=null==t,o={},i={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:a,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:bX(t)},indexes:yX(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,a=e.keyPath,i={name:t,compound:mW(a),keyPath:a,unique:n,multiEntry:r,extractKey:bX(a)};return o[ZX(a)]=i,i})),getIndexByKeyPath:function(e){return o[ZX(e)]}};return o[":id"]=i.primaryKey,null!=t&&(o[ZX(t)]=i.primaryKey),i}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=a.schema,i=a.hasGetAll,g=o.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,a=e.type,o=e.keys,i=e.values,g=e.range;return new Promise((function(e,s){e=cV(e);var c=n.objectStore(t),l=null==c.keyPath,u="put"===a||"add"===a;if(!u&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var f,I=(o||i||{length:1}).length;if(o&&i&&o.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(0===I)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var C=[],d=[],A=0,h=function(e){++A,IX(e)};if("deleteRange"===a){if(4===g.type)return e({numFailures:A,failures:d,results:[],lastResult:void 0});3===g.type?C.push(f=c.clear()):C.push(f=c.delete(r(g)))}else{var p=Ge(u?l?[i,o]:[i,null]:[o,null],2),m=p[0],b=p[1];if(u)for(var y=0;y<I;++y)C.push(f=b&&void 0!==b[y]?c[a](m[y],b[y]):c[a](m[y])),f.onerror=h;else for(var v=0;v<I;++v)C.push(f=c[a](m[v])),f.onerror=h}var Z=function(t){var n=t.target.result;C.forEach((function(e,t){return null!=e.error&&(d[t]=e.error)})),e({numFailures:A,failures:d,results:"delete"===a?o:C.map((function(e){return e.result})),lastResult:n})};f.onerror=function(e){h(e),Z(e)},f.onsuccess=Z}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,a){e=cV(e);for(var o,i=n.objectStore(t),g=r.length,s=new Array(g),c=0,l=0,u=function(t){var n=t.target;s[n._pos]=n.result,++l===c&&e(s)},f=fX(a),I=0;I<g;++I)null!=r[I]&&((o=i.get(r[I]))._pos=I,o.onsuccess=u,o.onerror=f,++c);0===c&&e(s)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,a){e=cV(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=fX(a)}))},query:function(e){return function(n){return new Promise((function(a,o){a=cV(a);var i=n.trans,g=n.values,s=n.limit,c=n.query,l=s===1/0?void 0:s,u=c.index,f=c.range,I=i.objectStore(t),C=u.isPrimaryKey?I:I.index(u.name),d=r(f);if(0===s)return a({result:[]});if(e){var A=g?C.getAll(d,l):C.getAllKeys(d,l);A.onsuccess=function(e){return a({result:e.target.result})},A.onerror=fX(o)}else{var h=0,p=g||!("openKeyCursor"in C)?C.openCursor(d):C.openKeyCursor(d),m=[];p.onsuccess=function(e){var t=p.result;return t?(m.push(g?t.value:t.primaryKey),++h===s?a({result:m}):void t.continue()):a({result:m})},p.onerror=fX(o)}}))}}(i),openCursor:function(e){var n=e.trans,a=e.values,o=e.query,i=e.reverse,g=e.unique;return new Promise((function(e,s){e=cV(e);var c=o.index,l=o.range,u=n.objectStore(t),f=c.isPrimaryKey?u:u.index(c.name),I=i?g?"prevunique":"prev":g?"nextunique":"next",C=a||!("openKeyCursor"in f)?f.openCursor(r(l),I):f.openKeyCursor(r(l),I);C.onerror=fX(s),C.onsuccess=cV((function(t){var r=C.result;if(r){r.___id=++vX,r.done=!1;var a=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var i=r.advance.bind(r),g=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=cV(s),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=cV(e),C.onerror=fX(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=g,e(t)}})),n=function(){if(C.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return C.onsuccess=cV((function(e){C.onsuccess=n,n()})),r.continue=a,r.continuePrimaryKey=o,r.advance=i,n(),t},e(r)}else e(null)}),s)}))},count:function(e){var n=e.query,a=e.trans,o=n.index,i=n.range;return new Promise((function(e,n){var g=a.objectStore(t),s=o.isPrimaryKey?g:g.index(o.name),c=r(i),l=c?s.count(c):s.count();l.onsuccess=cV((function(t){return e(t.target.result)})),l.onerror=fX(n)}))}}}(e)})),s={};return g.forEach((function(e){return s[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!s[e])throw new Error("Table '".concat(e,"' not found"));return s[e]},MIN_KEY:-1/0,MAX_KEY:mX(t),schema:o}}(t,a,r),e.dbcore));return{dbcore:o}}(n._middlewares,r,n._deps,t);n.core=a.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function BX(e,t,n,r){var a=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=WW(t,e);(!r||"value"in r&&void 0===r.value)&&(t===a.Transaction.prototype||t instanceof a.Transaction?kW(t,e,{get:function(){return this.table(e)},set:function(t){BW(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new a.Table(e,n))}))}))}function kX(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function SX(e,t){return e._cfg.version-t._cfg.version}function wX(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],o=t[n];if(a){var i={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto&&!xV)i.recreate=!0,r.change.push(i);else{var g=a.idxByName,s=o.idxByName,c=void 0;for(c in g)s[c]||i.del.push(c);for(c in s){var l=g[c],u=s[c];l?l.src!==u.src&&i.change.push(u):i.add.push(u)}(i.del.length>0||i.add.length>0||i.change.length>0)&&r.change.push(i)}}else r.add.push([n,o])}return r}function WX(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return RX(a,e)})),a}function RX(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function VX(e,t,n){var r={};return VW(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),a=t.keyPath,o=AX(hX(a),a||"",!1,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),i=[],g=0;g<t.indexNames.length;++g){var s=t.index(t.indexNames[g]);a=s.keyPath;var c=AX(s.name,a,!!s.unique,!!s.multiEntry,!1,a&&"string"!=typeof a,!1);i.push(c)}r[e]=pX(e,o,i)})),r}function XX(e,t,n){for(var r=e._novip,a=n.db.objectStoreNames,o=0;o<a.length;++o){var i=a[o],g=n.objectStore(i);r._hasGetAll="getAll"in g;for(var s=0;s<g.indexNames.length;++s){var c=g.indexNames[s],l=g.index(c).keyPath,u="string"==typeof l?l:"["+VW(l).join("+")+"]";if(t[i]){var f=t[i].idxByName[u];f&&(f.name=c,delete t[i].idxByName[u],t[i].idxByName[c]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&hW.WorkerGlobalScope&&hW instanceof hW.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}var JX=function(){function e(){Z(this,e)}return B(e,[{key:"_parseStoresSpec",value:function(e,t){pW(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return AX(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),mW(r),0===t)})),a=r.shift();if(a.multi)throw new CR.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new CR.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new CR.Schema("Index must have a name and cannot be an empty string")})),t[n]=pX(n,a,r)}}))}},{key:"stores",value:function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?bW(this._cfg.storesSource,e):e;var n=t._versions,r={},a={};return n.forEach((function(e){bW(r,e._cfg.storesSource),a=e._cfg.dbschema={},e._parseStoresSpec(r,a)})),t._dbSchema=a,kX(t,[t._allTables,t,t.Transaction.prototype]),BX(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],pW(a),a),t._storeNames=pW(a),this}},{key:"upgrade",value:function(e){return this._cfg.contentUpgrade=BR(this._cfg.contentUpgrade||hR,e),this}}]),e}();function xX(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new rJ("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function YX(e){return e&&"function"==typeof e.databases}function NX(e){return AV((function(){return DR.letThrough=!0,e()}))}function HX(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function FX(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?WV(t.dbOpenError):e}));$W&&(t.openCanceller._stackHolder=rR()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new CR.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,i=null,g=!1;return OR.race([r,("undefined"==typeof navigator?OR.resolve():HX()).then((function(){return new OR((function(r,o){if(a(),!n)throw new CR.MissingAPI;var s=e.name,c=t.autoSchema?n.open(s):n.open(s,Math.round(10*e.verno));if(!c)throw new CR.MissingAPI;c.onerror=fX(o),c.onblocked=cV(e._fireOnBlocked),c.onupgradeneeded=cV((function(r){if(i=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=IX,i.abort(),c.result.close();var a=n.deleteDatabase(s);a.onsuccess=a.onerror=cV((function(){o(new CR.NoSuchDatabase("Database ".concat(s," doesnt exist")))}))}else{i.onerror=fX(o);var l=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;g=l<1,e._novip.idbdb=c.result,function(e,t,n,r){var a=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,a);o.create(n),o._completion.catch(r);var i=o._reject.bind(o),g=DR.transless||DR;AV((function(){DR.trans=o,DR.transless=g,0===t?(pW(a).forEach((function(e){WX(n,e,a[e].primKey,a[e].indexes)})),GX(e,n),OR.follow((function(){return e.on.populate.fire(o)})).catch(i)):function(e,t,n,r){var a=e._novip,o=[],i=a._versions,g=a._dbSchema=VX(0,a.idbdb,r),s=!1;return i.filter((function(e){return e._cfg.version>=t})).forEach((function(e){o.push((function(){var o=g,i=e._cfg.dbschema;XX(a,o,r),XX(a,i,r),g=a._dbSchema=i;var c=wX(o,i);c.add.forEach((function(e){WX(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new CR.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return RX(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),RX(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>t){GX(a,r),n._memoizedTables={},s=!0;var u=FW(i);c.del.forEach((function(e){u[e]=o[e]})),kX(a,[a.Transaction.prototype]),BX(a,[a.Transaction.prototype],pW(u),u),n.schema=u;var f,I=qW(l);I&&hV();var C=OR.follow((function(){if((f=l(n))&&I){var e=pV.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?OR.resolve(f):C.then((function(){return f}))}})),o.push((function(t){s&&YV||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t),kX(a,[a.Transaction.prototype]),BX(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),n.schema=a._dbSchema}))})),function e(){return o.length?OR.resolve(o.shift()(n.idbtrans)).then(e):OR.resolve()}().then((function(){var e,t;t=r,pW(e=g).forEach((function(n){t.db.objectStoreNames.contains(n)||WX(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(i)}))}(e,l/10,i,o)}}),o),c.onsuccess=cV((function(){i=null;var n,a=e._novip.idbdb=c.result,o=VW(a.objectStoreNames);if(o.length>0)try{var l=a.transaction(1===(n=o).length?n[0]:n,"readonly");t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var a=r._dbSchema=VX(0,t,n);r._storeNames=VW(t.objectStoreNames,0),BX(r,[r._allTables],pW(a),a)}(e,a,l):(XX(e,e._dbSchema,l),function(e,t){var n=wX(VX(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),GX(e,l)}catch(e){}JV.push(e),a.onversionchange=cV((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),a.onclose=cV((function(t){e.on("close").fire(t)})),g&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!YX(n)&&"__dbnames"!==t&&xX(n,r).put({name:t}).catch(hR)}(e._deps,s),r()}),o)}))}))]).then((function(){return a(),t.onReadyBeingFired=[],OR.resolve(NX((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(BR,hR);return t.onReadyBeingFired=[],OR.resolve(NX((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{i&&i.abort()}catch(e){}return r===t.openCanceller&&e._close(),WV(n)})).finally((function(){t.openComplete=!0,o()}))}function KX(e){var t=function(t){return e.next(t)},n=a(t),r=a((function(t){return e.throw(t)}));function a(e){return function(t){var a=e(t),o=a.value;return a.done?o:o&&"function"==typeof o.then?o.then(n,r):mW(o)?Promise.all(o).then(n,r):n(o)}}return a(t)()}function EX(e,t,n){var r=arguments.length;if(r<2)throw new CR.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];return n=a.pop(),[e,EW(a),n]}function TX(e,t,n,r,a){return OR.resolve().then((function(){var o=DR.transless||DR,i=e._createTransaction(t,n,e._dbSchema,r),g={trans:i,transless:o};if(r)i.idbtrans=r.idbtrans;else try{i.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===fR.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return TX(e,t,n,null,a)}))):WV(r)}var s,c=qW(a);c&&hV();var l=OR.follow((function(){if(s=a.call(i,i))if(c){var e=pV.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=KX(s))}),g);return(s&&"function"==typeof s.then?OR.resolve(s).then((function(e){return i.active?e:WV(new CR.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&i._resolve(),i._completion.then((function(){return e}))})).catch((function(e){return i._reject(e),WV(e)}))}))}function MX(e,t,n){for(var r=mW(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var zX={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return v(v({},e),{},{table:function(t){var n=e.table(t),r=n.schema,a={},o=[];function i(e,t,n){var r=ZX(e),g=a[r]=a[r]||[],s=null==e?0:"string"==typeof e?1:e.length,c=t>0,l=v(v({},n),{},{isVirtual:c,keyTail:t,keyLength:s,extractKey:bX(e),unique:!c&&n.unique});return g.push(l),l.isPrimaryKey||o.push(l),s>1&&i(2===s?e[0]:e.slice(0,s-1),t+1,n),g.sort((function(e,t){return e.keyTail-t.keyTail})),l}var g=i(r.primaryKey.keyPath,0,r.primaryKey);a[":id"]=[g];var s,c=Xe(r.indexes);try{for(c.s();!(s=c.n()).done;){var l=s.value;i(l.keyPath,0,l)}}catch(xQ){c.e(xQ)}finally{c.f()}function u(t){var n,r,a=t.query.index;return a.isVirtual?v(v({},t),{},{query:{index:a,range:(n=t.query.range,r=a.keyTail,{type:1===n.type?2:n.type,lower:MX(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:MX(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var f=v(v({},n),{},{schema:v(v({},r),{},{primaryKey:g,indexes:o,getIndexByKeyPath:function(e){var t=a[ZX(e)];return t&&t[0]}}),count:function(e){return n.count(u(e))},query:function(e){return n.query(u(e))},openCursor:function(t){var r=t.query.index,a=r.keyTail,o=r.isVirtual,i=r.keyLength;return o?n.openCursor(u(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(MX(r,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(MX(t,e.MAX_KEY,a),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}});return r}(n)})):n.openCursor(t)}});return f}})}};function DX(e,t,n,r){return n=n||{},r=r||"",pW(e).forEach((function(a){if(ZW(t,a)){var o=e[a],i=t[a];if("object"==typeof o&&"object"==typeof i&&o&&i){var g=jW(o);g!==jW(i)?n[r+a]=t[a]:"Object"===g?DX(o,i,n,r+a+"."):o!==i&&(n[r+a]=t[a])}else o!==i&&(n[r+a]=t[a])}else n[r+a]=void 0})),pW(t).forEach((function(a){ZW(e,a)||(n[r+a]=t[a])})),n}var LX={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return v(v({},e),{},{table:function(t){var n=e.table(t),r=n.schema.primaryKey,a=v(v({},n),{},{mutate:function(e){var a=DR.trans,o=a.table(t).hook,i=o.deleting,g=o.creating,s=o.updating;switch(e.type){case"add":if(g.fire===hR)break;return a._promise("readwrite",(function(){return c(e)}),!0);case"put":if(g.fire===hR&&s.fire===hR)break;return a._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(i.fire===hR)break;return a._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(i.fire===hR)break;return a._promise("readwrite",(function(){return function(e){return l(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=DR.trans,a=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!a)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?v(v({},e),{},{keys:a}):v({},e)).type&&(e.values=We(e.values)),e.keys&&(e.keys=We(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,a).then((function(o){var c=a.map((function(n,a){var c=o[a],l={onerror:null,onsuccess:null};if("delete"===e.type)i.fire.call(l,n,c,t);else if("add"===e.type||void 0===c){var u=g.fire.call(l,n,e.values[a],t);null==n&&null!=u&&(n=u,e.keys[a]=n,r.outbound||HW(e.values[a],r.keyPath,n))}else{var f=DX(c,e.values[a]),I=s.fire.call(l,f,n,c,t);if(I){var C=e.values[a];Object.keys(I).forEach((function(e){ZW(C,e)?C[e]=I[e]:HW(C,e,I[e])}))}}return l}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,i=t.numFailures,g=t.lastResult,s=0;s<a.length;++s){var l=r?r[s]:a[s],u=c[s];null==l?u.onerror&&u.onerror(n[s]):u.onsuccess&&u.onsuccess("put"===e.type&&o[s]?e.values[s]:l)}return{failures:n,results:r,numFailures:i,lastResult:g}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function l(e,t,a){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:a}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<a?{failures:[],numFailures:0,lastResult:void 0}:l(e,v(v({},t),{},{lower:r[r.length-1],lowerOpen:!0}),a)}))}))}}});return a}})}};function UX(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)0===qV(t.keys[a],e[o])&&(r.push(n?DW(t.values[a]):t.values[a]),++o);return r.length===e.length?r:null}catch(e){return null}}var jX={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return v(v({},n),{},{getMany:function(e){if(!e.cache)return n.getMany(e);var t=UX(e.keys,e.trans._cache,"clone"===e.cache);return t?OR.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?DW(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function OX(e){return!("from"in e)}var QX=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&bW(r,t),r}bW(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0})};function PX(e,t,n){var r=qV(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(OX(e))return bW(e,{from:t,to:n,d:1});var a=e.l,o=e.r;if(qV(n,e.from)<0)return a?PX(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},$X(e);if(qV(t,e.to)>0)return o?PX(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},$X(e);qV(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),qV(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var i=!e.r;a&&!e.l&&_X(e,a),o&&i&&_X(e,o)}}function _X(e,t){OX(t)||function e(t,n){var r=n.from,a=n.to,o=n.l,i=n.r;PX(t,r,a),o&&e(t,o),i&&e(t,i)}(e,t)}function qX(e){var t=OX(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&qV(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||qV(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function $X(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),a=r>1?"r":r<-1?"l":"";if(a){var o="r"===a?"l":"r",i=v({},e),g=e[a];e.from=g.from,e.to=g.to,e[a]=g[a],i[a]=g[o],e[o]=i,i.d=eJ(i)}e.d=eJ(e)}function eJ(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}GW(QX.prototype,b({add:function(e){return _X(this,e),this},addKey:function(e){return PX(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return PX(t,e,e)})),this}},OW,(function(){return qX(this)})));var tJ,nJ={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new QX(e.MIN_KEY,e.MAX_KEY);return v(v({},e),{},{table:function(r){var a=e.table(r),o=a.schema,i=o.primaryKey,g=i.extractKey,s=i.outbound,c=v(v({},a),{},{mutate:function(e){var i=e.trans,g=i.mutatedParts||(i.mutatedParts={}),s=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return g[n]||(g[n]=new QX)},c=s(""),l=s(":dels"),u=e.type,f=Ge("deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],2),I=f[0],C=f[1],d=e.trans._cache;return a.mutate(e).then((function(e){if(mW(I)){"delete"!==u&&(I=e.results),c.addKeys(I);var t=UX(I,d);t||"add"===u||l.addKeys(I),(t||C)&&function(e,t,n,r){t.indexes.forEach((function(t){var a=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var i=function(e){return t.multiEntry&&mW(e)?e.forEach((function(e){return a.addKey(e)})):a.addKey(e)};(n||r).forEach((function(e,t){var a=n&&o(n[t]),g=r&&o(r[t]);0!==qV(a,g)&&(null!=a&&i(a),null!=g&&i(g))}))}))}(s,o,t,C)}else if(I){var r={from:I.lower,to:I.upper};l.add(r),c.add(r)}else c.add(n),l.add(n),o.indexes.forEach((function(e){return s(e.name).add(n)}));return e}))}}),l=function(t){var n,r,a=t.query,o=a.index,i=a.range;return[o,new QX(null!==(n=i.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=i.upper)&&void 0!==r?r:e.MAX_KEY)]},u={get:function(e){return[i,new QX(e.key)]},getMany:function(e){return[i,(new QX).addKeys(e.keys)]},count:l,query:l,openCursor:l};return pW(u).forEach((function(e){c[e]=function(o){var i=DR.subscr;if(i){var c=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return i[n]||(i[n]=new QX)},l=c(""),f=c(":dels"),I=Ge(u[e](o),2),C=I[0],d=I[1];if(c(C.name||"").add(d),!C.isPrimaryKey){if("count"!==e){var A="query"===e&&s&&o.values&&a.query(v(v({},o),{},{values:!1}));return a[e].apply(this,arguments).then((function(t){if("query"===e){if(s&&o.values)return A.then((function(e){var n=e.result;return l.addKeys(n),t}));var n=o.values?t.result.map(g):t.result;o.values?l.addKeys(n):f.addKeys(n)}else if("openCursor"===e){var r=t,a=o.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return a&&l.addKey(r.primaryKey),r.value}}})}return t}))}f.add(n)}}return a[e].apply(this,arguments)}})),c}})}},rJ=function(){function e(t,n){var r=this;Z(this,e),this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=v({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:hR,dbReadyPromise:null,cancelOpen:hR,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new OR((function(e){g.dbReadyResolve=e})),g.openCanceller=new OR((function(e,t){g.cancelOpen=t})),this._state=g,this.name=t,this.on=zV(this,"populate","blocked","versionchange","close",{ready:[BR,hR]}),this.on.ready.subscribe=XW(this.on.ready.subscribe,(function(t){return function(n,a){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||OR.resolve().then(n),a&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),a&&t(n);else{t(n);var o=r;a||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(i=this,DV(tX.prototype,(function(e,t){this.db=i;var n=KV,r=null;if(t)try{n=t()}catch(e){r=e}var a=e._ctx,o=a.table,g=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:a.or,valueMapper:g!==pR?g:null}}))),this.Table=function(e){return DV(MV.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:zV(null,{creating:[yR,hR],reading:[mR,pR],updating:[ZR,hR],deleting:[vR,hR]})}))}(this),this.Transaction=function(e){return DV(dX.prototype,(function(t,n,r,a,o){var i=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=zV(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new OR((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),WV(e)}))}))}(this),this.Version=function(e){return DV(JX.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return DV(uX.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var a=e._deps.indexedDB;if(!a)throw new CR.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(e,t){return a.cmp(t,e)},this._max=function(e,t){return a.cmp(e,t)>0?e:t},this._min=function(e,t){return a.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=mX(n.IDBKeyRange),this._createTransaction=function(e,t,n,a){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),JV.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(zX),this.use(LX),this.use(nJ),this.use(jX),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach((function(e){return e(r)}))}return B(e,[{key:"version",value:function(e){if(isNaN(e)||e<.1)throw new CR.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new CR.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(SX),n.stores({}),this._state.autoSchema=!1,n)}},{key:"_whenReady",value:function(e){var t=this;return this.idbdb&&(this._state.openComplete||DR.letThrough||this._vip)?e():new OR((function(e,n){if(t._state.openComplete)return n(new CR.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new CR.DatabaseClosed);t.open().catch(hR)}t._state.dbReadyPromise.then(e,n)})).then(e)}},{key:"use",value:function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;a&&this.unuse({stack:t,name:a});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:a}),o.sort((function(e,t){return e.level-t.level})),this}},{key:"unuse",value:function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this}},{key:"open",value:function(){return FX(this)}},{key:"_close",value:function(){var e=this._state,t=JV.indexOf(this);if(t>=0&&JV.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new OR((function(t){e.dbReadyResolve=t})),e.openCanceller=new OR((function(t,n){e.cancelOpen=n}))}},{key:"close",value:function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new CR.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}},{key:"delete",value:function(){var e=this,t=arguments.length>0,n=this._state;return new OR((function(r,a){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=cV((function(){!function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!YX(n)&&"__dbnames"!==t&&xX(n,r).delete(t).catch(hR)}(e._deps,e.name),r()})),t.onerror=fX(a),t.onblocked=e._fireOnBlocked};if(t)throw new CR.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))}},{key:"backendDB",value:function(){return this.idbdb}},{key:"isOpen",value:function(){return null!==this.idbdb}},{key:"hasBeenClosed",value:function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}},{key:"hasFailed",value:function(){return null!==this._state.dbOpenError}},{key:"dynamicallyOpened",value:function(){return this._state.autoSchema}},{key:"tables",get:function(){var e=this;return pW(this._allTables).map((function(t){return e._allTables[t]}))}},{key:"transaction",value:function(){var e=EX.apply(this,arguments);return this._transaction.apply(this,e)}},{key:"_transaction",value:function(e,t,n){var r=this,a=DR.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var o,i,g=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(i=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new CR.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(a){if("readonly"===a.mode&&"readwrite"===o){if(!g)throw new CR.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&i.forEach((function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!g)throw new CR.SubTransaction("Table "+e+" not included in parent transaction.");a=null}})),g&&a&&!a.active&&(a=null)}}catch(e){return a?a._promise(null,(function(t,n){n(e)})):WV(e)}var s=TX.bind(null,this,o,i,a,n);return a?a._promise(o,s,"lock"):DR.trans?GV(DR.transless,(function(){return r._whenReady(s)})):this._whenReady(s)}},{key:"table",value:function(e){if(!ZW(this._allTables,e))throw new CR.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}]),e}(),aJ="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",oJ=function(){function e(t){Z(this,e),this._subscribe=t}return B(e,[{key:"subscribe",value:function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}},{key:aJ,value:function(){return this}}]),e}();function iJ(e,t){return pW(t).forEach((function(n){_X(e[n]||(e[n]=new QX),t[n])})),e}try{tJ={indexedDB:hW.indexedDB||hW.mozIndexedDB||hW.webkitIndexedDB||hW.msIndexedDB,IDBKeyRange:hW.IDBKeyRange||hW.webkitIDBKeyRange}}catch(YQ){tJ={indexedDB:null,IDBKeyRange:null}}var gJ=rJ;function sJ(e){var t=cJ;try{cJ=!0,CX.storagemutated.fire(e)}finally{cJ=t}}GW(gJ,v(v({},AR),{},{delete:function(e){return new gJ(e,{addons:[]}).delete()},exists:function(e){return new gJ(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return YX(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):xX(t,n).toCollection().primaryKeys()}(gJ.dependencies).then(e)}catch(e){return WV(new CR.MissingAPI)}},defineClass:function(){return function(e){bW(this,e)}},ignoreTransaction:function(e){return DR.trans?GV(DR.transless,e):e()},vip:NX,async:function(e){return function(){try{var t=KX(e.apply(this,arguments));return t&&"function"==typeof t.then?t:OR.resolve(t)}catch(e){return WV(e)}}},spawn:function(e,t,n){try{var r=KX(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:OR.resolve(r)}catch(e){return WV(e)}},currentTransaction:{get:function(){return DR.trans||null}},waitFor:function(e,t){var n=OR.resolve("function"==typeof e?gJ.ignoreTransaction(e):e).timeout(t||6e4);return DR.trans?DR.trans.waitFor(n):n},Promise:OR,debug:{get:function(){return $W},set:function(e){eR(e,"dexie"===e?function(){return!0}:HV)}},derive:SW,extend:bW,props:GW,override:XW,Events:zV,on:CX,liveQuery:function(e){return new oJ((function(t){var n=qW(e),r=!1,a={},o={},i={get closed(){return r},unsubscribe:function(){r=!0,CX.storagemutated.unsubscribe(l)}};t.start&&t.start(i);var g=!1,s=!1;function c(){return pW(o).some((function(e){return a[e]&&function(e,t){var n=qX(t),r=n.next();if(r.done)return!1;for(var a=r.value,o=qX(e),i=o.next(a.from),g=i.value;!r.done&&!i.done;){if(qV(g.from,a.to)<=0&&qV(g.to,a.from)>=0)return!0;qV(a.from,g.from)<0?a=(r=n.next(g.from)).value:g=(i=o.next(a.from)).value}return!1}(a[e],o[e])}))}var l=function(e){iJ(a,e),c()&&u()},u=function u(){if(!g&&!r){a={};var f={},I=function(t){n&&hV();var r=function(){return AV(e,{subscr:t,trans:null})},a=DR.trans?GV(DR.transless,r):r();return n&&a.then(pV,pV),a}(f);s||(CX("storagemutated",l),s=!0),g=!0,Promise.resolve(I).then((function(e){g=!1,r||(c()?u():(a={},o=f,t.next&&t.next(e)))}),(function(e){["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||(g=!1,t.error&&t.error(e),i.unsubscribe())}))}};return u(),i}))},extendObservabilitySet:iJ,getByKeyPath:NW,setByKeyPath:HW,delByKeyPath:function(e,t){"string"==typeof t?HW(e,t,void 0):"length"in t&&[].map.call(t,(function(t){HW(e,t,void 0)}))},shallowClone:FW,deepClone:DW,getObjectDiff:DX,cmp:qV,asap:xW,minKey:-1/0,addons:[],connections:JV,errnames:fR,dependencies:tJ,semVer:"4.0.0-alpha.4",version:"4.0.0-alpha.4".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),gJ.maxKey=mX(gJ.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(CX("storagemutated",(function(e){var t;cJ||(xV?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),cJ=!0,dispatchEvent(t),cJ=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;cJ||sJ(t)})));var cJ=!1;if("undefined"!=typeof BroadcastChannel){var lJ=new BroadcastChannel("x-storagemutated-1");"function"==typeof lJ.unref&&lJ.unref(),CX("storagemutated",(function(e){cJ||lJ.postMessage(e)})),lJ.onmessage=function(e){e.data&&sJ(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){CX("storagemutated",(function(e){try{cJ||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&We(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"x-storagemutated-1",changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if("x-storagemutated-1"===e.key){var t=JSON.parse(e.newValue);t&&sJ(t.changedParts)}}));var uJ=self.document&&navigator.serviceWorker;uJ&&uJ.addEventListener("message",(function(e){var t=e.data;t&&"x-storagemutated-1"===t.type&&sJ(t.changedParts)}))}OR.rejectionMapper=function(e,t){if(!e||e instanceof sR||e instanceof TypeError||e instanceof SyntaxError||!e.name||!dR[e.name])return e;var n=new dR[e.name](t||e.message,e);return"stack"in e&&kW(n,"stack",{get:function(){return this.inner.stack}}),n},eR($W,HV);var fJ,IJ,CJ="docs",dJ="deleted-docs",AJ="changes",hJ="dexie",pJ={prepareQuery:function(e,t){if(!t.sort)throw $y("SNH",{query:t});return{query:t,queryPlan:YB(e,t)}},checkpointSchema:{type:"object",properties:{id:{type:"string"},lwt:{type:"number"}},required:["id","lwt"],additionalProperties:!1}},mJ=new Map,bJ=new Map;var yJ="__";function vJ(e){var t=e.split(".");if(t.length>1)return t.map((function(e){return vJ(e)})).join(".");if(e.startsWith("|")){var n=e.substring(1);return yJ+n}return e}function ZJ(e){var t=e.split(".");return t.length>1?t.map((function(e){return ZJ(e)})).join("."):e.startsWith(yJ)?"|"+e.substring(yJ.length):e}function GJ(e){if(!e||"string"===typeof e||"number"===typeof e||"boolean"===typeof e)return e;if(Array.isArray(e))return e.map((function(e){return GJ(e)}));if("object"===typeof e){var t={};return Object.entries(e).forEach((function(e){var n=Ge(e,2),r=n[0],a=n[1];"object"===typeof a&&(a=GJ(a)),t[vJ(r)]=a})),t}}function BJ(e){if(!e||"string"===typeof e||"number"===typeof e||"boolean"===typeof e)return e;if(Array.isArray(e))return e.map((function(e){return BJ(e)}));if("object"===typeof e){var t={};return Object.entries(e).forEach((function(n){var r=Ge(n,2),a=r[0],o=r[1];("object"===typeof o||Array.isArray(e))&&(o=BJ(o)),t[ZJ(a)]=o})),t}}function kJ(e){var t=[],n=nG(e.primaryKey);return t.push([n]),e.indexes&&e.indexes.forEach((function(e){var n=Ky(e);t.push(n)})),t.push(["_meta.lwt",n]),(t=t.map((function(e){return e.map((function(e){return vJ(e)}))}))).map((function(e){return 1===e.length?e[0]:"["+e.join("+")+"]"})).join(", ")}function SJ(e,t){return(IJ=IJ||hn(dn().mark((function e(t,n){var r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return r=e.sent,e.next=5,Promise.all([r.dexieTable.bulkGet(n),r.dexieDeletedTable.bulkGet(n)]);case 5:return a=e.sent,o=Ge(a,2),i=o[0],g=o[1],s=g.slice(0),i.forEach((function(e,t){e&&(s[t]=e)})),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wJ(e){var t=e.rxQuery.collection.schema.jsonSchema,n=e.mangoQuery.selector,r=Object.keys(t.properties);Object.keys(n).filter((function(e){return!e.startsWith("$")})).filter((function(e){return!e.includes(".")})).forEach((function(n){if(!r.includes(n))throw $y("QU13",{schema:t,field:n,query:e.mangoQuery})}));var a=t.indexes?t.indexes:[],o=e.mangoQuery.index;if(o&&!a.find((function(e){return Wy(e,o)})))throw $y("QU12",{collection:e.rxQuery.collection.name,query:e.mangoQuery,schema:t});if("count"===e.rxQuery.op&&!function(e,t){var n=pJ.prepareQuery(e,t);return n.queryPlan.selectorSatisfiedByIndex}(e.rxQuery.collection.schema.jsonSchema,e.mangoQuery)&&!e.rxQuery.collection.database.allowSlowCount)throw $y("QU14",{collection:e.rxQuery.collection,query:e.mangoQuery});e.mangoQuery.sort&&e.mangoQuery.sort.map((function(e){return Object.keys(e)[0]})).filter((function(e){return!e.includes(".")})).forEach((function(n){if(!r.includes(n))throw $y("QU13",{schema:t,field:n,query:e.mangoQuery})}))}var WJ={name:"dev-mode",rxdb:!0,init:function(){console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.","","\ud83e\udd17 Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium.html","","Also take part in the RxDB User Survey: https://rxdb.info/survey.html","---------------------------------------------------------------------"].join("\n"))},overwritable:{isDevMode:function(){return!0},deepFreezeWhenDevMode:function(e){return e&&"string"!==typeof e&&"number"!==typeof e?Ry(e):e},tunnelErrorMessage:function(e){if(!oW[e])throw console.error("RxDB: Error-Code not known: "+e),new Error("Error-Code "+e+" not known, contact the maintainer");return oW[e]}},hooks:{preCreateRxSchema:{after:function(e){if(!e.primaryKey)throw $y("SC30",{schema:e});if(!e.hasOwnProperty("properties"))throw $y("SC29",{schema:e});if(e.properties._rev)throw $y("SC10",{schema:e});if(!e.hasOwnProperty("version")||"number"!==typeof e.version||e.version<0)throw $y("SC11",{version:e.version});if(cW(e),function(e){if(!e.primaryKey)throw $y("SC30",{schema:e});function t(t){if(!t)throw $y("SC33",{schema:e});var n=t.type;if(!n||!["string","number","integer"].includes(n))throw $y("SC32",{schema:e,args:{schemaPart:t}})}if("string"===typeof e.primaryKey){var n=e.primaryKey;t(e.properties[n])}else{var r=e.primaryKey;t(eG(e,r.key)),r.fields.forEach((function(n){t(eG(e,n))}))}var a=nG(e.primaryKey),o=e.properties[a];if(!o.maxLength)throw $y("SC39",{schema:e,args:{primaryPathSchemaPart:o}})}(e),Object.keys(e.properties).forEach((function(t){var n=e.properties[t];if(t===e.primaryKey){if(e.indexes&&e.indexes.includes(t))throw $y("SC13",{value:n,schema:e});if(n.unique)throw $y("SC14",{value:n,schema:e});if(e.encrypted&&e.encrypted.includes(t))throw $y("SC15",{value:n,schema:e});if("string"!==n.type)throw $y("SC16",{value:n,schema:e})}if(sW().includes(t))throw $y("SC17",{key:t,schema:e})})),e.indexes){if(!Ey(e.indexes))throw $y("SC18",{indexes:e.indexes,schema:e});e.indexes.forEach((function(t){if("string"!==typeof t&&!Array.isArray(t))throw $y("SC19",{index:t,schema:e});if(Array.isArray(t))for(var n=0;n<t.length;n+=1)if("string"!==typeof t[n])throw $y("SC20",{index:t,schema:e});(Ey(t)?t:[t]).forEach((function(n){var r=eG(e,n);switch(r.type){case"string":if(!r.maxLength)throw $y("SC34",{index:t,field:n,schema:e});break;case"number":case"integer":if(!r.multipleOf)throw $y("SC35",{index:t,field:n,schema:e});var a=r.maximum,o=r.minimum;if("undefined"===typeof a||"undefined"===typeof o)throw $y("SC37",{index:t,field:n,schema:e});break;case"boolean":var i="",g=n;if(n.includes(".")){var s=n.split(".");g=s.pop(),i=s.join(".")}var c=""===i?e:eG(e,i);if(!c.required||!c.required.includes(g))throw $y("SC38",{index:t,field:n,schema:e});break;default:throw $y("SC36",{fieldName:n,type:r.type,schema:e})}}))}))}Object.keys(Jy(e)).map((function(e){var t=e.split(".");return t.pop(),t.join(".")})).filter((function(e){return""!==e})).filter((function(e,t,n){return n.indexOf(e)===t})).filter((function(t){var n=HZ(e,t);return n&&!!n.index})).forEach((function(t){throw $y("SC26",{index:LZ(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})})),(e.indexes||[]).reduce((function(e,t){return Ey(t)?zy(e,t):e.push(t),e}),[]).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(t){var n=lW(t),r=HZ(e,n);if(!r||"object"!==typeof r)throw $y("SC21",{index:t,schema:e});return{indexPath:t,schemaObj:r}})).filter((function(e){return"string"!==e.schemaObj.type&&"integer"!==e.schemaObj.type&&"number"!==e.schemaObj.type&&"boolean"!==e.schemaObj.type})).forEach((function(t){throw $y("SC22",{key:t.indexPath,type:t.schemaObj.type,schema:e})})),Object.keys(Jy(e)).map((function(e){var t=e.split(".");return t.pop(),t.join(".")})).filter((function(e){return""!==e&&"attachments"!==e})).filter((function(e,t,n){return n.indexOf(e)===t})).filter((function(t){var n=HZ(e,t);return n&&!!n.encrypted})).forEach((function(t){throw $y("SC27",{index:LZ(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})})),e.encrypted&&e.encrypted.forEach((function(t){var n=lW(t),r=HZ(e,n);if(!r||"object"!==typeof r)throw $y("SC28",{field:t,schema:e})}))}},preCreateRxDatabase:{after:function(e){!function(e){if(AW(e.name),UZ(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw $y("DB11",{name:e.name})}(e)}},preCreateRxCollection:{after:function(e){if(IW(e),function(e,t){var n=Object.keys(e.properties);t&&Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(e){throw $y("COL18",{funName:e})}))}(e.schema,e.methods),"_"===e.name.charAt(0))throw $y("DB2",{name:e.name});if(!e.schema)throw $y("DB4",{name:e.name,args:e})}},createRxDocument:{before:function(e){!function(e,t){if(!e)throw $y("DOC20",{primaryKey:e,document:t});if(e!==e.trim())throw $y("DOC21",{primaryKey:e,document:t});if(e.includes("\r")||e.includes("\n"))throw $y("DOC22",{primaryKey:e,document:t});if(e.includes('"'))throw $y("DOC23",{primaryKey:e,document:t})}(e.primary,e.toJSON(!0))}},preCreateRxQuery:{after:function(e){!function(e){if("[object Object]"!==Object.prototype.toString.call(e.queryObj))throw ev("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj});var t=["selector","limit","skip","sort","index"];if(Object.keys(e.queryObj).forEach((function(n){if(!t.includes(n))throw ev("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj,key:n,args:{validKeys:t}})})),"count"===e.op&&(e.queryObj.limit||e.queryObj.skip))throw $y("QU15",{collection:e.collection.name,query:e.queryObj})}(e)}},prePrepareQuery:{after:function(e){wJ(e)}},createRxCollection:{after:function(e){uW(e.creator.statics),uW(e.creator.methods),uW(e.creator.attachments),e.creator.schema&&e.creator.migrationStrategies&&fW(e.creator.schema,e.creator.migrationStrategies)}}}};!function(e){if(av("preAddRxPlugin",{plugin:e,plugins:tW}),!tW.has(e)){if(nW.has(e.name))throw $y("PL3",{name:e.name,plugin:e});if(tW.add(e),nW.add(e.name),!e.rxdb)throw ev("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach((function(e){var t=Ge(e,2),n=t[0];return(0,t[1])(eW[n])})),e.overwritable&&Object.assign(Qy,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach((function(e){var t=Ge(e,2),n=t[0],r=t[1];r.after&&rv[n].push(r.after),r.before&&rv[n].unshift(r.before)}))}}(WJ);var RJ,VJ,XJ={version:0,primaryKey:"key",type:"object",properties:{key:{type:"string",maxLength:42},value:{type:"string"}}};function JJ(e){return e===xB?-1/0:e}function xJ(e,t){if(!t){if("undefined"===typeof window)throw new Error("IDBKeyRange missing");t=window.IDBKeyRange}var n,r=e.startKeys.map(JJ),a=e.endKeys.map(JJ);if(1===e.index.length){var o=r[0]===a[0];n=t.bound(r[0],a[0],!o&&!e.inclusiveStart,!o&&!e.inclusiveEnd)}else n=t.bound(r,a,!e.inclusiveStart,!e.inclusiveEnd);return n}function YJ(e,t){return(RJ=RJ||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l,u,f,I,C;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.internals;case 2:return a=e.sent,o=n.query,i=o.skip?o.skip:0,g=o.limit?o.limit:1/0,s=i+g,c=n.queryPlan,l=!1,c.selectorSatisfiedByIndex||(l=PS(t.schema,n.query)),u=xJ(c,a.dexieDb._options.IDBKeyRange),f=c.index,I=[],e.next=15,a.dexieDb.transaction("r",a.dexieTable,(function(e){return(r=r||hn(dn().mark((function e(n){var r,a,o,i,g;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.idbtrans,a=r.objectStore(CJ),1===f.length&&f[0]===t.primaryPath?o=a:(i=1===f.length?vJ(f[0]):"["+f.map((function(e){return vJ(e)})).join("+")+"]",o=a.index(i)),g=o.openCursor(u),e.next=6,new Promise((function(e){g.onsuccess=function(t){var n=t.target.result;if(n){var r=BJ(n.value);r._deleted||l&&!l(r)||I.push(r),c.sortFieldsSameAsIndexFields&&I.length===s?e():n.continue()}else e()}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}));case 15:return c.sortFieldsSameAsIndexFields||(C=QS(t.schema,n.query),I=I.sort(C)),I=I.slice(i,s),e.abrupt("return",{documents:I});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NJ(e,t){return(VJ=VJ||hn(dn().mark((function e(t,n){var r,a,o,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.internals;case 2:return a=e.sent,o=n.queryPlan,i=o.index,g=xJ(o,a.dexieDb._options.IDBKeyRange),s=-1,e.next=9,a.dexieDb.transaction("r",a.dexieTable,(function(e){return(r=r||hn(dn().mark((function e(n){var r,a,o,c,l;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.idbtrans,a=r.objectStore(CJ),1===i.length&&i[0]===t.primaryPath?o=a:(c=1===i.length?vJ(i[0]):"["+i.map((function(e){return vJ(e)})).join("+")+"]",o=a.index(c)),l=o.count(g),e.next=6,new Promise((function(e,t){l.onsuccess=function(){e(l.result)},l.onerror=function(e){return t(e)}}));case 6:s=e.sent;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}));case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var HJ=Array.isArray;function FJ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fZ(e),r=IZ(e,1/0);return e=function(e){return 1===e.length&&HJ(e[0])?e[0]:e}(e),gv((function(t,a){lZ(r)(pZ(dv([t],Cv(e)),n)).subscribe(a)}))}Promise.resolve(!1);var KJ=Promise.resolve(!0),EJ=Promise.resolve();function TJ(e,t){return e||(e=0),new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))}function MJ(){return Math.random().toString(36).substring(2)}var zJ=0,DJ=0;function LJ(){var e=(new Date).getTime();return e===zJ?1e3*e+ ++DJ:(zJ=e,DJ=0,1e3*e)}var UJ={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),EJ}catch(xQ){return Promise.reject(xQ)}},canBeUsed:function(){if("undefined"===typeof window&&"undefined"===typeof self||"function"!==typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0},type:"native",averageResponseTime:function(){return 150},microSeconds:LJ};function jJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return"undefined"===typeof t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"===typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),"undefined"===typeof t.node.useFastPath&&(t.node.useFastPath=!0),t}var OJ="pubkey.broadcast-channel-0-",QJ="messages",PJ={durability:"relaxed"};function _J(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof window){if("undefined"!==typeof window.mozIndexedDB)return window.mozIndexedDB;if("undefined"!==typeof window.webkitIndexedDB)return window.webkitIndexedDB;if("undefined"!==typeof window.msIndexedDB)return window.msIndexedDB}return!1}function qJ(e){e.commit&&e.commit()}function $J(e,t){var n=e.transaction(QJ,"readonly",PJ),r=n.objectStore(QJ),a=[],o=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var i=r.getAll(o);return new Promise((function(e,t){i.onerror=function(e){return t(e)},i.onsuccess=function(t){e(t.target.result)}}))}return new Promise((function(e,i){var g=function(){try{return o=IDBKeyRange.bound(t+1,1/0),r.openCursor(o)}catch(YQ){return r.openCursor()}}();g.onerror=function(e){return i(e)},g.onsuccess=function(r){var o=r.target.result;o?o.value.id<t+1?o.continue(t+1):(a.push(o.value),o.continue()):(qJ(n),e(a))}}))}function ex(e){return function(e,t){var n=(new Date).getTime()-t,r=e.transaction(QJ,"readonly",PJ),a=r.objectStore(QJ),o=[];return new Promise((function(e){a.openCursor().onsuccess=function(t){var a=t.target.result;if(a){var i=a.value;i.time<n?(o.push(i),a.continue()):(qJ(r),e(o))}else e(o)}}))}(e.db,e.options.idb.ttl).then((function(t){return function(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(QJ,"readwrite",PJ).objectStore(QJ);return Promise.all(t.map((function(e){var t=n.delete(e);return new Promise((function(e){t.onsuccess=function(){return e()}}))})))}(e,t.map((function(e){return e.id})))}))}function tx(e){e.closed||nx(e).then((function(){return TJ(e.options.idb.fallbackInterval)})).then((function(){return tx(e)}))}function nx(e){return e.closed?EJ:e.messagesCallback?$J(e.db,e.lastCursorId).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return e.uuid!==t.uuid&&!t.eMIs.has(e.id)&&!(e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),EJ})):EJ}var rx={create:function(e,t){return t=jJ(t),function(e){var t=_J(),n=OJ+e,r=t.open(n);return r.onupgradeneeded=function(e){e.target.result.createObjectStore(QJ,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}}))}(e).then((function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:MJ(),eMIs:new jw(2*t.idb.ttl),writeBlockPromise:EJ,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},tx(r),r}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,nx(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},a=e.transaction([QJ],"readwrite",PJ);return new Promise((function(e,t){a.oncomplete=function(){return e()},a.onerror=function(e){return t(e)},a.objectStore(QJ).add(r),qJ(a)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&ex(e)})),e.writeBlockPromise},canBeUsed:function(){return!!_J()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:LJ},ax="pubkey.broadcastChannel-";function ox(){var e;if("undefined"===typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(YQ){}return e}function ix(e){return ax+e}function gx(){var e=ox();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(YQ){return!1}return!0}var sx={create:function(e,t){if(t=jJ(t),!gx())throw new Error("BroadcastChannel: localstorage cannot be used");var n=MJ(),r=new jw(t.localstorage.removeTimeout),a={channelName:e,uuid:n,eMIs:r};return a.listener=function(e,t){var n=ix(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}(e,(function(e){a.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<a.messagesCallbackTime||(r.add(e.token),a.messagesCallback(e.data)))})),a},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){TJ().then((function(){var r=ix(e.channelName),a={token:MJ(),time:(new Date).getTime(),data:t,uuid:e.uuid},o=JSON.stringify(a);ox().setItem(r,o);var i=document.createEvent("Event");i.initEvent("storage",!0,!0),i.key=r,i.newValue=o,window.dispatchEvent(i),n()}))}))},canBeUsed:gx,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:LJ},cx=LJ,lx=new Set;var ux={create:function(e){var t={name:e,messagesCallback:null};return lx.add(t),t},close:function(e){lx.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(lx).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:cx},fx=[UJ,rx,sx];var Ix,Cx=new Set,dx=0,Ax=function(e,t){this.id=dx++,Cx.add(this),this.name=e,Ix&&(t=Ix),this.options=jJ(t),this.method=function(e){var t=[].concat(e.methods,fx).filter(Boolean);if(e.type){if("simulate"===e.type)return ux;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No usable method found in "+JSON.stringify(fx.map((function(e){return e.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);n=t,n&&"function"===typeof n.then?(e._prepP=t,t.then((function(t){e._state=t}))):e._state=t;var n}(this)};function hx(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:EJ).then((function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function px(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function mx(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&px(e)){var t=function(t){e._addEL[t.type].forEach((function(e){var n=1e5,r=e.time-n;t.time>=r&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function bx(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!px(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}Ax._pubkey=!0,Ax.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return hx(this,"message",e)},postInternal:function(e){return hx(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};bx(this,"message",this._onML),e&&"function"===typeof e?(this._onML=t,mx(this,"message",t)):this._onML=null},addEventListener:function(e,t){mx(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){bx(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){Cx.delete(this),this.closed=!0;var t=this._prepP?this._prepP:EJ;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var yx="[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0)?function(e){process.on("exit",(function(){return e()})),process.on("beforeExit",(function(){return e().then((function(){return process.exit()}))})),process.on("SIGINT",(function(){return e().then((function(){return process.exit()}))})),process.on("uncaughtException",(function(t){return e().then((function(){console.trace(t),process.exit(101)}))}))}:function(e){if("function"===typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if("function"!==typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}},vx=new Set,Zx=!1;function Gx(e){if(Zx||(Zx=!0,yx(Bx)),"function"!==typeof e)throw new Error("Listener is no function");return vx.add(e),{remove:function(){return vx.delete(e)},run:function(){return vx.delete(e),e()}}}function Bx(){var e=[];return vx.forEach((function(t){e.push(t()),vx.delete(t)})),Promise.all(e)}function kx(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function Sx(e){e.isLeader=!0,e._hasLeader=!0;var t=Gx((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&kx(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),kx(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),kx(e,"tell")}var wx=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=MJ(),this._aplQ=EJ,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var r=function(e){"leader"===e.context&&("death"===e.action&&(n._hasLeader=!1),"tell"===e.action&&(n._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",r),this._lstns.push(r)};wx.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var t=this;if(this.isLeader)return TJ(0,!0);if(this.isDead)return TJ(0,!1);if(this._aplQC>1)return this._aplQ;return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return function(){if(t.isLeader)return KJ;var n,r=!1,a=new Promise((function(e){n=function(){r=!0,e()}})),o=function(e){"leader"===e.context&&e.token!=t.token&&("apply"===e.action&&e.token>t.token&&n(),"tell"===e.action&&(n(),t._hasLeader=!0))};t.broadcastChannel.addEventListener("internal",o);var i=e?4*t._options.responseTime:t._options.responseTime;return kx(t,"apply").then((function(){return Promise.race([TJ(i),a.then((function(){return Promise.reject(new Error)}))])})).then((function(){return kx(t,"apply")})).then((function(){return Promise.race([TJ(i),a.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return t.broadcastChannel.removeEventListener("internal",o),!r&&Sx(t).then((function(){return!0}))}))}()})).then((function(){t._aplQC=t._aplQC-1})),this._aplQ.then((function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(e){if(e.isLeader)return EJ;return new Promise((function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",a),t(!0))}e.applyOnce().then((function(){e.isLeader&&r()})),function t(){return TJ(e._options.fallbackInterval).then((function(){if(!e.isDead&&!n)return e.isLeader?void r():e.applyOnce(!0).then((function(){e.isLeader?r():t()}))}))}();var a=function(t){"leader"===t.context&&"death"===t.action&&(e._hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&r()})))};e.broadcastChannel.addEventListener("internal",a),e._lstns.push(a)}))}(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,kx(this,"death")}};var Wx=new Map;function Rx(e,t){var n=Wx.get(e);if(n)return n.refs.delete(t),0===n.refs.size?(Wx.delete(e),n.bc.close()):void 0}function Vx(e,t,n,r){if(t.multiInstance){var a=r||function(e,t,n){var r=Wx.get(e);return r||(r={bc:new Ax("RxDB:"+t),refs:new Set},Wx.set(e,r)),r.refs.add(n),r.bc}(t.databaseInstanceToken,n.databaseName,n),o=new GZ,i=function(n){n.storageName===e&&n.databaseName===t.databaseName&&n.collectionName===t.collectionName&&n.version===t.schema.version&&o.next(n.eventBulk)};a.addEventListener("message",i);var g=n.changeStream(),s=!1,c=g.subscribe((function(n){s||a.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:n})}));n.changeStream=function(){return o.asObservable().pipe(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return FJ.apply(void 0,dv([],Cv(e)))}(g))};var l=n.close.bind(n);n.close=hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!0,c.unsubscribe(),a.removeEventListener("message",i),r){e.next=6;break}return e.next=6,Rx(t.databaseInstanceToken,n);case 6:return e.abrupt("return",l());case 7:case"end":return e.stop()}}),e)})));var u=n.remove.bind(n);n.remove=hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!0,c.unsubscribe(),a.removeEventListener("message",i),r){e.next=6;break}return e.next=6,Rx(t.databaseInstanceToken,n);case 6:return e.abrupt("return",u());case 7:case"end":return e.stop()}}),e)})))}}var Xx=sG(),Jx=function(e,t,n,r,a,o,i){function g(e,t,n,r,a,o,i){this.changes$=new GZ,this.instanceId=Xx++,this.closed=!1,this.storage=e,this.databaseName=t,this.collectionName=n,this.schema=r,this.internals=a,this.options=o,this.settings=i,this.primaryPath=nG(this.schema.primaryKey)}var s=g.prototype;return s.bulkWrite=function(t,n){return(e=e||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yx(this),t.forEach((function(e){if(!e.document._rev||e.previous&&!e.previous._rev)throw $y("SNH",{args:{row:e}})})),e.next=4,this.internals;case 4:return r=e.sent,a={success:{},error:{}},o=t.map((function(e){return e.document[c.primaryPath]})),e.next=9,r.dexieDb.transaction("rw",r.dexieTable,r.dexieDeletedTable,hn(dn().mark((function e(){var g,s,l,u,f;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=new Map,e.next=3,SJ(c.internals,o);case 3:return e.sent.forEach((function(e){var t=e?BJ(e):e;return t&&g.set(t[c.primaryPath],t),t})),i=SG(c,c.primaryPath,g,t,n),a.error=i.errors,s=[],l=[],u=[],f=[],i.bulkInsertDocs.forEach((function(e){var t=e.document[c.primaryPath];a.success[t]=e.document,s.push(e.document)})),i.bulkUpdateDocs.forEach((function(e){var t=e.document[c.primaryPath];if(a.success[t]=e.document,e.document._deleted&&e.previous&&!e.previous._deleted)l.push(t),u.push(e.document);else if(e.document._deleted&&e.previous&&e.previous._deleted)u.push(e.document);else{if(e.document._deleted)throw $y("SNH",{args:{row:e}});s.push(e.document)}})),e.next=15,Promise.all([s.length>0?r.dexieTable.bulkPut(s.map((function(e){return GJ(e)}))):EZ,l.length>0?r.dexieTable.bulkDelete(l):EZ,u.length>0?r.dexieDeletedTable.bulkPut(u.map((function(e){return GJ(e)}))):EZ,f.length>0?r.dexieDeletedTable.bulkDelete(f):EZ]);case 15:case"end":return e.stop()}}),e)}))));case 9:return(i=RZ(i)).eventBulk.events.length>0&&(g=RZ(i.newestRow).document,i.eventBulk.checkpoint={id:g[this.primaryPath],lwt:g._meta.lwt},s=sG(),i.eventBulk.events.forEach((function(e){return e.endTime=s})),this.changes$.next(i.eventBulk)),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},s.findDocumentsById=function(e,n){return(t=t||hn(dn().mark((function e(t,n){var r,a,o=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yx(this),e.next=3,this.internals;case 3:return r=e.sent,a={},e.next=7,r.dexieDb.transaction("r",r.dexieTable,r.dexieDeletedTable,hn(dn().mark((function e(){var i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,SJ(o.internals,t);case 3:i=e.sent,e.next=9;break;case 6:return e.next=8,r.dexieTable.bulkGet(t);case 8:i=e.sent;case 9:t.forEach((function(e,t){var r=i[t];!r||r._deleted&&!n||(a[e]=BJ(r))}));case 10:case"end":return e.stop()}}),e)}))));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},s.query=function(e){return Yx(this),YJ(this,e)},s.count=function(e){return(n=n||hn(dn().mark((function e(t){var n,r;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.queryPlan.selectorSatisfiedByIndex){e.next=7;break}return e.next=3,NJ(this,t);case 3:return n=e.sent,e.abrupt("return",{count:n,mode:"fast"});case 7:return e.next=9,YJ(this,t);case 9:return r=e.sent,e.abrupt("return",{count:r.documents.length,mode:"slow"});case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},s.getChangedDocumentsSince=function(e,t){return(r=r||hn(dn().mark((function e(t,n){var r,a,o,i,g,s,c,l,u,f,I=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yx(this),a=n?n.lwt:_Z,o=n?n.id:"",e.next=5,this.internals;case 5:return i=e.sent,e.next=8,Promise.all([i.dexieTable,i.dexieDeletedTable].map((function(e){return(r=r||hn(dn().mark((function e(n){var r,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.where("[_meta.lwt+"+I.primaryPath+"]").above([a,o]).limit(t),e.next=3,r.toArray();case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return BJ(e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 8:return g=e.sent,s=Ge(g,2),c=s[0],l=s[1],zy(u=c.slice(0),l),d=this.primaryPath,u=u.sort(function(e){return function(t,n){return t._meta.lwt===n._meta.lwt?n[e]<t[e]?1:-1:t._meta.lwt-n._meta.lwt}}(d)),u=u.slice(0,t),f=(C=u)[C.length-1],e.abrupt("return",{documents:u,checkpoint:f?{id:f[this.primaryPath],lwt:f._meta.lwt}:n||{id:"",lwt:0}});case 18:case"end":return e.stop()}var C,d}),e,this)})))).apply(this,arguments)},s.remove=function(){return(a=a||hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yx(this),e.next=3,this.internals;case 3:return t=e.sent,e.next=6,Promise.all([t.dexieDeletedTable.clear(),t.dexieTable.clear()]);case 6:return e.abrupt("return",this.close());case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},s.changeStream=function(){return Yx(this),this.changes$.asObservable()},s.cleanup=function(e){return(o=o||hn(dn().mark((function e(t){var n,r=this;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yx(this),e.next=3,this.internals;case 3:return n=e.sent,e.next=6,n.dexieDb.transaction("rw",n.dexieDeletedTable,hn(dn().mark((function e(){var a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=sG()-t,e.next=3,n.dexieDeletedTable.where("_meta.lwt").below(a).toArray();case 3:return o=e.sent,i=o.map((function(e){return e[r.primaryPath]})),e.next=7,n.dexieDeletedTable.bulkDelete(i);case 7:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},s.getAttachmentData=function(e,t,n){throw Yx(this),new Error("Attachments are not implemented in the dexie RxStorage. Make a pull request.")},s.close=function(){return Yx(this),this.closed=!0,this.changes$.complete(),function(e){(fJ=fJ||hn(dn().mark((function e(t){var n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,r=bJ.get(t),0===(a=r-1)?(n.dexieDb.close(),bJ.delete(t)):bJ.set(t,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(this.internals),EZ},s.conflictResultionTasks=function(){return new GZ},s.resolveConflictResultionTask=function(e){return(i=i||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)},g}();function xx(e,t,n){var r=function(e,t,n,r){var a=nG(r.primaryKey),o="rxdb-dexie-"+e+"--"+r.version+"--"+t,i=xG(mJ,o,(function(){var e=hn(dn().mark((function e(){var t,i,g,s;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=xy(n)).autoOpen=!1,g=new rJ(o,i),b(t={},CJ,kJ(r)),b(t,AJ,"++sequence, id"),b(t,dJ,a+",_meta.lwt,[_meta.lwt+"+a+"]"),s=t,g.version(1).stores(s),e.next=7,g.open();case 7:return e.abrupt("return",{dexieDb:g,dexieTable:g[CJ],dexieDeletedTable:g[dJ]});case 8:case"end":return e.stop()}}),e)})))();return mJ.set(o,i),bJ.set(i,0),e}));return i}(t.databaseName,t.collectionName,n,t.schema),a=new Jx(e,t.databaseName,t.collectionName,t.schema,r,t.options,n);return Vx(hJ,t,a),Promise.resolve(a)}function Yx(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var Nx=function(){function e(e){this.name=hJ,this.statics=pJ,this.settings=e}return e.prototype.createStorageInstance=function(e){return function(e){if(e.schema.keyCompression)throw $y("UT5",{args:{params:e}});if((t=e.schema).encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)throw $y("UT6",{args:{params:e}});var t;if(e.schema.attachments&&e.schema.attachments.compression)throw $y("UT7",{args:{params:e}})}(e),function(e){if(e.indexes){var t=new Set;e.indexes.forEach((function(n){Ky(n).forEach((function(r){if(!t.has(r)&&(t.add(r),"boolean"===eG(e,r).type))throw $y("DXE1",{schema:e,index:n,field:r})}))}))}}(e.schema),xx(this,e,this.settings)},e}();function Hx(){return new Nx(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}var Fx=n(4164),Kx=Boolean("undefined"!==typeof window&&window.document);function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ex.apply(this,arguments)}function Tx(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Mx(e,t){if(null==e)return{};var n,r,a=Tx(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zx=n(2007),Dx=n.n(zx),Lx=n(8246),Ux=n.n(Lx),jx=5,Ox=10,Qx=20,Px=30;var _x=!1,qx=e.createContext(null),$x="unmounted",eY="exited",tY="entering",nY="entered",rY="exiting",aY=function(t){var n,r;function a(e,n){var r;r=t.call(this,e,n)||this;var a,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(a=eY,r.appearStatus=tY):a=nY:a=e.unmountOnExit||e.mountOnEnter?$x:eY,r.state={status:a},r.nextCallback=null,r}r=t,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,C(n,r),a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===$x?{status:eY}:null};var o=a.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==tY&&n!==nY&&(t=tY):n!==tY&&n!==nY||(t=rY)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===tY){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Fx.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===eY&&this.setState({status:$x})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[Fx.findDOMNode(this),r],o=a[0],i=a[1],g=this.getTimeouts(),s=r?g.appear:g.enter;!e&&!n||_x?this.safeSetState({status:nY},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,i),this.safeSetState({status:tY},(function(){t.props.onEntering(o,i),t.onTransitionEnd(s,(function(){t.safeSetState({status:nY},(function(){t.props.onEntered(o,i)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Fx.findDOMNode(this);t&&!_x?(this.props.onExit(r),this.safeSetState({status:rY},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:eY},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:eY},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Fx.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],i=a[1];this.props.addEndListener(o,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var t=this.state.status;if(t===$x)return null;var n=this.props,r=n.children,a=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Tx(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(qx.Provider,{value:null},"function"===typeof r?r(t,a):e.cloneElement(e.Children.only(r),a))},a}(e.Component);function oY(){}aY.contextType=qx,aY.propTypes={},aY.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oY,onEntering:oY,onEntered:oY,onExit:oY,onExiting:oY,onExited:oY},aY.UNMOUNTED=$x,aY.EXITED=eY,aY.ENTERING=tY,aY.ENTERED=nY,aY.EXITING=rY;var iY=aY,gY=n(7381),sY=n.n(gY),cY=n(77),lY=n.n(cY);function uY(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return fY(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fY(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,g=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){g=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(g)throw o}}}}function fY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IY(e,t,n){var r,a=e,o=uY(t&&t.split?t.split("."):[t]);try{for(o.s();!(r=o.n()).done;){var i=r.value;a=a?a[i]:void 0}}catch(xQ){o.e(xQ)}finally{o.f()}return void 0===a?n:a}function CY(e,t){return IY(e,t,t)}function dY(e,t){for(var n={},r=0,a=Object.keys(t);r<a.length;r++){var i=a[r],g=t[i];null!==g&&("object"===o(g)?n[i]=dY(e,g):n[i]=CY(e,g))}return n}var AY={baseStyle:function(e,t){var n=t.intent,r=void 0===n?"info":n;return{backgroundColor:"intents.".concat(r,".background"),border:"1px solid ".concat(e.intents[r].border),borderRadius:"radii.2",color:e.intents[r].text}},appearances:{},sizes:{}};function hY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pY={baseStyle:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hY(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({borderRadius:"round"===t.shape?"100%":"radii.1"},function(e,t){var n=t.color,r=t.hashValue;if("automatic"===n){var a=Object.keys(e.fills);return r?e.fills[a[r%a.length]]:e.fills[a[Math.floor(Math.random()*a.length)]]}return e.fills[n]}(e,t))},appearances:{},sizes:{}},mY={subtle:function(e,t){var n=IY(e,"fills.".concat(t.color),{backgroundColor:t.color,color:t.color});return{color:n.color,backgroundColor:n.backgroundColor}}},bY={baseStyle:{height:16,paddingY:0,paddingX:6,borderRadius:"radii.1",fontSize:"11.5px",textAlign:"center",textDecoration:"none",textTransform:"uppercase"},appearances:mY,sizes:{}},yY=function(e){return"danger"===e?"red500":"success"===e?"green500":"gray800"},vY=function(e,t){return"danger"===e?"red".concat(t?500:300):"success"===e?"green".concat(t?400:300):"gray".concat(t?600:500)},ZY=function(e,t,n,r){var a=function(e,t){if("destructive"===e)return"red";switch(t){case"success":return"green";case"danger":return"red";default:return"blue"}}(e,t);return{backgroundColor:"colors.".concat(a,"500"),borderColor:"colors.".concat(a,"500"),color:n||"white",selectors:{_hover:{backgroundColor:"colors.".concat(a,"600"),borderColor:"colors.".concat(a,"600")},_disabled:{backgroundColor:"colors.".concat(a,"100"),borderColor:"colors.".concat(a,"100")},_focus:{backgroundColor:"colors.".concat(a,"500"),boxShadow:"0 0 0 2px ".concat(r&&r.colors["".concat(a,"100")]),borderColor:"colors.".concat(a,"500")},_active:{backgroundColor:"colors.".concat(a,"700"),borderColor:"colors.".concat(a,"700")}}}},GY={primary:function(e,t){var n=t.appearance,r=t.color,a=t.intent;return ZY(n,a,r,e)},default:{backgroundColor:"white",border:function(e,t){return"1px solid ".concat(e.colors[vY(t.intent)])},color:function(e,t){return t.color||e.colors[yY(t.intent)]},selectors:{_disabled:{color:"colors.gray500",borderColor:"colors.gray300"},_hover:{border:function(e,t){return"1px solid ".concat(e.colors[vY(t.intent,!0)])},backgroundColor:"colors.gray50"},_active:{backgroundColor:"colors.gray100"}}},minimal:{backgroundColor:"transparent",color:function(e,t){return t.color||e.colors[yY(t.intent)]},selectors:{_disabled:{color:"colors.gray500",opacity:.6},_hover:{backgroundColor:"colors.gray100"},_active:{backgroundColor:"colors.gray200"}}},destructive:ZY("destructive")},BY={baseStyle:{fontFamily:"fontFamilies.ui",border:"1px solid transparent",borderRadius:"radii.1",color:function(e,t){var n=t.color;return e.colors[n]||n||"colors.default"},transition:"box-shadow 80ms ease-in-out",selectors:{_focus:{boxShadow:"shadows.focusRing"},_disabled:{cursor:"not-allowed",pointerEvents:"none"}}},appearances:GY,sizes:{small:{height:24,minWidth:24,fontSize:"fontSizes.1",lineHeight:"24px",paddingLeft:12,paddingRight:12},medium:{height:32,minWidth:32,fontSize:"fontSizes.1",lineHeight:"32px",paddingLeft:16,paddingRight:16},large:{height:40,minWidth:40,fontSize:"fontSizes.2",lineHeight:"40px",paddingLeft:20,paddingRight:20}}},kY={baseStyle:{borderRadius:"radii.1"},appearances:{},sizes:{}},SY={baseStyle:{},appearances:{default:{selectors:{_base:{color:"white",background:"white",boxShadow:function(e){return"inset 0 0 0 1px ".concat(e.colors.gray400)}},_disabled:{cursor:"not-allowed",background:"colors.gray100",color:"colors.gray100",boxShadow:function(e){return"inset 0 0 0 1px ".concat(e.colors.gray100)}},_hover:{boxShadow:function(e){return"inset 0 0 0 1px ".concat(e.colors.gray600)}},_focus:{boxShadow:function(e){return"0 0 0 2px ".concat(e.colors.blue100)}},_active:{background:"colors.gray100",boxShadow:function(e){return"inset 0 0 0 1px ".concat(e.colors.gray500)}},_checked:{color:"white",boxShadow:function(e){return"inset 0 0 0 -1px ".concat(e.colors.blue700)},background:"colors.blue500"},_checkedHover:{color:"white",background:"colors.blue600",boxShadow:function(e){return"inset 0 0 0 1px ".concat(e.colors.blue600)}},_checkedActive:{color:"white",boxShadow:function(e){return"inset 0 0 0 -1px ".concat(e.colors.blue700)},background:"colors.blue700"},_checkedDisabled:{color:"colors.gray600",background:"colors.gray100"}}}},sizes:{}},wY={baseStyle:{},appearances:{default:{backgroundColor:"rgba(16, 112, 202, 0.06)",boxShadow:"inset 0 0 0 1px ".concat("rgba(16, 112, 202, 0.14)"),paddingX:6,paddingY:3,borderRadius:"radii.1"}},sizes:{}},WY={baseStyle:{paddingY:8,paddingX:32}},RY={baseStyle:{paddingX:32,paddingBottom:32,paddingTop:24}},VY={baseStyle:{paddingX:32,paddingTop:32,paddingBottom:24}},XY={baseStyle:{display:"flex",flexDirection:"row",height:64,width:"100%",borderWidth:1,borderRadius:"radii.1",borderStyle:"solid",borderColor:"colors.gray400",alignItems:"center",justifyContent:"space-between",selectors:{_invalid:{backgroundColor:"colors.red25",borderColor:"colors.red500"}}}};function JY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JY(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YY={gray900:"#101840",gray800:"#474d66",gray700:"#696f8c",gray600:"#8f95b2",gray500:"#c1c4d6",gray400:"#d8dae5",gray300:"#E6E8F0",gray200:"#edeff5",gray100:"#F4F5F9",gray90:"#F4F6FA",gray75:"#F9FAFC",gray50:"#FAFBFF",white:"#FFFFFF",blue900:"#0A1433",blue800:"#142966",blue700:"#1F3D99",blue600:"#2952CC",blue500:"#3366FF",blue400:"#5C85FF",blue300:"#85A3FF",blue200:"#ADC2FF",blue100:"#D6E0FF",blue50:"#EBF0FF",blue25:"#F3F6FF",red700:"#7D2828",red600:"#A73636",red500:"#D14343",red300:"#EE9191",red100:"#F9DADA",red25:"#FDF4F4",green900:"#10261E",green800:"#214C3C",green700:"#317159",green600:"#429777",green500:"#52BD95",green400:"#75CAAA",green300:"#97D7BF",green200:"#BAE5D5",green100:"#DCF2EA",green25:"#F5FBF8",orange700:"#996A13",orange500:"#FFB020",orange100:"#F8E3DA",orange25:"#FFFAF2",purple600:"#6E62B6",purple100:"#E7E4F9",teal800:"#0F5156",teal100:"#D3F5F7",yellow800:"#66460D",yellow100:"#FFEFD2"},NY=xY(xY({},YY),{},{muted:YY.gray700,default:YY.gray800,dark:YY.gray900,selected:YY.blue500,tint1:YY.gray50,tint2:YY.gray75,overlay:"rgba(67, 90, 111, 0.7)",yellowTint:YY.yellow100,greenTint:YY.green25,orangeTint:YY.orange25,redTint:YY.red25,blueTint:YY.blue25,purpleTint:YY.purple100,tealTint:YY.teal100,border:{default:YY.gray300,muted:YY.gray200},icon:{default:YY.gray700,muted:YY.gray600,disabled:YY.gray400,selected:YY.blue500},text:{danger:YY.red500,success:YY.green500,info:YY.blue500}}),HY={baseStyle:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",backgroundColor:"colors.gray50",borderWidth:1,borderRadius:"radii.1",borderStyle:"dashed",borderColor:"colors.gray400",height:"100%",width:"100%",paddingX:40,paddingY:40,selectors:{_focus:{outline:"none",borderStyle:"solid",borderColor:"colors.blue200",boxShadow:"0px 0px 0px 2px ".concat(NY.blue100)},_hover:{cursor:"pointer",backgroundColor:"colors.gray90",borderColor:"colors.gray600"},_hoverBrowseCopy:{color:"colors.blue500",cursor:"pointer"},_hoverOrDragCopy:{color:"colors.gray800",cursor:"pointer"},_disabled:{backgroundColor:"colors.gray50",borderColor:"colors.gray50",borderStyle:"solid"},_dragHover:{backgroundColor:"colors.blue50",borderColor:"colors.blue500",borderStyle:"solid"},_invalid:{backgroundColor:"colors.red100",borderColor:"colors.red500",borderStyle:"solid"}}}},FY={baseStyle:{selectors:{_child:{selectors:{"&:focus":{zIndex:"zIndices.focused"},"&:active":{zIndex:"zIndices.focused"}}},_firstChild:{borderTopRightRadius:0,borderBottomRightRadius:0},_middleChild:{borderRadius:0,marginLeft:"-1px"},_lastChild:{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:"-1px"}}},appearances:{},sizes:{}},KY={baseStyle:{color:"colors.dark",fontFamily:"fontFamilies.display",fontWeight:"fontWeights.semibold"},appearances:{},sizes:{900:{fontSize:"fontSizes.7",lineHeight:"lineHeights.6",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tightest"},800:{fontSize:"fontSizes.6",lineHeight:"lineHeights.5",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tightest"},700:{fontSize:"fontSizes.5",lineHeight:"lineHeights.3",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tighter"},600:{fontSize:"fontSizes.4",lineHeight:"lineHeights.3",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tighter"},500:{fontFamily:"fontFamilies.ui",fontSize:"fontSizes.3",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tight",lineHeight:"lineHeights.2"},400:{fontSize:"fontSizes.2",lineHeight:"lineHeights.1",letterSpacing:"letterSpacings.tight",fontFamily:"fontFamilies.ui"},300:{fontSize:"fontSizes.1",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.normal",fontFamily:"fontFamilies.ui"},200:{fontSize:"fontSizes.1",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.normal",fontFamily:"fontFamilies.ui",color:"colors.muted"},100:{fontSize:"fontSizes.0",textTransform:"uppercase",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.wide",fontFamily:"fontFamilies.ui",color:"colors.muted"}}},EY={baseStyle:function(e,t){var n=t.color;return{fill:IY(e,"intents.".concat(n,".icon"))||IY(e,"colors.icon.".concat(n))||IY(e,"colors.".concat(n))||n}},appearances:{},sizes:{}},TY={baseStyle:function(e,t){var n=t.intent,r=void 0===n?"info":n;return{color:e.intents[r].text}},appearances:{},sizes:{}},MY={baseStyle:{borderColor:"colors.gray400",borderRadius:"radii.1",borderStyle:"solid",borderWidth:1,color:"colors.default",fontFamily:"fontFamilies.ui",fontSize:"fontSizes.1",lineHeight:"lineHeights.0",paddingX:12,transition:"box-shadow 80ms ease-in-out",selectors:{_placeholder:{color:"colors.gray600"},_disabled:{cursor:"not-allowed",backgroundColor:"colors.gray100",color:"colors.muted"}}},appearances:{default:{backgroundColor:"white",borderColor:"colors.gray400",selectors:{_focus:{zIndex:"zIndices.focused",boxShadow:"shadows.focusRing",borderColor:"colors.blue200"},_invalid:{borderColor:"colors.red500"}}},none:{borderColor:"transparent",backgroundColor:"transparent"}},sizes:{small:{height:24},medium:{height:32},large:{height:40,lineHeight:"lineHeights.1"}}},zY={baseStyle:{color:"colors.dark",fontFamily:"fontFamilies.display",fontWeight:"fontWeights.semibold"},appearances:{},sizes:{900:{fontSize:"fontSizes.7",lineHeight:"lineHeights.6",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tightest"},800:{fontSize:"fontSizes.6",lineHeight:"lineHeights.5",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tightest"},700:{fontSize:"fontSizes.5",lineHeight:"lineHeights.3",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tighter"},600:{fontSize:"fontSizes.4",lineHeight:"lineHeights.3",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tighter"},500:{fontFamily:"fontFamilies.ui",fontSize:"fontSizes.3",fontWeight:"fontWeights.bold",letterSpacing:"letterSpacings.tight",lineHeight:"lineHeights.2"},400:{fontSize:"fontSizes.2",lineHeight:"lineHeights.1",letterSpacing:"letterSpacings.tight",fontFamily:"fontFamilies.ui"},300:{fontSize:"fontSizes.1",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.normal",fontFamily:"fontFamilies.ui"},200:{fontSize:"fontSizes.1",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.normal",fontFamily:"fontFamilies.ui",color:"colors.muted"},100:{fontSize:"fontSizes.0",textTransform:"uppercase",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.wide",fontFamily:"fontFamilies.ui",color:"colors.muted"}}},DY={baseStyle:{borderRadius:"radii.1",transition:"120ms all ease-in-out",color:function(e,t){return"neutral"===t.color?"gray700":"blue500"},textDecoration:"none",selectors:{_hover:{color:function(e,t){return"neutral"===t.color?e.colors.gray800:e.colors.blue600}},_active:{color:function(e,t){return"neutral"===t.color?e.colors.gray900:e.colors.blue700}},_focus:{boxShadow:function(e,t){var n=t.color;return"0 0 0 2px ".concat("neutral"===n?e.colors.gray300:e.colors.blue200)}}}},appearances:{},sizes:{}},LY={baseStyle:{},appearances:{},sizes:{}},UY={baseStyle:{outline:"none",textDecoration:"none",display:"flex",position:"relative",paddingX:12,selectors:{_isSelectable:{cursor:"pointer"},_disabled:{cursor:"not-allowed",userSelect:"none"}}},appearances:{default:{backgroundColor:"white",selectors:{"&:before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:2,borderRadiusTopLeft:0,borderRadiusTopRight:2,borderRadiusBottomRight:2,borderRadiusBottomLeft:0,backgroundColor:"colors.blue500",transition:"0.25s",transformOrigin:"left center",transform:"scaleX(0)"},_hover:{backgroundColor:"colors.gray75"},_focus:{backgroundColor:"colors.gray75"},_active:{backgroundColor:"intents.info.background",selectors:{"&:before":{transform:"scaleX(1)"}}},_current:{backgroundColor:"intents.info.background",selectors:{"&:before":{transform:"scaleX(1)"}}}}}}},jY={baseStyle:{outline:"none",textDecoration:"none",display:"flex",position:"relative",backgroundColor:"white",height:32,borderBottom:function(e){return"1px solid ".concat(e.colors.border.muted)},selectors:{_before:{content:'""',position:"absolute",left:0,top:0,bottom:0,width:2,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:2,borderBottomRightRadius:2,backgroundColor:"colors.blue500",transition:"0.25s",transformOrigin:"left center",transform:"scaleX(0)"},_isSelectable:{cursor:"pointer"},_hover:{backgroundColor:"colors.gray75"},_focus:{backgroundColor:"colors.gray75"},_active:{backgroundColor:"intents.info.background"},_selected:{backgroundColor:"intents.info.background"," span":{color:"intents.info.text"},"&:before":{transform:"scaleX(1)"}},_disabled:{opacity:.5,pointerEvents:"none",cursor:"not-allowed"}}}};function OY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OY(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PY(e,t){var n=t.border,r=t.value;return Object.prototype.hasOwnProperty.call(e.colors.border,r)?"1px solid ".concat(e.colors.border[r]):!0===r?"1px solid ".concat(e.colors.border.default):!1===r?null:Object.prototype.hasOwnProperty.call(e.colors.border,n)?"1px solid ".concat(e.colors.border[n]):!0===n?"1px solid ".concat(e.colors.border.default):r||n}var _Y={baseStyle:function(e,t){var n,r,a={};return(e.shadows[t.hoverElevation]||e.shadows[t.activeElevation])&&Object.assign(a,{transitionDuration:"150ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:"cubic-bezier(0.0, 0.0, 0.2, 1)"}),e.shadows[t.hoverElevation]&&(n={transform:"translateY(-2px)",boxShadow:"shadows.".concat(t.hoverElevation)}),e.shadows[t.activeElevation]&&(r={transform:"translateY(-1px)",boxShadow:"shadows.".concat(t.activeElevation)}),QY(QY({background:e.colors[t.background]||t.background,boxShadow:e.shadows[t.elevation],borderTop:PY(e,{border:t.border,value:t.borderTop}),borderRight:PY(e,{border:t.border,value:t.borderRight}),borderBottom:PY(e,{border:t.border,value:t.borderBottom}),borderLeft:PY(e,{border:t.border,value:t.borderLeft})},a),{},{selectors:{_hover:n,_active:r}})},appearances:{},sizes:{}};function qY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qY(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eN={300:{fontSize:"fontSizes.1",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.1",letterSpacing:"letterSpacings.normal"},400:{fontSize:"fontSizes.2",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.3",letterSpacing:"letterSpacings.tight"},500:{fontSize:"fontSizes.3",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.3",letterSpacing:"letterSpacings.tight"},600:{fontSize:"fontSizes.4",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.4",letterSpacing:"letterSpacings.tighter"}},tN={baseStyle:{fontFamily:function(e,t){var n=t.fontFamily,r=void 0===n?"ui":n;return e.fontFamilies[r]?"fontFamilies.".concat(r):r},color:function(e,t){var n=t.color,r=void 0===n?"default":n;return e.colors[r]?"colors.".concat(r):r},marginTop:0,marginBottom:0},appearances:{},sizes:$Y($Y({},eN),{},{small:eN[300],medium:eN[400],large:eN[500]})},nN={baseStyle:{fontFamily:"fontFamilies.ui",borderRadius:"radii.1",border:0},appearances:{default:{backgroundColor:"white",border:function(e){return"1px solid ".concat(e.colors.gray400)},color:"colors.gray800",selectors:{_disabled:{cursor:"not-allowed",color:"colors.gray500",borderColor:"colors.gray300"},_hover:{borderColor:"colors.gray600",backgroundColor:"colors.gray50"},_invalid:{borderColor:"colors.red500"},_focus:{borderColor:"colors.blue200",boxShadow:"shadows.focusRing"},_active:{backgroundColor:"colors.gray100"}}}},sizes:{small:{height:24,fontSize:"fontSizes.1",lineHeight:"lineHeights.0"},medium:{height:32,fontSize:"fontSizes.1",lineHeight:"lineHeights.0"},large:{height:40,fontSize:"fontSizes.2",lineHeight:"lineHeights.2"}}},rN={baseStyle:{},appearances:{default:{selectors:{_base:{color:"white",backgroundColor:"colors.gray400"},_disabled:{cursor:"not-allowed",opacity:.5},_hover:{backgroundColor:"colors.gray500"},_focus:{boxShadow:function(e){return"0 0 0 3px ".concat(e.colors.blue100)}},_active:{backgroundColor:"colors.gray600"},_checked:{backgroundColor:"colors.blue500",color:"white"},_checkedHover:{backgroundColor:"colors.blue600",color:"white"},_checkedActive:{backgroundColor:"colors.blue700",color:"white"},_checkedDisabled:{}}}},sizes:{}},aN={baseStyle:{paddingX:12},appearances:{default:{selectors:{_focus:{outline:"none",background:"colors.blue50",boxShadow:function(e){return"inset 0 0 0 1px ".concat(e.colors.blue500)}}}}},sizes:{}},oN={none:{base:"white",hover:"colors.gray75",focus:"colors.gray75",active:"intents.info.background",current:"intents.info.background"},danger:{base:"intents.danger.background",hover:"intents.danger.background",focus:"colors.red100",active:"colors.red100",current:"colors.red100"},warning:{base:"intents.warning.background",hover:"intents.warning.background",focus:"colors.orange100",active:"colors.orange100",current:"colors.orange100"},success:{base:"intents.success.background",hover:"intents.success.background",focus:"colors.green100",active:"colors.green100",current:"colors.green100"}},iN=function(e,t){return oN[e][t]},gN={baseStyle:{paddingY:"2px",backgroundColor:"white",borderRadius:"radii.1"},appearances:{default:{border:function(e){return"1px solid ".concat(e.colors.gray400)},selectors:{_focused:{outline:"none",zIndex:"zIndices.focused",border:function(e){return"1px solid ".concat(e.colors.blue200)},transition:"box-shadow 80ms ease-in-out",boxShadow:"shadows.focusRing"},_disabled:{cursor:"not-allowed",backgroundColor:"colors.gray100"},_invalid:{borderColor:"colors.red600"}}}},sizes:{}};function sN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sN(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lN={300:{fontSize:"fontSizes.1",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.normal"},400:{fontSize:"fontSizes.2",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.2",letterSpacing:"letterSpacings.tight"},500:{fontSize:"fontSizes.3",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.2",letterSpacing:"letterSpacings.tight"},600:{fontSize:"fontSizes.4",fontWeight:"fontWeights.normal",lineHeight:"lineHeights.3",letterSpacing:"letterSpacings.tighter"}},uN={Alert:AY,Avatar:pY,Badge:bY,Button:BY,Card:kY,Checkbox:SY,Code:wY,DialogBody:WY,DialogFooter:RY,DialogHeader:VY,FileCard:XY,FileUploader:HY,Group:FY,Heading:KY,Icon:EY,InlineAlert:TY,Input:MY,Label:zY,List:LY,Link:DY,MenuItem:UY,Option:jY,Pane:_Y,Paragraph:tN,Radio:SY,Select:nN,Spinner:{baseStyle:{color:"rgba(67, 90, 111, 0.47)"},appearances:{},sizes:{small:{width:32,height:32},medium:{width:40,height:40},large:{width:48,height:48}}},Switch:rN,Tab:{baseStyle:{fontFamily:"fontFamilies.ui",fontWeight:500,marginBottom:function(e,t){return"vertical"===t.direction?"8px":null}},appearances:{primary:{color:"colors.muted",paddingTop:"6px",paddingBottom:"6px",paddingLeft:"2px",paddingRight:"2px",position:"relative",selectors:{":not(:last-child)":{marginRight:function(e,t){return"horizontal"===t.direction?"20px":null}},_before:{content:'""',position:"absolute",bottom:0,right:0,height:"2px",borderTopLeftRadius:2,borderTopRightRadius:2,borderBottomLeftRadius:0,borderBottomRightRadius:0,backgroundColor:"colors.blue500",width:"100%",transition:"0.25s",transform:"scaleY(0)",transformOrigin:"bottom center"},_hover:{color:"colors.default"},_current:{color:"colors.blue500","&:before":{transform:"scaleY(1)"},"&:focus":{color:"colors.blue600"}},_focus:{boxShadow:"shadows.focusRing",color:"colors.default"},_disabled:{pointerEvents:"none",cursor:"not-allowed",color:"colors.gray500","&:before":{backgroundColor:"colors.gray500"}}}},secondary:{paddingX:"16px",paddingY:"8px",borderRadius:"radii.1",color:"colors.default",selectors:{":not(:last-child)":{marginRight:function(e,t){return"horizontal"===t.direction?"8px":null}},_hover:{backgroundColor:"colors.gray100",color:"colors.gray800"},_active:{backgroundColor:"colors.gray200"},_current:{backgroundColor:"colors.blue50",color:"colors.blue500"},_focus:{boxShadow:"shadows.focusRing"},_disabled:{pointerEvents:"none",cursor:"not-allowed",color:"colors.gray500",'&[aria-current="page"],&[aria-selected="true"]':{backgroundColor:"colors.gray100"}}}}}},Table:{baseStyle:{borderRadius:"radii.1",border:"muted"},appearances:{},sizes:{}},TableCell:aN,TableHead:{baseStyle:{borderBottom:"default",background:"colors.tint2",height:"56px",fontSize:"fontSizes.1",fontWeight:"fontWeights.bold",lineHeight:"lineHeights.0",letterSpacing:"letterSpacings.normal",fontFamily:"fontFamilies.ui",color:"colors.muted",textTransform:"uppercase",selectors:{_firstOfType:{borderTopLeftRadius:"radii.1",borderTopRightRadius:"radii.1"}}},appearances:{},sizes:{}},TableRow:{baseStyle:{outline:"none",textDecoration:"none",height:64,selectors:{_lastOfType:{borderBottom:"none",borderBottomLeftRadius:"radii.1",borderBottomRightRadius:"radii.1"},_isSelectable:{cursor:"pointer"}}},appearances:{default:{backgroundColor:function(e,t){return iN(t.intent,"base")},selectors:{_hover:{backgroundColor:function(e,t){return iN(t.intent,"hover")}},_focus:{backgroundColor:function(e,t){return iN(t.intent,"focus")}},_active:{backgroundColor:function(e,t){return iN(t.intent,"active")}},_current:{backgroundColor:function(e,t){return iN(t.intent,"current")}}}}}},TagInput:gN,Text:{baseStyle:{},appearances:{},sizes:cN(cN({},lN),{},{small:lN[300],medium:lN[400],large:lN[500]})},TextDropdownButton:{baseStyle:{fontFamily:"fontFamilies.ui",backgroundColor:"transparent",borderRadius:"radii.1",paddingX:4,marginX:-4,paddingY:2,marginY:-2,color:"colors.default",selectors:{_disabled:{cursor:"not-allowed",pointerEvents:"none"},_focus:{boxShadow:"shadows.focusRing"}}},appearances:{},sizes:{small:{fontSize:"fontSizes.1",lineHeight:"lineHeights.0"},medium:{fontSize:"fontSizes.1",lineHeight:"lineHeights.0"},large:{fontSize:"fontSizes.2",lineHeight:"lineHeights.2"}}},Tooltip:{baseStyle:{paddingY:8,paddingX:16,maxWidth:240,borderRadius:"radii.2",boxShadow:"shadows.3"},appearances:{card:{backgroundColor:"white"},default:{color:"white",backgroundColor:"colors.gray800"}},sizes:{}}},fN={neutral:{color:NY.gray800,backgroundColor:NY.gray200},blue:{color:NY.blue600,backgroundColor:NY.blue100},red:{color:NY.red700,backgroundColor:NY.red100},orange:{color:NY.orange700,backgroundColor:NY.orange100},yellow:{color:NY.yellow800,backgroundColor:NY.yellow100},green:{color:NY.green700,backgroundColor:NY.green100},teal:{color:NY.teal800,backgroundColor:NY.teal100},purple:{color:NY.purple600,backgroundColor:NY.purple100}},IN={info:{background:NY.blue25,border:NY.blue500,text:NY.blue600,icon:NY.blue500},success:{background:NY.green25,border:NY.green500,text:NY.green700,icon:NY.green500},warning:{background:NY.orange25,border:NY.orange500,text:NY.orange700,icon:NY.orange500},danger:{background:NY.red25,border:NY.red500,text:NY.red600,icon:NY.red500}},CN=["0px","4px","8px"],dN="rgba(67, 90, 111, 0.3)",AN="rgba(67, 90, 111, 0.47)",hN=["0 0 1px ".concat(dN),"0 0 1px ".concat(dN,", 0 2px 4px -2px ").concat(AN),"0 0 1px ".concat(dN,", 0 5px 8px -4px ").concat(AN),"0 0 1px ".concat(dN,", 0 8px 10px -4px ").concat(AN),"0 0 1px ".concat(dN,", 0 16px 24px -8px ").concat(AN)];hN.focusRing="0 0 0 2px ".concat(NY.blue100);var pN=hN,mN=["10px","12px","14px","16px","18px","20px","24px","32px"];mN.body="14px",mN.heading="16px",mN.caption="10px";var bN={focused:2,stack:5,positioner:10,overlay:20,toaster:30};function yN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yN(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZN(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BN=GN(GN({},vN(vN({colors:NY,fills:fN,intents:IN,radii:CN,shadows:pN},{fontFamilies:{display:'"SF UI Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',ui:'"SF UI Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"SF Mono", "Monaco", "Inconsolata", "Fira Mono", "Droid Sans Mono", "Source Code Pro", monospace'},fontSizes:mN,fontWeights:{light:300,normal:400,semibold:500,bold:600},letterSpacings:{tightest:"-0.2px",tighter:"-0.07px",tight:"-0.05px",normal:"0",wide:"0.6px"},lineHeights:["16px","18px","20px","24px","28px","32px","40px"]}),{},{zIndices:bN})),{},{components:uN}),kN=e.createContext(BN),SN=(kN.Consumer,kN.Provider),wN=kN;var WN=function(){return(0,e.useContext)(wN)},RN=["selectors"];function VN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e?e.apply(void 0,n):e}function JN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e&&"object"===o(e)){for(var a={},i=0,g=Object.keys(e);i<g.length;i++){var s=g[i];a[s]=JN.apply(void 0,[e[s]].concat(n))}return a}return XN.apply(void 0,[e].concat(n))}function xN(t,n,r,a){var o=(0,e.useRef)({});return(0,e.useMemo)((function(){var e=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=XN(n,e,t),o=JN(a.baseStyle,e,t),i=JN(IY(a,"sizes.".concat(t.size),{}),e,t),g=JN(IY(a,"appearances.".concat(t.appearance),{}),e,t);return sY()({},r,o,i,g)}(t,n,r,a);return lY()(o.current,e)||(o.current=e),o.current}),[t,n,r,a])}function YN(t,n){return(0,e.useMemo)((function(){for(var e=(0,Lx.splitBoxProps)(t),r=e.matchedProps,a=r.selectors,o=void 0===a?{}:a,i=Mx(r,RN),g=e.remainingProps,s={},c=0,l=Object.keys(o);c<l.length;c++){var u=l[c];s[u in n?n[u]:u]=o[u]}var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VN(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);return lY()({},g)||(f.style=g),lY()({},s)||(f.selectors=s),f}),[t,n])}function NN(t,n,r,a){var o=WN(),i=IY(o,"components.".concat(t))||{},g=xN(o,n,i,a);return YN((0,e.useMemo)((function(){return dY(o,g)}),[o,g]),r)}var HN=n(7441),FN=["color","icon","size","title"];function KN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KN(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var TN=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.color,a=t.icon,o=t.size,i=t.title,g=Mx(t,FN);if(!a||"string"===typeof a)return null;var s={color:r,size:o,title:i},c=null;if(HN.isValidElementType(a)){var l=a;c=e.createElement(l,Ex({ref:n},s))}else e.isValidElement(a)&&(c=e.cloneElement(a,EN(EN(EN({},s),a.props),{},{ref:n})));return e.createElement(Ux(),Ex({display:"inline-flex"},g),c)})));TN.propTypes={color:Dx().string,icon:Dx().oneOfType([Dx().elementType,Dx().element]),size:Dx().number,title:Dx().string};var MN={fontSize:"16px",fontWeight:400,lineHeight:"20px",letterSpacing:"-0.05px"},zN={fontSize:"14px",fontWeight:400,lineHeight:"20px",letterSpacing:"-0.05px"},DN={fontSize:"12px",fontWeight:400,lineHeight:"16px",letterSpacing:"0"},LN=function(e){return e<=32?DN:e<=40?zN:MN},UN=["delay","size"],jN=["height","width"];function ON(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ON(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var PN=(0,Lx.keyframes)("loading",{0:{transform:"rotate(0)"},100:{transform:"rotate(360deg)"}}),_N=(0,Lx.keyframes)("loading-circle",{0:{strokeDashoffset:600},100:{strokeDashoffset:0}}),qN={},$N=(0,e.memo)((0,e.forwardRef)((function(t,n){var r,a=t.delay,o=void 0===a?0:a,i=t.size,g=void 0===i?"medium":i,s=Mx(t,UN),c=Ge((0,e.useState)(0===o),2),l=c[0],u=c[1],f=NN("Spinner",{size:g},qN,qN),I="string"===typeof g?f:{width:g,height:g},C=I.height,d=I.width,A=Mx(I,jN);return(0,e.useEffect)((function(){var e=null;return o>0&&(e=setTimeout((function(){u(!0)}),o)),function(){clearTimeout(e)}}),[o]),l?e.createElement(Ux(),Ex({width:d,height:C,lineHeight:0},s,A,{ref:n}),e.createElement(Ux(),{is:"svg",animation:"".concat(PN," 2s linear infinite"),x:"0px",y:"0px",viewBox:"0 0 150 150"},e.createElement(Ux(),Ex({is:"circle"},(r=f.color,{animation:"".concat(_N," 1.6s cubic-bezier(0.4, 0.15, 0.6, 0.85) infinite"),fill:"transparent",stroke:r,strokeDasharray:300,strokeDashoffset:600,strokeLinecap:"round",strokeMiterlimit:10,strokeWidth:12}),{cx:"75",cy:"75",r:"60"})))):null})));$N.propTypes=QN(QN({},Ux().propTypes),{},{delay:Dx().number,size:Dx().number});var eH=$N,tH=["appearance","children","className","color","disabled","iconAfter","iconBefore","intent","is","isActive","isLoading"];function nH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nH(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var aH=(0,e.memo)((function(t){var n=t.edge,r=t.icon,a=t.size,o=t.spacing;if(!r)return null;var i="number"===typeof o?o:a,g=-Math.round(.25*i),s=Math.round(.7*a),c="start"===n?g:s,l="end"===n?g:s;return e.createElement(TN,{icon:r,size:a,marginLeft:c,marginRight:l})})),oH={position:"relative",fontWeight:500,display:"inline-flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"center",textDecoration:"none",verticalAlign:"middle",border:"none",outline:"none",userSelect:"none",cursor:"pointer",whiteSpace:"nowrap",WebkitFontSmoothing:"antialiased",WebkitAppearance:"none",MozAppearance:"none"},iH={_active:'&:not([disabled]):active,&:not([disabled])[aria-expanded="true"],&:not([disabled])[data-active]',_disabled:"&[disabled]",_focus:"&:not([disabled]):focus",_focusAndActive:'&:not([disabled]):focus:active,&:not([disabled])[aria-expanded="true"]:focus,&:not([disabled])[data-active]:focus',_hover:"&:not([disabled]):hover"},gH=function(e){return e<=28?12:e<=32?14:e<=40?16:e<=48?18:20},sH=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.appearance,a=void 0===r?"default":r,o=t.children,i=t.className,g=t.color,s=t.disabled,c=t.iconAfter,l=t.iconBefore,u=t.intent,f=void 0===u?"none":u,I=t.is,C=void 0===I?"button":I,d=t.isActive,A=void 0!==d&&d,h=t.isLoading,p=Mx(t,tH),m=NN("Button",{appearance:a,color:g,intent:f,size:p.size||"medium"},iH,oH),b=p.height||m.height,y=!p.size&&p.height?LN(p.height):{},v=gH(b);return e.createElement(Ux(),Ex({is:C,ref:n,className:i,"data-active":A||void 0},m,p,y,{disabled:s||h}),h&&e.createElement(eH,{marginLeft:-Math.round(b/8),marginRight:Math.round(b/4),size:Math.round(b/2)}),e.createElement(aH,{icon:l,size:v,spacing:p.paddingLeft,edge:"start"}),o,e.createElement(aH,{icon:c,size:v,spacing:p.paddingRight,edge:"end"}))})));sH.propTypes=rH(rH(rH(rH(rH({},Lx.dimensions.propTypes),Lx.spacing.propTypes),Lx.position.propTypes),Lx.layout.propTypes),{},{intent:Dx().string,appearance:Dx().string,size:Dx().oneOf(["small","medium","large"]),isLoading:Dx().bool,isActive:Dx().bool,iconBefore:Dx().oneOfType([Dx().elementType,Dx().element]),iconAfter:Dx().oneOfType([Dx().elementType,Dx().element]),disabled:Dx().bool,className:Dx().string});var cH=sH,lH=["disabled","icon","iconSize"];function uH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uH(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var IH=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.disabled,a=t.icon,o=t.iconSize,i=Mx(t,lH),g=t.appearance,s=t.intent,c=void 0===s?"none":s,l=t.size,u=NN("Button",{appearance:g,intent:c,size:void 0===l?"medium":l},iH,oH),f=i.height||u.height,I=gH(f);return e.createElement(cH,Ex({ref:n,paddingLeft:0,paddingRight:0,flex:"none",height:f,width:f,minWidth:f,disabled:r},i),e.createElement(TN,{icon:a,color:"none"!==c||r?"currentColor":"default",size:o||I}))})));IH.propTypes=fH(fH(fH(fH(fH({},Lx.dimensions.propTypes),Lx.spacing.propTypes),Lx.position.propTypes),Lx.layout.propTypes),{},{size:Dx().oneOf(["small","medium","large"]),icon:Dx().oneOfType([Dx().elementType,Dx().element]),iconSize:Dx().number,intent:Dx().string,appearance:Dx().oneOf(["default","minimal","primary"]),isActive:Dx().bool,disabled:Dx().bool,className:Dx().string});var CH=IH,dH=["className","color","name","size","svgPaths16","svgPaths20","title"],AH={},hH={},pH=(0,e.forwardRef)((function(t,n){var r=t.className,a=t.color,o=void 0===a?"currentColor":a,i=t.name,g=t.size,s=void 0===g?16:g,c=t.svgPaths16,l=t.svgPaths20,u=t.title,f=Mx(t,dH),I=NN("Icon",{color:o},AH,hH),C=s>=20?20:16,d=(16===C?c:l).map((function(t,n){return e.createElement("path",{key:n,d:t,fillRule:"evenodd"})})),A="0 0 ".concat(C," ").concat(C);return e.createElement(Ux(),Ex({is:"svg",ref:n,className:r},I,f,{"data-icon":i,width:s,height:s,viewBox:A}),u&&e.createElement("title",null,u),d)}));pH.propTypes={className:Dx().string,color:Dx().string,size:Dx().number,name:Dx().string,title:Dx().string,svgPaths16:Dx().arrayOf(Dx().string).isRequired,svgPaths20:Dx().arrayOf(Dx().string).isRequired};var mH=pH,bH=["M9.41 8l3.29-3.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L8 6.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42L6.59 8 3.3 11.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71L8 9.41l3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L9.41 8z"],yH=["M11.41 10l4.29-4.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L10 8.59l-4.29-4.3a1.003 1.003 0 00-1.42 1.42L8.59 10 4.3 14.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l4.29-4.3 4.29 4.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L11.41 10z"],vH=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:bH,svgPaths20:yH,ref:n,name:"cross"},t))}))),ZH=["activeElevation","background","border","borderBottom","borderLeft","borderRight","borderTop","className","elevation","hoverElevation"];function GH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GH(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kH={_hover:"&:hover",_active:"&:active"},SH={},wH=function(t,n){var r=t.activeElevation,a=t.background,o=t.border,i=t.borderBottom,g=t.borderLeft,s=t.borderRight,c=t.borderTop,l=t.className,u=t.elevation,f=t.hoverElevation,I=Mx(t,ZH),C=NN("Pane",{elevation:u,hoverElevation:f,activeElevation:r,background:a,border:o,borderTop:c,borderRight:s,borderBottom:i,borderLeft:g,className:l},kH,SH);return e.createElement(Ux(),Ex({ref:n,className:l},C,I))};wH.displayName="_Pane";var WH=(0,e.memo)((0,e.forwardRef)(wH));WH.propTypes=BH(BH({},Ux().propTypes),{},{background:Dx().string,elevation:Dx().oneOf([0,1,2,3,4]),hoverElevation:Dx().oneOf([0,1,2,3,4]),activeElevation:Dx().oneOf([0,1,2,3,4]),border:Dx().oneOfType([Dx().string,Dx().bool]),borderTop:Dx().oneOfType([Dx().string,Dx().bool]),borderRight:Dx().oneOfType([Dx().string,Dx().bool]),borderBottom:Dx().oneOfType([Dx().string,Dx().bool]),borderLeft:Dx().oneOfType([Dx().string,Dx().bool])});var RH=WH,VH=["className","size"];function XH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XH(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xH={},YH={},NH=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.className,a=t.size,o=void 0===a?500:a,i=Mx(t,VH),g=NN("Heading",{size:o},xH,YH);return e.createElement(Ux(),Ex({is:"h2",ref:n,className:r,marginTop:0,marginBottom:0},g,i))})));NH.propTypes=JH(JH({},Ux().propTypes),{},{size:Dx().oneOf([100,200,300,400,500,600,700,800,900])});var HH=NH,FH=["color","fontFamily","size"];function KH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KH(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var TH={},MH=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.color,a=void 0===r?"default":r,o=t.fontFamily,i=void 0===o?"ui":o,g=t.size,s=void 0===g?400:g,c=Mx(t,FH),l=WN(),u=l.colors,f=l.fontFamilies[i]||i,I=u[a]||u.text&&u.text[a]||a,C=NN("Paragraph",{size:s},TH,TH);return e.createElement(Ux(),Ex({is:"p",ref:n},C,{fontFamily:f,color:I},c))})));MH.propTypes=EH(EH({},Ux().propTypes),{},{size:Dx().oneOf([300,400,500,"small","medium","large"]),fontFamily:Dx().string});var zH=MH,DH="success",LH="warning",UH="danger",jH=["M8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm4-11c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z"],OH=["M10 20C4.48 20 0 15.52 0 10S4.48 0 10 0s10 4.48 10 10-4.48 10-10 10zm5-14c-.28 0-.53.11-.71.29L8 12.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29.28 0 .53-.11.71-.29l7-7A1.003 1.003 0 0015 6z"],QH=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:jH,svgPaths20:OH,ref:n,name:"tick-circle"},t))}))),PH=["M7.99-.01c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm1 13h-2v-2h2v2zm0-3h-2v-7h2v7z"],_H=["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 16H9v-2h2v2zm0-3H9V4h2v9z"],qH=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:PH,svgPaths20:_H,ref:n,name:"error"},t))}))),$H=["M15.84 13.5l.01-.01-7-12-.01.01c-.17-.3-.48-.5-.85-.5s-.67.2-.85.5l-.01-.01-7 12 .01.01c-.09.15-.15.31-.15.5 0 .55.45 1 1 1h14c.55 0 1-.45 1-1 0-.19-.06-.35-.15-.5zm-6.85-.51h-2v-2h2v2zm0-3h-2v-5h2v5z"],eF=["M19.86 17.52l.01-.01-9-16-.01.01C10.69 1.21 10.37 1 10 1s-.69.21-.86.52l-.01-.01-9 16 .01.01c-.08.14-.14.3-.14.48 0 .55.45 1 1 1h18c.55 0 1-.45 1-1 0-.18-.06-.34-.14-.48zM11 17H9v-2h2v2zm0-3H9V6h2v8z"],tF=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:$H,svgPaths20:eF,ref:n,name:"warning-sign"},t))}))),nF=["M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zM7 3h2v2H7V3zm3 10H6v-1h1V7H6V6h3v6h1v1z"],rF=["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zM9 4h2v2H9V4zm4 12H7v-1h2V8H8V7h3v8h2v1z"],aF=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:nF,svgPaths20:rF,ref:n,name:"info-sign"},t))}))),oF=["appearance","children","className","hasIcon","intent","isRemoveable","onRemove","title"];function iF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iF(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sF={},cF={position:"relative",overflow:"hidden",display:"flex",padding:"15px"},lF=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.appearance,a=void 0===r?"default":r,o=t.children,i=t.className,g=t.hasIcon,s=void 0===g||g,c=t.intent,l=void 0===c?"info":c,u=t.isRemoveable,f=void 0!==u&&u,I=t.onRemove,C=t.title,d=Mx(t,oF),A="none"===l?"info":l,h=NN("Alert",{appearance:a,intent:A},sF,cF);return e.createElement(RH,Ex({ref:n,className:i,role:"alert"},h,d),s&&e.createElement(RH,{marginRight:16,marginLeft:2,marginTop:-1,display:"flex",alignItems:"flex-start"},function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case DH:return e.createElement(QH,Ex({color:"success"},n));case UH:return e.createElement(qH,Ex({color:"danger"},n));case LH:return e.createElement(tF,Ex({color:"warning"},n));default:return e.createElement(aF,Ex({color:"info"},n))}}(A,{size:16})),e.createElement(RH,{flex:1},C&&e.createElement(HH,{is:"h4",size:400,marginTop:0,marginBottom:0,fontWeight:500,lineHeight:1,color:"inherit"},C),"string"===typeof o?e.createElement(zH,{size:400,color:"muted",marginTop:C?8:0,lineHeight:1},o):e.createElement(RH,null,o)),f&&e.createElement(RH,{marginLeft:24,flexShrink:0,marginBottom:-4,marginTop:-5,marginRight:-4},e.createElement(CH,{icon:vH,appearance:"minimal",height:24,onClick:I,intent:A})))})));lF.propTypes=gF(gF(gF(gF(gF({},Lx.spacing.propTypes),Lx.position.propTypes),Lx.layout.propTypes),Lx.dimensions.propTypes),{},{children:Dx().oneOfType([Dx().string,Dx().node]),intent:Dx().string,title:Dx().node,hasIcon:Dx().bool,isRemoveable:Dx().bool,onRemove:Dx().func,appearance:Dx().oneOf(["default","card"])});var uF=lF,fF="cubic-bezier(0.0, 0.0, 0.2, 1)",IF="cubic-bezier(0.4, 0.0, 1, 1)",CF="cubic-bezier(0.175, 0.885, 0.320, 1.175)",dF=(0,Lx.keyframes)("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),AF=(0,Lx.keyframes)("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),hF={animationName:dF,animationDuration:240,animationTimingFunction:CF,animationFillMode:"both"},pF={display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all ".concat(240,"ms ").concat(fF),selectors:{'&[data-state="entering"]':hF,'&[data-state="entered"]':hF,'&[data-state="exiting"]':{animationName:AF,animationDuration:120,animationTimingFunction:IF,animationFillMode:"both"}}},mF=(0,e.memo)((function(t){var n=t.children,r=t.duration,a=t.hasCloseButton,o=t.intent,i=void 0===o?"none":o,g=t.isShown,s=t.onRemove,c=t.title,l=t.zIndex,u=(0,e.useRef)(null),f=Ge((0,e.useState)(!0),2),I=f[0],C=f[1],d=Ge((0,e.useState)(0),2),A=d[0],h=d[1],p=(0,e.useRef)(null),m=(0,e.useCallback)((function(){p.current&&(clearTimeout(p.current),p.current=null)}),[]),b=(0,e.useCallback)((function(){m(),C(!1)}),[m]),y=(0,e.useCallback)((function(){r&&(m(),p.current=setTimeout((function(){b()}),1e3*r))}),[r,m,b]);(0,e.useEffect)((function(){return y(),function(){m()}}),[y,m]),(0,e.useEffect)((function(){g!==I&&"boolean"===typeof g&&C(g)}),[I,g]);var v=(0,e.useCallback)((function(){return m()}),[m]),Z=(0,e.useCallback)((function(){return y()}),[y]),G=(0,e.useCallback)((function(e){if(null!==e){var t=e.getBoundingClientRect().height;h(t)}}),[]),B=(0,e.useMemo)((function(){return{height:A,zIndex:l,marginBottom:I?0:-A}}),[I,A,l]);return e.createElement(iY,{nodeRef:u,appear:!0,unmountOnExit:!0,timeout:240,in:I,onExited:s},(function(t){return e.createElement(Ux(),Ex({},pF,{ref:u,"data-state":t,onMouseEnter:v,onMouseLeave:Z},B),e.createElement(Ux(),{ref:G,padding:8},e.createElement(uF,{flexShrink:0,appearance:"card",elevation:3,intent:i,title:c,isRemoveable:a,onRemove:b,pointerEvents:"all"},n)))}))}));mF.propTypes={zIndex:Dx().number,duration:Dx().number,onRemove:Dx().func,intent:Dx().string,title:Dx().node,children:Dx().node,hasCloseButton:Dx().bool,isShown:Dx().bool};var bF=mF,yF=["description","id"];function vF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vF(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GF=function(e){return Object.hasOwnProperty.call(e,"id")},BF=(0,e.memo)((function(t){var n=t.bindCloseAll,r=t.bindGetToasts,a=t.bindNotify,o=t.bindRemove,i=Ge((0,e.useState)([]),2),g=i[0],s=i[1],c=Ge((0,e.useState)(0),2),l=c[0],u=c[1],f=function(e){var t=g.find((function(t){return String(t.id).startsWith(e)}));t&&function(e){s(g.map((function(t){return t.id===e?ZF(ZF({},t),{},{isShown:!1}):t})))}(t.id)},I=function(e){var t=g.filter((function(t){return!String(t.id).startsWith(e)}));return s(t),t};return a((function(e,t){var n=g;GF(t)&&(n=I(t.id));var r=function(e,t){var n,r=l;u(l+1);var a=GF(t)?"".concat(t.id,"-").concat(r):r;return{id:a,title:e,description:t.description,hasCloseButton:null===(n=t.hasCloseButton)||void 0===n||n,duration:t.duration||5,close:function(){return f(a)},intent:t.intent}}(e,t);s([r].concat(We(n)))})),o(f),r((function(){return g})),n((function(){s(g.map((function(e){return ZF(ZF({},e),{},{isShown:!1})})))})),e.createElement(Ux(),{is:"span",maxWidth:560,marginY:0,marginX:"auto",top:0,left:0,right:0,position:"fixed",zIndex:Px,pointerEvents:"none"},g.map((function(t){var n=t.description,r=t.id,a=Mx(t,yF);return e.createElement(bF,Ex({key:r,onRemove:function(){return I(r)}},a),n)})))}));BF.propTypes={bindNotify:Dx().func.isRequired,bindRemove:Dx().func.isRequired,bindGetToasts:Dx().func.isRequired,bindCloseAll:Dx().func.isRequired};var kF=BF;function SF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SF(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WF=new function t(){var r=this;if(Z(this,t),b(this,"_bindNotify",(function(e){r.notifyHandler=e})),b(this,"_bindRemove",(function(e){r.removeHandler=e})),b(this,"_bindGetToasts",(function(e){r.getToastsHandler=e})),b(this,"_bindCloseAll",(function(e){r.closeAllHandler=e})),b(this,"getToasts",(function(){return r.getToastsHandler()})),b(this,"closeAll",(function(){return r.closeAllHandler()})),b(this,"notify",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.notifyHandler(e,wF(wF({},t),{},{intent:"none"}))})),b(this,"success",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.notifyHandler(e,wF(wF({},t),{},{intent:"success"}))})),b(this,"warning",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.notifyHandler(e,wF(wF({},t),{},{intent:"warning"}))})),b(this,"danger",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.notifyHandler(e,wF(wF({},t),{},{intent:"danger"}))})),b(this,"remove",(function(e){return r.removeHandler(e)})),Kx){var a=document.createElement("div");a.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(a);var o=function(){return e.createElement(kF,{bindNotify:r._bindNotify,bindRemove:r._bindRemove,bindGetToasts:r._bindGetToasts,bindCloseAll:r._bindCloseAll})};if(function(e){return parseInt(e,10)}(Fx.version)>=18)try{(0,n(1250).createRoot)(a).render(o())}catch(YQ){Fx.render(o(),a)}else Fx.render(o(),a)}},RF=WF,VF=n(4805);function XF(){var e=(0,VF.useMediaQuery)({query:"(orientation: portrait)"});return{isLaptop:!e,isMobile:e}}function JF(t){var n=Ge((0,e.useState)(),2),r=n[0],a=n[1],o=Ge((0,e.useState)(),2),i=o[0],g=o[1],s=Ge((0,e.useState)(),2),c=s[0],l=s[1],u=function(){var t=Ge((0,e.useState)(!0),2),n=t[0],r=t[1],a=(0,e.useCallback)((function(){return r((function(e){return!e}))}),[r]);return[n,a]}(),f=Ge(u,2),I=f[0],C=f[1];return(0,e.useEffect)((function(){g(!0),t().then((function(e){a(e)})).catch((function(e){l(e),console.log({error:e}),RF.danger(e.message)})).finally((function(){return g(!1)}))}),[t,a,g,l,I]),{data:r,loading:i,error:c,doRefetch:C}}function xF(t,n){var r=Ge((0,e.useState)(),2),a=r[0],o=r[1],i=Ge((0,e.useState)(),2),g=i[0],s=i[1],c=(0,e.useCallback)((function(){o(!0),t().then((function(){n&&n()})).catch((function(e){s(e),console.log({error:e}),RF.danger(e.message)})).finally((function(){return o(!1)}))}),[n,t]);return{onSubmit:c,loading:a,error:g}}var YF=n(184),NF=(0,e.createContext)({});function HF(t){var n=t.children,r=JF((0,e.useCallback)(hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qw({name:"medichaindb_000001",storage:Hx()});case 3:if("wallets"in(t=e.sent).collections){e.next=7;break}return e.next=7,t.addCollections({wallets:{schema:XJ}});case 7:return e.abrupt("return",t);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])}))),[])),a=r.data,o=r.loading;return!a||o?(0,YF.jsx)("p",{children:"loading connection..."}):(0,YF.jsx)(NF.Provider,{value:{connection:a},children:n})}var FF=(0,e.createContext)({}),KF=function(){return(0,e.useContext)(FF)};function EF(t){var n=t.children,r=(0,e.useContext)(NF).connection,a=Ge((0,e.useState)(on[0]),2),o=a[0],i=a[1],g=(0,e.useMemo)((function(){var e=new NA("http://127.0.0.1:8545/"),t=new wm(o.key,e);return{wallet:new Gy(t,r),factory:new ny(e),manager:new by(e),medicine:new ay(e)}}),[o.key,r]);return(0,YF.jsxs)("div",{children:[(0,YF.jsx)("p",{children:o.account}),on.map((function(e,t){return(0,YF.jsxs)("button",{onClick:function(){return i(e)},children:["Account ",t]},e.account)})),(0,YF.jsx)(FF.Provider,{value:g,children:n})]})}var TF=Pb.makeMessageType("wallet.v1.Share",(function(){return[{no:1,name:"contact",kind:"message",T:vy,oneof:"data"},{no:2,name:"entity",kind:"scalar",T:9,oneof:"data"},{no:3,name:"medicine",kind:"scalar",T:9,oneof:"data"},{no:4,name:"request",kind:"message",T:MF,oneof:"data"}]})),MF=Pb.makeMessageType("wallet.v1.Request",(function(){return[{no:1,name:"address",kind:"scalar",T:9},{no:2,name:"transfer",kind:"message",T:ty,oneof:"data"},{no:3,name:"mint",kind:"message",T:ty,oneof:"data"},{no:4,name:"burn",kind:"message",T:ty,oneof:"data"}]})),zF=["className"];function DF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var LF={},UF=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.className,a=Mx(t,zF),o=NN("Card",LF,LF,LF);return e.createElement(RH,Ex({className:r},o,a,{ref:n}))})));UF.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DF(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},RH.propTypes);var jF=UF,OF=["paddingX","paddingY"],QF=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n,[{key:"render",value:function(){var e=this.props,t=e.paddingX,n=e.paddingY,r=Mx(e,OF);return(0,YF.jsx)(RH,{paddingX:t,paddingY:n,children:(0,YF.jsx)(RH,{position:"relative",width:"100%",minWidth:"300",children:(0,YF.jsx)(RH,{display:"block",paddingBottom:"100%",children:(0,YF.jsx)(jF,v(v({overflow:"hidden"},r),{},{position:"absolute",width:"100%",height:"100%"}))})})})}}]),n}(e.Component),PF=["children"],_F=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n,[{key:"render",value:function(){return(0,YF.jsx)(RH,v({height:"100%",display:"flex",flexDirection:"column"},this.props))}}],[{key:"Grow",value:function(){return(0,YF.jsx)(RH,{flexGrow:1})}},{key:"Middle",value:function(e){var t=e.children,n=Mx(e,PF);return(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(RH,{flexGrow:1}),(0,YF.jsx)(RH,v(v({},n),{},{children:t})),(0,YF.jsx)(RH,{flexGrow:1})]})}},{key:"Divider",value:function(e){var t=e.children;return(0,YF.jsx)(RH,{marginTop:t,width:"100%"})}}]),n}(e.Component),qF=(0,e.createContext)({pop:function(){},push:function(e){},reset:function(e){},count:0,peek:function(){return(0,YF.jsx)(YF.Fragment,{})}}),$F=function(){return(0,e.useContext)(qF)};function eK(t){var n=(0,e.useContext)(qF).push;return(0,e.useCallback)((function(){return n(t)}),[t,n])}function tK(t){var n=t.children,r=function(){var t=Ge((0,e.useState)([]),2),n=t[0],r=t[1],a=(0,e.useCallback)((function(){return r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}),[r]),o=(0,e.useCallback)((function(e){return r((function(t){return[].concat(We(t),[e])}))}),[r]),i=(0,e.useCallback)((function(){return r((function(e){return e.slice(0,-1)}))}),[r]),g=(0,e.useCallback)((function(){return n.length>0?n[n.length-1]:void 0}),[n]);return{count:n.length,peek:g,reset:a,pop:i,push:o}}();return(0,YF.jsx)(qF.Provider,{value:v({},r),children:n})}function nK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nK(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var aK=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(Ux(),Ex({is:"img"},t,{ref:n}))})));aK.propTypes=rK(rK({},Ux().propTypes),{},{src:Dx().string});var oK=aK,iK=["className","color","fontFamily","size"];function gK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gK(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cK={},lK=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.className,a=t.color,o=void 0===a?"default":a,i=t.fontFamily,g=void 0===i?"ui":i,s=t.size,c=void 0===s?400:s,l=Mx(t,iK),u=WN(),f=u.colors,I="none"===o||"default"===o?"default":o,C=u.fontFamilies[g]||g,d=f[I]||f.text&&f.text[I]||I,A=NN("Text",{size:c},cK,cK);return e.createElement(Ux(),Ex({is:"span",ref:n},A,{fontFamily:C,color:d,className:r},l))})));lK.propTypes=sK(sK({},Ux().propTypes),{},{size:Dx().oneOf([300,400,500,600,"small","medium","large"]),fontFamily:Dx().string});var uK=lK;function fK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";return e&&"string"===typeof e?e.replace(/\s+/," ").split(" ").slice(0,2).map((function(e){return e&&e[0].toUpperCase()})).join(""):t}var IK=["className","color","forceShowInitials","getInitials","hashValue","name","shape","size","sizeLimitOneCharacter","src"],CK={objectFit:"cover"},dK={},AK={overflow:"hidden",position:"relative",display:"inline-flex",flexShrink:0,justifyContent:"center"},hK="undefined"!==typeof document&&"objectFit"in document.documentElement.style,pK=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.className,a=t.color,o=void 0===a?"automatic":a,i=t.forceShowInitials,g=void 0!==i&&i,s=t.getInitials,c=void 0===s?fK:s,l=t.hashValue,u=t.name,f=t.shape,I=void 0===f?"round":f,C=t.size,d=void 0===C?24:C,A=t.sizeLimitOneCharacter,h=void 0===A?20:A,p=t.src,m=Mx(t,IK),b=function(e){var t=String(e),n=0;if(0===t.trim().length)return n;for(var r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n&=n;return Math.abs(n)}(l||u),y=NN("Avatar",{color:o,hashValue:b,shape:I},dK,AK),v=Ge((0,e.useState)(!1),2),Z=v[0],G=v[1],B=(0,e.useCallback)((function(){return G(!0)}),[]),k=!p||Z,S="".concat(function(e,t){return e<=t?Math.floor(e/2.2):Math.floor(e/2.6)}(d,h),"px"),w=c(u);return d<=h&&(w=w.slice(0,1)),e.createElement(Ux(),Ex({width:d,height:d,title:u,ref:n,className:r},y,m),(k||g)&&e.createElement(uK,{top:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",fontSize:S,lineHeight:S,width:d,height:d,color:"inherit"},w),!k&&e.createElement(oK,{style:CK,width:hK?"100%":"auto",height:"100%",src:p,onError:B}))})));pK.propTypes={className:Dx().string,src:Dx().string,size:Dx().number,name:Dx().string,hashValue:Dx().string,color:Dx().string,getInitials:Dx().func,forceShowInitials:Dx().bool,sizeLimitOneCharacter:Dx().number,shape:Dx().oneOf(["round","square"])};var mK=pK;function bK(e){if(!Number.isInteger(e))throw new TypeError("minorScale only accepts integers as input, instead ".concat(e," was passed."));return 4*e}var yK=["M2 6.03a2 2 0 100 4 2 2 0 100-4zM14 6.03a2 2 0 100 4 2 2 0 100-4zM8 6.03a2 2 0 100 4 2 2 0 100-4z"],vK=["M3.5 8a2.5 2.5 0 100 5 2.5 2.5 0 100-5zM17.5 8a2.5 2.5 0 100 5 2.5 2.5 0 100-5zM10.5 8a2.5 2.5 0 100 5 2.5 2.5 0 100-5z"],ZK=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:yK,svgPaths20:vK,ref:n,name:"more"},t))}))),GK=["M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z"],BK=["M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z"],kK=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:GK,svgPaths20:BK,ref:n,name:"trash"},t))}))),SK=["M14.99 6.99c-.55 0-1 .45-1 1 0 3.31-2.69 6-6 6-1.77 0-3.36-.78-4.46-2h1.46c.55 0 1-.45 1-1s-.45-1-1-1h-4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-1.74a7.95 7.95 0 006 2.74c4.42 0 8-3.58 8-8 0-.55-.45-1-1-1zm0-7c-.55 0-1 .45-1 1v1.74a7.95 7.95 0 00-6-2.74c-4.42 0-8 3.58-8 8 0 .55.45 1 1 1s1-.45 1-1c0-3.31 2.69-6 6-6 1.77 0 3.36.78 4.46 2h-1.46c-.55 0-1 .45-1 1s.45 1 1 1h4c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1z"],wK=["M19 1c-.55 0-1 .45-1 1v2.06C16.18 1.61 13.29 0 10 0 4.48 0 0 4.48 0 10c0 .55.45 1 1 1s1-.45 1-1c0-4.42 3.58-8 8-8 2.52 0 4.76 1.18 6.22 3H15c-.55 0-1 .45-1 1s.45 1 1 1h4c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 8c-.55 0-1 .45-1 1 0 4.42-3.58 8-8 8-2.52 0-4.76-1.18-6.22-3H5c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-2.06C3.82 18.39 6.71 20 10 20c5.52 0 10-4.48 10-10 0-.55-.45-1-1-1z"],WK=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:SK,svgPaths20:wK,ref:n,name:"refresh"},t))}))),RK=["appearance","className","disabled","fontFamily","isInvalid","placeholder","required","spellCheck","width"];function VK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VK(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var JK={_focus:"&:focus",_disabled:"&:disabled",_invalid:'&[aria-invalid="true"]:not(:focus)',_placeholder:"&::placeholder",_placeholderHover:"&:hover::placeholder",_placeholderFocus:"&:focus::placeholder"},xK={MozAppearance:"none",outline:"none",textDecoration:"none",WebkitAppearance:"none",WebkitFontSmoothing:"antialiased"},YK=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.appearance,a=void 0===r?"default":r,o=t.className,i=t.disabled,g=void 0!==i&&i,s=t.fontFamily,c=void 0===s?"ui":s,l=t.isInvalid,u=void 0!==l&&l,f=t.placeholder,I=t.required,C=t.spellCheck,d=void 0===C||C,A=t.width,h=void 0===A?280:A,p=Mx(t,RK),m=WN().fontFamilies[c]||c,b=NN("Input",{appearance:a,size:p.size||"medium"},JK,xK),y=p.height||b.height,v=!p.size&&p.height?LN(p.height):{};return e.createElement(Ux(),Ex({is:"input",className:o,type:"text",width:h,required:I,disabled:g,placeholder:f,spellCheck:d,"aria-invalid":u,ref:n,fontFamily:m},b,p,v,{height:y}))})));YK.propTypes=XK(XK(XK(XK(XK({},Lx.dimensions.propTypes),Lx.spacing.propTypes),Lx.position.propTypes),Lx.layout.propTypes),{},{required:Dx().bool,disabled:Dx().bool,isInvalid:Dx().bool,spellCheck:Dx().bool,placeholder:Dx().string,appearance:Dx().string,width:Dx().oneOfType([Dx().string,Dx().number]),className:Dx().string});var NK=YK;function HK(e){if(!Number.isInteger(e))throw new TypeError("majorScale only accepts integers as input, instead ".concat(e," was passed."));return 8*e}var FK=n(9608),KK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},EK=e.createContext&&e.createContext(KK),TK=function(){return TK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},TK.apply(this,arguments)},MK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function zK(t){return t&&t.map((function(t,n){return e.createElement(t.tag,TK({key:n},t.attr),zK(t.child))}))}function DK(t){return function(n){return e.createElement(LK,TK({attr:TK({},t.attr)},n),zK(t.child))}}function LK(t){var n=function(n){var r,a=t.attr,o=t.size,i=t.title,g=MK(t,["attr","size","title"]),s=o||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",TK({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,g,{className:r,style:TK(TK({color:t.color||n.color},n.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&e.createElement("title",null,i),t.children)};return void 0!==EK?e.createElement(EK.Consumer,null,(function(e){return n(e)})):n(KK)}function UK(e){return DK({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm112 376c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-88h-96v88c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V136c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v88h96v-88c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v240z"}}]})(e)}function jK(e){return DK({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(e)}function OK(e){return DK({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"}}]})(e)}function QK(e){return DK({tag:"svg",attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(e)}function PK(e){return DK({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function _K(e){return DK({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M504 352H136.4c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0 96H136.1c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0-192H136.6c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm106.5-139L338.4 3.7a48.15 48.15 0 0 0-36.9 0L29.5 117C11.7 124.5 0 141.9 0 161.3V504c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V256c0-17.6 14.6-32 32.6-32h382.8c18 0 32.6 14.4 32.6 32v248c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V161.3c0-19.4-11.7-36.8-29.5-44.3z"}}]})(e)}function qK(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}}]})(e)}function $K(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm.05 10H4.77c.99-.5 2.7-1 4.23-1 .11 0 .23.01.34.01.34-.73.93-1.33 1.64-1.81-.73-.13-1.42-.2-1.98-.2-2.34 0-7 1.17-7 3.5V19h7v-1.5c0-.17.02-.34.05-.5zm7.45-2.5c-1.84 0-5.5 1.01-5.5 3V19h11v-1.5c0-1.99-3.66-3-5.5-3zm1.21-1.82c.76-.43 1.29-1.24 1.29-2.18a2.5 2.5 0 00-5 0c0 .94.53 1.75 1.29 2.18.36.2.77.32 1.21.32s.85-.12 1.21-.32z"}}]})(e)}var eE=n(8976),tE=new(n.n(eE)())({width:250,height:250,backgroundOptions:{color:"transparent"},qrOptions:{mode:"Byte",errorCorrectionLevel:"L"},dotsOptions:{type:"extra-rounded",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#1F3D99"},{offset:1,color:"#52BD95"}]}},cornersSquareOptions:{type:"extra-rounded",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#1F3D99"},{offset:1,color:"#1F3D99"}]}}});function nE(t){var n=t.content,r=(0,e.useRef)();return(0,e.useEffect)((function(){tE.append(r.current),tE.update({data:n})}),[n]),(0,YF.jsx)(QF,{children:(0,YF.jsx)(_F,{children:(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)("div",{ref:r})})})})})}var rE={setValue:function(e){},clear:function(){}};function aE(t){var n=t.Context,r=t.children,a=Ge((0,e.useState)(),2),o=a[0],i=a[1],g=(0,e.useCallback)((function(){return i(void 0)}),[i]);return(0,YF.jsx)(n.Provider,{value:{value:o,setValue:i,clear:g},children:r})}function oE(){var t=(0,e.createContext)(rE);return[t,function(){return(0,e.useContext)(t)}]}var iE=Ge(oE(),2),gE=iE[0],sE=iE[1],cE=Ge(oE(),2),lE=cE[0],uE=cE[1],fE=Ge(oE(),2),IE=fE[0],CE=fE[1],dE=Ge(oE(),2),AE=dE[0],hE=dE[1],pE=Ge(oE(),2),mE=pE[0],bE=pE[1];function yE(e){return(0,YF.jsx)(aE,{Context:mE,children:(0,YF.jsx)(aE,{Context:AE,children:(0,YF.jsx)(aE,{Context:lE,children:(0,YF.jsx)(aE,{Context:gE,children:(0,YF.jsx)(aE,{Context:IE,children:e.children})})})})})}function vE(e){if(!e)return!1;return/^(0x)?[0-9a-fA-F]{40}$/.test(e)}function ZE(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var GE=n(9613),BE=n.n(GE),kE="-ms-",SE="-moz-",wE="-webkit-",WE="comm",RE="rule",VE="decl",XE="@import",JE="@keyframes",xE="@layer",YE=Math.abs,NE=String.fromCharCode,HE=Object.assign;function FE(e){return e.trim()}function KE(e,t){return(e=t.exec(e))?e[0]:e}function EE(e,t,n){return e.replace(t,n)}function TE(e,t){return e.indexOf(t)}function ME(e,t){return 0|e.charCodeAt(t)}function zE(e,t,n){return e.slice(t,n)}function DE(e){return e.length}function LE(e){return e.length}function UE(e,t){return t.push(e),e}function jE(e,t){return e.filter((function(e){return!KE(e,t)}))}var OE=1,QE=1,PE=0,_E=0,qE=0,$E="";function eT(e,t,n,r,a,o,i,g){return{value:e,root:t,parent:n,type:r,props:a,children:o,line:OE,column:QE,length:i,return:"",siblings:g}}function tT(e,t){return HE(eT("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function nT(e){for(;e.root;)e=tT(e.root,{children:[e]});UE(e,e.siblings)}function rT(){return qE=_E>0?ME($E,--_E):0,QE--,10===qE&&(QE=1,OE--),qE}function aT(){return qE=_E<PE?ME($E,_E++):0,QE++,10===qE&&(QE=1,OE++),qE}function oT(){return ME($E,_E)}function iT(){return _E}function gT(e,t){return zE($E,e,t)}function sT(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cT(e){return OE=QE=1,PE=DE($E=e),_E=0,[]}function lT(e){return $E="",e}function uT(e){return FE(gT(_E-1,CT(91===e?e+2:40===e?e+1:e)))}function fT(e){for(;(qE=oT())&&qE<33;)aT();return sT(e)>2||sT(qE)>3?"":" "}function IT(e,t){for(;--t&&aT()&&!(qE<48||qE>102||qE>57&&qE<65||qE>70&&qE<97););return gT(e,iT()+(t<6&&32==oT()&&32==aT()))}function CT(e){for(;aT();)switch(qE){case e:return _E;case 34:case 39:34!==e&&39!==e&&CT(qE);break;case 40:41===e&&CT(e);break;case 92:aT()}return _E}function dT(e,t){for(;aT()&&e+qE!==57&&(e+qE!==84||47!==oT()););return"/*"+gT(t,_E-1)+"*"+NE(47===e?e:aT())}function AT(e){for(;!sT(oT());)aT();return gT(e,_E)}function hT(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function pT(e,t,n,r){switch(e.type){case xE:if(e.children.length)break;case XE:case VE:return e.return=e.return||e.value;case WE:return"";case JE:return e.return=e.value+"{"+hT(e.children,r)+"}";case RE:if(!DE(e.value=e.props.join(",")))return""}return DE(n=hT(e.children,r))?e.return=e.value+"{"+n+"}":""}function mT(e,t,n){switch(function(e,t){return 45^ME(e,0)?(((t<<2^ME(e,0))<<2^ME(e,1))<<2^ME(e,2))<<2^ME(e,3):0}(e,t)){case 5103:return wE+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wE+e+e;case 4789:return SE+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wE+e+SE+e+kE+e+e;case 5936:switch(ME(e,t+11)){case 114:return wE+e+kE+EE(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wE+e+kE+EE(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wE+e+kE+EE(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return wE+e+kE+e+e;case 6165:return wE+e+kE+"flex-"+e+e;case 5187:return wE+e+EE(e,/(\w+).+(:[^]+)/,wE+"box-$1$2"+kE+"flex-$1$2")+e;case 5443:return wE+e+kE+"flex-item-"+EE(e,/flex-|-self/g,"")+(KE(e,/flex-|baseline/)?"":kE+"grid-row-"+EE(e,/flex-|-self/g,""))+e;case 4675:return wE+e+kE+"flex-line-pack"+EE(e,/align-content|flex-|-self/g,"")+e;case 5548:return wE+e+kE+EE(e,"shrink","negative")+e;case 5292:return wE+e+kE+EE(e,"basis","preferred-size")+e;case 6060:return wE+"box-"+EE(e,"-grow","")+wE+e+kE+EE(e,"grow","positive")+e;case 4554:return wE+EE(e,/([^-])(transform)/g,"$1"+wE+"$2")+e;case 6187:return EE(EE(EE(e,/(zoom-|grab)/,wE+"$1"),/(image-set)/,wE+"$1"),e,"")+e;case 5495:case 3959:return EE(e,/(image-set\([^]*)/,wE+"$1$`$1");case 4968:return EE(EE(e,/(.+:)(flex-)?(.*)/,wE+"box-pack:$3"+kE+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wE+e+e;case 4200:if(!KE(e,/flex-|baseline/))return kE+"grid-column-align"+zE(e,t)+e;break;case 2592:case 3360:return kE+EE(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,KE(e.props,/grid-\w+-end/)}))?~TE(e+(n=n[t].value),"span")?e:kE+EE(e,"-start","")+e+kE+"grid-row-span:"+(~TE(n,"span")?KE(n,/\d+/):+KE(n,/\d+/)-+KE(e,/\d+/))+";":kE+EE(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return KE(e.props,/grid-\w+-start/)}))?e:kE+EE(EE(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return EE(e,/(.+)-inline(.+)/,wE+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(DE(e)-1-t>6)switch(ME(e,t+1)){case 109:if(45!==ME(e,t+4))break;case 102:return EE(e,/(.+:)(.+)-([^]+)/,"$1"+wE+"$2-$3$1"+SE+(108==ME(e,t+3)?"$3":"$2-$3"))+e;case 115:return~TE(e,"stretch")?mT(EE(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return EE(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,a,o,i,g){return kE+n+":"+r+g+(a?kE+n+"-span:"+(o?i:+i-+r)+g:"")+e}));case 4949:if(121===ME(e,t+6))return EE(e,":",":"+wE)+e;break;case 6444:switch(ME(e,45===ME(e,14)?18:11)){case 120:return EE(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+wE+(45===ME(e,14)?"inline-":"")+"box$3$1"+wE+"$2$3$1"+kE+"$2box$3")+e;case 100:return EE(e,":",":"+kE)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return EE(e,"scroll-","scroll-snap-")+e}return e}function bT(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case VE:return void(e.return=mT(e.value,e.length,n));case JE:return hT([tT(e,{value:EE(e.value,"@","@"+wE)})],r);case RE:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(KE(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":nT(tT(e,{props:[EE(t,/:(read-\w+)/,":"+SE+"$1")]})),nT(tT(e,{props:[t]})),HE(e,{props:jE(n,r)});break;case"::placeholder":nT(tT(e,{props:[EE(t,/:(plac\w+)/,":"+wE+"input-$1")]})),nT(tT(e,{props:[EE(t,/:(plac\w+)/,":"+SE+"$1")]})),nT(tT(e,{props:[EE(t,/:(plac\w+)/,kE+"input-$1")]})),nT(tT(e,{props:[t]})),HE(e,{props:jE(n,r)})}return""}))}}function yT(e){return lT(vT("",null,null,null,[""],e=cT(e),0,[0],e))}function vT(e,t,n,r,a,o,i,g,s){for(var c=0,l=0,u=i,f=0,I=0,C=0,d=1,A=1,h=1,p=0,m="",b=a,y=o,v=r,Z=m;A;)switch(C=p,p=aT()){case 40:if(108!=C&&58==ME(Z,u-1)){-1!=TE(Z+=EE(uT(p),"&","&\f"),"&\f")&&(h=-1);break}case 34:case 39:case 91:Z+=uT(p);break;case 9:case 10:case 13:case 32:Z+=fT(C);break;case 92:Z+=IT(iT()-1,7);continue;case 47:switch(oT()){case 42:case 47:UE(GT(dT(aT(),iT()),t,n,s),s);break;default:Z+="/"}break;case 123*d:g[c++]=DE(Z)*h;case 125*d:case 59:case 0:switch(p){case 0:case 125:A=0;case 59+l:-1==h&&(Z=EE(Z,/\f/g,"")),I>0&&DE(Z)-u&&UE(I>32?BT(Z+";",r,n,u-1,s):BT(EE(Z," ","")+";",r,n,u-2,s),s);break;case 59:Z+=";";default:if(UE(v=ZT(Z,t,n,c,l,a,g,m,b=[],y=[],u,o),o),123===p)if(0===l)vT(Z,t,v,v,b,o,u,g,y);else switch(99===f&&110===ME(Z,3)?100:f){case 100:case 108:case 109:case 115:vT(e,v,v,r&&UE(ZT(e,v,v,0,0,a,g,m,a,b=[],u,y),y),a,y,u,g,r?b:y);break;default:vT(Z,v,v,v,[""],y,0,g,y)}}c=l=I=0,d=h=1,m=Z="",u=i;break;case 58:u=1+DE(Z),I=C;default:if(d<1)if(123==p)--d;else if(125==p&&0==d++&&125==rT())continue;switch(Z+=NE(p),p*d){case 38:h=l>0?1:(Z+="\f",-1);break;case 44:g[c++]=(DE(Z)-1)*h,h=1;break;case 64:45===oT()&&(Z+=uT(aT())),f=oT(),l=u=DE(m=Z+=AT(iT())),p++;break;case 45:45===C&&2==DE(Z)&&(d=0)}}return o}function ZT(e,t,n,r,a,o,i,g,s,c,l,u){for(var f=a-1,I=0===a?o:[""],C=LE(I),d=0,A=0,h=0;d<r;++d)for(var p=0,m=zE(e,f+1,f=YE(A=i[d])),b=e;p<C;++p)(b=FE(A>0?I[p]+" "+m:EE(m,/&\f/g,I[p])))&&(s[h++]=b);return eT(e,t,n,0===a?RE:g,s,c,l,u)}function GT(e,t,n,r){return eT(e,t,n,WE,NE(qE),zE(e,2,-2),0,r)}function BT(e,t,n,r,a){return eT(e,t,n,VE,zE(e,0,r),zE(e,r+1,-1),r,a)}var kT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ST="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",wT="undefined"!=typeof window&&"HTMLElement"in window,WT=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),RT=(new Set,Object.freeze([])),VT=Object.freeze({});function XT(e,t,n){return void 0===n&&(n=VT),e.theme!==n.theme&&e.theme||t||n.theme}var JT=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),xT=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,YT=/(^-|-$)/g;function NT(e){return e.replace(xT,"-").replace(YT,"")}var HT=/(a)(d)/gi,FT=function(e){return String.fromCharCode(e+(e>25?39:97))};function KT(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=FT(t%52)+n;return(FT(t%52)+n).replace(HT,"$1-$2")}var ET,TT=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},MT=function(e){return TT(5381,e)};function zT(e){return KT(MT(e)>>>0)}function DT(e){return"string"==typeof e&&!0}var LT="function"==typeof Symbol&&Symbol.for,UT=LT?Symbol.for("react.memo"):60115,jT=LT?Symbol.for("react.forward_ref"):60112,OT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},QT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},PT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_T=((ET={})[jT]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ET[UT]=PT,ET);function qT(e){return("type"in(t=e)&&t.type.$$typeof)===UT?PT:"$$typeof"in e?_T[e.$$typeof]:OT;var t}var $T=Object.defineProperty,eM=Object.getOwnPropertyNames,tM=Object.getOwnPropertySymbols,nM=Object.getOwnPropertyDescriptor,rM=Object.getPrototypeOf,aM=Object.prototype;function oM(e,t,n){if("string"!=typeof t){if(aM){var r=rM(t);r&&r!==aM&&oM(e,r,n)}var a=eM(t);tM&&(a=a.concat(tM(t)));for(var o=qT(e),i=qT(t),g=0;g<a.length;++g){var s=a[g];if(!(s in QT||n&&n[s]||i&&s in i||o&&s in o)){var c=nM(t,s);try{$T(e,s,c)}catch(e){}}}}return e}function iM(e){return"function"==typeof e}function gM(e){return"object"==typeof e&&"styledComponentId"in e}function sM(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function cM(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function lM(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function uM(e,t,n){if(void 0===n&&(n=!1),!n&&!lM(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=uM(e[r],t[r]);else if(lM(t))for(var r in t)e[r]=uM(e[r],t[r]);return e}function fM(e,t){Object.defineProperty(e,"toString",{value:t})}function IM(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var CM=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)if((a<<=1)<0)throw IM(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),g=(o=0,t.length);o<g;o++)this.tag.insertRule(i,t[o])&&(this.groupSizes[e]++,i++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,o=r;o<a;o++)t+="".concat(this.tag.getRule(o)).concat("/*!sc*/\n");return t},e}(),dM=new Map,AM=new Map,hM=1,pM=function(e){if(dM.has(e))return dM.get(e);for(;AM.has(hM);)hM++;var t=hM++;return dM.set(e,t),AM.set(t,e),t},mM=function(e,t){dM.set(e,t),AM.set(t,e)},bM="style[".concat(ST,"][").concat("data-styled-version",'="').concat("6.0.8",'"]'),yM=new RegExp("^".concat(ST,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),vM=function(e,t,n){for(var r,a=n.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(t,r)},ZM=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split("/*!sc*/\n"),a=[],o=0,i=r.length;o<i;o++){var g=r[o].trim();if(g){var s=g.match(yM);if(s){var c=0|parseInt(s[1],10),l=s[2];0!==c&&(mM(l,c),vM(e,l,s[3]),e.getTag().insertRules(c,a)),a.length=0}else a.push(g)}}};function GM(){return n.nc}var BM=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){var t=Array.from(e.querySelectorAll("style[".concat(ST,"]")));return t[t.length-1]}(n),o=void 0!==a?a.nextSibling:null;r.setAttribute(ST,"active"),r.setAttribute("data-styled-version","6.0.8");var i=GM();return i&&r.setAttribute("nonce",i),n.insertBefore(r,o),r},kM=function(){function e(e){this.element=BM(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}throw IM(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),SM=function(){function e(e){this.element=BM(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),wM=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),WM=wT,RM={isServer:!wT,useCSSOMInjection:!WT},VM=function(){function e(e,t,n){void 0===e&&(e=VT),void 0===t&&(t={});var r=this;this.options=lv(lv({},RM),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&wT&&WM&&(WM=!1,function(e){for(var t=document.querySelectorAll(bM),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(ST)&&(ZM(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this)),fM(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=function(n){var a=function(e){return AM.get(e)}(n);if(void 0===a)return"continue";var o=e.names.get(a),i=t.getGroup(n);if(void 0===o||0===i.length)return"continue";var g="".concat(ST,".g").concat(n,'[id="').concat(a,'"]'),s="";void 0!==o&&o.forEach((function(e){e.length>0&&(s+="".concat(e,","))})),r+="".concat(i).concat(g,'{content:"').concat(s,'"}').concat("/*!sc*/\n")},o=0;o<n;o++)a(o);return r}(r)}))}return e.registerId=function(e){return pM(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(lv(lv({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new wM(n):t?new kM(n):new SM(n)}(this.options),new CM(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(pM(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(pM(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(pM(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),XM=/&/g,JM=/^\s*\/\/.*$/gm;function xM(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=xM(e.children,t)),e}))}function YM(e){var t,n,r,a=void 0===e?VT:e,o=a.options,i=void 0===o?VT:o,g=a.plugins,s=void 0===g?RT:g,c=function(e,r,a){return a===n||a.startsWith(n)&&a.endsWith(n)&&a.replaceAll(n,"").length>0?".".concat(t):e},l=s.slice();l.push((function(e){e.type===RE&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(XM,n).replace(r,c))})),i.prefix&&l.push(bT),l.push(pT);var u=function(e,a,o,g){void 0===a&&(a=""),void 0===o&&(o=""),void 0===g&&(g="&"),t=g,n=a,r=new RegExp("\\".concat(n,"\\b"),"g");var s=e.replace(JM,""),c=yT(o||a?"".concat(o," ").concat(a," { ").concat(s," }"):s);i.namespace&&(c=xM(c,i.namespace));var u,f=[];return hT(c,function(e){var t=LE(e);return function(n,r,a,o){for(var i="",g=0;g<t;g++)i+=e[g](n,r,a,o)||"";return i}}(l.concat((u=function(e){return f.push(e)},function(e){e.root||(e=e.return)&&u(e)})))),f};return u.hash=s.length?s.reduce((function(e,t){return t.name||IM(15),TT(e,t.name)}),5381).toString():"",u}var NM=new VM,HM=YM(),FM=e.createContext({shouldForwardProp:void 0,styleSheet:NM,stylis:HM}),KM=(FM.Consumer,e.createContext(void 0));function EM(){return(0,e.useContext)(FM)}function TM(t){var n=(0,e.useState)(t.stylisPlugins),r=n[0],a=n[1],o=EM().styleSheet,i=(0,e.useMemo)((function(){var e=o;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target,o]),g=(0,e.useMemo)((function(){return YM({options:{namespace:t.namespace,prefix:t.enableVendorPrefixes},plugins:r})}),[t.enableVendorPrefixes,t.namespace,r]);(0,e.useEffect)((function(){BE()(r,t.stylisPlugins)||a(t.stylisPlugins)}),[t.stylisPlugins]);var s=(0,e.useMemo)((function(){return{shouldForwardProp:t.shouldForwardProp,styleSheet:i,stylis:g}}),[t.shouldForwardProp,i,g]);return e.createElement(FM.Provider,{value:s},e.createElement(KM.Provider,{value:g},t.children))}var MM=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=HM);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,fM(this,(function(){throw IM(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=HM),this.name+e.hash},e}(),zM=function(e){return e>="A"&&e<="Z"};function DM(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;zM(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var LM=function(e){return null==e||!1===e||""===e},UM=function e(t){var n,r,a=[];for(var o in t){var i=t[o];t.hasOwnProperty(o)&&!LM(i)&&(Array.isArray(i)&&i.isCss||iM(i)?a.push("".concat(DM(o),":"),i,";"):lM(i)?a.push.apply(a,dv(dv(["".concat(o," {")],e(i),!1),["}"],!1)):a.push("".concat(DM(o),": ").concat((n=o,null==(r=i)||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||n in kT||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return a};function jM(e,t,n,r){return LM(e)?[]:gM(e)?[".".concat(e.styledComponentId)]:iM(e)?!iM(a=e)||a.prototype&&a.prototype.isReactComponent||!t?[e]:jM(e(t),t,n,r):e instanceof MM?n?(e.inject(n,r),[e.getName(r)]):[e]:lM(e)?UM(e):Array.isArray(e)?Array.prototype.concat.apply(RT,e.map((function(e){return jM(e,t,n,r)}))):[e.toString()];var a}function OM(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(iM(n)&&!gM(n))return!1}return!0}var QM=MT("6.0.8"),PM=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&OM(e),this.componentId=t,this.baseHash=TT(QM,t),this.baseStyle=n,VM.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=sM(r,this.staticRulesId);else{var a=cM(jM(this.rules,e,t,n)),o=KT(TT(this.baseHash,a)>>>0);if(!t.hasNameForId(this.componentId,o)){var i=n(a,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,i)}r=sM(r,o),this.staticRulesId=o}else{for(var g=TT(this.baseHash,n.hash),s="",c=0;c<this.rules.length;c++){var l=this.rules[c];if("string"==typeof l)s+=l;else if(l){var u=cM(jM(l,e,t,n));g=TT(g,u+c),s+=u}}if(s){var f=KT(g>>>0);t.hasNameForId(this.componentId,f)||t.insertRules(this.componentId,f,n(s,".".concat(f),void 0,this.componentId)),r=sM(r,f)}}return r},e}(),_M=e.createContext(void 0);_M.Consumer;var qM={};new Set;function $M(t,n,r){var a=gM(t),o=t,i=!DT(t),g=n.attrs,s=void 0===g?RT:g,c=n.componentId,l=void 0===c?function(e,t){var n="string"!=typeof e?"sc":NT(e);qM[n]=(qM[n]||0)+1;var r="".concat(n,"-").concat(zT("6.0.8"+n+qM[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,u=n.displayName,f=(void 0===u&&function(e){DT(e)?"styled.".concat(e):"Styled(".concat(function(e){return e.displayName||e.name||"Component"}(e),")")}(t),n.displayName&&n.componentId?"".concat(NT(n.displayName),"-").concat(n.componentId):n.componentId||l),I=a&&o.attrs?o.attrs.concat(s).filter(Boolean):s,C=n.shouldForwardProp;if(a&&o.shouldForwardProp){var d=o.shouldForwardProp;if(n.shouldForwardProp){var A=n.shouldForwardProp;C=function(e,t){return d(e,t)&&A(e,t)}}else C=d}var h=new PM(r,f,a?o.componentStyle:void 0);var p=e.forwardRef((function(t,n){return function(t,n,r){var a=t.attrs,o=t.componentStyle,i=t.defaultProps,g=t.foldedComponentIds,s=t.styledComponentId,c=t.target,l=e.useContext(_M),u=EM(),f=t.shouldForwardProp||u.shouldForwardProp,I=function(e,t,n){for(var r,a=lv(lv({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var i=iM(r=e[o])?r(a):r;for(var g in i)a[g]="className"===g?sM(a[g],i[g]):"style"===g?lv(lv({},a[g]),i[g]):i[g]}return t.className&&(a.className=sM(a.className,t.className)),a}(a,n,XT(n,l,i)||VT),C=I.as||c,d={};for(var A in I)void 0===I[A]||"$"===A[0]||"as"===A||"theme"===A||("forwardedAs"===A?d.as=I.forwardedAs:f&&!f(A,C)||(d[A]=I[A]));var h=function(e,t){var n=EM();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,I),p=sM(g,s);return h&&(p+=" "+h),I.className&&(p+=" "+I.className),d[DT(C)&&!JT.has(C)?"class":"className"]=p,d.ref=r,(0,e.createElement)(C,d)}(p,t,n)}));return p.attrs=I,p.componentStyle=h,p.shouldForwardProp=C,p.foldedComponentIds=a?sM(o.foldedComponentIds,o.styledComponentId):"",p.styledComponentId=f,p.target=a?o.target:t,Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,a=t;r<a.length;r++)uM(e,a[r],!0);return e}({},o.defaultProps,e):e}}),fM(p,(function(){return".".concat(p.styledComponentId)})),i&&oM(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),p}function ez(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n}var tz=function(e){return Object.assign(e,{isCss:!0})};function nz(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(iM(e)||lM(e))return tz(jM(ez(RT,dv([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?jM(r):tz(jM(ez(r,t)))}function rz(e,t,n){if(void 0===n&&(n=VT),!t)throw IM(1,t);var r=function(r){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return e(t,n,nz.apply(void 0,dv([r],a,!1)))};return r.attrs=function(r){return rz(e,t,lv(lv({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return rz(e,t,lv(lv({},n),r))},r}var az=function(e){return rz($M,e)},oz=az;JT.forEach((function(e){oz[e]=az(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=OM(e),VM.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var a=r(cM(jM(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,a)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&VM.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();(function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString(),n=GM(),r=cM([n&&'nonce="'.concat(n,'"'),"".concat(ST,'="true"'),"".concat("data-styled-version",'="').concat("6.0.8",'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(e,"</style>")},this.getStyleTags=function(){if(t.sealed)throw IM(2);return t._emitSheetCSS()},this.getStyleElement=function(){var n;if(t.sealed)throw IM(2);var r=((n={})[ST]="",n["data-styled-version"]="6.0.8",n.dangerouslySetInnerHTML={__html:t.instance.toString()},n),a=GM();return a&&(r.nonce=a),[e.createElement("style",lv({},r,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new VM({isServer:!0}),this.sealed=!1}t.prototype.collectStyles=function(t){if(this.sealed)throw IM(2);return e.createElement(TM,{sheet:this.instance},t)},t.prototype.interleaveWithNodeStream=function(e){throw IM(3)}})(),"__sc-".concat(ST,"__");var iz,gz=oz.div(iz||(iz=ZE(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),sz={TOP:"top",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT:"left",RIGHT:"right"},cz=[],lz=[];function uz(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}var fz="undefined"!==typeof document?e.useLayoutEffect:e.useEffect,Iz=function(t){var n=t.children,r=Ge((0,e.useState)(!1),2),a=r[0],o=r[1],i=(0,e.useRef)();return fz((function(){return o(!0),i.current=document.createElement("div"),i.current.setAttribute("evergreen-portal-container",""),document.body.appendChild(i.current),function(){document.body.removeChild(i.current)}}),[]),a?(0,Fx.createPortal)(n,i.current):null};Iz.propTypes={children:Dx().node.isRequired};var Cz=Iz,dz=e.createContext(jx),Az=(0,e.memo)((function(t){var n=t.children,r=t.value,a=void 0===r?jx:r,o=(0,e.useContext)(dz),i=Math.max(a,o),g=i+1;return e.createElement(dz.Provider,{value:g},n(i))}));Az.propTypes={children:Dx().func.isRequired,value:Dx().number};var hz=Az,pz=["children","containerProps","preventBodyScrolling","shouldAutoFocus","shouldCloseOnClick","shouldCloseOnEscapePress","onBeforeClose","onExit","onExiting","onExited","onEnter","onEntering","onEntered","isShown"],mz=function(){},bz={},yz="cubic-bezier(0.0, 0.0, 0.2, 1)",vz="cubic-bezier(0.4, 0.0, 1, 1)",Zz=(0,Lx.keyframes)("fadeInAnimation",{from:{opacity:0},to:{opacity:1}}),Gz=(0,Lx.keyframes)("fadeOutAnimation",{from:{opacity:1},to:{opacity:0}}),Bz={animationName:Zz,animationDuration:240,animationTimingFunction:yz,animationFillMode:"both"},kz={animationName:Gz,animationDuration:240,animationTimingFunction:vz,animationFillMode:"both"},Sz=(0,e.memo)((function(t){var n=t.children,r=t.containerProps,a=void 0===r?bz:r,o=t.preventBodyScrolling,i=void 0!==o&&o,g=t.shouldAutoFocus,s=void 0===g||g,c=t.shouldCloseOnClick,l=void 0===c||c,u=t.shouldCloseOnEscapePress,f=void 0===u||u,I=t.onBeforeClose,C=t.onExit,d=void 0===C?mz:C,A=t.onExiting,h=void 0===A?mz:A,p=t.onExited,m=void 0===p?mz:p,b=t.onEnter,y=void 0===b?mz:b,v=t.onEntering,Z=void 0===v?mz:v,G=t.onEntered,B=void 0===G?mz:G,k=t.isShown,S=(Mx(t,pz),WN().colors),w=Ge((0,e.useState)(null),2),W=w[0],R=w[1],V=Ge((0,e.useState)(k?"entering":"exited"),2),X=V[0],J=V[1],x=(0,e.useRef)(null);(0,e.useEffect)((function(){k&&J("entering")}),[k]);var Y=function(){!1!==uz(I)&&J("exiting")},N=function(e){"Escape"===e.key&&f&&Y()};(0,e.useEffect)((function(){"entered"===X&&(R(document.activeElement),H()),"entering"===X&&document.body.addEventListener("keydown",N,!1),"exiting"===X&&(document.body.removeEventListener("keydown",N,!1),F())}),[X]),(0,e.useEffect)((function(){return function(){K(!1),document.body.removeEventListener("keydown",N,!1)}}),[]);var H=function(){return requestAnimationFrame((function(){if(s&&null!=x.current&&null!=document.activeElement&&k&&!x.current.contains(document.activeElement)){var e=x.current.querySelector("[autofocus]"),t=x.current.querySelector("[tabindex]"),n=x.current.querySelector("button");e?e.focus():t?t.focus():n&&n.focus()}}))},F=function(){return requestAnimationFrame((function(){if(null!=W&&null!=x.current&&null!=document.activeElement){var e=x.current.contains(document.activeElement);(document.activeElement===document.body||e)&&W.focus()}}))},K=function(e){i&&function(e){var t=document.body.getBoundingClientRect().width;e?(cz.push(document.body.style.overflow),document.body.style.overflow="hidden"):document.body.style.overflow=cz.pop()||"";var n=document.body.getBoundingClientRect().width-t;e?(lz.push(document.body.style.paddingRight),document.body.style.paddingRight=Math.max(0,n||0)+"px"):document.body.style.paddingRight=lz.pop()||""}(e)},E=function(e,t){K(!0),uz(y,e,t)},T=function(e,t){J("entering"),uz(Z,e,t)},M=function(e,t){J("entered"),uz(B,e,t)},z=function(e){K(!1),uz(d,e)},D=function(e){J("exiting"),uz(h,e)},L=function(e){J("exited"),uz(m,e)},U=function(e){e.target===e.currentTarget&&l&&Y()};return"exited"===X?null:e.createElement(hz,{value:Qx},(function(t){return e.createElement(Cz,null,e.createElement(iY,{nodeRef:x,appear:!0,unmountOnExit:!0,timeout:240,in:k&&"exiting"!==X,onExit:z,onExiting:D,onExited:L,onEnter:E,onEntering:T,onEntered:M},(function(r){return e.createElement(Ux(),Ex({onClick:U,ref:x,position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:t,"data-state":r},a,{className:a.className},{selectors:{"&::before":{backgroundColor:S.overlay,left:0,top:0,position:"fixed",display:"block",width:"100%",height:"100%",content:'" "'},'&[data-state="entering"]::before':Bz,'&[data-state="entered"]::before':Bz,'&[data-state="exiting"]::before':kz,'&[data-state="exited"]::before':kz}}),"function"===typeof n?n({state:r,close:Y}):n)})))}))}));Sz.propTypes={children:Dx().oneOfType([Dx().node,Dx().func]).isRequired,isShown:Dx().bool,containerProps:Dx().object,preventBodyScrolling:Dx().bool,shouldAutoFocus:Dx().bool,shouldCloseOnClick:Dx().bool,shouldCloseOnEscapePress:Dx().bool,onBeforeClose:Dx().func,onExit:Dx().func,onExiting:Dx().func,onExited:Dx().func,onEnter:Dx().func,onEntering:Dx().func,onEntered:Dx().func};var wz,Wz=Sz,Rz=["isClosing","position"];function Vz(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(YQ){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function Xz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xz(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xz,Yz,Nz,Hz="cubic-bezier(0.0, 0.0, 0.2, 1)",Fz="cubic-bezier(0.4, 0.0, 1, 1)",Kz={padding:4,borderRadius:9999,position:"absolute",cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.4)",transition:"background-color 120ms",selectors:{"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.6)"},"&:active":{backgroundColor:"rgba(255, 255, 255, 0.4)"}}},Ez=function(e,t){var n={animation:"".concat(e," ").concat(240,"ms ").concat(Hz," both")};return{selectors:{'&[data-state="entering"]':n,'&[data-state="entered"]':n,'&[data-state="exiting"]':{animation:"".concat(t," ").concat(240,"ms ").concat(Fz," both")}}}},Tz=(b(wz={},sz.RIGHT,Jz({left:0,marginLeft:-12,marginTop:12,transform:"translateX(-100%)"},Ez((0,Lx.keyframes)("rotate360InAnimation",{from:{transform:"translateX(100%) rotate(0deg)"},to:{transform:"translateX(-100%) rotate(-360deg)"}}),(0,Lx.keyframes)("rotate360OutAnimation",{from:{transform:"translateX(-100%) rotate(0deg)"},to:{transform:"translateX(100%) rotate(360deg)"}})))),b(wz,sz.LEFT,Jz({marginRight:-12,right:0,marginTop:12,transform:"translateX(100%)"},Ez((0,Lx.keyframes)("leftRotate360InAnimation",{from:{transform:"translateX(-100%) rotate(0deg)"},to:{transform:"translateX(100%), rotate(360deg)"}}),(0,Lx.keyframes)("leftRotate360OutAnimation",{from:{transform:"translateX(100%) rotate(0deg)"},to:{transform:"translateX(-100%), rotate(360deg)"}})))),b(wz,sz.TOP,Jz({right:0,marginRight:12,top:"100%",marginTop:12,transform:"translateY(0)"},Ez((0,Lx.keyframes)("topRotate360InAnimation",{from:{transform:"translateY(-200%) rotate(0deg)"},to:{transform:"translateY(0%), rotate(360deg)"}}),(0,Lx.keyframes)("topRotate360OutAnimation",{from:{transform:"translateY(0%) rotate(0deg)"},to:{transform:"translateY(-200%), rotate(360deg)"}})))),b(wz,sz.BOTTOM,Jz({right:0,marginRight:12,bottom:"100%",marginBottom:12,transform:"translateY(0)"},Ez((0,Lx.keyframes)("bottomRotate360InAnimation",{from:{transform:"translateY(200%) rotate(0deg)"},to:{transform:"translateY(0%), rotate(360deg)"}}),(0,Lx.keyframes)("bottomRotate360OutAnimation",{from:{transform:"translateY(0%) rotate(0deg)"},to:{transform:"translateY(200%), rotate(360deg)"}})))),wz),Mz=function(t){d(r,t);var n=Vz(r);function r(){return Z(this,r),n.apply(this,arguments)}return B(r,[{key:"render",value:function(){var t=this.props,n=(t.isClosing,t.position),r=Mx(t,Rz);return e.createElement(Ux(),Ex({width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center"},Tz[n],Kz,r),e.createElement(vH,{color:"#fff"}))}}]),r}(e.PureComponent);function zz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zz(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mz.displayName="SheetClose",b(Mz,"propTypes",Jz(Jz({},Ux().propTypes),{},{isClosing:Dx().bool,position:Dx().oneOf([sz.LEFT,sz.RIGHT,sz.TOP,sz.BOTTOM]).isRequired}));var Lz=(b(xz={},sz.LEFT,{height:"100vh",maxWidth:"100vw",position:"absolute",left:0,right:"auto"}),b(xz,sz.RIGHT,{height:"100vh",maxWidth:"100vw",position:"absolute",right:0,left:"auto"}),b(xz,sz.TOP,{width:"100vw",position:"absolute",maxHeight:"100vh",top:0,bottom:"auto"}),b(xz,sz.BOTTOM,{width:"100vw",maxHeight:"100vh",position:"absolute",bottom:0,top:"auto"}),xz),Uz=(b(Yz={},sz.LEFT,{height:"100vh"}),b(Yz,sz.RIGHT,{height:"100vh"}),b(Yz,sz.TOP,{width:"100vw"}),b(Yz,sz.BOTTOM,{width:"100vw"}),Yz),jz="cubic-bezier(0.0, 0.0, 0.2, 1)",Oz="cubic-bezier(0.4, 0.0, 1, 1)",Qz=function(e,t){var n={animation:"".concat(e," ").concat(240,"ms ").concat(jz," both")};return{selectors:{'&[data-state="entering"]':n,'&[data-state="entered"]':n,'&[data-state="exiting"]':{animation:"".concat(t," ").concat(240,"ms ").concat(Oz," both")}}}},Pz=(b(Nz={},sz.LEFT,Dz({transform:"translateX(-100%)"},Qz((0,Lx.keyframes)("anchoredLeftSlideInAnimation",{from:{transform:"translateX(-100%)"},to:{transform:"translateX(0)"}}),(0,Lx.keyframes)("anchoredLeftSlideOutAnimation",{from:{transform:"translateX(0)"},to:{transform:"translateX(-100%)"}})))),b(Nz,sz.RIGHT,Dz({transform:"translateX(100%)"},Qz((0,Lx.keyframes)("anchoredRightSlideInAnimation",{from:{transform:"translateX(100%)"},to:{transform:"translateX(0)"}}),(0,Lx.keyframes)("anchoredRightSlideOutAnimation",{from:{transform:"translateX(0)"},to:{transform:"translateX(100%)"}})))),b(Nz,sz.TOP,Dz({transform:"translateY(-100%)"},Qz((0,Lx.keyframes)("anchoredTopSlideInAnimation",{from:{transform:"translateY(-100%)"},to:{transform:"translateY(0)"}}),(0,Lx.keyframes)("anchoredTopSlideOutAnimation",{from:{transform:"translateY(0)"},to:{transform:"translateY(-100%)"}})))),b(Nz,sz.BOTTOM,Dz({transform:"translateY(100%)"},Qz((0,Lx.keyframes)("anchoredBottomSlideInAnimation",{from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),(0,Lx.keyframes)("anchoredBottomSlideOutAnimation",{from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}})))),Nz),_z=function(){},qz=(0,e.memo)((function(t){var n=t.width,r=void 0===n?620:n,a=t.isShown,o=t.children,i=t.containerProps,g=t.onOpenComplete,s=void 0===g?_z:g,c=t.onCloseComplete,l=void 0===c?_z:c,u=t.onBeforeClose,f=t.shouldAutoFocus,I=void 0===f||f,C=t.shouldCloseOnOverlayClick,d=void 0===C||C,A=t.shouldCloseOnEscapePress,h=void 0===A||A,p=t.position,m=void 0===p?sz.RIGHT:p,b=t.preventBodyScrolling;return e.createElement(Wz,{isShown:a,shouldAutoFocus:I,shouldCloseOnClick:d,shouldCloseOnEscapePress:h,onBeforeClose:u,onExited:l,onEntered:s,preventBodyScrolling:b},(function(t){var n=t.close,a=t.state;return e.createElement(RH,Ex({width:r},Lz[m],Pz[m],{"data-state":a}),e.createElement(Mz,{position:m,"data-state":a,isClosing:!1,onClick:n}),e.createElement(RH,Ex({elevation:4,backgroundColor:"white",overflowY:"auto",maxHeight:"100vh","data-state":a,width:r},Uz[m],i),"function"===typeof o?o({close:n}):o))}))}));qz.propTypes={children:Dx().oneOfType([Dx().node,Dx().func]).isRequired,isShown:Dx().bool,onCloseComplete:Dx().func,onOpenComplete:Dx().func,onBeforeClose:Dx().func,shouldAutoFocus:Dx().bool,shouldCloseOnOverlayClick:Dx().bool,shouldCloseOnEscapePress:Dx().bool,width:Dx().oneOfType([Dx().string,Dx().number]),containerProps:Dx().object,position:Dx().oneOf([sz.TOP,sz.BOTTOM,sz.LEFT,sz.RIGHT]),preventBodyScrolling:Dx().bool};var $z=qz,eD=["className"];function tD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tD(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rD="cubic-bezier(0.0, 0.0, 0.2, 1)",aD="cubic-bezier(0.4, 0.0, 1, 1)",oD={animationName:(0,Lx.keyframes)("openAnimation",{from:{transform:"scale(0.8)",opacity:0},to:{transform:"scale(1)",opacity:1}}),animationDuration:200,animationTimingFunction:rD,animationFillMode:"both"},iD={selectors:{'&[data-state="entering"]':oD,'&[data-state="entered"]':oD,'&[data-state="exiting"]':{animationName:(0,Lx.keyframes)("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.8)",opacity:0}}),animationDuration:200,animationTimingFunction:aD,animationFillMode:"both"}}},gD=function(e){return e()},sD={},cD=(0,e.memo)((function(t){var n=t.children,r=t.cancelLabel,a=void 0===r?"Cancel":r,o=t.confirmLabel,i=void 0===o?"Confirm":o,g=t.containerProps,s=void 0===g?sD:g,c=t.contentContainerProps,l=t.footer,u=t.hasCancel,f=void 0===u||u,I=t.hasClose,C=void 0===I||I,d=t.hasFooter,A=void 0===d||d,h=t.hasHeader,p=void 0===h||h,m=t.header,b=t.intent,y=void 0===b?"none":b,v=t.isConfirmDisabled,Z=void 0!==v&&v,G=t.isConfirmLoading,B=void 0!==G&&G,k=t.isShown,S=void 0!==k&&k,w=t.minHeightContent,W=void 0===w?80:w,R=t.onCancel,V=void 0===R?gD:R,X=t.onCloseComplete,J=t.onConfirm,x=void 0===J?gD:J,Y=t.onOpenComplete,N=t.overlayProps,H=void 0===N?sD:N,F=t.preventBodyScrolling,K=void 0!==F&&F,E=t.shouldAutoFocus,T=void 0===E||E,M=t.shouldCloseOnEscapePress,z=void 0===M||M,D=t.shouldCloseOnOverlayClick,L=void 0===D||D,U=t.sideOffset,j=void 0===U?"16px":U,O=t.title,Q=t.topOffset,P=void 0===Q?"12vmin":Q,_=t.width,q=void 0===_?560:_,$=Number.isInteger(j)?"".concat(j,"px"):j,ee="calc(100% - ".concat($," * 2)"),te=Number.isInteger(P)?"".concat(P,"px"):P,ne="calc(100% - ".concat(te," * 2)"),re=function(e,t){return"function"===typeof e?e({close:t}):e},ae=NN("DialogHeader",sD,sD,sD),oe=NN("DialogBody",sD,sD,sD),ie=NN("DialogFooter",sD,sD,sD),ge=s.className,se=Mx(s,eD);return e.createElement(Wz,{isShown:S,shouldAutoFocus:T,shouldCloseOnClick:L,shouldCloseOnEscapePress:z,onExited:X,onEntered:Y,containerProps:nD({display:"flex",alignItems:"flex-start",justifyContent:"center"},H),preventBodyScrolling:K},(function(t){var r=t.close,o=t.state;return e.createElement(RH,Ex({},iD,{role:"dialog",backgroundColor:"white",elevation:4,borderRadius:8,width:q,maxWidth:ee,maxHeight:ne,marginX:$,marginY:te,display:"flex",flexDirection:"column",className:ge,"data-state":o},se),function(t){if(m||p)return e.createElement(RH,Ex({flexShrink:0,display:"flex",alignItems:"center"},ae),m?re(m,t):e.createElement(e.Fragment,null,e.createElement(HH,{is:"h4",size:600,flex:"1"},O),C&&e.createElement(CH,{appearance:"minimal",icon:vH,onClick:function(){return V(t)}})))}(r),e.createElement(RH,Ex({"data-state":o,display:"flex",overflow:"auto",flexDirection:"column",minHeight:W},oe,c),e.createElement(RH,null,function(t){return"function"===typeof n?n({close:t}):"string"===typeof n?e.createElement(zH,null,n):n}(r))),function(t){if(l||A)return e.createElement(RH,Ex({display:"flex",justifyContent:"flex-end"},ie),e.createElement(RH,null,l?re(l,t):e.createElement(e.Fragment,null,f&&e.createElement(cH,{tabIndex:0,onClick:function(){return V(t)}},a),e.createElement(cH,{tabIndex:0,marginLeft:8,appearance:"primary",intent:y,isLoading:B,disabled:Z,onClick:function(){return x(t)}},i))))}(r))}))}));cD.propTypes={children:Dx().oneOfType([Dx().node,Dx().func]).isRequired,intent:Dx().string,isShown:Dx().bool,title:Dx().node,hasHeader:Dx().bool,header:Dx().oneOfType([Dx().node,Dx().func]),hasFooter:Dx().bool,footer:Dx().oneOfType([Dx().node,Dx().func]),hasCancel:Dx().bool,hasClose:Dx().bool,onCloseComplete:Dx().func,onOpenComplete:Dx().func,onConfirm:Dx().func,confirmLabel:Dx().string,isConfirmLoading:Dx().bool,isConfirmDisabled:Dx().bool,onCancel:Dx().func,cancelLabel:Dx().string,shouldAutoFocus:Dx().bool,shouldCloseOnOverlayClick:Dx().bool,shouldCloseOnEscapePress:Dx().bool,width:Dx().oneOfType([Dx().string,Dx().number]),topOffset:Dx().oneOfType([Dx().string,Dx().number]),sideOffset:Dx().oneOfType([Dx().string,Dx().number]),minHeightContent:Dx().oneOfType([Dx().string,Dx().number]),containerProps:Dx().object,contentContainerProps:Dx().object,preventBodyScrolling:Dx().bool,overlayProps:Dx().object};var lD=cD,uD=["M13.99 6.99H4.41L7.7 3.7a1.003 1.003 0 00-1.42-1.42l-5 5a1.014 1.014 0 000 1.42l5 5a1.003 1.003 0 001.42-1.42L4.41 8.99H14c.55 0 1-.45 1-1s-.46-1-1.01-1z"],fD=["M18 9H4.41L8.7 4.71c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71l-6 6c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l6 6a1.003 1.003 0 001.42-1.42L4.41 11H18c.55 0 1-.45 1-1s-.45-1-1-1z"],ID=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:uD,svgPaths20:fD,ref:n,name:"arrow-left"},t))})));function CD(t){var n=t.children,r=XF(),a=r.isLaptop,o=r.isMobile,i=$F(),g=i.count,s=i.peek,c=i.reset,l=(0,e.useMemo)((function(){return g>0}),[g]),u=(0,e.useMemo)((function(){return g>1}),[g]);return(0,YF.jsxs)(RH,{children:[n,o&&(0,YF.jsx)($z,{isShown:l,onCloseComplete:c,width:"100vw",children:(0,YF.jsxs)(RH,{position:"relative",width:"100%",height:"100%",children:[(0,YF.jsx)(RH,{position:"absolute",top:0,width:"100%",paddingY:bK(4),paddingX:bK(8),zIndex:1,children:(0,YF.jsx)(hD,{hasBack:u,hasClose:!0})}),(0,YF.jsx)(_F,{children:s()})]})}),a&&(0,YF.jsx)(lD,{isShown:l,onCloseComplete:c,hasHeader:!1,hasFooter:!1,contentContainerProps:{padding:0},containerProps:{overflow:"hidden"},children:(0,YF.jsxs)(RH,{position:"relative",width:"100%",children:[(0,YF.jsx)(RH,{position:"absolute",top:0,width:"100%",paddingY:bK(4),paddingX:bK(6),zIndex:1,children:(0,YF.jsx)(hD,{hasBack:u,hasClose:!0})}),s()]})})]})}function dD(t){var n=$F().push;return(0,e.useCallback)((function(){n(t)}),[t,n])}function AD(e){var t=e.children,n=XF(),r=n.isLaptop,a=n.isMobile;return r?(0,YF.jsx)(_F,{padding:HK(6),paddingTop:HK(8),children:t}):a?(0,YF.jsx)(_F,{paddingX:bK(4),paddingTop:HK(8),paddingBottom:bK(8),children:t}):(0,YF.jsx)(YF.Fragment,{})}function hD(e){var t=e.hasBack,n=e.hasClose,r=$F(),a=r.pop,o=r.reset;return(0,YF.jsxs)(FK.X2,{middle:"xs",between:"xs",children:[(0,YF.jsx)(FK.JX,{children:t&&(0,YF.jsx)(CH,{appearance:"minimal",icon:(0,YF.jsx)(ID,{}),onClick:function(){return a()}})}),(0,YF.jsx)(FK.JX,{children:n&&(0,YF.jsx)(CH,{appearance:"minimal",icon:(0,YF.jsx)(vH,{}),onClick:function(){return o()}})})]})}var pD=["M16 7.97v-.02-.01-.02-.02a.672.672 0 00-.17-.36c-.49-.63-1.07-1.2-1.65-1.72l-3.16 2.26a2.978 2.978 0 01-2.98 2.9c-.31 0-.6-.06-.88-.15L5.09 12.3c.44.19.9.36 1.37.47.97.23 1.94.24 2.92.05.88-.17 1.74-.54 2.53-.98 1.25-.7 2.39-1.67 3.38-2.75.18-.2.37-.41.53-.62.09-.1.15-.22.17-.36v-.02-.02-.01-.02-.03c.01-.02.01-.03.01-.04zm-.43-4.17c.25-.18.43-.46.43-.8 0-.55-.45-1-1-1-.22 0-.41.08-.57.2l-.01-.01-2.67 1.91c-.69-.38-1.41-.69-2.17-.87a6.8 6.8 0 00-2.91-.05c-.88.18-1.74.54-2.53.99-1.25.7-2.39 1.67-3.38 2.75-.18.2-.37.41-.53.62-.23.29-.23.63-.01.92.51.66 1.11 1.25 1.73 1.79.18.16.38.29.56.44l-2.09 1.5.01.01c-.25.18-.43.46-.43.8 0 .55.45 1 1 1 .22 0 .41-.08.57-.2l.01.01 14-10-.01-.01zm-10.41 5a3.03 3.03 0 01-.11-.8 2.99 2.99 0 012.99-2.98c.62 0 1.19.21 1.66.53L5.16 8.8z"],mD=["M20 9.96v-.03-.01-.02-.02a.794.794 0 00-.21-.43c-.55-.69-1.19-1.3-1.85-1.87l-3.93 2.62a3.966 3.966 0 01-3.96 3.77c-.47 0-.91-.1-1.33-.24l-2.24 1.49c.52.21 1.05.39 1.6.51 1.21.27 2.43.28 3.64.05 1.11-.21 2.17-.64 3.17-1.18 1.56-.84 2.99-2 4.23-3.3.23-.24.46-.49.67-.75a.87.87 0 00.21-.43v-.02-.02-.01-.03V10v-.04zm-.46-5.14c.27-.18.46-.47.46-.82 0-.55-.45-1-1-1-.21 0-.39.08-.54.18l-.01-.02L15 5.46c-.95-.53-1.95-.96-3.01-1.2a9.158 9.158 0 00-3.65-.04c-1.11.21-2.17.64-3.17 1.18-1.56.84-2.99 2-4.23 3.3-.23.24-.46.48-.67.75-.27.34-.27.76 0 1.1.64.79 1.39 1.5 2.16 2.15.26.21.52.41.79.61L.44 15.16l.01.02A1 1 0 000 16c0 .55.45 1 1 1 .21 0 .39-.08.54-.18l.01.02 18-12-.01-.02zm-8.67 3.4c-.25-.12-.53-.2-.83-.2-1.1 0-1.99.89-1.99 1.99 0 .03.02.06.02.09l-1.78 1.19c-.14-.4-.22-.83-.22-1.28 0-2.19 1.78-3.97 3.98-3.97 1.01 0 1.91.38 2.61 1l-1.79 1.18z"],bD=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:pD,svgPaths20:mD,ref:n,name:"eye-off"},t))})));function yD(e,t){var n={};e.forEach((function(e){var r=t(e)[0][0];n[r]||(n[r]=[]),n[r].push(e)}));var r=[];for(var a in n)n.hasOwnProperty(a)&&r.push({letter:a,elements:n[a]});return r.sort((function(e,t){return e.letter.localeCompare(t.letter)})),r.forEach((function(e){e.elements.sort((function(e,n){var r=t(e).join(""),a=t(n).join("");return r.localeCompare(a)}))})),r}function vD(t){var n=t.groups,r=t.children;return(0,YF.jsx)(RH,{children:null===n||void 0===n?void 0:n.map((function(t){var n=t.letter,a=t.elements;return(0,YF.jsxs)(RH,{marginTop:bK(8),children:[(0,YF.jsx)(HH,{marginY:bK(2),fontWeight:800,textTransform:"uppercase",opacity:.6,children:n}),(0,YF.jsx)(FK.X2,{children:a.map((function(t,n){return(0,YF.jsx)(e.Fragment,{children:r(t)},n)}))})]},n)}))})}var ZD="react-horizontal-scrolling-menu",GD="-separator",BD="".concat(ZD,"-").concat(GD),kD="".concat(ZD,"--item"),SD="".concat(ZD,"--scroll-container"),wD="".concat(ZD,"--wrapper"),WD="".concat(ZD,"--inner-wrapper"),RD="".concat(ZD,"--header"),VD="".concat(ZD,"--arrow-left"),XD="".concat(ZD,"--arrow-right"),JD="".concat(ZD,"--footer"),xD="itemId",YD="data-key",ND="data-index";Object.freeze({__proto__:null,rootClassName:ZD,separatorString:GD,separatorClassName:BD,itemClassName:kD,scrollContainerClassName:SD,wrapperClassName:wD,innerWrapperClassName:WD,headerClassName:RD,arrowLeftClassName:VD,arrowRightClassName:XD,footerClassName:JD,id:xD,dataKeyAttribute:YD,dataIndexAttribute:ND});function HD(t){var n=t.className,r=void 0===n?"":n,a=t.children,o=t.onScroll,i=void 0===o?function(){}:o,g=t.scrollRef,s=e.useMemo((function(){return"".concat(SD," ").concat(r)}),[r]);return e.createElement("div",{className:s,onScroll:i,ref:g},a)}var FD=e.memo((function(t){var n,r=t.className,a=t.id,o=t.index,i=t.refs,g=e.useRef(null);return i[o]=g,e.createElement("div",Object.assign({className:r},(b(n={},YD,a),b(n,ND,o),n),{ref:g}))})),KD=e.memo((function(t){var n,r=t.children,a=t.className,o=t.id,i=t.index,g=t.refs,s=e.useRef(null);return g[String(i)]=s,e.createElement("div",Object.assign({className:a},(b(n={},YD,o),b(n,ND,i),n),{ref:s}),r)}));function ED(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function TD(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function MD(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return TD(n.overflowY,t)||TD(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function zD(e,t,n,r,a,o,i,g){return o<e&&i>t||o>e&&i<t?0:o<=e&&g<=n||i>=t&&g>=n?o-e-r:i>t&&g<n||o<e&&g>n?i-t+a:0}var DD,LD=function(e,t){var n=window,r=t.scrollMode,a=t.block,o=t.inline,i=t.boundary,g=t.skipOverflowHiddenElements,s="function"==typeof i?i:function(e){return e!==i};if(!ED(e))throw new TypeError("Invalid target");for(var c,l,u=document.scrollingElement||document.documentElement,f=[],I=e;ED(I)&&s(I);){if((I=null==(l=(c=I).parentElement)?c.getRootNode().host||null:l)===u){f.push(I);break}null!=I&&I===document.body&&MD(I)&&!MD(document.documentElement)||null!=I&&MD(I,g)&&f.push(I)}for(var C=n.visualViewport?n.visualViewport.width:innerWidth,d=n.visualViewport?n.visualViewport.height:innerHeight,A=window.scrollX||pageXOffset,h=window.scrollY||pageYOffset,p=e.getBoundingClientRect(),m=p.height,b=p.width,y=p.top,v=p.right,Z=p.bottom,G=p.left,B="start"===a||"nearest"===a?y:"end"===a?Z:y+m/2,k="center"===o?G+b/2:"end"===o?v:G,S=[],w=0;w<f.length;w++){var W=f[w],R=W.getBoundingClientRect(),V=R.height,X=R.width,J=R.top,x=R.right,Y=R.bottom,N=R.left;if("if-needed"===r&&y>=0&&G>=0&&Z<=d&&v<=C&&y>=J&&Z<=Y&&G>=N&&v<=x)return S;var H=getComputedStyle(W),F=parseInt(H.borderLeftWidth,10),K=parseInt(H.borderTopWidth,10),E=parseInt(H.borderRightWidth,10),T=parseInt(H.borderBottomWidth,10),M=0,z=0,D="offsetWidth"in W?W.offsetWidth-W.clientWidth-F-E:0,L="offsetHeight"in W?W.offsetHeight-W.clientHeight-K-T:0,U="offsetWidth"in W?0===W.offsetWidth?0:X/W.offsetWidth:0,j="offsetHeight"in W?0===W.offsetHeight?0:V/W.offsetHeight:0;if(u===W)M="start"===a?B:"end"===a?B-d:"nearest"===a?zD(h,h+d,d,K,T,h+B,h+B+m,m):B-d/2,z="start"===o?k:"center"===o?k-C/2:"end"===o?k-C:zD(A,A+C,C,F,E,A+k,A+k+b,b),M=Math.max(0,M+h),z=Math.max(0,z+A);else{M="start"===a?B-J-K:"end"===a?B-Y+T+L:"nearest"===a?zD(J,Y,V,K,T+L,B,B+m,m):B-(J+V/2)+L/2,z="start"===o?k-N-F:"center"===o?k-(N+X/2)+D/2:"end"===o?k-x+E+D:zD(N,x,X,F,E+D,k,k+b,b);var O=W.scrollLeft,Q=W.scrollTop;B+=Q-(M=Math.max(0,Math.min(Q+M/j,W.scrollHeight-V/j+L))),k+=O-(z=Math.max(0,Math.min(O+z/U,W.scrollWidth-X/U+D)))}S.push({el:W,top:M,left:z})}return S};function UD(e){return e===Object(e)&&0!==Object.keys(e).length}function jD(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(UD(t)&&"function"==typeof t.behavior)return t.behavior(n?LD(e,t):[]);if(n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:UD(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,o=e.left;r.scroll&&n?r.scroll({top:a,left:o,behavior:t}):(r.scrollTop=a,r.scrollLeft=o)}))}(LD(e,r),r.behavior)}}var OD=function(){return DD||(DD="performance"in window?performance.now.bind(performance):Date.now),DD()};function QD(e){var t=OD(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),a=e.startX+(e.x-e.startX)*r,o=e.startY+(e.y-e.startY)*r;e.method(a,o),a!==e.x||o!==e.y?requestAnimationFrame((function(){return QD(e)})):e.cb()}function PD(e,t,n,r,a,o){var i,g,s,c;void 0===r&&(r=600),void 0===a&&(a=function(e){return 1+--e*e*e*e*e}),i=e,g=e.scrollLeft,s=e.scrollTop,c=function(t,n){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(n)},QD({scrollable:i,method:c,startTime:OD(),startX:g,startY:s,x:t,y:n,duration:r,ease:a,cb:o})}var _D=function(e,t){var n=t||{};return function(e){return e&&!e.behavior||"smooth"===e.behavior}(n)?jD(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var r=t.el,a=t.left,o=t.top,i=r.scrollLeft,g=r.scrollTop;return i===a&&g===o?e:[].concat(e,[new Promise((function(e){return PD(r,a,o,n.duration,n.ease,(function(){return e({el:r,left:[i,a],top:[g,o]})}))}))])}),[]))}}):Promise.resolve(jD(e,t))},qD=function(e){return Object.values(e).map((function(e){return e.current})).filter(Boolean)};function $D(e,t,n,r,a,o){var i,g=(null===(i=null==e?void 0:e.entry)||void 0===i?void 0:i.target)||e,s=t||"smooth";if(g)return o?null==g?void 0:g.scrollIntoView({behavior:s,inline:n||"end",block:r||"nearest"}):_D(g,Object.assign({behavior:s,inline:n||"end",block:r||"nearest",duration:500},a))}var eL=function(e){return document.querySelector("[".concat(YD,"='").concat(e,"']"))},tL=function(e){return document.querySelector("[".concat(ND,"='").concat(e,"']"))};function nL(t){return e.isValidElement(t)&&t||"function"==typeof t&&e.createElement(t,null)||null}var rL=function(e){return e.filter((function(e){return!new RegExp(".*".concat(GD,"$")).test(e)}))},aL=function(e){var t;return String((null===(t=null==e?void 0:e.props)||void 0===t?void 0:t[xD])||String((null==e?void 0:e.key)||"").replace(/^\.\$/,""))};function oL(t){var n=t.children,r=t.itemClassName,a=void 0===r?"":r,o=t.refs,i=t.separatorClassName,g=void 0===i?"":i,s=e.Children.toArray(n).filter(Boolean),c=s.length,l=e.useMemo((function(){return"".concat(kD," ").concat(a)}),[a]),u=e.useMemo((function(){return"".concat(BD," ").concat(g)}),[g]);return e.createElement(e.Fragment,null,s.map((function(t,n){var r=aL(t),a=r+GD,i=n+1===c;return[e.createElement(KD,{className:l,id:r,key:"menuItem__"+r,refs:o,index:n},t),!i&&e.createElement(FD,{className:u,id:a,refs:o,key:a,index:n+.1})]})))}var iL="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;var gL=function(t){return e.Children.toArray(t).map(aL).filter(Boolean)},sL=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n,[{key:"toArr",value:function(){return this.sort(We(this))}},{key:"toItems",value:function(){return this.toArr().map((function(e){return Ge(e,1)[0]}))}},{key:"toItemsWithoutSeparators",value:function(){return rL(this.toItems())}},{key:"toItemsKeys",value:function(){return this.toItems()}},{key:"sort",value:function(e){return e.sort((function(e,t){var n=Ge(e,2)[1],r=Ge(t,2)[1];return+n.index-+r.index}))}},{key:"set",value:function(e,t){var r=this;return Array.isArray(e)?this.sort(e).forEach((function(e){var t=Ge(e,2),a=t[0],o=t[1];gn(A(n.prototype),"set",r).call(r,String(a),o)})):gn(A(n.prototype),"set",this).call(this,String(e),t),this}},{key:"first",value:function(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}},{key:"last",value:function(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}},{key:"filter",value:function(e){return this.toArr().filter(e)}},{key:"find",value:function(e){return this.toArr().find(e)}},{key:"findIndex",value:function(e){return this.toArr().findIndex(e)}},{key:"getCurrentPos",value:function(e,t){var n=this.toArr().filter((function(e){var n;return t?!(null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.includes(GD)):e})),r=n.findIndex((function(t){var n=Ge(t,2),r=n[0],a=n[1];return r===e||a===e}));return[n,r]}},{key:"prev",value:function(e,t){var n,r=Ge(this.getCurrentPos(e,!!t),2),a=r[0],o=r[1];return-1!==o?null===(n=a[o-1])||void 0===n?void 0:n[1]:void 0}},{key:"next",value:function(e,t){var n,r=Ge(this.getCurrentPos(e,!!t),2),a=r[0],o=r[1];return-1!==o?null===(n=a[o+1])||void 0===n?void 0:n[1]:void 0}},{key:"getVisible",value:function(){return this.filter((function(e){return e[1].visible}))}},{key:"getVisibleElements",value:function(){return this.filter((function(e){return!e[0].includes(GD)&&e[1].visible}))}}]),n}(Ve(Map)),cL={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100},lL=e.createContext({});function uL(t){var n=t.LeftArrow,r=t.RightArrow,a=t.children,o=t.Header,i=t.Footer,g=t.transitionDuration,s=void 0===g?500:g,c=t.transitionEase,l=t.transitionBehavior,u=t.onInit,f=void 0===u?function(){}:u,I=t.onUpdate,C=void 0===I?function(){}:I,d=t.onMouseDown,A=t.onMouseUp,h=t.onMouseMove,p=t.onScroll,m=void 0===p?function(){}:p,b=t.onTouchMove,y=t.onTouchStart,v=t.onTouchEnd,Z=t.onWheel,G=void 0===Z?function(){}:Z,B=t.options,k=void 0===B?cL:B,S=t.scrollContainerClassName,w=void 0===S?"":S,W=t.itemClassName,R=void 0===W?"":W,V=t.separatorClassName,X=void 0===V?"":V,J=t.wrapperClassName,x=void 0===J?"":J,Y=t.apiRef,N=void 0===Y?{current:{}}:Y,H=t.RTL,F=t.noPolyfill,K=nL(n),E=nL(r),T=nL(o),M=nL(i),z=e.useRef(null),D=Ge(e.useState({}),1)[0],L=e.useMemo((function(){return Object.assign(Object.assign(Object.assign({},cL),k),{root:z.current})}),[k,z.current]),U=e.useRef(new sL).current,j=function(t,n){var r=Ge(e.useState(""),2),a=r[0],o=r[1],i=e.useMemo((function(){return gL(t)}),[t]);return e.useEffect((function(){var e=i.filter(Boolean).join("");n.toItemsWithoutSeparators().filter((function(e){return!i.includes(e)})).forEach((function(e){var t,r,a=(null===(t=n.last())||void 0===t?void 0:t.key)===e&&(null===(r=n.prev(e))||void 0===r?void 0:r.key)||"";n.delete(a),n.delete("".concat(e).concat(GD)),n.delete(e)})),o(e)}),[i,n]),a}(a,U),O=function(t){var n=t.items,r=t.itemsChanged,a=t.refs,o=t.options,i=e.useRef(),g=Ge(e.useState([]),2),s=g[0],c=g[1],l=e.useRef(+setTimeout((function(){}),0)),u=e.useCallback((function(e){n.set(function(e,t){return We(e).map((function(e){var n,r,a,o,i=e.target,g=String(null!==(r=null===(n=null==i?void 0:i.dataset)||void 0===n?void 0:n.key)&&void 0!==r?r:"");return[g,{index:String(null!==(o=null===(a=null==i?void 0:i.dataset)||void 0===a?void 0:a.index)&&void 0!==o?o:""),key:g,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(e,o)),clearTimeout(l.current),l.current=+setTimeout((function(){return requestAnimationFrame((function(){c((function(e){var t=n.getVisible().map((function(e){return e[1].key}));return JSON.stringify(e)!==JSON.stringify(t)?t:e}))}))}),o.throttle)}),[n,o]);return iL((function(){var e=qD(a),t=i.current||new IntersectionObserver(u,o);return i.current=t,e.forEach((function(e){return t.observe(e)})),function(){clearTimeout(l.current),t.disconnect(),i.current=void 0}}),[u,r,o,a]),{visibleElementsWithSeparators:s}}({items:U,itemsChanged:j,options:L,refs:D}),Q=O.visibleElementsWithSeparators,P=!!Q.length,_=e.useMemo((function(){return function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,s=rL(r),c=!!(null===(t=e.first())||void 0===t?void 0:t.visible),l=!!(null===(n=e.last())||void 0===n?void 0:n.visible),u=function(t){var n;return null===(n=e.find((function(e){return e[1].key===String(t)})))||void 0===n?void 0:n[1]},f=function(){var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},I=function(){var t,n,r,a;return e.next(null===(a=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===a?void 0:a[1])};return{getItemById:u,getItemElementById:eL,getItemByIndex:function(t){var n;return null===(n=e.find((function(e){return String(e[1].index)===String(t)})))||void 0===n?void 0:n[1]},getItemElementByIndex:tL,getNextItem:I,getNextElement:function(){var t,n,r,a;return e.next(null===(a=null===(r=null===(n=null===(t=e.getVisibleElements())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===a?void 0:a[1],!0)},getPrevItem:f,getPrevElement:function(){var t,n;return e.prev(null===(n=null===(t=e.getVisibleElements())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1],!0)},isFirstItemVisible:c,isItemVisible:function(e){return s.includes(String(e))},isLastItem:function(t){return e.last()===u(t)},isLastItemVisible:l,scrollNext:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r.duration,c=r.ease,l=r.boundary,u=void 0===l?null==a?void 0:a.current:l,f=null!=e?e:null==o?void 0:o.behavior;return $D(I(),f,t||"start",n||"nearest",{boundary:u,duration:null!=s?s:null==o?void 0:o.duration,ease:null!=c?c:null==o?void 0:o.ease},i||g)},scrollPrev:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r.duration,c=r.ease,l=r.boundary,u=void 0===l?null==a?void 0:a.current:l,I=null!=e?e:null==o?void 0:o.behavior;return $D(f(),I,t||"end",n||"nearest",{boundary:u,duration:null!=s?s:null==o?void 0:o.duration,ease:null!=c?c:null==o?void 0:o.ease},i||g)},scrollToItem:function(e,t,n,r,i){var g,s;return $D(e,null!=t?t:null==o?void 0:o.behavior,n,r,Object.assign(Object.assign({boundary:null==a?void 0:a.current},i),{duration:null!==(g=null==i?void 0:i.duration)&&void 0!==g?g:null==o?void 0:o.duration,ease:null!==(s=null==i?void 0:i.ease)&&void 0!==s?s:null==o?void 0:o.ease}))},visibleElements:s,visibleElementsWithSeparators:r,visibleItems:r,visibleItemsWithoutSeparators:s}}(U,Q,z,{duration:s,ease:c,behavior:l},H,F)}),[U,Q,j,H,F]),q=e.useCallback((function(){return Object.assign(Object.assign({},_),{initComplete:P,items:U,visibleElementsWithSeparators:Q,scrollContainer:z})}),[_,P,U,Q,z]),$=Ge(e.useState(q),2),ee=$[0],te=$[1];!function(t){var n=t.cb,r=void 0===n?function(){}:n,a=t.condition,o=t.hash;e.useEffect((function(){a&&r()}),[o,a])}({cb:function(){return C(ee)},condition:function(t){var n=t.cb,r=t.condition,a=Ge(e.useState(!1),2),o=a[0],i=a[1];return e.useEffect((function(){r&&!o&&(i(!0),n())}),[r,o]),o}({cb:function(){return f(ee)},condition:P}),hash:JSON.stringify(Q.concat(String(null==ee?void 0:ee.isFirstItemVisible)).concat(String(null==ee?void 0:ee.isLastItemVisible)))}),e.useEffect((function(){return te(q())}),[q]),N.current=ee;var ne=e.useCallback((function(e){return m(ee,e)}),[m,ee]),re=e.useCallback((function(e){return G(ee,e)}),[G,ee]),ae=e.useMemo((function(){return"".concat(wD," ").concat(x)}),[x]),oe=e.useMemo((function(){return"".concat(w).concat(H?" rtl":"")}),[H,w]);return e.createElement("div",{className:ae,onWheel:re,onMouseDown:null==d?void 0:d(ee),onMouseUp:null==A?void 0:A(ee),onMouseMove:null==h?void 0:h(ee),onTouchStart:null==y?void 0:y(ee),onTouchMove:null==b?void 0:b(ee),onTouchEnd:null==v?void 0:v(ee)},e.createElement(lL.Provider,{value:ee},e.createElement("div",{className:RD},T),e.createElement("div",{className:WD},e.createElement("div",{className:VD},K),e.createElement(HD,{className:oe,onScroll:ne,scrollRef:z},e.createElement(oL,{refs:D,itemClassName:R,separatorClassName:X},a)),e.createElement("div",{className:XD},E)),e.createElement("div",{className:JD},M)))}var fL,IL=["onPosition","onClick"];function CL(e,t){0!==Math.abs(t.deltaX)||Math.abs(t.deltaY)<15?t.stopPropagation():t.deltaY<0?e.scrollNext():t.deltaY>0&&e.scrollPrev()}function dL(t){var n=t.children,r=function(){var t=Ge(e.useState(!1),2),n=t[0],r=t[1],a=Ge(e.useState(!1),2),o=a[0],i=a[1],g=e.useRef(0);return{dragStart:e.useCallback((function(e){g.current=e.clientX,r(!0)}),[]),dragStop:e.useCallback((function(){return window.requestAnimationFrame((function(){i(!1),r(!1)}))}),[]),dragMove:function(e,t){var r=g.current-e.clientX,a=Math.abs(r)>5;n&&a&&i(!0),o&&a&&(g.current=e.clientX,t(r))},dragging:o,position:g,setDragging:i}}(),a=r.dragging,o=r.dragStart,i=r.dragStop,g=r.dragMove;return(0,YF.jsx)(AL,{onMouseLeave:i,children:(0,YF.jsx)(uL,{onWheel:CL,onMouseDown:function(){return o},onMouseUp:function(){return i},onMouseMove:function(e){var t=e.scrollContainer;return function(e){return g(e,(function(e){t.current&&(t.current.scrollLeft+=e)}))}},children:n((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";return function(n){var r=n.getItemById,o=n.scrollToItem;if(a)return!1;o(r(e),"smooth",t,"nearest")}}))})})}var AL=oz(RH)(fL||(fL=ZE(["\n  .react-horizontal-scrolling-menu--scroll-container::-webkit-scrollbar {\n    display: none;\n  }\n\n  .react-horizontal-scrolling-menu--scroll-container {\n    -ms-overflow-style: none; /* IE and Edge */\n    scrollbar-width: none; /* Firefox */\n  }\n"])));function hL(t){var n=t.onPosition,r=t.onClick,a=Mx(t,IL),o=(0,e.useContext)(lL),i=(0,e.useCallback)((function(e){r&&r(e),n(o)}),[r,n,o]);return(0,YF.jsx)(cH,v(v({},a),{},{onClick:i}))}var pL=function(e){d(n,e);var t=p(n);function n(){return Z(this,n),t.apply(this,arguments)}return B(n,[{key:"render",value:function(){return(0,YF.jsx)(dL,v({},this.props))}}],[{key:"Button",value:function(e){return(0,YF.jsx)(hL,v({},e))}}]),n}(e.Component),mL=Pb.makeMessageType("wallet.v1.Transaction",(function(){return[{no:1,name:"contract",kind:"scalar",T:9},{no:2,name:"factory",kind:"message",T:bL,oneof:"data"},{no:3,name:"grant_role",kind:"message",T:yL,oneof:"data"},{no:4,name:"revoke_role",kind:"message",T:vL,oneof:"data"},{no:5,name:"renounce_role",kind:"message",T:ZL,oneof:"data"},{no:6,name:"add_worker",kind:"message",T:GL,oneof:"data"},{no:7,name:"remove_worker",kind:"message",T:BL,oneof:"data"},{no:8,name:"update_worker_addr",kind:"message",T:kL,oneof:"data"},{no:9,name:"add_entity",kind:"message",T:SL,oneof:"data"},{no:10,name:"remove_entity",kind:"message",T:wL,oneof:"data"},{no:11,name:"deploy_medicine",kind:"message",T:WL,oneof:"data"},{no:12,name:"set_entity_manager_address",kind:"message",T:RL,oneof:"data"},{no:13,name:"transfer",kind:"message",T:VL,oneof:"data"},{no:14,name:"approve_transfer",kind:"message",T:XL,oneof:"data"},{no:15,name:"reject_transfer",kind:"message",T:JL,oneof:"data"},{no:16,name:"mint",kind:"message",T:xL,oneof:"data"},{no:17,name:"approve_mint",kind:"message",T:YL,oneof:"data"},{no:18,name:"reject_mint",kind:"message",T:NL,oneof:"data"},{no:19,name:"burn",kind:"message",T:HL,oneof:"data"},{no:20,name:"approve_burn",kind:"message",T:FL,oneof:"data"},{no:21,name:"reject_burn",kind:"message",T:KL,oneof:"data"},{no:22,name:"panic",kind:"message",T:EL,oneof:"data"},{no:23,name:"happiness",kind:"message",T:TL,oneof:"data"}]})),bL=Pb.makeMessageType("wallet.v1.Transaction.Factory",(function(){return[{no:1,name:"address",kind:"scalar",T:9}]}),{localName:"Transaction_Factory"}),yL=Pb.makeMessageType("wallet.v1.Transaction.GrantRole",(function(){return[{no:1,name:"role",kind:"scalar",T:4},{no:2,name:"account",kind:"scalar",T:9}]}),{localName:"Transaction_GrantRole"}),vL=Pb.makeMessageType("wallet.v1.Transaction.RevokeRole",(function(){return[{no:1,name:"role",kind:"scalar",T:4},{no:2,name:"account",kind:"scalar",T:9}]}),{localName:"Transaction_RevokeRole"}),ZL=Pb.makeMessageType("wallet.v1.Transaction.RenounceRole",(function(){return[{no:1,name:"role",kind:"scalar",T:4},{no:2,name:"address",kind:"scalar",T:9}]}),{localName:"Transaction_RenounceRole"}),GL=Pb.makeMessageType("wallet.v1.Transaction.AddWorker",(function(){return[{no:1,name:"worker_address",kind:"scalar",T:9},{no:2,name:"entity_address",kind:"scalar",T:9},{no:3,name:"role",kind:"scalar",T:4},{no:4,name:"worker_id",kind:"scalar",T:4},{no:5,name:"metadata",kind:"message",T:Ay}]}),{localName:"Transaction_AddWorker"}),BL=Pb.makeMessageType("wallet.v1.Transaction.RemoveWorker",(function(){return[{no:1,name:"worker_address",kind:"scalar",T:9}]}),{localName:"Transaction_RemoveWorker"}),kL=Pb.makeMessageType("wallet.v1.Transaction.UpdateWorkerAddr",(function(){return[{no:1,name:"old_address",kind:"scalar",T:9},{no:2,name:"new_address",kind:"scalar",T:9}]}),{localName:"Transaction_UpdateWorkerAddr"}),SL=Pb.makeMessageType("wallet.v1.Transaction.AddEntity",(function(){return[{no:1,name:"entity_address",kind:"scalar",T:9},{no:2,name:"entity_type",kind:"enum",T:Pb.getEnumType(sy)},{no:3,name:"metadata",kind:"message",T:cy}]}),{localName:"Transaction_AddEntity"}),wL=Pb.makeMessageType("wallet.v1.Transaction.RemoveEntity",(function(){return[{no:1,name:"entity_address",kind:"scalar",T:9}]}),{localName:"Transaction_RemoveEntity"}),WL=Pb.makeMessageType("wallet.v1.Transaction.DeployMedicine",(function(){return[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"symbol",kind:"scalar",T:9},{no:3,name:"code",kind:"scalar",T:9},{no:4,name:"presentation",kind:"scalar",T:9},{no:5,name:"measure_unit",kind:"scalar",T:9}]}),{localName:"Transaction_DeployMedicine"}),RL=Pb.makeMessageType("wallet.v1.Transaction.SetEntityManagerAddress",(function(){return[{no:1,name:"address",kind:"scalar",T:9}]}),{localName:"Transaction_SetEntityManagerAddress"}),VL=Pb.makeMessageType("wallet.v1.Transaction.Transfer",(function(){return[{no:1,name:"recipient",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_Transfer"}),XL=Pb.makeMessageType("wallet.v1.Transaction.ApproveTransfer",(function(){return[{no:1,name:"worker",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_ApproveTransfer"}),JL=Pb.makeMessageType("wallet.v1.Transaction.RejectTransfer",(function(){return[{no:1,name:"worker",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_RejectTransfer"}),xL=Pb.makeMessageType("wallet.v1.Transaction.Mint",(function(){return[{no:1,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_Mint"}),YL=Pb.makeMessageType("wallet.v1.Transaction.ApproveMint",(function(){return[{no:1,name:"worker",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_ApproveMint"}),NL=Pb.makeMessageType("wallet.v1.Transaction.RejectMint",(function(){return[{no:1,name:"worker",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_RejectMint"}),HL=Pb.makeMessageType("wallet.v1.Transaction.Burn",(function(){return[{no:1,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_Burn"}),FL=Pb.makeMessageType("wallet.v1.Transaction.ApproveBurn",(function(){return[{no:1,name:"worker",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_ApproveBurn"}),KL=Pb.makeMessageType("wallet.v1.Transaction.RejectBurn",(function(){return[{no:1,name:"worker",kind:"scalar",T:9},{no:2,name:"amount",kind:"scalar",T:4}]}),{localName:"Transaction_RejectBurn"}),EL=Pb.makeMessageType("wallet.v1.Transaction.Panic",[],{localName:"Transaction_Panic"}),TL=Pb.makeMessageType("wallet.v1.Transaction.Happiness",[],{localName:"Transaction_Happiness"});function ML(e){return DK({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14.942 12.57l-4.942-8.235v-3.335h0.5c0.275 0 0.5-0.225 0.5-0.5s-0.225-0.5-0.5-0.5h-5c-0.275 0-0.5 0.225-0.5 0.5s0.225 0.5 0.5 0.5h0.5v3.335l-4.942 8.235c-1.132 1.886-0.258 3.43 1.942 3.43h10c2.2 0 3.074-1.543 1.942-3.43zM3.766 10l3.234-5.39v-3.61h2v3.61l3.234 5.39h-8.468z"}}]})(e)}var zL=n(5095),DL=n.n(zL),LL=0;function UL(e,t){"function"===typeof e?e(t):e&&"current"in e&&(e.current=t)}function jL(t,n){return e.useMemo((function(){return t||n?function(e){UL(t,e),UL(n,e)}:null}),[t,n])}var OL=function(e,t){var n=e.height,r=e.width,a=t.left,o=t.top,i=Math.ceil(a),g=Math.ceil(o);return{width:r,height:n,left:i,top:g,right:i+r,bottom:g+n}},QL=function(e){switch(e){case sz.TOP_LEFT:return sz.BOTTOM_LEFT;case sz.TOP:default:return sz.BOTTOM;case sz.TOP_RIGHT:return sz.BOTTOM_RIGHT;case sz.BOTTOM_LEFT:return sz.TOP_LEFT;case sz.BOTTOM:return sz.TOP;case sz.BOTTOM_RIGHT:return sz.TOP_RIGHT}},PL=function(e){switch(e){case sz.TOP_LEFT:case sz.TOP:case sz.TOP_RIGHT:return!0;default:return!1}},_L=function(e){switch(e){case sz.LEFT:case sz.RIGHT:return!0;default:return!1}},qL=function(e,t,n){return e.bottom<t.height-n},$L=function(e,t){return e.top>t},eU=function(e,t,n){return e.right<t.width-n},tU=function(e,t){return e.left>t};function nU(e){var t=e.dimensions,n=e.position,r=e.targetOffset,a=e.targetRect,o=e.viewport,i=e.viewportOffset,g=void 0===i?8:i,s=function(e){var t=e.dimensions,n=e.position,r=e.targetOffset,a=e.targetRect,o=e.viewport,i=e.viewportOffset,g=void 0===i?8:i,s=_L(n);if(s){var c=rU({position:sz.LEFT,dimensions:t,targetRect:a,targetOffset:r}),l=rU({position:sz.RIGHT,dimensions:t,targetRect:a,targetOffset:r}),u=tU(c,g),f=eU(l,o,g);if(n===sz.LEFT){if(u)return{position:n,rect:c};if(f)return{position:sz.RIGHT,rect:l}}if(n===sz.RIGHT){if(f)return{position:n,rect:l};if(u)return{position:sz.LEFT,rect:c}}return Math.abs(o.width-g-l.right)<Math.abs(c.left-g)?{position:sz.RIGHT,rect:l}:{position:sz.LEFT,rect:c}}var I,C,d=PL(n);d?(I=rU({position:n,dimensions:t,targetRect:a,targetOffset:r}),C=rU({position:QL(n),dimensions:t,targetRect:a,targetOffset:r})):(I=rU({position:QL(n),dimensions:t,targetRect:a,targetOffset:r}),C=rU({position:n,dimensions:t,targetRect:a,targetOffset:r}));var A=$L(I,g),h=qL(C,o,g);if(d){if(A)return{position:n,rect:I};if(h)return{position:QL(n),rect:C}}if(!d){if(h)return{position:n,rect:C};if(A)return{position:QL(n),rect:I}}var p=Math.abs(o.height-g-C.bottom),m=Math.abs(I.top-g);if(p<m)return{position:d?QL(n):n,rect:C};return{position:d?n:QL(n),rect:I}}({position:n,dimensions:t,targetRect:a,targetOffset:r,viewport:o,viewportOffset:g}),c=s.position,l=s.rect;if(l.left<g&&(l.right+=Math.ceil(Math.abs(l.left-g)),l.left=Math.ceil(g)),l.right>o.width-g){var u=Math.ceil(l.right-(o.width-g));l.left-=u,l.right-=u}if(l.top<g&&(l.top+=Math.ceil(Math.abs(l.top-g)),l.bottom=Math.ceil(g)),l.bottom>o.height-g){var f=Math.ceil(l.bottom-(o.height-g));l.top-=f,l.bottom-=f}var I=function(e){var t=e.dimensions,n=e.position,r=e.rect,a=e.targetCenter,o=Math.round(a-r.top);if(n===sz.LEFT)return"".concat(t.width,"px ").concat(o,"px");if(n===sz.RIGHT)return"0px ".concat(o,"px");var i=Math.round(a-r.left);return PL(n)?"".concat(i,"px ").concat(t.height,"px "):"".concat(i,"px 0px ")}({rect:l,position:c,dimensions:t,targetCenter:_L(n)?a.top+a.height/2:a.left+a.width/2});return{rect:l,position:c,transformOrigin:I}}function rU(e){var t=e.dimensions,n=e.position,r=e.targetOffset,a=e.targetRect,o=a.left+a.width/2-t.width/2,i=a.top-t.height-r,g=a.bottom+r,s=a.right-t.width,c=a.top+a.height/2-t.height/2;switch(n){case sz.LEFT:return OL(t,{left:a.left-t.width-r,top:c});case sz.RIGHT:return OL(t,{left:a.right+r,top:c});case sz.TOP:return OL(t,{left:o,top:i});case sz.TOP_LEFT:return OL(t,{left:a.left,top:i});case sz.TOP_RIGHT:return OL(t,{left:s,top:i});default:case sz.BOTTOM:return OL(t,{left:o,top:g});case sz.BOTTOM_LEFT:return OL(t,{left:a.left,top:g});case sz.BOTTOM_RIGHT:return OL(t,{left:s,top:g})}}var aU="cubic-bezier(0.175, 0.885, 0.320, 1.175)",oU=function(e){var t=e.animationDuration,n=e.initialScale;return{position:"fixed",transitionTimingFunction:aU,transitionDuration:"".concat(t,"ms"),transitionProperty:"opacity, transform",transform:"scale(".concat(n,") translateY(-1px)"),selectors:{'&[data-state="entering"],&[data-state="entered"]':{opacity:1,visibility:"visible",transform:"scale(1)"},'&[data-state="exiting"],&[data-state="exited"]':{opacity:0,transform:"scale(1)"}}}},iU=function(){},gU={left:0,top:0,height:0,width:0,transformOrigin:null},sU=(0,e.memo)((function(t){var n=t.target,r=t.isShown,a=t.children,o=t.initialScale,i=void 0===o?.9:o,g=t.animationDuration,s=void 0===g?300:g,c=t.position,l=void 0===c?sz.BOTTOM:c,u=t.bodyOffset,f=void 0===u?6:u,I=t.targetOffset,C=void 0===I?6:I,d=t.onOpenComplete,A=void 0===d?iU:d,h=t.onCloseComplete,p=void 0===h?iU:h,m=Ge((0,e.useState)(gU),2),b=m[0],y=m[1],v=function(t,n){var r=e.useRef(n);return e.useEffect((function(){r.current=t}),[t]),r.current}(b,gU),Z=(0,e.useRef)(),G=(0,e.useRef)(),B=(0,e.useRef)(),k=(0,e.useRef)(),S=jL(k),w=jL(B),W=(0,e.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r&&k.current&&B.current){var n,a,o=k.current.getBoundingClientRect(),i="entered"===B.current.getAttribute("data-state"),g=document.documentElement.clientHeight,s=document.documentElement.clientWidth;if(i){var c=B.current.getBoundingClientRect();n=Math.round(c.height),a=Math.round(c.width)}else n=Math.max(B.current.offsetHeight,e),a=Math.max(B.current.offsetWidth,t);var u=nU({position:l,targetRect:o,targetOffset:C,dimensions:{height:n,width:a},viewport:{width:s,height:g},viewportOffset:f}),I=u.rect,d=u.transformOrigin;y({left:I.left,top:I.top,height:n,width:a,transformOrigin:d})}}),[f,r,l,C]);(0,e.useEffect)((function(){return"entered"===G.current&&(Z.current=requestAnimationFrame((function(){W(v.height,v.width)}))),function(){Z.current&&cancelAnimationFrame(Z.current)}}),[v.height,v.width,W,a]);var R=function(){G.current="entering",W()},V=function(){G.current="entered",W()},X=function(){G.current="exited",y(gU),p()};return(0,e.useEffect)((function(){var e=function(){return W()};return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}})),e.createElement(hz,{value:Ox},(function(t){return e.createElement(e.Fragment,null,n({getRef:S,isShown:r}),e.createElement(iY,{nodeRef:B,appear:!0,in:r,timeout:s,onEnter:V,onEntering:R,onEntered:A,onExited:X,unmountOnExit:!0},(function(n){return e.createElement(Cz,null,a({top:b.top,left:b.left,state:n,zIndex:t,css:oU({initialScale:i,animationDuration:s}),style:{transformOrigin:b.transformOrigin,left:b.left,top:b.top,zIndex:t},getRef:w,animationDuration:s}))})))}))}));sU.propTypes={position:Dx().oneOf([sz.TOP,sz.TOP_LEFT,sz.TOP_RIGHT,sz.BOTTOM,sz.BOTTOM_LEFT,sz.BOTTOM_RIGHT,sz.LEFT,sz.RIGHT]),isShown:Dx().bool,children:Dx().func.isRequired,bodyOffset:Dx().number,targetOffset:Dx().number,target:Dx().func.isRequired,initialScale:Dx().number,animationDuration:Dx().number,onCloseComplete:Dx().func,onOpenComplete:Dx().func};var cU=sU,lU=["appearance","children"],uU=["color"],fU={},IU={},CU=(0,e.memo)((0,e.forwardRef)((function(t,n){var r,a=t.appearance,o=t.children,i=Mx(t,lU),g=NN("Tooltip",{appearance:a},fU,IU),s=g.color,c=Mx(g,uU);return r="string"===typeof o?e.createElement(zH,{color:s,size:400},o):o,e.createElement(RH,Ex({ref:n},c,i),r)})));CU.propTypes={children:Dx().node,appearance:Dx().oneOf(["default","card"]).isRequired};var dU=CU,AU=["getTargetRef","isShown"];function hU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hU(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mU={},bU=(0,e.memo)((function(t){var n=t.appearance,r=void 0===n?"default":n,a=t.position,o=void 0===a?sz.BOTTOM:a,i=t.content,g=t.hideDelay,s=void 0===g?120:g,c=t.showDelay,l=void 0===c?0:c,u=t.isShown,f=t.children,I=t.statelessProps,C=void 0===I?mU:I,d=function(t,n){return Ge((0,e.useState)((function(){return n||[t,++LL].filter(Boolean).join("-")})),1)[0]}("evergreen-tooltip",t.id),A=Ge((0,e.useState)(u||!1),2),h=A[0],p=A[1],m=Ge((0,e.useState)(!1),2),b=m[0],y=m[1],v=(0,e.useRef)(void 0),Z=DL()((function(){y(!1)}),s),G=DL()((function(){p(!1),clearTimeout(v.current)}),s);(0,e.useEffect)((function(){return function(){clearTimeout(v.current)}}),[]);var B=function(){h||(l?(clearTimeout(v.current),v.current=setTimeout((function(){p(!0)}),l)):p(!0))},k=function(){y(!0)},S=(u||h||b)&&!(t.popoverProps&&t.popoverProps.isShown);return!1===u&&(S=!1),e.createElement(cU,{target:function(n){var r=n.getRef,a={onMouseEnter:B,onMouseLeave:G,"aria-describedby":d};if(t.popoverProps){var o=t.popoverProps,i=o.getTargetRef,g=(o.isShown,Mx(o,AU));return e.cloneElement(f,pU(pU(pU({},g),a),{},{ref:function(e){r(e),i(e)}}))}return e.cloneElement(f,pU(pU({},a),{},{ref:function(e){r(e)}}))},isShown:S,position:o,animationDuration:160},(function(t){var n=t.css,a=t.getRef,o=t.state,g=t.style;return e.createElement(dU,Ex({id:d,appearance:r,ref:a,"data-state":o,style:g,onMouseEnter:k,onMouseLeave:Z},C,n,{className:C.className}),i)}))}));bU.propTypes={appearance:Dx().oneOf(["default","card"]),id:Dx().string,position:Dx().oneOf([sz.TOP,sz.TOP_LEFT,sz.TOP_RIGHT,sz.BOTTOM,sz.BOTTOM_LEFT,sz.BOTTOM_RIGHT,sz.LEFT,sz.RIGHT]),content:Dx().node,hideDelay:Dx().number,showDelay:Dx().number,isShown:Dx().bool,children:Dx().node,statelessProps:Dx().object};var yU=bU;function vU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!e)return"";if(e.length<2*t+2)throw new Error("Address is too short to be shortened.");var n=e.slice(0,t+2),r=e.slice(-t);return"".concat(n,"...").concat(r)}function ZU(e){return e?e.replace(/\s+/g,"_").replace(/-/g,"_").toLowerCase():""}function GU(t){var n=t.children,r=t.characters,a=ke().t,o=Ge((0,e.useState)(!1),2),i=o[0],g=o[1],s=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(n);case 2:g(!0);case 3:case"end":return e.stop()}}),e)}))),[n])).onSubmit;return(0,YF.jsx)(yU,{content:a(i?"cards.contact.copied":"cards.contact.copy"),children:(0,YF.jsx)(HH,{size:500,fontWeight:400,opacity:.4,onClick:s,cursor:"pointer",children:vU(n,r)})})}var BU=(0,e.createContext)([an,function(e){}]),kU=function(){return(0,e.useContext)(BU)};function SU(t){var n=t.children,r=Ge((0,e.useState)(an),2),a=r[0],o=r[1];return(0,YF.jsx)(BU.Provider,{value:[a,o],children:n})}function wU(){var t=ke().t,n=eK((0,YF.jsx)(WU,{})),r=CE(),a=r.value,o=r.setValue,i=(0,e.useCallback)((function(e){return function(){o((function(t){return t||(t=new SL({})),t.entityType=e,t.clone()}))}}),[o]),g=(0,e.useCallback)((function(e){return(null===a||void 0===a?void 0:a.entityType)===e}),[null===a||void 0===a?void 0:a.entityType]),s=(0,e.useCallback)((function(e){var t=e.entityType,n=e.children;return(0,YF.jsx)(QF,{paddingY:bK(2),background:g(t)?"colors.blue50":"colors.gray75",cursor:"pointer",onClick:i(t),children:n})}),[i,g]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.entity.select")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsxs)(FK.X2,{children:[(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(s,{entityType:sy.HOSPITAL,children:(0,YF.jsx)(gz,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(UK,{size:32,opacity:.6}),(0,YF.jsx)(_F.Divider,{children:bK(2)}),(0,YF.jsx)(HH,{size:100,children:t("entities.4")})]})})})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(s,{entityType:sy.PHARMACY,children:(0,YF.jsx)(gz,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(QK,{size:32,opacity:.6}),(0,YF.jsx)(_F.Divider,{children:bK(2)}),(0,YF.jsx)(HH,{size:100,children:t("entities.3")})]})})})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(s,{entityType:sy.LABORATORY,children:(0,YF.jsx)(gz,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(ML,{size:32,opacity:.6}),(0,YF.jsx)(_F.Divider,{children:bK(2)}),(0,YF.jsx)(HH,{size:100,children:t("entities.1")})]})})})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(s,{entityType:sy.TRANSPORT,children:(0,YF.jsx)(gz,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(PK,{size:32,opacity:.6}),(0,YF.jsx)(_F.Divider,{children:bK(2)}),(0,YF.jsx)(HH,{size:100,children:t("entities.5")})]})})})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(s,{entityType:sy.WAREHOUSE,children:(0,YF.jsx)(gz,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(_K,{size:32,opacity:.6}),(0,YF.jsx)(_F.Divider,{children:bK(2)}),(0,YF.jsx)(HH,{size:100,children:t("entities.2")})]})})})})]})}),(0,YF.jsx)(cH,{appearance:"action",onClick:n,disabled:!(null!==a&&void 0!==a&&a.entityType),children:t("cards.entity.continue")})]})}function WU(){var t=ke().t,n=eK((0,YF.jsx)(RU,{})),r=CE(),a=r.value,o=r.setValue,i=Ge((0,e.useState)(a.entityAddress),2),g=i[0],s=i[1],c=(0,e.useCallback)((function(){o((function(e){return e.entityAddress=g,null===e||void 0===e?void 0:e.clone()})),n()}),[g,n,o]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.entity.address")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(NK,{value:g,onChange:function(e){return s(e.target.value)}}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",onClick:c,disabled:!vE(g),children:t("cards.entity.continue")})]})}function RU(){var t=ke().t,n=$F().reset,r=KF().wallet,a=Ge(kU(),1)[0],o=CE(),i=o.value,g=o.clear,s=Ge((0,e.useState)(),2),c=s[0],l=s[1],u=(0,e.useMemo)((function(){switch(i.entityType){case sy.LABORATORY:case sy.WAREHOUSE:case sy.PHARMACY:case sy.HOSPITAL:case sy.TRANSPORT:return!!c;case sy.UNSPECIFIED:default:return!1}}),[c,i]),f=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=i.entityType,e.next=e.t0===sy.LABORATORY?3:e.t0===sy.WAREHOUSE?5:e.t0===sy.PHARMACY?7:e.t0===sy.HOSPITAL?9:e.t0===sy.TRANSPORT?11:13;break;case 3:return i.metadata=new cy({data:{case:"laboratory",value:new ly({name:c})}}),e.abrupt("break",13);case 5:return i.metadata=new cy({data:{case:"warehouse",value:new uy({name:c})}}),e.abrupt("break",13);case 7:return i.metadata=new cy({data:{case:"pharmacy",value:new fy({name:c})}}),e.abrupt("break",13);case 9:return i.metadata=new cy({data:{case:"hospital",value:new Iy({name:c})}}),e.abrupt("break",13);case 11:return i.metadata=new cy({data:{case:"transport",value:new Cy({name:c})}}),e.abrupt("break",13);case 13:return e.next=15,null===r||void 0===r?void 0:r.send(new mL({contract:a.Manager,data:{case:"addEntity",value:i}}));case 15:g(),n();case 17:case"end":return e.stop()}}),e)}))),[a.Manager,g,c,n,i,r])),I=f.onSubmit,C=f.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.entity.metadata")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(NK,{value:c,onChange:function(e){return l(e.target.value)},placeholder:t("cards.entity.name")}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",onClick:I,isLoading:C,disabled:!u,children:t("cards.entity.create")})]})}function VU(t){var n,r,a,o,i=t.entity,g=ke().t,s=$F().reset,c=lO(),l=c.wallet,u=c.save,f=(0,e.useMemo)((function(){return l.entities.includes(i.address)}),[i.address,l.entities]),I=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.entities.push(i.address),e.next=3,u(l);case 3:s();case 4:case"end":return e.stop()}}),e)}))),[i.address,s,u,l])),C=I.onSubmit,d=I.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsxs)(_F.Middle,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(RH,{width:bK(30),height:bK(30),borderRadius:bK(2),background:"colors.gray100",backgroundImage:"url(/assets/entities/".concat(ZU(null===(n=i.metadata)||void 0===n||null===(r=n.data.value)||void 0===r?void 0:r.name),")"),backgroundSize:"cover"})}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:400,opacity:.7,children:null===(a=i.metadata)||void 0===a||null===(o=a.data.value)||void 0===o?void 0:o.name})}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:100,children:g("entities."+i.type)})})]}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(0,YF.jsxs)(_F.Middle,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(RH,{width:bK(75),children:(0,YF.jsx)(nE,{content:py(new TF({data:{case:"entity",value:i.address}}).toBinary())})})}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(GU,{characters:8,children:i.address})})]}),!f&&(0,YF.jsx)(cH,{appearance:"action",onClick:C,isLoading:d,children:g("cards.entity.add")})]})}function XU(){var t=ke().t,n=Ge((0,e.useState)(sy.UNSPECIFIED),2),r=n[0],a=n[1],o=Ge((0,e.useState)(),2),i=o[0],g=o[1],s=KF().manager,c=lO(),l=c.wallet,u=c.save,f=$F().push,I=Ge(kU(),1)[0],C=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.entities=l.entities.filter((function(e){return e!==i})),e.next=3,u(l);case 3:case"end":return e.stop()}}),e)}))),[i,u,l])),d=C.onSubmit,A=C.loading,h=JF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(l.entities.map((function(e){return s.getEntityData(I.Manager,e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[I.Manager,s,l.entities])),p=h.data,m=(h.loading,(0,e.useMemo)((function(){return p?p.filter((function(e){return r===sy.UNSPECIFIED||e.type===r})):[]}),[p,r])),b=(0,e.useMemo)((function(){return yD(m,(function(e){var t,n;return["".concat(null===(t=e.metadata)||void 0===t||null===(n=t.data.value)||void 0===n?void 0:n.name)]}))}),[m]);return(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(pL,{children:function(e){return[sy.UNSPECIFIED,sy.HOSPITAL,sy.LABORATORY,sy.PHARMACY,sy.TRANSPORT,sy.WAREHOUSE].map((function(n){return(0,YF.jsx)(pL.Button,{marginRight:bK(2),appearance:"minimal",isActive:r===n,onPosition:e(n.toString(),"center"),onClick:function(){a(n)},children:t("entities."+n.toString())},n.toString())}))}}),(0,YF.jsx)(vD,{groups:b,children:function(e){return(0,YF.jsx)(FK.JX,{xs:12,sm:6,children:(0,YF.jsx)(RH,{marginRight:bK(12),marginBottom:bK(6),onMouseEnter:function(){return g(e.address)},onMouseLeave:function(){return g(void 0)},cursor:"pointer",onClick:function(){return f((0,YF.jsx)(VU,{entity:e}))},children:(0,YF.jsx)(JU,{entity:e,children:e.address===i&&(0,YF.jsx)(CH,{icon:(0,YF.jsx)(bD,{}),appearance:"minimal",borderRadius:"50%",isLoading:A,onClick:function(e){e.stopPropagation(),d()}})})})})}})]})}function JU(e){var t,n,r,a,o=e.entity,i=e.children,g=ke().t;return(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(RH,{width:bK(18),height:bK(18),borderRadius:bK(2),background:"colors.gray100",backgroundImage:"url(/assets/entities/".concat(ZU(null===(t=o.metadata)||void 0===t||null===(n=t.data.value)||void 0===n?void 0:n.name),")"),backgroundSize:"cover"})}),(0,YF.jsxs)(FK.JX,{xs:!0,children:[(0,YF.jsx)(HH,{size:700,fontWeight:900,opacity:.8,children:null===(r=o.metadata)||void 0===r||null===(a=r.data.value)||void 0===a?void 0:a.name}),(0,YF.jsx)(HH,{size:100,children:g("entities.".concat(o.type.toString()))})]}),(0,YF.jsx)(FK.JX,{children:i})]})}function xU(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3,6 L21,6 L3,6 Z M10,2 L10,4 M14,2 L14,4 M16,12 C18.3736719,13.1826446 20,15.6506255 20,19 L20,23 L4,23 L4,19 C4,15.6457258 5.6310898,13.1754259 8,12 M12,16.5 L12,23 M12,13 C15.3137085,13 18,10.3137085 18,7 C18,3.6862915 15.3137085,1 12,1 C8.6862915,1 6,3.6862915 6,7 C6,10.3137085 8.6862915,13 12,13 Z M8,12 C8,14.209139 9.790861,16 12,16 L12,16 C14.209139,16 16,14.209139 16,12"}}]})(e)}function YU(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 2V22H3V2H7ZM9 2H19.0049C20.1068 2 21 2.89821 21 3.9908V20.0092C21 21.1087 20.1074 22 19.0049 22H9V2ZM22 6H24V10H22V6ZM22 12H24V16H22V12ZM15 12C16.1046 12 17 11.1046 17 10C17 8.89543 16.1046 8 15 8C13.8954 8 13 8.89543 13 10C13 11.1046 13.8954 12 15 12ZM12 16H18C18 14.3431 16.6569 13 15 13C13.3431 13 12 14.3431 12 16Z"}}]})(e)}function NU(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.53451 3H20.9993C21.5516 3 21.9993 3.44772 21.9993 4V20C21.9993 20.5523 21.5516 21 20.9993 21H6.53451C6.20015 21 5.88792 20.8329 5.70246 20.5547L0.369122 12.5547C0.145189 12.2188 0.145189 11.7812 0.369122 11.4453L5.70246 3.4453C5.88792 3.1671 6.20015 3 6.53451 3ZM12.9993 10.5858L10.1709 7.75736L8.75668 9.17157L11.5851 12L8.75668 14.8284L10.1709 16.2426L12.9993 13.4142L15.8277 16.2426L17.242 14.8284L14.4135 12L17.242 9.17157L15.8277 7.75736L12.9993 10.5858Z"}}]})(e)}function HU(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 14V16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM21 17H22V22H14V17H15V16C15 14.3431 16.3431 13 18 13C19.6569 13 21 14.3431 21 16V17ZM19 17V16C19 15.4477 18.5523 15 18 15C17.4477 15 17 15.4477 17 16V17H19Z"}}]})(e)}function FU(e){return DK({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#8BC34A",points:"24,3 28.7,6.6 34.5,5.8 36.7,11.3 42.2,13.5 41.4,19.3 45,24 41.4,28.7 42.2,34.5 36.7,36.7 34.5,42.2 28.7,41.4 24,45 19.3,41.4 13.5,42.2 11.3,36.7 5.8,34.5 6.6,28.7 3,24 6.6,19.3 5.8,13.5 11.3,11.3 13.5,5.8 19.3,6.6"}},{tag:"polygon",attr:{fill:"#CCFF90",points:"34.6,14.6 21,28.2 15.4,22.6 12.6,25.4 21,33.8 37.4,17.4"}}]})(e)}function KU(e){return DK({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Z"}},{tag:"path",attr:{d:"M12.096 6.223A4.92 4.92 0 0 0 13 5.698V7c0 .289-.213.654-.753 1.007a4.493 4.493 0 0 1 1.753.25V4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.525 4.525 0 0 1-.813-.927C8.5 14.992 8.252 15 8 15c-1.464 0-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13h.027a4.552 4.552 0 0 1 0-1H8c-1.464 0-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10c.262 0 .52-.008.774-.024a4.525 4.525 0 0 1 1.102-1.132C9.298 8.944 8.666 9 8 9c-1.464 0-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777ZM3 4c0-.374.356-.875 1.318-1.313C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4Z"}}]})(e)}function EU(e){return DK({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7ZM11 12h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1ZM8 1c-1.573 0-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4s.875 1.755 1.904 2.223C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777C13.125 5.755 14 5.007 14 4s-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1Z"}},{tag:"path",attr:{d:"M2 7v-.839c.457.432 1.004.751 1.49.972C4.722 7.693 6.318 8 8 8s3.278-.307 4.51-.867c.486-.22 1.033-.54 1.49-.972V7c0 .424-.155.802-.411 1.133a4.51 4.51 0 0 0-4.815 1.843A12.31 12.31 0 0 1 8 10c-1.573 0-3.022-.289-4.096-.777C2.875 8.755 2 8.007 2 7Zm6.257 3.998L8 11c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13h.027a4.552 4.552 0 0 1 .23-2.002Zm-.002 3L8 14c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.507 4.507 0 0 1-1.3-1.905Z"}}]})(e)}function TU(e,t){if(void 0===e)return!1;var n,r=Xe(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(e.includes(a))return!0}}catch(xQ){r.e(xQ)}finally{r.f()}return!1}var MU,zU,DU,LU,UU,jU=(0,e.createContext)({medicines:new Array,doRefetch:function(){}}),OU=function(){return(0,e.useContext)(jU)};function QU(t){var n=t.children,r=KF().factory,a=Ge(kU(),1)[0],o=JF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.tokens(a.Factory));case 1:case"end":return e.stop()}}),e)}))),[a.Factory,r])),i=o.data,g=o.loading,s=o.doRefetch;return g?(0,YF.jsx)("p",{children:"loading medicines..."}):(0,YF.jsx)(jU.Provider,{value:{medicines:null!==i&&void 0!==i?i:[],doRefetch:s},children:n})}function PU(e){return DK({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 7v-1a2 2 0 0 1 2 -2h2"}},{tag:"path",attr:{d:"M4 17v1a2 2 0 0 0 2 2h2"}},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v1"}},{tag:"path",attr:{d:"M16 20h2a2 2 0 0 0 2 -2v-1"}},{tag:"path",attr:{d:"M5 12l14 0"}}]})(e)}var _U=oz.div(MU||(MU=ZE(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  width: 300px;\n  height: 300px;\n  border-radius: 30px;\n  box-shadow: 0 0 0 99999px rgba(21, 20, 31, 0.5);\n"]))),qU=oz.div(zU||(zU=ZE(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 30px;\n  height: 30px;\n  border-top-left-radius: 30px;\n  border-top: 2px solid white;\n  border-left: 2px solid white;\n"]))),$U=oz.div(DU||(DU=ZE(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 30px;\n  height: 30px;\n  border-top-right-radius: 30px;\n  border-top: 2px solid white;\n  border-right: 2px solid white;\n"]))),ej=oz.div(LU||(LU=ZE(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 30px;\n  height: 30px;\n  border-bottom-left-radius: 30px;\n  border-bottom: 2px solid white;\n  border-left: 2px solid white;\n"]))),tj=oz.div(UU||(UU=ZE(["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 30px;\n  height: 30px;\n  border-bottom-right-radius: 30px;\n  border-bottom: 2px solid white;\n  border-right: 2px solid white;\n"]))),nj=function(){return(0,YF.jsxs)(_U,{children:[(0,YF.jsx)($U,{}),(0,YF.jsx)(qU,{}),(0,YF.jsx)(tj,{}),(0,YF.jsx)(ej,{})]})},rj=n(9008),aj=n.n(rj);function oj(t){var n=t.onResult,r=Ge((0,e.useState)(),2),a=r[0],o=r[1];return(0,e.useEffect)((function(){a&&n(a)}),[n,a]),(0,YF.jsxs)(RH,{minHeight:HK(50),height:"100%",children:[(0,YF.jsx)(aj(),{style:{height:"100%"},facingMode:"rear",onScan:function(e){e&&o(e.text)}}),(0,YF.jsx)(nj,{})]})}var ij=["onResult"];function gj(e){var t=e.onResult,n=Mx(e,ij),r=eK((0,YF.jsx)(oj,{onResult:t}));return(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(NK,v({},n))}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(RH,{position:"relative",width:52,height:52,borderRadius:bK(4),marginRight:bK(2),cursor:"pointer",onClick:r,border:"1px solid #d8dae5",children:(0,YF.jsx)(gz,{children:(0,YF.jsx)(RH,{marginTop:bK(1),children:(0,YF.jsx)(PU,{size:25,opacity:.5})})})})})]})}function sj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cj=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(uK,Ex({is:"strong",fontWeight:600},t,{ref:n}))})));cj.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sj(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},uK.propTypes);var lj=cj,uj=["appearance","className","color","isInteractive"];function fj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ij(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fj(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cj={},dj={display:"inline-block",boxSizing:"border-box",verticalAlign:"middle"},Aj={selectors:{"&:hover":{opacity:.8}},cursor:"pointer"},hj=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.appearance,a=void 0===r?"subtle":r,o=t.className,i=t.color,g=void 0===i?"neutral":i,s=t.isInteractive,c=void 0!==s&&s,l=Mx(t,uj),u=NN("Badge",{appearance:a,color:g},Cj,dj);return e.createElement(lj,Ex({ref:n,size:300,className:o},c?Aj:{},u,l))})));hj.propTypes=Ij(Ij({},lj.propTypes),{},{color:Dx().string,isInteractive:Dx().bool});var pj=hj,mj=["M10.99 6.99h-2v-2c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1zm-3-7c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.68 6-6 6z"],bj=["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm5-9h-4V5c0-.55-.45-1-1-1s-1 .45-1 1v4H5c-.55 0-1 .45-1 1s.45 1 1 1h4v4c0 .55.45 1 1 1s1-.45 1-1v-4h4c.55 0 1-.45 1-1s-.45-1-1-1z"],yj=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:mj,svgPaths20:bj,ref:n,name:"add"},t))}))),vj=["M10.99 6.99h-6c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1zm-3-7c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.68 6-6 6z"],Zj=["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm5-9H5c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1z"],Gj=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:vj,svgPaths20:Zj,ref:n,name:"remove"},t))})));function Bj(e){return DK({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"}}]})(e)}function kj(e){return DK({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"}}]})(e)}var Sj=["children"];function wj(){var e=hE(),t=e.value,n=e.setValue,r=dD((0,YF.jsx)(Wj,{}));return(0,YF.jsx)(RH,{background:"colors.gray90",paddingX:bK(12),paddingY:bK(8),borderRadius:bK(6),children:(0,YF.jsxs)(FK.X2,{middle:"xs",between:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(CH,{size:"large",borderRadius:"50%",appearance:"minimal",background:"white",icon:(0,YF.jsx)(Bj,{}),onClick:function(){return n((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(100);return!e||e-t<0?BigInt(0):e-t}(e)}))},disabled:!t})}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.8,cursor:"pointer",onClick:r,children:(null!==t&&void 0!==t?t:BigInt(0)).toLocaleString()})}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(CH,{size:"large",borderRadius:"50%",appearance:"minimal",background:"white",icon:(0,YF.jsx)(kj,{}),onClick:function(){return n((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(100);return e?e+t:t}(e)}))}})})]})})}function Wj(){var t=ke().t,n=$F().pop,r=hE(),a=r.value,o=r.setValue,i=Ge((0,e.useState)((null!==a&&void 0!==a?a:BigInt(0)).toString()),2),g=i[0],s=i[1],c=(0,e.useCallback)((function(e){return function(){return s((function(t){return t+e}))}}),[]),l=(0,e.useCallback)((function(){return s((function(e){return 1===e.length?"0":e.slice(0,-1)}))}),[]),u=(0,e.useCallback)((function(){o(BigInt(g)),n()}),[g,n,o]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(_F.Divider,{children:bK(6)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.8,children:BigInt(g).toLocaleString()})})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsxs)(FK.X2,{children:[(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("1"),children:"1"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("2"),children:"2"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("3"),children:"3"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("4"),children:"4"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("5"),children:"5"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("6"),children:"6"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("7"),children:"7"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("8"),children:"8"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("9"),children:"9"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{children:"."})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:c("0"),children:"0"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(Rj,{onClick:l,children:(0,YF.jsx)(NU,{})})})]}),(0,YF.jsx)(cH,{appearance:"action",onClick:u,children:t("cards.medicine.continue")})]})}function Rj(e){var t=e.children,n=Mx(e,Sj);return(0,YF.jsx)(RH,v(v({height:bK(20),position:"relative",cursor:"pointer"},n),{},{children:(0,YF.jsx)(gz,{children:(0,YF.jsx)(HH,{size:800,opacity:.8,children:t})})}))}function Vj(){var t=ke().t,n=KF().wallet,r=$F().reset,a=Ge(kU(),1)[0],o=OU().doRefetch,i=Ge((0,e.useState)(),2),g=i[0],s=i[1],c=Ge((0,e.useState)(),2),l=c[0],u=c[1],f=Ge((0,e.useState)(),2),I=f[0],C=f[1],d=Ge((0,e.useState)(),2),A=d[0],h=d[1],p=Ge((0,e.useState)(),2),m=p[0],b=p[1],y=(0,e.useMemo)((function(){return!!g&&!!l&&!!I&&!!A&&!!m}),[g,A,l,m,I]),v=xF((0,e.useCallback)(hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n?void 0:n.send(new mL({data:{case:"deployMedicine",value:{code:g,name:l,symbol:I,measureUnit:A,presentation:m}}}));case 2:return t=e.sent,e.next=5,null===n||void 0===n?void 0:n.send(new mL({contract:a.Factory,data:{case:"factory",value:{address:t}}}));case 5:o(),r();case 7:case"end":return e.stop()}}),e)}))),[a.Factory,g,o,A,l,m,r,I,n])),Z=v.onSubmit,G=v.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.medicine.deploy-header")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(NK,{placeholder:t("cards.medicine.code"),value:g,onChange:function(e){return s(e.target.value)}}),(0,YF.jsx)(_F.Divider,{children:bK(6)}),(0,YF.jsx)(NK,{placeholder:t("cards.medicine.name"),value:l,onChange:function(e){return u(e.target.value)}}),(0,YF.jsx)(NK,{placeholder:t("cards.medicine.symbol"),value:I,onChange:function(e){return C(e.target.value)}}),(0,YF.jsx)(_F.Divider,{children:bK(6)}),(0,YF.jsx)(NK,{placeholder:t("cards.medicine.measure-unit"),value:A,onChange:function(e){return h(e.target.value)}}),(0,YF.jsx)(NK,{placeholder:t("cards.medicine.presentation"),value:m,onChange:function(e){return b(e.target.value)}}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",onClick:Z,isLoading:G,disabled:!y,children:t("cards.medicine.deploy")})]})}function Xj(t){var n,r,a,o=t.address,i=ke().t,g=lO().wallet,s=KF(),c=s.medicine,l=s.wallet,u=s.manager,f=Ge(kU(),1)[0],I=dD((0,YF.jsx)(Yj,{contract:o})),C=dD((0,YF.jsx)(Jj,{contract:o})),d=dD((0,YF.jsx)(xj,{contract:o})),A=JF((0,e.useCallback)(hn(dn().mark((function e(){var t,n,r,a,i,s,l,I;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([c.getMedicineInfo(o),u.getEntity(f.Manager,g.address)]);case 2:return t=e.sent,n=Ge(t,2),r=n[0],a=n[1],e.next=8,Promise.all([c.balanceOf(o,a),u.getEntityData(f.Manager,a)]);case 8:return i=e.sent,s=Ge(i,2),l=s[0],I=s[1],e.abrupt("return",{medicine:r,balance:l,canIssue:TU([I.type],[sy.LABORATORY]),canPause:g.address===r.owner});case 13:case"end":return e.stop()}}),e)}))),[o,f.Manager,u,c,g.address])),h=A.data,p=(A.loading,A.doRefetch),m=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===l||void 0===l?void 0:l.send(new mL({contract:o,data:{case:"panic",value:{}}}));case 2:p();case 3:case"end":return e.stop()}}),e)}))),[o,p,l])),b=m.onSubmit,y=m.loading,v=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===l||void 0===l?void 0:l.send(new mL({contract:o,data:{case:"happiness",value:{}}}));case 2:p();case 3:case"end":return e.stop()}}),e)}))),[o,p,l])),Z=v.onSubmit,G=v.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsxs)(_F.Middle,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(RH,{width:bK(30),height:bK(30),borderRadius:bK(2),background:"colors.gray100",backgroundImage:"url(/assets/medicines/".concat(ZU(null===h||void 0===h||null===(n=h.medicine.info)||void 0===n?void 0:n.name),")"),backgroundSize:"cover"})}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:400,opacity:.7,children:null===h||void 0===h||null===(r=h.medicine.info)||void 0===r?void 0:r.name})}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:100,children:null===h||void 0===h||null===(a=h.medicine.info)||void 0===a?void 0:a.code})}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsxs)(RH,{paddingY:bK(6),borderRadius:bK(4),background:"colors.gray90",children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:100,children:i("cards.medicine.balance")})}),(0,YF.jsx)(_F.Divider,{children:bK(1)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.8,children:null===h||void 0===h?void 0:h.balance.toLocaleString()})})]})]}),(0,YF.jsx)(cH,{appearance:"action",disabled:!(null!==h&&void 0!==h&&h.balance)||h.medicine.panic,onClick:I,children:i("cards.medicine.transfer")}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(0,YF.jsxs)(FK.X2,{children:[(null===h||void 0===h?void 0:h.canIssue)&&(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(cH,{appearance:"action-neutral",iconAfter:(0,YF.jsx)(yj,{}),onClick:C,disabled:h.medicine.panic,children:i("cards.medicine.mint")})}),(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(cH,{appearance:"action-neutral",disabled:!(null!==h&&void 0!==h&&h.balance)||h.medicine.panic,iconAfter:(0,YF.jsx)(Gj,{}),onClick:d,children:i("cards.medicine.burn")})})]}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(null===h||void 0===h?void 0:h.canPause)&&(null===h||void 0===h?void 0:h.medicine.panic)&&(0,YF.jsx)(cH,{appearance:"action-neutral",onClick:Z,isLoading:G,children:i("cards.medicine.unpause")}),(null===h||void 0===h?void 0:h.canPause)&&!(null!==h&&void 0!==h&&h.medicine.panic)&&(0,YF.jsx)(cH,{appearance:"action-danger",onClick:b,isLoading:y,children:i("cards.medicine.pause")})]})}function Jj(t){var n=t.contract,r=ke().t,a=hE(),o=a.value,i=a.clear,g=$F().reset,s=KF().wallet,c=(0,e.useMemo)((function(){return o&&o>0}),[o]),l=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===s||void 0===s?void 0:s.send(new mL({contract:n,data:{case:"mint",value:{amount:o}}}));case 2:i(),g();case 4:case"end":return e.stop()}}),e)}))),[n,i,g,o,s])),u=l.onSubmit,f=l.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:r("cards.medicine.mint-header")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(wj,{})}),(0,YF.jsx)(cH,{appearance:"action",disabled:!c,onClick:u,isLoading:f,children:r("cards.medicine.mint")})]})}function xj(t){var n=t.contract,r=ke().t,a=$F().reset,o=KF().wallet,i=hE(),g=i.value,s=i.clear,c=(0,e.useMemo)((function(){return g&&g>0}),[g]),l=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===o||void 0===o?void 0:o.send(new mL({contract:n,data:{case:"burn",value:{amount:g}}}));case 2:s(),a();case 4:case"end":return e.stop()}}),e)}))),[n,s,a,g,o])),u=l.onSubmit,f=l.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:r("cards.medicine.burn-header")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(wj,{})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(cH,{appearance:"action-danger",disabled:!c,onClick:u,isLoading:f,children:r("cards.medicine.burn")})]})}function Yj(t){var n=t.contract,r=ke().t,a=Ge(kU(),1)[0],o=KF().manager,i=$F(),g=i.pop,s=i.push,c=bE(),l=c.value,u=c.setValue,f=Ge((0,e.useState)(l),2),I=f[0],C=f[1],d=JF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=vE(I),!e.t0){e.next=5;break}return e.next=4,o.isWorker(a.Manager,I);case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=12;break}return e.t1=o,e.t2=a.Manager,e.next=10,o.getEntity(a.Manager,I);case 10:return e.t3=e.sent,e.abrupt("return",e.t1.getEntityData.call(e.t1,e.t2,e.t3));case 12:case"end":return e.stop()}}),e)}))),[a.Manager,I,o])).data,A=(0,e.useMemo)((function(){return!!d}),[d]),h=(0,e.useCallback)((function(){u(I),s((0,YF.jsx)(Nj,{contract:n}))}),[n,I,s,u]),p=(0,e.useCallback)((function(e){var t=TF.fromBinary(my(e));if("contact"===t.data.case)u(t.data.value.address),g()}),[g,u]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:r("cards.medicine.transfer-header")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(gj,{value:I,onChange:function(e){return C(e.target.value)},onResult:p}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:!!d&&(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(JU,{entity:d})})}),(0,YF.jsx)(cH,{appearance:"action",disabled:!A,onClick:h,children:r("cards.medicine.continue")})]})}function Nj(t){var n=t.contract,r=ke().t,a=$F().reset,o=lO().wallet,i=KF().wallet,g=bE(),s=g.value,c=g.clear,l=hE(),u=l.value,f=l.clear,I=(0,e.useMemo)((function(){return u&&u>0}),[u]),C=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===i||void 0===i?void 0:i.send(new mL({contract:n,data:{case:"transfer",value:{recipient:s,amount:u}}}));case 2:c(),f(),a([(0,YF.jsx)(Hj,{share:new TF({data:{case:"request",value:new MF({address:n,data:{case:"transfer",value:{amount:u,sender:o.address}}})}})})]);case 5:case"end":return e.stop()}}),e)}))),[i,n,s,u,c,f,a,o.address])),d=C.onSubmit,A=C.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:r("cards.medicine.transfer-header-2")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(wj,{})}),(0,YF.jsx)(cH,{appearance:"action",disabled:!I,onClick:d,isLoading:A,children:r("cards.medicine.transfer")})]})}function Hj(e){var t=e.share,n=ke().t;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:600,opacity:.7,children:n("cards.share.header")})}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(nE,{content:py(t.toBinary())})})]})}var Fj,Kj=function(e){return e[e.ALL=0]="ALL",e[e.STOCK=1]="STOCK",e}(Kj||{});function Ej(){var t=ke().t,n=Ge((0,e.useState)(Kj.STOCK),2),r=n[0],a=n[1],o=KF(),i=o.medicine,g=o.manager,s=OU().medicines,c=lO().wallet,l=$F().push,u=Ge(kU(),1)[0],f=(0,e.useCallback)((function(e){return function(){return l((0,YF.jsx)(Xj,{address:e}))}}),[l]),I=JF((0,e.useCallback)(hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(s.map((function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=i,e.t2=t.address,e.next=5,g.getEntity(u.Manager,c.address);case 5:return e.t3=e.sent,e.next=8,e.t1.balanceOf.call(e.t1,e.t2,e.t3);case 8:return e.t4=e.sent,e.abrupt("return",{info:e.t0,amount:e.t4});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[u.Manager,g,i,s,c.address])),C=I.data,d=(I.loading,(0,e.useMemo)((function(){return null===C||void 0===C?void 0:C.filter((function(e){return e.amount>0}))}),[C])),A=(0,e.useMemo)((function(){return r===Kj.STOCK?yD(null!==d&&void 0!==d?d:[],(function(e){return[e.info.name]})):yD(null!==C&&void 0!==C?C:[],(function(e){return[e.info.name]}))}),[C,r,d]);return(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(pL,{children:function(e){return[Kj.STOCK,Kj.ALL].map((function(n){return(0,YF.jsx)(pL.Button,{marginRight:bK(2),appearance:"minimal",isActive:r===n,onPosition:e(n.toString(),"start"),onClick:function(){a(n)},children:t("medicines."+n.toString())},n.toString())}))}}),(0,YF.jsx)(vD,{groups:A,children:function(e){return(0,YF.jsx)(FK.JX,{xs:12,sm:6,children:(0,YF.jsx)(RH,{marginRight:bK(12),marginBottom:bK(6),onClick:f(e.info.address),cursor:"pointer",children:(0,YF.jsx)(Tj,v({},e))})})}})]})}function Tj(e){var t=e.info,n=e.amount;return(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(RH,{width:75,height:75,borderRadius:10,background:"colors.gray100",backgroundImage:"url(/assets/medicines/".concat(ZU(t.name),")"),backgroundSize:"cover"})}),(0,YF.jsxs)(FK.JX,{xs:!0,children:[(0,YF.jsx)(HH,{size:700,fontWeight:900,opacity:.8,textTransform:"capitalize",children:t.name}),(0,YF.jsx)(HH,{size:100,children:t.symbol})]}),(0,YF.jsx)(FK.JX,{children:!!n&&n>0&&(0,YF.jsx)(pj,{color:"blue",children:n.toLocaleString()})})]})}function Mj(t){var n,r,a,o,i,g,s,c,l=t.request,u=ke().t,f=Ge(kU(),1)[0],I=KF(),C=I.medicine,d=I.manager,A=JF((0,e.useCallback)(hn(dn().mark((function e(){var t,n,r,a;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([C.getMedicineInfo(l.address),d.getWorkerData(f.Manager,l.data.value.sender)]);case 2:return t=e.sent,n=Ge(t,2),r=n[0],a=n[1],e.abrupt("return",{medicine:r,sender:a});case 7:case"end":return e.stop()}}),e)}))),[f.Manager,d,C,l.address,l.data.value])),h=A.data;A.loading;return(0,YF.jsxs)(RH,{paddingX:HK(8),paddingY:HK(4),borderRadius:bK(6),background:"colors.gray90",children:[!(null===h||void 0===h||null===(n=h.medicine)||void 0===n||!n.info)&&(0,YF.jsx)(Tj,{info:h.medicine.info,amount:null===(r=l.data.value)||void 0===r?void 0:r.amount}),(0,YF.jsx)(_F.Divider,{children:HK(4)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:100,children:u("cards.contact.requester")})}),(0,YF.jsx)(_F.Divider,{children:HK(2)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:600,fontWeight:800,opacity:.9,children:[null===h||void 0===h||null===(a=h.sender.metadata)||void 0===a?void 0:a.firstname,null===h||void 0===h||null===(o=h.sender.metadata)||void 0===o?void 0:o.lastname].join(" ")})}),(0,YF.jsx)(_F.Divider,{children:HK(1)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:300,opacity:.5,letterSpacing:1,children:vU(null===(i=l.data.value)||void 0===i?void 0:i.sender,8)})}),(0,YF.jsx)(_F.Divider,{children:HK(1)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{fontWeight:800,opacity:.4,children:null===h||void 0===h||null===(g=h.sender.entity)||void 0===g||null===(s=g.metadata)||void 0===s||null===(c=s.data.value)||void 0===c?void 0:c.name})})]})}var zj=["title","count"],Dj=["title"];function Lj(t){var n=t.contact,r=ke().t,a=lO(),o=a.wallet,i=a.save,g=$F().pop,s=eK((0,YF.jsx)(_j,{address:n.address,firstname:n.firstname,lastname:n.lastname})),c=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(r("cards.contact.delete"))){e.next=5;break}return delete o.contacts[n.address],e.next=4,i(o);case 4:g();case 5:case"end":return e.stop()}}),e)}))),[n.address,g,i,r,o])),l=c.onSubmit,u=c.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsxs)(_F.Middle,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(mK,{size:bK(30),name:[null===n||void 0===n?void 0:n.firstname,null===n||void 0===n?void 0:n.lastname].join(" ")})}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsxs)(HH,{size:800,fontWeight:400,opacity:.7,children:[null===n||void 0===n?void 0:n.firstname,(0,YF.jsx)(HH,{marginLeft:bK(1),is:"span",size:800,fontWeight:800,children:null===n||void 0===n?void 0:n.lastname})]})}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:100,children:null===n||void 0===n?void 0:n.company})}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(RH,{width:bK(75),children:(0,YF.jsx)(nE,{content:py(new TF({data:{case:"contact",value:n}}).toBinary())})})}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(GU,{characters:8,children:n.address})})]}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(tn,{to:"mailto:"+n.email,children:(0,YF.jsx)(CH,{disabled:!n.email,marginX:bK(6),size:"large",borderRadius:"50%",icon:(0,YF.jsx)(qK,{})})})}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(tn,{to:"tel:"+n.phone,children:(0,YF.jsx)(CH,{disabled:!n.phone,marginX:bK(6),size:"large",borderRadius:"50%",icon:(0,YF.jsx)(jK,{})})})}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(CH,{marginX:bK(6),size:"large",borderRadius:"50%",icon:(0,YF.jsx)(ZK,{}),onClick:s})}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(CH,{marginX:bK(6),size:"large",intent:"danger",borderRadius:"50%",icon:(0,YF.jsx)(kK,{}),onClick:l,isLoading:u})})]})})]})}function Uj(t){var n,r,a,o=t.contact,i=ke().t,g=KF().medicine,s=lO().wallet,c=OU().medicines,l=JF((0,e.useCallback)(hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(c.map((function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,g.getTransfersPendingToApprove(t.address,s.address);case 3:return e.t1=e.sent,e.next=6,g.getMintsPendingToApprove(t.address,s.address);case 6:return e.t2=e.sent,e.next=9,g.getBurnsPendingToApprove(t.address,s.address);case 9:return e.t3=e.sent,e.abrupt("return",{medicine:e.t0,transfers:e.t1,mints:e.t2,burns:e.t3});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}))));case 1:case"end":return e.stop()}}),e)}))),[s.address,g,c])),u=l.data,f=l.loading,I=l.doRefetch,C=eK((0,YF.jsx)(jj,{type:"transfer",sets:null!==(n=null===u||void 0===u?void 0:u.map((function(e){return{info:e.medicine,requests:e.transfers.map((function(t){return new MF({address:e.medicine.address,data:{case:"transfer",value:t}})}))}})))&&void 0!==n?n:[]})),d=eK((0,YF.jsx)(jj,{type:"mint",sets:null!==(r=null===u||void 0===u?void 0:u.map((function(e){return{info:e.medicine,requests:e.mints.map((function(t){return new MF({address:e.medicine.address,data:{case:"mint",value:t}})}))}})))&&void 0!==r?r:[]})),A=eK((0,YF.jsx)(jj,{type:"burn",sets:null!==(a=null===u||void 0===u?void 0:u.map((function(e){return{info:e.medicine,requests:e.burns.map((function(t){return new MF({address:e.medicine.address,data:{case:"burn",value:t}})}))}})))&&void 0!==a?a:[]}));return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(RH,{marginLeft:bK(3),children:(0,YF.jsx)(HH,{size:800,fontWeight:400,opacity:.7,children:i("cards.contact.greeting",{name:null===o||void 0===o?void 0:o.firstname})})}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(HH,{size:100,margin:bK(3),children:i("cards.contact.suggestion")}),f&&(0,YF.jsx)(FK.X2,{children:new Array(3).fill(0).map((function(e,t){return(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(rO,{cursor:"progress",children:(0,YF.jsx)(QF,{})})},t)}))}),!f&&!!u&&(0,YF.jsxs)(FK.X2,{children:[(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(nO,{title:i("cards.contact.receive"),count:aO(u.map((function(e){return e.transfers.length}))),cursor:"pointer",onClick:C})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(nO,{title:i("cards.contact.create"),count:aO(u.map((function(e){return e.mints.length}))),cursor:"pointer",onClick:d})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(nO,{title:i("cards.contact.destroy"),count:aO(u.map((function(e){return e.burns.length}))),cursor:"pointer",onClick:A})})]}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(rO,{title:i("cards.contact.share"),children:(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(RH,{width:bK(80),children:(0,YF.jsx)(nE,{content:py(new TF({data:{case:"contact",value:o}}).toBinary())})})})}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(GU,{characters:8,children:o.address})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(CH,{icon:(0,YF.jsx)(WK,{}),appearance:"minimal",size:"large",onClick:I,disabled:f})})}),(0,YF.jsx)(_F.Divider,{children:bK(12)})]})}function jj(t){var n=t.type,r=t.sets,a=ke().t,o=$F().push,i=(0,e.useCallback)((function(e){return function(){return o((0,YF.jsx)(Oj,{request:e}))}}),[o]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:a(iO[n])})}),(0,YF.jsx)(_F.Divider,{children:bK(4)}),r.map((function(e){var t=e.info,n=e.requests;return(0,YF.jsx)(RH,{children:n.map((function(e,t){return(0,YF.jsx)(RH,{marginY:bK(4),onClick:i(e),cursor:"pointer",children:(0,YF.jsx)(Mj,{request:e})},t)}))},t.address)}))]})}function Oj(t){var n,r,a,o,i=t.request,g=ke().t,s=KF().wallet,c=$F().reset,l=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=i.data.case,e.next="transfer"===e.t0?3:"mint"===e.t0?6:"burn"===e.t0?9:12;break;case 3:return e.next=5,null===s||void 0===s?void 0:s.send(new mL({contract:i.address,data:{case:"approveTransfer",value:{amount:i.data.value.amount,worker:i.data.value.sender}}}));case 5:return e.abrupt("break",12);case 6:return e.next=8,null===s||void 0===s?void 0:s.send(new mL({contract:i.address,data:{case:"approveMint",value:{amount:i.data.value.amount,worker:i.data.value.sender}}}));case 8:return e.abrupt("break",12);case 9:return e.next=11,null===s||void 0===s?void 0:s.send(new mL({contract:i.address,data:{case:"approveBurn",value:{amount:i.data.value.amount,worker:i.data.value.sender}}}));case 11:return e.abrupt("break",12);case 12:c();case 13:case"end":return e.stop()}}),e)}))),[i.address,i.data.case,null===(n=i.data.value)||void 0===n?void 0:n.amount,null===(r=i.data.value)||void 0===r?void 0:r.sender,c,s])),u=l.onSubmit,f=l.loading,I=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=i.data.case,e.next="transfer"===e.t0?3:"mint"===e.t0?6:"burn"===e.t0?9:12;break;case 3:return e.next=5,null===s||void 0===s?void 0:s.send(new mL({contract:i.address,data:{case:"rejectTransfer",value:{amount:i.data.value.amount,worker:i.data.value.sender}}}));case 5:return e.abrupt("break",12);case 6:return e.next=8,null===s||void 0===s?void 0:s.send(new mL({contract:i.address,data:{case:"rejectMint",value:{amount:i.data.value.amount,worker:i.data.value.sender}}}));case 8:return e.abrupt("break",12);case 9:return e.next=11,null===s||void 0===s?void 0:s.send(new mL({contract:i.address,data:{case:"rejectBurn",value:{amount:i.data.value.amount,worker:i.data.value.sender}}}));case 11:return e.abrupt("break",12);case 12:c();case 13:case"end":return e.stop()}}),e)}))),[i.address,i.data.case,null===(a=i.data.value)||void 0===a?void 0:a.amount,null===(o=i.data.value)||void 0===o?void 0:o.sender,c,s])),C=I.onSubmit,d=I.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:g(iO[i.data.case])})}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(Mj,{request:i})}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsxs)(FK.X2,{children:[(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(cH,{appearance:"action-neutral",onClick:u,disabled:d,isLoading:f,children:g("cards.contact.approve")})}),(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(cH,{appearance:"action-danger",onClick:C,disabled:f,isLoading:d,children:g("cards.contact.reject")})})]})]})}function Qj(){var t,n=ke().t,r=sE(),a=r.value,o=r.setValue,i=$F(),g=i.push,s=i.pop,c=lO(),l=c.wallet,u=c.save,f=Ge((0,e.useState)(null===a||void 0===a?void 0:a.address),2),I=f[0],C=f[1],d=(0,e.useCallback)((function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.contacts[I]=t,u(l);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}),[I,u,l]),A=(0,e.useCallback)((function(){o(new vy(a?v(v({},a),{},{address:I}):{address:I})),g((0,YF.jsx)(Pj,{onSave:d,heading:n("cards.contact.metadata")}))}),[I,d,g,o,n,a]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:n("cards.contact.address")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(gj,{value:I,onChange:function(e){return C(e.target.value)},onResult:function(e){var t=TF.fromBinary(my(e));"contact"===t.data.case&&(o(t.data.value),s())}}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",onClick:A,disabled:!vE(I),children:n("cards.contact.continue")})]})}function Pj(t){var n=t.onSave,r=t.heading,a=t.address,o=ke().t,i=$F().reset,g=sE(),s=g.value,c=g.clear,l=Ge((0,e.useState)(null===s||void 0===s?void 0:s.firstname),2),u=l[0],f=l[1],I=Ge((0,e.useState)(null===s||void 0===s?void 0:s.lastname),2),C=I[0],d=I[1],A=Ge((0,e.useState)(null===s||void 0===s?void 0:s.company),2),h=A[0],p=A[1],m=Ge((0,e.useState)(null===s||void 0===s?void 0:s.email),2),b=m[0],y=m[1],v=Ge((0,e.useState)(null===s||void 0===s?void 0:s.phone),2),Z=v[0],G=v[1],B=(0,e.useMemo)((function(){return!!u&&!!C&&(vE(null===s||void 0===s?void 0:s.address)||vE(a))}),[a,null===s||void 0===s?void 0:s.address,u,C]),k=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(new vy({address:null!==a&&void 0!==a?a:null===s||void 0===s?void 0:s.address,company:h,email:b,firstname:u,lastname:C,phone:Z}));case 2:c(),i();case 4:case"end":return e.stop()}}),e)}))),[a,c,h,null===s||void 0===s?void 0:s.address,b,u,C,n,Z,i])),S=k.onSubmit,w=k.loading;return(0,YF.jsxs)(AD,{children:[!!r&&(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:r})}),(0,YF.jsx)(_F.Divider,{children:bK(12)})]}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(NK,{placeholder:o("cards.contact.firstname"),value:u,onChange:function(e){return f(e.target.value)}}),(0,YF.jsx)(NK,{placeholder:o("cards.contact.lastname"),value:C,onChange:function(e){return d(e.target.value)}}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(NK,{placeholder:o("cards.contact.email"),value:b,onChange:function(e){return y(e.target.value)}}),(0,YF.jsx)(NK,{placeholder:o("cards.contact.phone"),value:Z,onChange:function(e){return G(e.target.value)}}),(0,YF.jsx)(_F.Divider,{children:bK(8)}),(0,YF.jsx)(NK,{placeholder:o("cards.contact.company"),value:h,onChange:function(e){return p(e.target.value)}}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",onClick:S,isLoading:w,disabled:!B,children:o("cards.contact.save")})]})}function _j(t){var n=t.address,r=t.firstname,a=t.lastname,o=ke().t,i=KF(),g=i.manager,s=i.wallet,c=lO().wallet,l=$F(),u=l.push,f=l.reset,I=uE().setValue,C=Ge(kU(),1)[0],d=JF((0,e.useCallback)(hn(dn().mark((function e(){var t,r,a,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([g.getWorkerData(C.Manager,n),g.rolesOf(C.Manager,n),g.rolesOf(C.Manager,c.address)]);case 2:return t=e.sent,r=Ge(t,3),a=r[0],o=r[1],i=r[2],e.abrupt("return",{worker:a,roles:o,canRegister:TU(i,[gy.SUPER_ADMIN,gy.ADMIN,gy.SUPERVISOR]),canRemove:TU(i,[gy.SUPER_ADMIN,gy.ADMIN,gy.SUPERVISOR]),canUpdateAddress:TU(i,[gy.SUPER_ADMIN,gy.ADMIN,gy.SUPERVISOR])});case 8:case"end":return e.stop()}}),e)}))),[C.Manager,n,g,c.address])),A=d.data,h=d.loading,p=(0,e.useCallback)((function(){I(new dy({address:n,metadata:new Ay({firstname:r,lastname:a})})),u((0,YF.jsx)(qj,{}))}),[n,r,a,u,I]),m=(0,e.useCallback)((function(){I(new dy({address:n})),u((0,YF.jsx)($j,{}))}),[n,u,I]),b=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(o("cards.contact.system-remove-confirm"))){e.next=4;break}return e.next=3,null===s||void 0===s?void 0:s.send(new mL({contract:C.Manager,data:{case:"removeWorker",value:{workerAddress:n}}}));case 3:f();case 4:case"end":return e.stop()}}),e)}))),[C.Manager,n,f,o,s])),y=b.onSubmit,v=b.loading;return h?(0,YF.jsx)(AD,{children:"loading info..."}):null!==A&&void 0!==A&&A.worker.id?(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:o("cards.contact.system-info")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(RH,{paddingX:bK(4),children:A.worker.entity&&(0,YF.jsx)(JU,{entity:A.worker.entity,children:A.worker.isActive&&(0,YF.jsx)(FU,{size:30})})}),(0,YF.jsx)(_F.Divider,{children:bK(6)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(FK.X2,{center:"xs",children:A.roles.map((function(e){return(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(QF,{paddingY:bK(2),background:"colors.blue100",borderRadius:bK(6),children:(0,YF.jsxs)(gz,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:gO[e]}),(0,YF.jsx)(HH,{marginTop:bK(2),size:100,children:o("role."+e)})]})})},e)}))})}),(0,YF.jsx)(_F.Divider,{children:HK(7)}),(0,YF.jsxs)(FK.X2,{children:[(0,YF.jsx)(FK.JX,{xs:!0,children:A.canUpdateAddress&&(0,YF.jsx)(cH,{appearance:"action-neutral",onClick:m,children:o("cards.contact.system-address-update")})}),(0,YF.jsx)(FK.JX,{xs:!0,children:A.canRemove&&(0,YF.jsx)(cH,{appearance:"action-danger",onClick:y,isLoading:v,children:o("cards.contact.system-remove")})})]})]}):(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(_F.Divider,{children:bK(24)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(mK,{size:120}),(0,YF.jsx)(_F.Divider,{children:bK(6)}),(0,YF.jsx)(HH,{size:600,fontWeight:800,opacity:.7,children:o("cards.contact.non-registered")})]})}),(0,YF.jsx)(_F.Divider,{children:bK(24)}),(null===A||void 0===A?void 0:A.canRegister)&&(0,YF.jsx)(cH,{appearance:"action",onClick:p,children:o("cards.contact.system-register")})]})}function qj(){var t=ke().t,n=Ge((0,e.useState)(),2),r=n[0],a=n[1],o=lO().wallet,i=KF().manager,g=uE().setValue,s=$F().push,c=Ge(kU(),1)[0],l=JF((0,e.useCallback)(hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(o.entities.map((function(e){return(t=t||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.getEntityData(c.Manager,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}))));case 1:case"end":return e.stop()}}),e)}))),[c.Manager,i,o.entities])),u=l.data,f=(l.loading,(0,e.useMemo)((function(){return r?null===u||void 0===u?void 0:u.filter((function(e){var t,n;return null===(t=e.metadata)||void 0===t||null===(n=t.data.value)||void 0===n?void 0:n.name.toLowerCase().includes(r.toLowerCase())})):u}),[u,r])),I=(0,e.useCallback)((function(e){return function(){g((function(t){return new dy(v(v({},t),{},{entity:e}))})),s((0,YF.jsx)(eO,{}))}}),[s,g]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.contact.select-entity")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(NK,{value:r,onChange:function(e){return a(e.target.value)},placeholder:t("cards.contact.search")}),null===f||void 0===f?void 0:f.map((function(e){return(0,YF.jsx)(RH,{padding:bK(4),cursor:"pointer",onClick:I(e),children:(0,YF.jsx)(JU,{entity:e})},e.address)}))]})}function $j(){var t=ke().t,n=KF().wallet,r=lO(),a=r.wallet,o=r.save,i=$F().reset,g=uE(),s=g.value,c=g.clear,l=Ge(kU(),1)[0],u=Ge((0,e.useState)(),2),f=u[0],I=u[1],C=(0,e.useMemo)((function(){return vE(f)}),[f]),d=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n?void 0:n.send(new mL({contract:l.Manager,data:{case:"updateWorkerAddr",value:{newAddress:f,oldAddress:null===s||void 0===s?void 0:s.address}}}));case 2:return a.contacts[f]=new vy(v(v({},a.contacts[s.address]),{},{address:f})),delete a.contacts[s.address],e.next=6,o(a);case 6:c(),i();case 8:case"end":return e.stop()}}),e)}))),[l.Manager,f,c,i,o,s,a,n])),A=d.onSubmit,h=d.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.contact.system-new-address")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(NK,{value:f,onChange:function(e){return I(e.target.value)},placeholder:t("cards.contact.system-new-address")}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",disabled:!C,isLoading:h,onClick:A,children:t("cards.contact.system-address-change")})]})}function eO(){var t=ke().t,n=$F().push,r=uE(),a=r.value,o=r.setValue,i=Ge((0,e.useState)(null===a||void 0===a?void 0:a.id),2),g=i[0],s=i[1],c=(0,e.useCallback)((function(e){return s(BigInt(e.target.value))}),[]),l=(0,e.useMemo)((function(){return!!g}),[g]),u=(0,e.useCallback)((function(){o((function(e){return new dy(v(v({},e),{},{id:g}))})),n((0,YF.jsx)(tO,{}))}),[g,n,o]);return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:t("cards.contact.id")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(NK,{type:"number",value:null===g||void 0===g?void 0:g.toString(),onChange:c,placeholder:t("cards.contact.id")}),(0,YF.jsx)(_F.Grow,{}),(0,YF.jsx)(cH,{appearance:"action",disabled:!l,onClick:u,children:t("cards.contact.continue")})]})}function tO(){var t,n=ke().t,r=Ge((0,e.useState)(gy.WORKER),2),a=r[0],o=r[1],i=KF().wallet,g=uE(),s=g.value,c=g.clear,l=$F().reset,u=Ge(kU(),1)[0],f=xF((0,e.useCallback)(hn(dn().mark((function e(){var t;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===i||void 0===i?void 0:i.send(new mL({contract:u.Manager,data:{case:"addWorker",value:{entityAddress:null===s||void 0===s||null===(t=s.entity)||void 0===t?void 0:t.address,metadata:null===s||void 0===s?void 0:s.metadata,role:BigInt(1<<a),workerAddress:null===s||void 0===s?void 0:s.address,workerId:null===s||void 0===s?void 0:s.id}}}));case 2:c(),l();case 4:case"end":return e.stop()}}),e)}))),[u.Manager,c,l,a,null===s||void 0===s?void 0:s.address,null===s||void 0===s||null===(t=s.entity)||void 0===t?void 0:t.address,null===s||void 0===s?void 0:s.id,null===s||void 0===s?void 0:s.metadata,i])),I=f.onSubmit,C=f.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:800,fontWeight:800,opacity:.7,children:n("cards.contact.select-role")})}),(0,YF.jsx)(_F.Divider,{children:bK(12)}),(0,YF.jsx)(_F.Middle,{children:(0,YF.jsx)(FK.X2,{children:[gy.WORKER,gy.SUPERVISOR,gy.MINT,gy.BURN,gy.ADMIN].map((function(e){return(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(QF,{paddingY:bK(2),background:e===a?"colors.blue100":"colors.gray90",borderRadius:bK(6),onClick:function(){return o(e)},cursor:"pointer",children:(0,YF.jsxs)(gz,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:gO[e]}),(0,YF.jsx)(HH,{marginTop:bK(2),size:100,children:n("role."+e)})]})})},e)}))})}),(0,YF.jsx)(cH,{appearance:"action",isLoading:C,onClick:I,children:n("cards.contact.system-register")})]})}var nO=function(e){var t=e.title,n=e.count,r=Mx(e,zj);return(0,YF.jsx)(rO,v(v({},r),{},{children:(0,YF.jsx)(QF,{children:(0,YF.jsx)(_F,{children:(0,YF.jsxs)(_F.Middle,{children:[(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:100,children:t})}),(0,YF.jsx)(_F.Divider,{children:bK(2)}),(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(HH,{size:600,fontWeight:800,opacity:.7,children:n.toString()})})]})})})}))},rO=function(e){var t=e.title,n=Mx(e,Dj);return(0,YF.jsxs)(YF.Fragment,{children:[!!t&&(0,YF.jsx)(HH,{margin:bK(3),size:100,children:t}),(0,YF.jsx)(RH,v(v({},n),{},{background:"colors.gray90",borderRadius:bK(6)}))]})};function aO(e){return(null!==e&&void 0!==e?e:[]).reduce((function(e,t){return e+t}),0)}var oO,iO={transfer:"cards.contact.receive",mint:"cards.contact.create",burn:"cards.contact.destroy"},gO=(b(Fj={},gy.WORKER,(0,YF.jsx)(xU,{size:42,opacity:.6})),b(Fj,gy.SUPERVISOR,(0,YF.jsx)($K,{size:42,opacity:.6})),b(Fj,gy.MINT,(0,YF.jsx)(KU,{size:42,opacity:.6})),b(Fj,gy.BURN,(0,YF.jsx)(EU,{size:42,opacity:.6})),b(Fj,gy.ADMIN,(0,YF.jsx)(HU,{size:42,opacity:.6})),b(Fj,gy.SUPER_ADMIN,(0,YF.jsx)(HU,{size:42,opacity:.6})),b(Fj,gy.UNSPECIFIED,(0,YF.jsx)(YF.Fragment,{})),Fj),sO=new yy({address:"0x0000000000000000000000000000000000000000"}),cO=(0,e.createContext)({wallet:sO,save:function(e){return(oO=oO||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),lO=function(){return(0,e.useContext)(cO)};function uO(t){var n,r,a=ke().t,o=KF().wallet,i=JF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===o||void 0===o?void 0:o.loadWalletData();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[o])),g=i.data,s=i.loading,c=i.doRefetch,l=(0,e.useCallback)((function(e){return(n=n||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===o||void 0===o?void 0:o.storeWalletData(t.clone());case 2:e.sent&&c();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}),[c,o]);return s?(0,YF.jsx)("p",{children:"loading wallet..."}):s||!g||g.contact?(0,YF.jsx)(cO.Provider,{value:{wallet:null!==g&&void 0!==g?g:sO,save:l},children:t.children}):(0,YF.jsx)(YF.Fragment,{children:(0,YF.jsx)(_F,{height:"100vh",maxWidth:"500px",marginX:"auto",paddingX:bK(5),paddingY:bK(8),children:(0,YF.jsx)(Pj,{onSave:function(e){return(r=r||hn(dn().mark((function e(t){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.contact=t,e.next=3,l(g);case 3:c();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},heading:a("cards.contact.register"),address:g.address})})})}var fO,IO,CO=(fO=BN,IO={components:{Button:{baseStyle:{borderRadius:"18px",selectors:{_focus:{boxShadow:"none"},_active:{background:"colors.gray90"}}},appearances:{action:{backgroundColor:"colors.blue500",color:"colors.white",borderRadius:"16px",marginTop:"52px",paddingY:"25px",paddingX:"25px",fontSize:"16px",fontWeight:"bold",width:"100%",selectors:{_focus:{boxShadow:"none"},_disabled:{backgroundColor:"colors.blue100",color:"colors.white"}}},"action-danger":{backgroundColor:"colors.red500",color:"colors.white",borderRadius:"16px",paddingY:"25px",paddingX:"25px",fontSize:"16px",fontWeight:"bold",width:"100%",selectors:{_focus:{boxShadow:"none"},_disabled:{backgroundColor:"colors.red100",color:"colors.white"}}},"action-neutral":{backgroundColor:"colors.gray300",color:"colors.gray800",borderRadius:"16px",paddingY:"25px",paddingX:"25px",fontSize:"16px",fontWeight:"bold",width:"100%",selectors:{_focus:{boxShadow:"none"},_disabled:{backgroundColor:"colors.gray100",color:"colors.gray500"}}}}},Input:{baseStyle:{borderRadius:"16px",paddingY:"25px",paddingX:"25px",fontSize:"16px",marginY:"4px",width:"100%",background:"colors.gray90",selectors:{_focus:{boxShadow:"none"},_active:{boxShadow:"none"}}}},Heading:{baseStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}},sY()({},fO,IO)),dO=["M15.55 13.43l-2.67-2.68a6.94 6.94 0 001.11-3.76c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.39 0 2.68-.42 3.76-1.11l2.68 2.67a1.498 1.498 0 102.12-2.12zm-8.56-1.44c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"],AO=["M19.56 17.44l-4.94-4.94A8.004 8.004 0 0016 8c0-4.42-3.58-8-8-8S0 3.58 0 8s3.58 8 8 8c1.67 0 3.21-.51 4.5-1.38l4.94 4.94a1.498 1.498 0 102.12-2.12zM8 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"],hO=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:dO,svgPaths20:AO,ref:n,name:"search"},t))}))),pO=["M7.99-.01A7.998 7.998 0 00.03 8.77c.01.09.03.18.04.28.02.15.04.31.07.47.02.11.05.22.08.34.03.13.06.26.1.38.04.12.08.25.12.37.04.11.08.21.12.32a6.583 6.583 0 00.3.65c.07.14.14.27.22.4.04.07.08.13.12.2l.27.42.1.13a7.973 7.973 0 003.83 2.82c.03.01.05.02.07.03.37.12.75.22 1.14.29l.2.03c.39.06.79.1 1.2.1s.81-.04 1.2-.1l.2-.03c.39-.07.77-.16 1.14-.29.03-.01.05-.02.07-.03a8.037 8.037 0 003.83-2.82c.03-.04.06-.08.09-.13.1-.14.19-.28.28-.42.04-.07.08-.13.12-.2.08-.13.15-.27.22-.41.04-.08.08-.17.12-.26.06-.13.11-.26.17-.39.04-.1.08-.21.12-.32.04-.12.08-.24.12-.37.04-.13.07-.25.1-.38.03-.11.06-.22.08-.34.03-.16.05-.31.07-.47.01-.09.03-.18.04-.28.02-.26.04-.51.04-.78-.03-4.41-3.61-7.99-8.03-7.99zm0 14.4c-1.98 0-3.75-.9-4.92-2.31.67-.36 1.49-.66 2.14-.95 1.16-.52 1.04-.84 1.08-1.27.01-.06.01-.11.01-.17-.41-.36-.74-.86-.96-1.44v-.01c0-.01-.01-.02-.01-.02-.05-.13-.09-.26-.12-.39-.28-.05-.44-.35-.5-.63-.06-.11-.18-.38-.15-.69.04-.41.2-.59.38-.67v-.06c0-.51.05-1.24.14-1.72.02-.13.05-.26.09-.39.17-.59.53-1.12 1.01-1.49.49-.38 1.19-.59 1.82-.59.62 0 1.32.2 1.82.59.48.37.84.9 1.01 1.49.04.13.07.26.09.4.09.48.14 1.21.14 1.72v.07c.18.08.33.26.37.66.03.31-.1.58-.16.69-.06.27-.21.57-.48.62-.03.13-.07.26-.12.38 0 .01-.01.04-.01.04-.21.57-.54 1.06-.94 1.42 0 .06.01.13.01.19.04.43-.12.75 1.05 1.27.65.29 1.47.6 2.14.95a6.415 6.415 0 01-4.93 2.31z"],mO=["M10 0C4.48 0 0 4.48 0 10c0 .33.02.65.05.97.01.12.03.23.05.35.03.2.05.4.09.59.03.14.06.28.1.42l.12.48c.05.16.1.31.15.46.05.13.09.27.15.4.06.16.13.32.21.48.05.11.1.22.16.33.09.17.17.34.27.5.05.09.1.17.15.25.11.18.22.35.34.52.04.06.08.11.12.17 1.19 1.62 2.85 2.86 4.78 3.53l.09.03c.46.15.93.27 1.42.36.08.01.17.03.25.04.49.07.99.12 1.5.12s1.01-.05 1.5-.12c.08-.01.17-.02.25-.04.49-.09.96-.21 1.42-.36l.09-.03c1.93-.67 3.59-1.91 4.78-3.53.04-.05.08-.1.12-.16.12-.17.23-.35.34-.53.05-.08.1-.16.15-.25.1-.17.19-.34.27-.51.05-.11.1-.21.15-.32.07-.16.14-.32.21-.49.05-.13.1-.26.14-.39.05-.15.11-.31.15-.46.05-.16.08-.32.12-.48.03-.14.07-.28.1-.42.04-.19.06-.39.09-.59.02-.12.04-.23.05-.35.05-.32.07-.64.07-.97 0-5.52-4.48-10-10-10zm0 18a7.94 7.94 0 01-6.15-2.89c.84-.44 1.86-.82 2.67-1.19 1.45-.65 1.3-1.05 1.35-1.59.01-.07.01-.14.01-.21-.51-.45-.93-1.08-1.2-1.8l-.01-.01c0-.01-.01-.02-.01-.03a4.42 4.42 0 01-.15-.48c-.33-.07-.53-.44-.61-.79-.08-.14-.23-.48-.2-.87.05-.51.26-.74.49-.83v-.08c0-.63.06-1.55.17-2.15.02-.17.06-.33.11-.5.21-.73.66-1.4 1.26-1.86.62-.47 1.5-.72 2.28-.72.78 0 1.65.25 2.27.73.6.46 1.05 1.12 1.26 1.86.05.16.08.33.11.5.11.6.17 1.51.17 2.15v.09c.22.1.42.33.46.82.04.39-.12.73-.2.87-.07.34-.27.71-.6.78-.04.16-.09.33-.15.48 0 .01-.02.05-.02.05-.26.71-.67 1.33-1.17 1.78 0 .08.01.16.01.23.05.54-.15.94 1.31 1.59.81.36 1.84.74 2.68 1.19A7.958 7.958 0 0110 18z"],bO=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:pO,svgPaths20:mO,ref:n,name:"user"},t))}))),yO=["M12 5c-.28 0-.53.11-.71.29L8 8.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42l4 4c.18.18.43.29.71.29s.53-.11.71-.29l4-4A1.003 1.003 0 0012 5z"],vO=["M16 6c-.28 0-.53.11-.71.29L10 11.59l-5.29-5.3a1.003 1.003 0 00-1.42 1.42l6 6c.18.18.43.29.71.29s.53-.11.71-.29l6-6A1.003 1.003 0 0016 6z"],ZO=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:yO,svgPaths20:vO,ref:n,name:"chevron-down"},t))}))),GO=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(pj,Ex({borderRadius:999,ref:n},t))})));GO.propTypes=pj.propTypes;var BO=GO,kO=["children"];function SO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SO(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WO=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.children,a=Mx(t,kO);return e.createElement(jF,Ex({role:"dialog",elevation:3,overflow:"hidden",minWidth:200,backgroundColor:"white",ref:n},a),r)})));WO.propTypes=wO(wO({},jF.propTypes),{},{children:Dx().node});var RO=WO,VO=["animationDuration","bringFocusInside","children","content","display","minHeight","minWidth","onBodyClick","onClose","onCloseComplete","onOpen","onOpenComplete","position","shouldCloseOnExternalClick","shouldCloseOnEscapePress","statelessProps","trigger"];function XO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XO(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xO=function(){},YO={},NO=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.animationDuration,a=void 0===r?300:r,o=t.bringFocusInside,i=void 0!==o&&o,g=t.children,s=t.content,c=t.display,l=t.minHeight,u=void 0===l?40:l,f=t.minWidth,I=void 0===f?200:f,C=t.onBodyClick,d=void 0===C?xO:C,A=t.onClose,h=void 0===A?xO:A,p=t.onCloseComplete,m=void 0===p?xO:p,b=t.onOpen,y=void 0===b?xO:b,v=t.onOpenComplete,Z=void 0===v?xO:v,G=t.position,B=void 0===G?sz.BOTTOM:G,k=t.shouldCloseOnExternalClick,S=void 0===k||k,w=t.shouldCloseOnEscapePress,W=void 0===w||w,R=t.statelessProps,V=void 0===R?YO:R,X=t.trigger,J=void 0===X?"click":X,x=Mx(t,VO),Y=Ge((0,e.useState)(x.isShown),2),N=Y[0],H=Y[1],F=(0,e.useRef)(),K=jL(F),E=(0,e.useRef)(),T=jL(E),M=(0,e.useCallback)((function(e){return N&&e&&e.preventDefault(),requestAnimationFrame((function(){if(null!=F.current&&null!=document.activeElement&&N&&!F.current.contains(document.activeElement)){var e=F.current.querySelector("[autofocus]:not([disabled])");if(e)return e.focus();var t=F.current.querySelector("[tabindex]:not([disabled])");if(t)return t.focus();var n=F.current.querySelectorAll('button:not([disabled]), a:not([disabled]), [role="menuitem"]:not([disabled]), [role="menuitemradio"]:not([disabled])');if(n.length>0)return n[0].focus()}}))}),[N,F.current]),z=(0,e.useCallback)((function(){return requestAnimationFrame((function(){if(null!=E.current&&null!=F.current&&null!=document.activeElement){var e=F.current.contains(document.activeElement);(document.activeElement===document.body||e)&&E.current.focus()}}))}),[F.current,E.current]),D=(0,e.useCallback)((function(){N||(H(!0),y())}),[H,y,N]),L=(0,e.useCallback)((function(){N&&(H(!1),z(),h())}),[H,z,h,N]);(0,e.useImperativeHandle)(n,(function(){return{open:D,close:L}}),[D,L]),(0,e.useEffect)((function(){"boolean"===typeof x.isShown&&x.isShown!==N&&(x.isShown?D():L())}),[x.isShown,N]);var U=(0,e.useCallback)((function(){return N?L():D()}),[N,L,D]),j=(0,e.useMemo)((function(){return"hover"===J?D:void 0}),[J,D]),O=(0,e.useMemo)((function(){return"hover"===J?L:void 0}),[J,L]),Q=(0,e.useCallback)((function(e){return"ArrowDown"===e.key?M(e):void 0}),[M]),P=(0,e.useCallback)((function(e){return"Escape"===e.key&&W?L():void 0}),[W,L]),_=(0,e.useCallback)((function(e){E.current&&E.current.contains(e.target)||F.current&&F.current.contains(e.target)||(d(e),!1!==S&&L())}),[d,S,L,E.current,F.current]),q=(0,e.useCallback)((function(){i&&M(),Z()}),[i,M,Z]);(0,e.useEffect)((function(){return N?(document.body.addEventListener("click",_,!1),document.body.addEventListener("keydown",P,!1)):(document.body.removeEventListener("click",_,!1),document.body.removeEventListener("keydown",P,!1)),function(){document.body.removeEventListener("click",_,!1),document.body.removeEventListener("keydown",P,!1)}}),[N,_,P]);var $=(0,e.useCallback)((function(t){var n=t.getRef,r=t.isShown,a=g&&g.type===yU,o=function(e){T(e),n(e)};if("function"===typeof g)return g({getRef:o,isShown:r,toggle:U});var i={onClick:U,onMouseEnter:j,onKeyDown:Q,role:"button","aria-expanded":r,"aria-haspopup":!0};return a?e.cloneElement(g,{popoverProps:JO({getTargetRef:o,isShown:r},i)}):e.cloneElement(g,JO({ref:o},i))}),[g,T,U,j,Q]),ee="boolean"===typeof x.isShown?x.isShown:N,te=(0,e.useMemo)((function(){return"function"===typeof s?s({close:L}):s}),[s,L]);return e.createElement(cU,{target:$,isShown:ee,position:B,animationDuration:a,onOpenComplete:q,onCloseComplete:m},(function(t){var n=t.css,r=t.getRef,a=t.state,o=t.style;return e.createElement(RO,Ex({ref:function(e){K(e),r(e)},"data-state":a,display:c,minWidth:I,minHeight:u},V,n,{style:sY()({},o,V.style),className:V.className,onMouseLeave:O}),te)}))})));NO.propTypes={position:Dx().oneOf([sz.TOP,sz.TOP_LEFT,sz.TOP_RIGHT,sz.BOTTOM,sz.BOTTOM_LEFT,sz.BOTTOM_RIGHT,sz.LEFT,sz.RIGHT]),isShown:Dx().bool,trigger:Dx().oneOf(["click","hover"]),content:Dx().oneOfType([Dx().node,Dx().func]).isRequired,children:Dx().oneOfType([Dx().element,Dx().func]).isRequired,display:Dx().string,minWidth:Dx().oneOfType([Dx().number,Dx().string]),minHeight:Dx().oneOfType([Dx().number,Dx().string]),statelessProps:Dx().shape(RO.propTypes),animationDuration:Dx().number,onOpen:Dx().func,onClose:Dx().func,onOpenComplete:Dx().func,onCloseComplete:Dx().func,onBodyClick:Dx().func,bringFocusInside:Dx().bool,shouldCloseOnExternalClick:Dx().bool,shouldCloseOnEscapePress:Dx().bool};var HO=NO,FO=function(){return e.createElement(RH,{borderBottom:!0})};FO.displayName="MenuDivider";var KO=FO,EO=(0,e.memo)((function(t){var n=t.children,r=t.title;return e.createElement(RH,{paddingY:8},r&&e.createElement(HH,{size:100,marginX:16,marginY:8},r),n)}));EO.propTypes={title:Dx().node,children:Dx().node};var TO=EO;function MO(t){var n=e.useRef(t);return n.current=t,n}function zO(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.disabled,r=void 0!==n&&n,a=t.onKeyDown,o=t.tabIndex,i=void 0===o?0:o,g=MO(a),s=(0,e.useCallback)((function(e){uz(g.current,e),e.defaultPrevented||r||e.metaKey||e.target===e.currentTarget&&("Enter"!==e.key&&" "!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),e.currentTarget.click()))}),[r]);return{tabIndex:r?-1:i,onKeyDown:s}}var DO=["is","children","className","appearance","disabled","secondaryText","intent","icon","onSelect"],LO=function(){},UO={_hover:'&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):not(:focus):not(:active):hover',_focus:'&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):focus,&[aria-selected="true"]',_active:'&[aria-current="true"],&[data-isselectable="true"]:active',_current:'&[aria-current="true"],&[aria-checked="true"]',_isSelectable:'&[data-isselectable="true"]',_disabled:'&:disabled,&[aria-disabled="true"]'},jO={display:"flex",alignItems:"center"},OO=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.is,a=void 0===r?"div":r,o=t.children,i=t.className,g=t.appearance,s=void 0===g?"default":g,c=t.disabled,l=t.secondaryText,u=t.intent,f=void 0===u?"none":u,I=t.icon,C=t.onSelect,d=void 0===C?LO:C,A=Mx(t,DO),h=(0,e.useCallback)((function(e){c||d(e)}),[c,d]),p=zO(t),m=p.onKeyDown,b=p.tabIndex,y=NN("MenuItem",{appearance:s},UO,jO),v="none"===f?"default":f;c&&(v="muted");var Z=c?"muted":f,G=(0,e.useMemo)((function(){return c?{backgroundColor:"tint1",cursor:"not-allowed",disabled:!0,onClick:null,onKeyPress:null,tabIndex:-1,"aria-disabled":"true","data-isselectable":"false"}:{}}),[c]);return e.createElement(RH,Ex({is:a,role:"menuitem",className:i,onClick:h,"data-isselectable":!c||void 0,"aria-disabled":c,ref:n,height:I?40:32},y,A,G,{tabIndex:b,onKeyDown:m}),e.createElement(TN,{icon:I,color:v,marginLeft:16,marginRight:-4,size:16,flexShrink:0}),e.createElement(uK,{color:Z,marginLeft:16,marginRight:16,flex:1},o),l&&e.createElement(uK,{marginRight:16,color:"muted"},l))})));OO.propTypes={is:Ux().propTypes.is,className:Dx().string,onSelect:Dx().func,icon:Dx().oneOfType([Dx().elementType,Dx().element]),children:Dx().node,secondaryText:Dx().node,appearance:Dx().string,intent:Dx().string,disabled:Dx().bool};var QO=OO,PO=["M14 3c-.28 0-.53.11-.71.29L6 10.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42l4 4c.18.18.43.29.71.29s.53-.11.71-.29l8-8A1.003 1.003 0 0014 3z"],_O=["M17 4c-.28 0-.53.11-.71.29L7 13.59 3.71 10.3A.965.965 0 003 10a1.003 1.003 0 00-.71 1.71l4 4c.18.18.43.29.71.29s.53-.11.71-.29l10-10A1.003 1.003 0 0017 4z"],qO=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:PO,svgPaths20:_O,ref:n,name:"tick"},t))})));var $O=["className","children","intent","appearance","tabIndex","onClick","onKeyDown","onSelect","onDeselect","isHighlighted","isSelectable","isSelected"],eQ=["height"];function tQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tQ(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rQ=function(){},aQ={_hover:'&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):not(:focus):not(:active):hover',_focus:'&[data-isselectable="true"]:not([aria-checked="true"]):not([aria-current="true"]):focus,&[aria-selected="true"]',_active:'&[aria-current="true"],&[data-isselectable="true"]:active',_current:'&[aria-current="true"],&[aria-checked="true"]',_lastOfType:"&:last-of-type",_isSelectable:'&[data-isselectable="true"]'},oQ={display:"flex"},iQ=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.className,a=t.children,o=t.intent,i=void 0===o?"none":o,g=t.appearance,s=void 0===g?"default":g,c=t.tabIndex,l=void 0===c?-1:c,u=t.onClick,f=t.onKeyDown,I=void 0===f?rQ:f,C=t.onSelect,d=void 0===C?rQ:C,A=t.onDeselect,h=void 0===A?rQ:A,p=t.isHighlighted,m=t.isSelectable,b=t.isSelected,y=Mx(t,$O),v=(0,e.useRef)(),Z=jL(v,n),G=MO(u),B=MO(I),k=MO(h),S=MO(d),w=(0,e.useCallback)((function(e){uz(G.current,e),m&&uz(b?k.current:S.current)}),[b,m]),W=zO({onKeyDown:(0,e.useCallback)((function(e){if(uz(B.current,e),m)if("ArrowUp"===e.key||"ArrowDown"===e.key)try{!function(e,t){var n,r=Array.from(t.parentElement.children),a=r.indexOf(t);"ArrowUp"===e&&a-1>=0?n=r[a-1]:"ArrowDown"===e&&a+1<r.length&&(n=r[a+1]),n&&n.hasAttribute("tabindex")&&n.focus()}(e.key,v.current)}catch(HW){}else"Escape"===e.key&&v.current&&v.current instanceof Node&&v.current.blur()}),[m]),tabIndex:l}),R=NN("TableRow",{appearance:s,intent:i},aQ,oQ),V=R.height,X=Mx(R,eQ),J=y.height||V;return e.createElement(RH,Ex({ref:Z,className:r,"aria-selected":p,"aria-current":b,"data-isselectable":m,tabIndex:m?W.tabIndex:void 0,onClick:w,onKeyDown:W.onKeyDown,borderBottom:"muted",height:J},X,y),a)})));iQ.propTypes=nQ(nQ({},RH.propTypes),{},{height:Dx().oneOfType([Dx().number,Dx().string]),onSelect:Dx().func,onDeselect:Dx().func,isSelectable:Dx().bool,isSelected:Dx().bool,isHighlighted:Dx().bool,intent:Dx().string,appearance:Dx().string,className:Dx().string});var gQ=function(){},sQ={display:"flex",alignItems:"center"},cQ=(0,e.memo)((function(t){var n=t.id,r=t.children,a=t.appearance,o=void 0===a?"default":a,i=t.onSelect,g=void 0===i?gQ:i,s=t.secondaryText,c=t.isSelected,l=void 0!==c&&c,u=(0,e.useCallback)((function(e){return g(e)}),[g]),f=zO(),I=f.onKeyDown,C=f.tabIndex,d=NN("MenuItem",{appearance:o},aQ,sQ),A=l?{color:"selected",fontWeight:500,marginLeft:16}:{marginLeft:44};return e.createElement(RH,Ex({id:n,role:"menuitemradio",tabIndex:C,onClick:u,onKeyDown:I,"data-isselectable":"true","aria-checked":l,height:40},d),l&&e.createElement(qO,{"aria-hidden":!0,color:"selected",marginLeft:16,marginRight:-4,size:16,flexShrink:0}),e.createElement(uK,Ex({},A,{marginRight:16,flex:1}),r),s&&e.createElement(uK,{marginRight:16,color:"muted"},s))}));cQ.propTypes={id:Dx().string,onSelect:Dx().func,isSelected:Dx().bool,children:Dx().node,secondaryText:Dx().node,appearance:Dx().string};var lQ=cQ,uQ=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=t.onChange,a=t.options,o=t.selected,i=t.title;return e.createElement(RH,{ref:n,paddingY:8},i&&e.createElement(HH,{size:100,marginLeft:44,marginRight:16,marginY:8},i),e.createElement(RH,null,a.map((function(t){return e.createElement(lQ,{key:t.value,isSelected:t.value===o,onSelect:function(){return r(t.value)}},t.label)}))))})));uQ.propTypes={title:Dx().node,selected:Dx().any,onChange:Dx().func,options:Dx().array};var fQ=uQ,IQ=(0,e.memo)((function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(),a=(0,e.useRef)(),o=(0,e.useRef)();(0,e.useEffect)((function(){var e=n.current;o.current=We(e.querySelectorAll('[role="menuitemradio"]:not([disabled]), [role="menuitem"]:not([disabled])')),r.current=o.current[0],a.current=o.current[o.current.length-1];var t=function(e,t){var n=t===r.current;(function(e){var r=o.current.indexOf(e);return n?r<o.current.length-1?o.current[r+1]:t:r-1>-1?o.current[r-1]:t})(e).focus()};function i(e){var n=e.target,i=o.current&&o.current.find((function(e){return e===n}));i&&("ArrowDown"===e.key&&(e.preventDefault(),t(i,r.current)),"ArrowUp"===e.key&&(e.preventDefault(),t(i,a.current)),"Home"===e.key&&(e.preventDefault(),r.current.focus()),"End"===e.key&&(e.preventDefault(),a.current.focus()))}return e.addEventListener("keydown",i),function(){e.removeEventListener("keydown",i)}}),[n]);var i=t.children;return e.createElement(RH,{is:"nav",ref:n,role:"menu",outline:"none"},i||e.createElement(TO,null,e.createElement(QO,{disabled:!0},"No items...")))}));IQ.Item=QO,IQ.Divider=KO,IQ.Group=TO,IQ.Divider=KO,IQ.Group=TO,IQ.Option=lQ,IQ.OptionsGroup=fQ,IQ.propTypes={children:Dx().node};var CQ,dQ=IQ,AQ=["M13.69 13.98c-.05-.24-.14-.5-.25-.76-.36-.86-1.12-1.33-2.69-2-.14-.06-.59-.25-.6-.25-.21-.09-.36-.15-.5-.22.02-.1.02-.2.03-.31 0-.04.01-.08.01-.13-.07-.06-.13-.12-.19-.19.22-.32.4-.67.54-1.05.02-.06.02-.06.03-.1.29-.23.48-.57.59-.96.16-.33.25-.73.21-1.16-.03-.4-.16-.76-.37-1.03-.02-.53-.07-1.13-.15-1.54-.01-.06-.02-.12-.03-.19.23-.06.48-.09.72-.09.49 0 1.05.16 1.44.46.38.29.67.7.8 1.17.03.1.05.21.07.31.07.37.11.94.11 1.33v.05c.14.06.27.21.29.51.02.25-.07.45-.13.54-.05.21-.16.44-.38.48-.02.1-.05.2-.09.3 0 .01-.01.03-.01.03-.17.44-.43.83-.75 1.11v.14c.03.35-.09.59.83 1 .93.41 2.32.84 2.6 1.5.29.66.17 1.04.17 1.04h-2.3zm-1.17-.38c.37.86.22 1.36.22 1.36H.06s-.14-.5.22-1.36 2.13-1.43 3.31-1.96c1.17-.54 1.05-.86 1.09-1.3 0-.05.01-.11.01-.17-.41-.35-.75-.86-.97-1.45v-.01s-.01-.01-.01-.02c-.04-.12-.09-.26-.12-.39-.28-.05-.44-.36-.5-.64-.06-.12-.19-.39-.16-.71.04-.41.21-.6.39-.68v-.06c0-.51.05-1.26.14-1.74.02-.13.05-.27.09-.4.17-.6.54-1.13 1.02-1.51.5-.39 1.21-.6 1.84-.6s1.34.21 1.84.6c.48.38.85.91 1.02 1.52.04.13.07.27.09.4.09.48.14 1.22.14 1.73v.07c.18.08.34.27.37.67.03.32-.09.59-.16.71-.06.28-.21.58-.48.63-.03.13-.07.26-.12.39 0 .01-.01.04-.01.04-.22.58-.55 1.08-.95 1.45v.18c.04.45-.12.77 1.06 1.3 1.18.53 2.95 1.09 3.31 1.95z"],hQ=["M16.94 17a4.92 4.92 0 00-.33-1.06c-.45-.97-1.37-1.52-3.24-2.3-.17-.07-.76-.31-.77-.32-.1-.04-.2-.08-.28-.12.05-.14.04-.29.06-.45 0-.05.01-.11.01-.16-.25-.21-.47-.48-.65-.79.22-.34.41-.71.56-1.12l.04-.11c-.01.02-.01.02-.02.08l.06-.15c.36-.26.6-.67.72-1.13.18-.37.29-.82.25-1.3-.05-.5-.21-.92-.47-1.22-.02-.53-.06-1.11-.12-1.59.38-.17.83-.26 1.24-.26.59 0 1.26.19 1.73.55.46.35.8.85.97 1.4.04.13.07.25.08.38.08.45.13 1.14.13 1.61v.07c.16.07.31.24.35.62.02.29-.09.55-.15.65-.05.26-.2.53-.46.59-.03.12-.07.25-.11.36-.01.01-.01.04-.01.04-.2.53-.51 1-.89 1.34 0 .06 0 .12.01.17.04.41-.11.71 1 1.19 1.1.5 2.77 1.01 3.13 1.79.34.79.2 1.25.2 1.25h-3.04zm-5.42-3.06c1.47.66 3.7 1.35 4.18 2.39.45 1.05.27 1.67.27 1.67H.04s-.19-.62.27-1.67c.46-1.05 2.68-1.75 4.16-2.4 1.48-.65 1.33-1.05 1.38-1.59 0-.07.01-.14.01-.21-.52-.45-.95-1.08-1.22-1.8l-.01-.01c0-.01-.01-.02-.01-.03-.07-.15-.12-.32-.16-.49-.34-.06-.54-.43-.62-.78-.08-.14-.24-.48-.2-.87.05-.51.26-.74.49-.83v-.08c0-.64.05-1.55.17-2.15a3.648 3.648 0 011.4-2.36C6.32 2.25 7.21 2 8 2s1.68.25 2.31.73a3.63 3.63 0 011.4 2.36c.11.6.17 1.52.17 2.15v.09c.22.09.42.32.47.82.03.39-.12.73-.2.87-.07.34-.27.71-.61.78-.04.16-.09.33-.15.48-.01.01-.02.05-.02.05-.27.71-.68 1.33-1.19 1.78 0 .08 0 .16.01.23.05.55-.15.95 1.33 1.6z"],pQ=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:AQ,svgPaths20:hQ,ref:n,name:"people"},t))}))),mQ=["M14 4.01h-1v-1c0-.55-.45-1-1-1s-1 .45-1 1v1h-1c-.55 0-1 .45-1 1s.45 1 1 1h1v1c0 .55.45 1 1 1s1-.45 1-1v-1h1c.55 0 1-.45 1-1 0-.56-.45-1-1-1zm-13 2h6c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1zm8 6H1c-.55 0-1 .45-1 1s.45 1 1 1h8c.55 0 1-.45 1-1 0-.56-.45-1-1-1zm0-4H1c-.55 0-1 .45-1 1s.45 1 1 1h8c.55 0 1-.45 1-1 0-.56-.45-1-1-1z"],bQ=["M13 12H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zm0 4H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zM1 6h9c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1zm12 2H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zm6-4h-2V2c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1z"],yQ=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:mQ,svgPaths20:bQ,ref:n,name:"add-to-artifact"},t))}))),vQ=["M13 7H9V3c0-.55-.45-1-1-1s-1 .45-1 1v4H3c-.55 0-1 .45-1 1s.45 1 1 1h4v4c0 .55.45 1 1 1s1-.45 1-1V9h4c.55 0 1-.45 1-1s-.45-1-1-1z"],ZQ=["M16 9h-5V4c0-.55-.45-1-1-1s-1 .45-1 1v5H4c-.55 0-1 .45-1 1s.45 1 1 1h5v5c0 .55.45 1 1 1s1-.45 1-1v-5h5c.55 0 1-.45 1-1s-.45-1-1-1z"],GQ=(0,e.memo)((0,e.forwardRef)((function(t,n){return e.createElement(mH,Ex({svgPaths16:vQ,svgPaths20:ZQ,ref:n,name:"plus"},t))})));function BQ(){var t=ke().t,n=Ge((0,e.useState)(),2),r=n[0],a=n[1],o=$F().push,i=lO(),g=i.wallet,s=i.save,c=xF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&delete g.contacts[r],e.next=3,s(g);case 3:case"end":return e.stop()}}),e)}))),[r,s,g])),l=c.onSubmit,u=c.loading,f=yD(Object.keys(g.contacts).map((function(e){return{address:e,info:g.contacts[e]}})),(function(e){return[e.info.lastname,e.info.firstname]})),I=dD((0,YF.jsx)(Qj,{})),C=(0,e.useCallback)((function(e){return function(){return o((0,YF.jsx)(Lj,{contact:e}))}}),[o]);return(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(cH,{appearance:"minimal",iconAfter:(0,YF.jsx)(GQ,{}),isActive:!0,onClick:I,children:t("contacts.new")}),(0,YF.jsx)(vD,{groups:f,children:function(e){return(0,YF.jsx)(FK.JX,{xs:12,children:(0,YF.jsx)(RH,{marginBottom:bK(2),onMouseEnter:function(){return a(e.address)},onMouseLeave:function(){return a(void 0)},cursor:"pointer",onClick:C(e.info),children:(0,YF.jsx)(kQ,{contact:e.info,children:e.address===r&&(0,YF.jsx)(CH,{icon:(0,YF.jsx)(kK,{}),appearance:"minimal",intent:"danger",borderRadius:"50%",isLoading:u,onClick:function(e){e.stopPropagation(),l()}})})})})}})]})}function kQ(e){var t=e.contact,n=e.children;return(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(mK,{size:45,name:[t.firstname,t.lastname].join(" ")})}),(0,YF.jsxs)(FK.JX,{xs:!0,children:[(0,YF.jsxs)(HH,{size:600,fontWeight:400,children:[t.firstname,(0,YF.jsx)(HH,{marginLeft:bK(1),size:600,fontWeight:800,is:"span",children:t.lastname})]}),(0,YF.jsx)(HH,{size:100,children:t.company})]}),(0,YF.jsx)(FK.JX,{children:n})]})}function SQ(){var t=ke().t,n=Ge(kU(),1)[0],r=$F().push,a=KF().manager,o=lO().wallet,i=OU().medicines,g=Ge((0,e.useState)(),2),s=g[0],c=g[1],l=JF((0,e.useCallback)(hn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=17;break}if(e.t0=vE(s),!e.t0){e.next=6;break}return e.next=5,a.isEntity(n.Manager,s);case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=12;break}return e.next=9,a.getEntityData(n.Manager,s);case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=void 0;case 13:return e.t2=e.t1,e.t3=i.filter((function(e){return[e.name,e.address,e.code,e.symbol].join(" ").toLowerCase().includes(s.toLowerCase())})),e.t4=Object.values(o.contacts).filter((function(e){return[e.address,e.company,e.email,e.firstname,e.lastname].join(" ").toLowerCase().includes(s.toLowerCase())})),e.abrupt("return",{entity:e.t2,medicines:e.t3,contacts:e.t4});case 17:case"end":return e.stop()}}),e)}))),[n.Manager,a,i,s,o.contacts])),u=l.data,f=l.loading;return(0,YF.jsxs)(AD,{children:[(0,YF.jsx)(gj,{autoFocus:!0,disabled:f,value:s,onChange:function(e){return c(e.target.value)},placeholder:t("cards.search.placeholder"),onResult:function(e){var t=TF.fromBinary(my(e));switch(t.data.case){case"entity":a.getEntityData(n.Manager,t.data.value).then((function(e){return r((0,YF.jsx)(VU,{entity:e}))}));break;case"request":r((0,YF.jsx)(Oj,{request:t.data.value}))}}}),(0,YF.jsxs)(RH,{marginX:bK(6),children:[!(null===u||void 0===u||!u.entity)&&(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(HH,{marginTop:bK(12),size:100,children:t("cards.search.entities")}),(0,YF.jsx)(RH,{marginY:bK(3),cursor:"pointer",onClick:function(){return r((0,YF.jsx)(VU,{entity:u.entity}))},children:(0,YF.jsx)(JU,{entity:u.entity})})]}),!(null===u||void 0===u||!u.medicines.length)&&(0,YF.jsx)(HH,{marginTop:bK(12),size:100,children:t("cards.search.medicines")}),null===u||void 0===u?void 0:u.medicines.map((function(e){return(0,YF.jsx)(RH,{marginY:bK(3),cursor:"pointer",onClick:function(){return r((0,YF.jsx)(Xj,{address:e.address}))},children:(0,YF.jsx)(Tj,{info:e})})})),!(null===u||void 0===u||!u.contacts.length)&&(0,YF.jsx)(HH,{marginTop:bK(12),size:100,children:t("cards.search.contacts")}),null===u||void 0===u?void 0:u.contacts.map((function(e){return(0,YF.jsx)(RH,{marginY:bK(3),cursor:"pointer",onClick:function(){return r((0,YF.jsx)(Lj,{contact:e}))},children:(0,YF.jsx)(kQ,{contact:e})})}))]}),(0,YF.jsx)(_F.Divider,{children:bK(12)})]})}function wQ(e){var t=e.children,n=ke().t,r=XF(),a=r.isMobile,o=r.isLaptop,i=lO().wallet,g=dD((0,YF.jsx)(Uj,{contact:i.contact})),s=dD((0,YF.jsx)(SQ,{}));return o?(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(RH,{paddingX:bK(12),paddingY:bK(3),background:"colors.white",width:"100%",children:(0,YF.jsxs)(FK.X2,{middle:"xs",between:"xs",children:[(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(FK.X2,{start:"xs",children:(0,YF.jsx)(tn,{to:"/",children:(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(mK,{src:"/logo.jpg",size:40,name:"Medichain"})}),(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(HH,{marginLeft:bK(2),size:700,fontWeight:800,opacity:.6,children:"Medichain"})})]})})})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(FK.X2,{center:"xs",children:(0,YF.jsx)(RH,{paddingX:bK(7),paddingY:bK(2),width:HK(45),borderRadius:bK(6),background:"colors.gray90",children:(0,YF.jsxs)(FK.X2,{middle:"xs",start:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(hO,{size:13,opacity:.3,cursor:"pointer",onClick:s})}),(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(HH,{paddingX:bK(3),size:200,opacity:.5,cursor:"pointer",onClick:s,children:n("navigation.search")})})]})})})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsxs)(FK.X2,{end:"xs",children:[(0,YF.jsx)(RQ,{}),(0,YF.jsx)(cH,{isActive:!0,appearance:"minimal",borderRadius:"20px",iconBefore:(0,YF.jsx)(bO,{}),iconAfter:(0,YF.jsx)(ZO,{}),onClick:g,children:n("navigation.account")})]})})]})}),(0,YF.jsx)(RH,{paddingX:bK(5),children:(0,YF.jsxs)(FK.X2,{children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsxs)(RH,{paddingX:bK(5),paddingY:bK(8),minWidth:HK(35),children:[(0,YF.jsx)(WQ,{icon:(0,YF.jsx)(OK,{color:"inherit"}),text:n("navigation.medicines"),link:"/medicines"}),(0,YF.jsx)(WQ,{icon:(0,YF.jsx)(QK,{color:"inherit"}),text:n("navigation.entities"),link:"/entities"}),(0,YF.jsx)(WQ,{icon:(0,YF.jsx)(YU,{color:"inherit"}),text:n("navigation.contacts"),link:"/contacts"})]})}),(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(RH,{paddingX:bK(8),paddingY:bK(8),children:t})})]})})]}):a?(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(RH,{paddingX:bK(6),paddingY:bK(3),background:"colors.white",width:"100%",children:(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(tn,{to:"/",children:(0,YF.jsx)(mK,{src:"/logo.jpg",size:40,name:"Medichain",background:"transparent"})})}),(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(CH,{appearance:"minimal",borderRadius:"50%",icon:(0,YF.jsx)(hO,{}),onClick:s})}),(0,YF.jsxs)(FK.JX,{children:[(0,YF.jsx)(RQ,{}),(0,YF.jsx)(cH,{isActive:!0,appearance:"minimal",borderRadius:"20px",iconBefore:(0,YF.jsx)(bO,{}),iconAfter:(0,YF.jsx)(ZO,{}),onClick:g,children:n("navigation.account")})]})]})}),(0,YF.jsx)(RH,{marginX:bK(5),marginTop:bK(5),marginBottom:bK(25),children:t}),(0,YF.jsx)(VQ,{bottom:0,paddingBottom:30,paddingTop:5,children:(0,YF.jsxs)(FK.X2,{center:"xs",children:[(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(WQ,{icon:(0,YF.jsx)(QK,{size:24,color:"inherit"}),text:n("navigation.entities"),link:"/entities"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(WQ,{icon:(0,YF.jsx)(OK,{size:24,color:"inherit"}),text:n("navigation.medicines"),link:"/medicines"})}),(0,YF.jsx)(FK.JX,{xs:4,children:(0,YF.jsx)(WQ,{icon:(0,YF.jsx)(YU,{size:24,color:"inherit"}),text:n("navigation.contacts"),link:"/contacts"})})]})})]}):(0,YF.jsx)(YF.Fragment,{})}function WQ(t){var n=t.icon,r=t.text,a=t.link,o=t.count,i=kt(),g=Gt().pathname,s=XF(),c=s.isLaptop,l=s.isMobile,u=(0,e.useMemo)((function(){return g.includes(a)}),[g,a]);return c?(0,YF.jsx)(RH,{paddingX:bK(5),paddingY:bK(6),borderRadius:bK(2),cursor:"pointer",background:u?"colors.blue25":"colors.white",color:u?"#1F3D99":"#696f8c",onClick:function(){return i(a)},children:(0,YF.jsxs)(FK.X2,{middle:"xs",children:[(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(RH,{marginTop:bK(1),children:n})}),(0,YF.jsx)(FK.JX,{xs:!0,children:(0,YF.jsx)(HH,{marginLeft:bK(2),fontWeight:700,color:"inherit",children:r})}),!!o&&(0,YF.jsx)(FK.JX,{children:(0,YF.jsx)(BO,{marginBottom:2,color:"blue",children:o})})]})}):l?(0,YF.jsxs)(RH,{textAlign:"center",onClick:function(){return i(a)},color:u?"#3366FF":"#101840",children:[(0,YF.jsx)(RH,{children:n}),(0,YF.jsx)(HH,{fontSize:10,color:"inherit",children:r})]}):(0,YF.jsx)(YF.Fragment,{})}function RQ(){var t=ke().t,n=KF().manager,r=lO().wallet,a=Ge(kU(),1)[0],o=JF((0,e.useCallback)(hn(dn().mark((function e(){var t,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.rolesOf(a.Manager,r.address)]);case 2:return t=e.sent,o=Ge(t,1),i=o[0],e.abrupt("return",{roles:i,canIssueMedicine:TU(i,[gy.SUPER_ADMIN]),canRegisterEntity:TU(i,[gy.SUPER_ADMIN])});case 6:case"end":return e.stop()}}),e)}))),[a.Manager,n,r.address])),i=o.data,g=o.loading,s=dD((0,YF.jsx)(Qj,{})),c=dD((0,YF.jsx)(wU,{})),l=dD((0,YF.jsx)(Vj,{}));return(0,YF.jsx)(HO,{position:sz.BOTTOM,content:(0,YF.jsxs)(dQ,{children:[(0,YF.jsx)(dQ.Group,{title:t("navigation.contacts"),children:(0,YF.jsx)(dQ.Item,{icon:pQ,onClick:s,children:t("navigation.add",{element:t("navigation.contact")})})}),(null===i||void 0===i?void 0:i.canIssueMedicine)&&(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(dQ.Divider,{}),(0,YF.jsx)(dQ.Group,{title:t("navigation.medicines"),children:(0,YF.jsx)(dQ.Item,{icon:yj,onClick:l,children:t("navigation.add",{element:t("navigation.medicine")})})})]}),(null===i||void 0===i?void 0:i.canRegisterEntity)&&(0,YF.jsxs)(YF.Fragment,{children:[(0,YF.jsx)(dQ.Divider,{}),(0,YF.jsx)(dQ.Group,{title:t("navigation.entities"),children:(0,YF.jsx)(dQ.Item,{icon:yQ,onClick:c,children:t("navigation.add",{element:t("navigation.entity")})})})]})]}),children:(0,YF.jsx)(CH,{appearance:"minimal",borderRadius:"50%",marginX:bK(2),icon:(0,YF.jsx)(ZK,{}),isLoading:g})})}var VQ=oz(RH)(CQ||(CQ=ZE(["\n  position: fixed;\n  width: 100%;\n\n  background: rgba(255, 255, 255, 0.4);\n  backdrop-filter: blur(30px);\n  -webkit-backdrop-filter: blur(30px);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n"]))),XQ=function(){return(0,YF.jsx)(SN,{value:CO,children:(0,YF.jsx)(yE,{children:(0,YF.jsx)(SU,{children:(0,YF.jsx)(HF,{children:(0,YF.jsx)(EF,{children:(0,YF.jsx)(uO,{children:(0,YF.jsx)(QU,{children:(0,YF.jsx)(tK,{children:(0,YF.jsx)(CD,{children:(0,YF.jsx)(wQ,{children:(0,YF.jsx)(Tt,{})})})})})})})})})})})};ce.use(ye).init({resources:{es:{translation:we}},lng:"es",fallbackLng:"es",interpolation:{escapeValue:!1}});var JQ=function(){return(0,YF.jsx)(qt,{children:(0,YF.jsx)(Dt,{children:(0,YF.jsxs)(Mt,{element:(0,YF.jsx)(XQ,{}),children:[(0,YF.jsx)(Mt,{index:!0,element:(0,YF.jsx)(Et,{to:"medicines"})}),(0,YF.jsx)(Mt,{path:"medicines",element:(0,YF.jsx)(Ej,{})}),(0,YF.jsx)(Mt,{path:"entities",element:(0,YF.jsx)(XU,{})}),(0,YF.jsx)(Mt,{path:"contacts",element:(0,YF.jsx)(BQ,{})})]})})})};r.createRoot(document.getElementById("root")).render((0,YF.jsx)(e.StrictMode,{children:(0,YF.jsx)(JQ,{})})),a()}()}();
//# sourceMappingURL=main.a0b4786e.js.map